<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SightEdit - Visual Markdown Editor</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #f8f9fa;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .header {
      background: white;
      border-bottom: 1px solid #dee2e6;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .logo {
      display: flex;
      align-items: center;
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }

    .logo-icon {
      margin-right: 8px;
      font-size: 20px;
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .btn {
      padding: 6px 12px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      background: white;
      color: #333;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }

    .btn:hover {
      background: #f8f9fa;
      border-color: #adb5bd;
    }

    .btn.primary {
      background: #007bff;
      color: white;
      border-color: #007bff;
    }

    .btn.primary:hover {
      background: #0056b3;
      border-color: #0056b3;
    }

    .main-container {
      flex: 1;
      display: flex;
      min-height: 0;
    }

    .toolbar {
      background: white;
      border-bottom: 1px solid #dee2e6;
      padding: 8px 16px;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .toolbar-group {
      display: flex;
      align-items: center;
      gap: 4px;
      padding-right: 12px;
      border-right: 1px solid #dee2e6;
    }

    .toolbar-group:last-child {
      border-right: none;
    }

    .toolbar-btn {
      padding: 6px 8px;
      border: 1px solid transparent;
      border-radius: 3px;
      background: transparent;
      color: #495057;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }

    .toolbar-btn:hover {
      background: #f8f9fa;
      border-color: #dee2e6;
    }

    .toolbar-btn.active {
      background: #e3f2fd;
      color: #1976d2;
      border-color: #bbdefb;
    }

    .editor-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: white;
      margin: 20px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .editor-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      min-height: 0;
    }

    .ProseMirror {
      outline: none;
      line-height: 1.6;
      font-size: 16px;
      color: #333;
    }

    .ProseMirror h1,
    .ProseMirror h2,
    .ProseMirror h3,
    .ProseMirror h4,
    .ProseMirror h5,
    .ProseMirror h6 {
      margin: 1.5em 0 0.5em 0;
      font-weight: 600;
      line-height: 1.3;
    }

    .ProseMirror h1 { font-size: 2em; }
    .ProseMirror h2 { font-size: 1.5em; }
    .ProseMirror h3 { font-size: 1.3em; }
    .ProseMirror h4 { font-size: 1.1em; }
    .ProseMirror h5 { font-size: 1em; }
    .ProseMirror h6 { font-size: 0.9em; }

    .ProseMirror p {
      margin: 0.5em 0;
    }

    .ProseMirror ul,
    .ProseMirror ol {
      padding-left: 1.5em;
      margin: 0.5em 0;
    }

    .ProseMirror blockquote {
      border-left: 4px solid #dee2e6;
      padding-left: 1em;
      margin: 1em 0;
      color: #6c757d;
      font-style: italic;
    }

    .ProseMirror code {
      background: #f8f9fa;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
      font-size: 0.9em;
    }

    .ProseMirror pre {
      background: #282c34;
      color: #abb2bf;
      border: 1px solid #444;
      border-radius: 6px;
      padding: 1.2em;
      margin: 1.5em 0;
      overflow-x: auto;
      font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', monospace;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .ProseMirror pre code {
      background: none;
      padding: 0;
      color: inherit;
      font-size: inherit;
      border-radius: 0;
    }

    /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å†…ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆé¢¨ */
    .ProseMirror pre .keyword {
      color: #c678dd;
      font-weight: bold;
    }

    .ProseMirror pre .string {
      color: #98c379;
    }

    .ProseMirror pre .comment {
      color: #5c6370;
      font-style: italic;
    }

    .ProseMirror pre .number {
      color: #d19a66;
    }

    .ProseMirror pre .function {
      color: #61afef;
    }

    /* ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã®æ”¹è‰¯ */
    .ProseMirror code {
      background: #f1f3f4;
      color: #e74c3c;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', monospace;
      font-size: 0.9em;
      border: 1px solid #e1e4e8;
      font-weight: 600;
    }

    /* ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ */
    .ProseMirror .task-item {
      display: flex;
      align-items: center;
      margin: 0.5em 0;
    }

    .ProseMirror .task-item input[type="checkbox"] {
      margin-right: 0.5em;
      transform: scale(1.2);
    }

    /* ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ”¹è‰¯ */
    .ProseMirror table,
    .ProseMirror .markdown-table {
      border-collapse: collapse;
      width: 100%;
      margin: 1.5em 0;
      border: 2px solid #dee2e6;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .ProseMirror table th,
    .ProseMirror .markdown-table th {
      background: #f8f9fa;
      font-weight: 600;
      text-align: left;
      padding: 12px;
      border-bottom: 2px solid #dee2e6;
      border-right: 1px solid #dee2e6;
    }

    .ProseMirror table td,
    .ProseMirror .markdown-table td {
      padding: 10px 12px;
      border-bottom: 1px solid #dee2e6;
      border-right: 1px solid #dee2e6;
    }

    .ProseMirror table th:last-child,
    .ProseMirror table td:last-child {
      border-right: none;
    }

    .ProseMirror table tr:hover,
    .ProseMirror .markdown-table tr:hover {
      background: #f8f9fa;
    }

    /* å¼•ç”¨ã®æ”¹è‰¯ */
    .ProseMirror blockquote {
      border-left: 4px solid #007bff;
      background: #f8f9fa;
      padding: 1em 1.5em;
      margin: 1.5em 0;
      color: #6c757d;
      font-style: italic;
      border-radius: 0 4px 4px 0;
    }

    .ProseMirror table {
      border-collapse: collapse;
      width: 100%;
      margin: 1em 0;
    }

    .ProseMirror table td,
    .ProseMirror table th {
      border: 1px solid #dee2e6;
      padding: 0.5em;
      text-align: left;
    }

    .ProseMirror table th {
      background: #f8f9fa;
      font-weight: 600;
    }

    /* WYSIWYG Content styles - contentEditableç”¨ */
    /* WYSIWYG ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .wysiwyg-editor-content {
      outline: none;
      min-height: 400px;
      padding: 20px;
      line-height: 1.6;
      font-size: 16px;
      color: #333;
      white-space: pre-wrap;
    }

    #wysiwyg-content {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
    }

    /* ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ */
    #wysiwyg-content code {
      background: #f1f3f4;
      color: #e74c3c;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
      font-size: 0.9em;
      border: 1px solid #e1e4e8;
    }

    /* å¼•ç”¨ãƒ–ãƒ­ãƒƒã‚¯ */
    #wysiwyg-content blockquote {
      border-left: 4px solid #007bff;
      background: #f8f9fa;
      padding: 1em 1.5em;
      margin: 1.5em 0;
      border-radius: 0 4px 4px 0;
      color: #495057;
      font-style: italic;
    }

    /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ */
    #wysiwyg-content pre {
      background: #282c34;
      color: #abb2bf;
      border: 1px solid #444;
      border-radius: 6px;
      padding: 1.2em;
      margin: 1.5em 0;
      overflow-x: auto;
      line-height: 1.6;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    #wysiwyg-content pre code {
      background: none;
      padding: 0;
      color: inherit;
      border: none;
      font-size: inherit;
    }

    /* ãƒ†ãƒ¼ãƒ–ãƒ« */
    #wysiwyg-content table {
      border-collapse: collapse;
      width: 100%;
      margin: 1.5em 0;
      border: 1px solid #dee2e6;
      border-radius: 6px;
      overflow: hidden;
    }

    #wysiwyg-content table th,
    #wysiwyg-content table td {
      border: 1px solid #dee2e6;
      padding: 10px 12px;
      text-align: left;
      vertical-align: top;
    }

    #wysiwyg-content table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #495057;
    }

    #wysiwyg-content table tr:hover {
      background: #f8f9fa;
    }

    /* ã‚»ãƒ«é…ç½® */
    #wysiwyg-content table td.text-left { text-align: left; }
    #wysiwyg-content table td.text-center { text-align: center; }
    #wysiwyg-content table td.text-right { text-align: right; }

    /* ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ */
    #wysiwyg-content .task-item {
      display: flex;
      align-items: flex-start;
      margin: 0.5em 0;
      padding: 0.2em 0;
    }

    #wysiwyg-content .task-item input[type="checkbox"] {
      margin-right: 0.5em;
      margin-top: 0.1em;
      cursor: pointer;
    }

    #wysiwyg-content .task-text {
      flex: 1;
      transition: text-decoration 0.2s ease;
    }

    /* ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚»ãƒ¬ã‚¯ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .toolbar-select {
      padding: 6px 8px;
      border: 1px solid #dee2e6;
      border-radius: 3px;
      font-size: 14px;
      cursor: pointer;
    }

    /* ã‚½ãƒ¼ã‚¹ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    #source-editor {
      display: none;
      width: 100%;
      height: 100%;
      padding: 20px;
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
      font-size: 14px;
      line-height: 1.6;
      border: none;
      outline: none;
      resize: none;
    }

    /* ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #dee2e6;
    }

    .modal-title {
      margin: 0;
      color: #333;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #6c757d;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .edit-dialog-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .edit-dialog-content {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      max-width: 400px;
      width: 90%;
    }

    .edit-dialog-title {
      margin: 0 0 15px 0;
      color: #333;
    }

    .edit-dialog-field {
      margin-bottom: 10px;
    }

    .edit-dialog-field:last-of-type {
      margin-bottom: 15px;
    }

    .edit-dialog-label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #555;
    }

    .edit-dialog-input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-sizing: border-box;
    }

    .edit-dialog-buttons {
      text-align: right;
    }

    .edit-dialog-btn {
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .edit-dialog-btn-cancel {
      margin-right: 10px;
      border: 1px solid #ddd;
      background: #f5f5f5;
      color: #333;
    }

    .edit-dialog-btn-ok {
      border: none;
      background: #007cba;
      color: white;
    }

    .status-bar {
      background: #f8f9fa;
      border-top: 1px solid #dee2e6;
      padding: 8px 16px;
      font-size: 12px;
      color: #6c757d;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .ai-loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }

    .ai-loading-content {
      background: white;
      padding: 30px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .ai-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #007bff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* AIè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« */
    .ai-settings-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10001;
    }

    .ai-settings-panel {
      background: white;
      border-radius: 8px;
      padding: 24px;
      width: 500px;
      max-width: 90vw;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .ai-settings-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #dee2e6;
    }

    .ai-settings-content label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
    }

    .ai-settings-content select,
    .ai-settings-content input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      font-size: 14px;
      margin-bottom: 15px;
    }

    .ai-settings-content small {
      color: #6c757d;
      font-size: 12px;
    }

    .ai-settings-content a {
      color: #007bff;
      text-decoration: none;
    }

    .ai-settings-content a:hover {
      text-decoration: underline;
    }

    .ai-settings-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #dee2e6;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #6c757d;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-btn:hover {
      color: #333;
    }

    /* AIçµæœãƒ¢ãƒ¼ãƒ€ãƒ« */
    .ai-result-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10002;
    }

    .ai-result-panel {
      background: white;
      border-radius: 8px;
      padding: 24px;
      width: 700px;
      max-width: 90vw;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .ai-result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #dee2e6;
    }

    .ai-result-content {
      flex: 1;
      overflow-y: auto;
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      padding: 16px;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .ai-result-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    .secondary {
      background: #6c757d;
      border-color: #6c757d;
    }

    .secondary:hover {
      background: #5a6268;
      border-color: #545b62;
    }

    /* Diagram Generation Modal */
    .diagram-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10002;
    }

    .diagram-modal-container {
      background: white;
      border-radius: 8px;
      width: 90%;
      max-width: 900px;
      max-height: 85vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .diagram-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 24px;
      border-bottom: 1px solid #dee2e6;
    }

    .diagram-modal-header h3 {
      margin: 0;
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }

    .diagram-modal-close {
      background: none;
      border: none;
      font-size: 28px;
      cursor: pointer;
      color: #6c757d;
      padding: 0;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 4px;
      transition: all 0.2s;
    }

    .diagram-modal-close:hover {
      background: #f8f9fa;
      color: #333;
    }

    .diagram-modal-body {
      flex: 1;
      overflow-y: auto;
      padding: 24px;
    }

    .diagram-tabs {
      display: flex;
      gap: 8px;
      margin-bottom: 20px;
      border-bottom: 2px solid #dee2e6;
    }

    .diagram-tab {
      padding: 10px 20px;
      background: none;
      border: none;
      border-bottom: 3px solid transparent;
      cursor: pointer;
      font-size: 14px;
      font-weight: 500;
      color: #6c757d;
      transition: all 0.2s;
      margin-bottom: -2px;
    }

    .diagram-tab:hover {
      color: #333;
      background: #f8f9fa;
    }

    .diagram-tab.active {
      color: #007bff;
      border-bottom-color: #007bff;
    }

    .diagram-tab-content {
      display: none;
    }

    .diagram-tab-content.active {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .diagram-input-section,
    .diagram-preview-section {
      display: flex;
      flex-direction: column;
    }

    .diagram-input-section label {
      font-weight: 500;
      margin-bottom: 8px;
      color: #333;
    }

    .diagram-code-input {
      width: 100%;
      padding: 12px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
      font-size: 13px;
      line-height: 1.5;
      resize: vertical;
      min-height: 200px;
    }

    .diagram-code-input:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }

    .diagram-code-input:disabled {
      background: #f8f9fa;
      cursor: not-allowed;
    }

    .diagram-help {
      margin-top: 8px;
      font-size: 12px;
    }

    .diagram-help a {
      color: #007bff;
      text-decoration: none;
    }

    .diagram-help a:hover {
      text-decoration: underline;
    }

    .diagram-description-input {
      margin-bottom: 20px;
      padding-bottom: 20px;
      border-bottom: 1px solid #dee2e6;
    }

    .diagram-description-field {
      width: 100%;
      padding: 12px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 14px;
      line-height: 1.5;
      resize: vertical;
      margin-bottom: 10px;
    }

    .diagram-description-field:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }

    .diagram-code-section {
      margin-top: 10px;
    }

    .diagram-code-section label {
      font-weight: 500;
      margin-bottom: 8px;
      color: #333;
      display: block;
    }

    .diagram-template-row {
      display: flex;
      align-items: center;
      gap: 10px;
      margin-bottom: 15px;
    }

    .diagram-template-row label {
      font-weight: 500;
      color: #333;
      white-space: nowrap;
      margin: 0;
    }

    .diagram-template-select {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      font-size: 14px;
      background: white;
      cursor: pointer;
    }

    .diagram-template-select:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
    }

    .diagram-preview-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }

    .diagram-preview-header span {
      font-weight: 500;
      color: #333;
    }

    .diagram-preview {
      border: 1px solid #dee2e6;
      border-radius: 4px;
      padding: 16px;
      min-height: 250px;
      background: #f8f9fa;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: auto;
    }

    .diagram-preview svg {
      max-width: 100%;
      height: auto;
    }

    .diagram-preview.empty::after {
      content: 'ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™';
      color: #6c757d;
      font-size: 14px;
    }

    .diagram-modal-footer {
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      padding: 20px 24px;
      border-top: 1px solid #dee2e6;
    }

    .diagram-btn {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .diagram-btn-primary {
      background: #007bff;
      color: white;
    }

    .diagram-btn-primary:hover:not(:disabled) {
      background: #0056b3;
    }

    .diagram-btn-primary:disabled {
      background: #6c757d;
      cursor: not-allowed;
      opacity: 0.5;
    }

    .diagram-btn-secondary {
      background: #6c757d;
      color: white;
    }

    .diagram-btn-secondary:hover {
      background: #5a6268;
    }

    @media (max-width: 768px) {
      .main-container {
        flex-direction: column;
      }

      .editor-container {
        margin: 10px;
      }

      .toolbar {
        flex-wrap: wrap;
      }

      .header-controls {
        flex-wrap: wrap;
        gap: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">
      <span class="logo-icon">ğŸ“</span>
      SightEdit
    </div>
    <div class="header-controls">
      <button class="btn" id="new-file-btn" title="æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«">ğŸ“„ æ–°è¦</button>
      <button class="btn" id="open-file-btn" title="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã">ğŸ“‚ é–‹ã</button>
      <button class="btn" id="save-file-btn" title="ä¿å­˜">ğŸ’¾ ä¿å­˜</button>
      <button class="btn" id="save-as-btn" title="åå‰ã‚’ä»˜ã‘ã¦ä¿å­˜">ğŸ’¾ åå‰ä»˜ãä¿å­˜</button>
      <button class="btn" id="export-btn">ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
      <button class="btn" id="settings-btn">âš™ï¸ è¨­å®š</button>
    </div>
  </div>

  <div class="main-container">
    <div class="editor-container">
      <div class="toolbar">
        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="bold" title="å¤ªå­—"><strong>B</strong></button>
          <button class="toolbar-btn" data-action="italic" title="æ–œä½“"><em>I</em></button>
          <button class="toolbar-btn" data-action="strike" title="å–ã‚Šæ¶ˆã—ç·š"><s>S</s></button>
          <button class="toolbar-btn" data-action="code" title="ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰">&lt;/&gt;</button>
        </div>

        <div class="toolbar-group">
          <select id="heading-select" class="toolbar-select">
            <option value="">è¦‹å‡ºã—</option>
            <option value="1">H1 - å¤§è¦‹å‡ºã—</option>
            <option value="2">H2 - ä¸­è¦‹å‡ºã—</option>
            <option value="3">H3 - å°è¦‹å‡ºã—</option>
            <option value="4">H4 - å°è¦‹å‡ºã—4</option>
            <option value="5">H5 - å°è¦‹å‡ºã—5</option>
            <option value="6">H6 - å°è¦‹å‡ºã—6</option>
            <option value="p">æ®µè½</option>
          </select>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="bulletList" title="ç®‡æ¡æ›¸ããƒªã‚¹ãƒˆ">â€¢ ãƒªã‚¹ãƒˆ</button>
          <button class="toolbar-btn" data-action="orderedList" title="ç•ªå·ä»˜ããƒªã‚¹ãƒˆ">1. ãƒªã‚¹ãƒˆ</button>
          <button class="toolbar-btn" data-action="blockquote" title="å¼•ç”¨">â å¼•ç”¨</button>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="codeBlock" title="ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯">{ } ã‚³ãƒ¼ãƒ‰</button>
          <button class="toolbar-btn" data-action="horizontalRule" title="æ°´å¹³ç·š">â€” æ°´å¹³ç·š</button>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="link" title="ãƒªãƒ³ã‚¯">ğŸ”— ãƒªãƒ³ã‚¯</button>
          <button class="toolbar-btn" data-action="image" title="ç”»åƒ">ğŸ–¼ï¸ ç”»åƒ</button>
          <button class="toolbar-btn" data-action="diagram" title="å›³ã‚’æŒ¿å…¥">ğŸ“Š å›³</button>
          <button class="toolbar-btn" data-action="table" title="è¡¨">ğŸ“¦ è¡¨</button>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="undo" title="å…ƒã«æˆ»ã™">â†¶</button>
          <button class="toolbar-btn" data-action="redo" title="ã‚„ã‚Šç›´ã—">â†·</button>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" id="ai-command-btn" title="AIã‚³ãƒãƒ³ãƒ‰">ğŸ¤– AI</button>
          <button class="toolbar-btn" id="chat-toggle-btn" title="AIãƒãƒ£ãƒƒãƒˆ (Ctrl+K)">ğŸ’¬ Chat</button>
          <button class="toolbar-btn" id="toggle-mode-btn" title="WYSIWYG/ã‚½ãƒ¼ã‚¹åˆ‡ã‚Šæ›¿ãˆ">ğŸ”„ ãƒ¢ãƒ¼ãƒ‰</button>
          <button class="toolbar-btn" id="toc-btn" title="ç›®æ¬¡ç”Ÿæˆ">ğŸ“‹ ç›®æ¬¡</button>
          <button class="toolbar-btn" id="help-btn" title="ãƒ˜ãƒ«ãƒ—">â“ ãƒ˜ãƒ«ãƒ—</button>
        </div>
      </div>

      <div class="editor-content" id="editor"></div>

      <div class="status-bar">
        <span id="word-count">æ–‡å­—æ•°: 0</span>
        <span id="editor-mode">WYSIWYG ãƒ¢ãƒ¼ãƒ‰</span>
      </div>

      <!-- ã‚½ãƒ¼ã‚¹ãƒ¢ãƒ¼ãƒ‰ç”¨ã®textareaï¼ˆéè¡¨ç¤ºï¼‰ -->
      <textarea id="source-editor"></textarea>
    </div>
  </div>

  <!-- AIã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="ai-command-modal" class="ai-command-modal" style="display: none;">
    <div class="ai-command-container">
      <div class="ai-command-header">
        <div class="ai-command-title">
          <span class="ai-command-title-icon">ğŸ¤–</span>
          AIã‚³ãƒãƒ³ãƒ‰é¸æŠ
        </div>
        <button class="ai-command-close" id="ai-command-close">Ã—</button>
      </div>
      <div class="ai-command-body">
        <div class="selected-text-preview" id="selected-text-preview" style="display: none;">
          <div class="selected-text-label">é¸æŠã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆ</div>
          <div class="selected-text-content" id="selected-text-content"></div>
        </div>
        <div id="ai-command-panel-content">
          <!-- AIã‚³ãƒãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ã‚ˆã£ã¦å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ -->
        </div>
      </div>
      <div class="ai-command-loading" id="ai-command-loading" style="display: none;">
        <div class="ai-command-spinner"></div>
      </div>
    </div>
  </div>

  <!-- å…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
  <div id="command-input-dialog" class="command-input-dialog" style="display: none;">
    <div class="command-input-title" id="command-input-title">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å…¥åŠ›</div>
    <input type="text" class="command-input-field" id="command-input-field" placeholder="å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
    <div class="command-input-buttons">
      <button class="command-input-cancel" id="command-input-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="command-input-confirm" id="command-input-confirm">å®Ÿè¡Œ</button>
    </div>
  </div>

  <!-- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
  <div id="export-menu" class="export-menu" style="display: none;">
    <div class="export-menu-container">
      <div class="export-menu-header">
        <h3>ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ã‚³ãƒ”ãƒ¼</h3>
        <button class="export-menu-close" id="export-menu-close">Ã—</button>
      </div>
      <div class="export-menu-body">
        <div class="export-section">
          <h4>ğŸ“‹ ã‚µãƒ¼ãƒ“ã‚¹åˆ¥ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ</h4>
          <p class="export-section-desc">å„ã‚µãƒ¼ãƒ“ã‚¹ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼</p>
          <div class="export-buttons" id="clipboard-buttons">
            <!-- JavaScript ã§å‹•çš„ç”Ÿæˆ -->
          </div>
        </div>
        <div class="export-section">
          <h4>ğŸ’¾ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜</h4>
          <p class="export-section-desc">å„ç¨®ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¿å­˜</p>
          <div class="export-buttons" id="download-buttons">
            <!-- JavaScript ã§å‹•çš„ç”Ÿæˆ -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- è¨­å®šãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
  <div id="settings-overlay" class="settings-overlay" style="display: none;">
    <div class="settings-dialog">
      <div class="settings-header">
        <h3>âš™ï¸ è¨­å®š</h3>
        <button id="settings-close" class="settings-close">&times;</button>
      </div>
      <div class="settings-body">
        
        <!-- è¨­å®šã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¿ãƒ– -->
        <div class="settings-tabs">
          <button class="settings-tab active" data-tab="ai">
            <span>ğŸ¤– AIè¨­å®š</span>
          </button>
          <button class="settings-tab" data-tab="editor">
            <span>ğŸ“ ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼</span>
          </button>
          <button class="settings-tab" data-tab="export">
            <span>ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span>
          </button>
        </div>

        <!-- AIè¨­å®šã‚¿ãƒ– -->
        <div id="ai-tab" class="settings-tab-content active">
          <h4>AIè¨­å®š</h4>
          
          <!-- ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¿ãƒ– -->
          <div class="ai-provider-tabs">
            <button class="ai-provider-tab active" data-provider="gemini">
              <span>ğŸ§  Gemini</span>
            </button>
            <button class="ai-provider-tab" data-provider="claude">
              <span>ğŸ¤– Claude</span>
            </button>
          </div>

          <!-- Geminiè¨­å®š -->
          <div id="gemini-settings" class="ai-provider-content active">
            <div class="ai-api-info">
              <h4>Google Gemini API</h4>
              <p>Google AI Studio ã§APIã‚­ãƒ¼ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚ç„¡æ–™æ ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚</p>
              <a href="https://aistudio.google.com/app/apikey" target="_blank" class="ai-api-link">
                APIã‚­ãƒ¼ã‚’å–å¾— â†—ï¸
              </a>
            </div>
            
            <div class="ai-form-group">
              <label for="gemini-api-key" class="ai-form-label">APIã‚­ãƒ¼:</label>
              <div class="ai-password-group">
                <input type="text" id="gemini-api-key" class="ai-form-input" placeholder="Gemini APIã‚­ãƒ¼ã‚’å…¥åŠ›">
                <button type="button" id="gemini-password-toggle" class="ai-password-toggle">ğŸ‘ï¸</button>
              </div>
            </div>
            
            <div class="ai-form-group">
              <label for="gemini-model" class="ai-form-label">ãƒ¢ãƒ‡ãƒ«é¸æŠ:</label>
              <select id="gemini-model" class="ai-form-select">
                <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (å®Ÿé¨“ç‰ˆãƒ»æœ€æ–°ãƒ»ç„¡æ–™æ ã‚ã‚Š)</option>
                <option value="gemini-2.0-flash">Gemini 2.0 Flash (ç„¡æ–™æ ã‚ã‚Š)</option>
                <option value="gemini-2.5-pro" selected>Gemini 2.5 Pro (ç„¡æ–™æ ã‚ã‚Šãƒ»æ¨å¥¨)</option>
                <option value="gemini-1.5-flash">Gemini 1.5 Flash (ç„¡æ–™æ ã‚ã‚Šãƒ»é«˜é€Ÿ)</option>
                <option value="gemini-1.5-pro">Gemini 1.5 Pro (ç„¡æ–™æ ã‚ã‚Š)</option>
              </select>
            </div>
            
            <button id="gemini-test-btn" class="ai-button ai-button-secondary ai-test-button">
              ğŸ” æ¥ç¶šãƒ†ã‚¹ãƒˆ
            </button>
          </div>

          <!-- Claudeè¨­å®š -->
          <div id="claude-settings" class="ai-provider-content">
            <div class="ai-api-info">
              <h4>Anthropic Claude</h4>
              <p>Claude.aiã®Artifactsæ©Ÿèƒ½ã¨ã®äº’æ›æ€§å¯¾å¿œã€‚èªè¨¼ä¸è¦ã§ä½¿ç”¨ã§ãã¾ã™ã€‚</p>
            </div>

            <div class="ai-form-group">
              <label for="claude-model" class="ai-form-label">ãƒ¢ãƒ‡ãƒ«é¸æŠ:</label>
              <select id="claude-model" class="ai-form-select">
                <option value="claude-sonnet-4-20250514" selected>Claude Sonnet 4 (Artifactså¯¾å¿œ)</option>
              </select>
            </div>

            <p class="ai-info-text">âœ¨ Claude Sonnet 4ãƒ¢ãƒ‡ãƒ«ã¯ã€Claude.aiã®Artifactsæ©Ÿèƒ½ã¨ã®äº’æ›æ€§ã‚’æŒã¡ã€èªè¨¼ãªã—ã§ä½¿ç”¨ã§ãã¾ã™ã€‚</p>
          </div>
        </div>

        <!-- ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼è¨­å®šã‚¿ãƒ– -->
        <div id="editor-tab" class="settings-tab-content">
          <h4>ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼è¨­å®š</h4>
          <p>ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®å‹•ä½œè¨­å®šï¼ˆä»Šå¾Œå®Ÿè£…äºˆå®šï¼‰</p>
          
          <div class="settings-form-group">
            <label>
              <input type="checkbox" id="auto-save" checked>
              è‡ªå‹•ä¿å­˜ã‚’æœ‰åŠ¹ã«ã™ã‚‹
            </label>
          </div>
          
          <div class="settings-form-group">
            <label>
              <input type="checkbox" id="word-wrap" checked>
              è¡Œã®æŠ˜ã‚Šè¿”ã—ã‚’æœ‰åŠ¹ã«ã™ã‚‹
            </label>
          </div>
        </div>

        <!-- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®šã‚¿ãƒ– -->
        <div id="export-tab" class="settings-tab-content">
          <h4>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®š</h4>
          <p>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®è¨­å®šï¼ˆä»Šå¾Œå®Ÿè£…äºˆå®šï¼‰</p>
          
          <div class="settings-form-group">
            <label for="default-export-format">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼:</label>
            <select id="default-export-format" class="settings-form-select">
              <option value="markdown">Markdown</option>
              <option value="html">HTML</option>
              <option value="pdf">PDF</option>
            </select>
          </div>
        </div>

        <!-- ä¿å­˜ãƒœã‚¿ãƒ³ -->
        <div class="settings-button-group">
          <button id="settings-save" class="settings-button settings-button-primary">
            ğŸ’¾ è¨­å®šã‚’ä¿å­˜
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- AI Chat Panel Container -->
  <div id="chat-panel-container"></div>

  <!-- Diagram Generation Modal -->
  <div id="diagram-modal" class="diagram-modal" style="display: none;">
    <div class="diagram-modal-container">
      <div class="diagram-modal-header">
        <h3>ğŸ“Š å›³ã‚’æŒ¿å…¥</h3>
        <button class="diagram-modal-close" id="diagram-modal-close">Ã—</button>
      </div>

      <div class="diagram-modal-body">
        <!-- ã‚¿ãƒ– -->
        <div class="diagram-tabs">
          <button class="diagram-tab active" data-tab="mermaid">
            ğŸ”· Mermaid
          </button>
          <button class="diagram-tab" data-tab="chart">
            ğŸ“ˆ Chart
          </button>
          <button class="diagram-tab" data-tab="svg">
            ğŸ¨ SVG
          </button>
        </div>

        <!-- Mermaidã‚¿ãƒ– -->
        <div class="diagram-tab-content active" id="mermaid-tab">
          <div class="diagram-input-section">
            <div class="diagram-description-input">
              <div class="diagram-template-row">
                <label for="mermaid-template">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:</label>
                <select id="mermaid-template" class="diagram-template-select">
                  <option value="">-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠ --</option>
                  <option value="flowchart">ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆï¼ˆå‡¦ç†ã®æµã‚Œï¼‰</option>
                  <option value="sequence">ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å›³ï¼ˆå‡¦ç†ã®é †åºï¼‰</option>
                  <option value="class">ã‚¯ãƒ©ã‚¹å›³ï¼ˆã‚¯ãƒ©ã‚¹ã®é–¢ä¿‚ï¼‰</option>
                  <option value="er">ERå›³ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼‰</option>
                  <option value="gantt">ã‚¬ãƒ³ãƒˆãƒãƒ£ãƒ¼ãƒˆï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰</option>
                  <option value="state">çŠ¶æ…‹é·ç§»å›³ï¼ˆçŠ¶æ…‹ã®å¤‰åŒ–ï¼‰</option>
                  <option value="pie">å††ã‚°ãƒ©ãƒ•ï¼ˆå‰²åˆï¼‰</option>
                </select>
              </div>
              <label for="mermaid-description">è‡ªç„¶è¨€èªã§å›³ã‚’èª¬æ˜:</label>
              <textarea
                id="mermaid-description"
                class="diagram-description-field"
                placeholder="ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã‹ã‚‰ãƒ­ã‚°ã‚¤ãƒ³ã¾ã§ã®ãƒ•ãƒ­ãƒ¼å›³ã‚’ä½œæˆã—ã¦"
                rows="3"
              ></textarea>
              <button id="mermaid-ai-generate-btn" class="diagram-btn diagram-btn-primary">
                ğŸ¤– AIã§ç”Ÿæˆ
              </button>
            </div>

            <div class="diagram-code-section">
              <label for="mermaid-code">ç”Ÿæˆã•ã‚ŒãŸMermaidã‚³ãƒ¼ãƒ‰ï¼ˆç·¨é›†å¯èƒ½ï¼‰:</label>
              <textarea
                id="mermaid-code"
                class="diagram-code-input"
                placeholder="AIã§ç”Ÿæˆã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æ‰‹å‹•ã§ã‚‚ç·¨é›†ã§ãã¾ã™ã€‚"
                rows="10"
              ></textarea>
              <div class="diagram-help">
                <a href="https://mermaid.js.org/intro/" target="_blank">Mermaidãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>
              </div>
            </div>
          </div>
          <div class="diagram-preview-section">
            <div class="diagram-preview-header">
              <span>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:</span>
              <button id="mermaid-preview-btn" class="diagram-btn diagram-btn-primary">
                ğŸ”„ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°
              </button>
            </div>
            <div id="mermaid-preview" class="diagram-preview empty"></div>
          </div>
        </div>

        <!-- Chartã‚¿ãƒ– -->
        <div class="diagram-tab-content" id="chart-tab">
          <div class="diagram-input-section">
            <div class="diagram-description-input">
              <div class="diagram-template-row">
                <label for="chart-template">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:</label>
                <select id="chart-template" class="diagram-template-select">
                  <option value="">-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠ --</option>
                  <option value="bar">æ£’ã‚°ãƒ©ãƒ•ï¼ˆæ¯”è¼ƒï¼‰</option>
                  <option value="line">æŠ˜ã‚Œç·šã‚°ãƒ©ãƒ•ï¼ˆæ¨ç§»ï¼‰</option>
                  <option value="pie">å††ã‚°ãƒ©ãƒ•ï¼ˆå‰²åˆï¼‰</option>
                  <option value="doughnut">ãƒ‰ãƒ¼ãƒŠãƒ„ã‚°ãƒ©ãƒ•ï¼ˆå‰²åˆï¼‰</option>
                  <option value="radar">ãƒ¬ãƒ¼ãƒ€ãƒ¼ãƒãƒ£ãƒ¼ãƒˆï¼ˆå¤šè§’è©•ä¾¡ï¼‰</option>
                  <option value="scatter">æ•£å¸ƒå›³ï¼ˆç›¸é–¢ï¼‰</option>
                </select>
              </div>
              <label for="chart-description">è‡ªç„¶è¨€èªã§ã‚°ãƒ©ãƒ•ã‚’èª¬æ˜:</label>
              <textarea
                id="chart-description"
                class="diagram-description-field"
                placeholder="ä¾‹: 2020å¹´ã‹ã‚‰2024å¹´ã®å£²ä¸Šæ¨ç§»ã‚’æ£’ã‚°ãƒ©ãƒ•ã§è¡¨ç¤ºã—ã¦"
                rows="3"
              ></textarea>
              <button id="chart-ai-generate-btn" class="diagram-btn diagram-btn-primary">
                ğŸ¤– AIã§ç”Ÿæˆ
              </button>
            </div>

            <div class="diagram-code-section">
              <label for="chart-config">ç”Ÿæˆã•ã‚ŒãŸChart.jsè¨­å®šï¼ˆç·¨é›†å¯èƒ½ï¼‰:</label>
              <textarea
                id="chart-config"
                class="diagram-code-input"
                placeholder="AIã§ç”Ÿæˆã•ã‚ŒãŸChart.jsè¨­å®šãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æ‰‹å‹•ã§ã‚‚ç·¨é›†ã§ãã¾ã™ã€‚"
                rows="10"
              ></textarea>
              <div class="diagram-help">
                <a href="https://www.chartjs.org/docs/latest/" target="_blank">Chart.jsãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>
              </div>
            </div>
          </div>
          <div class="diagram-preview-section">
            <div class="diagram-preview-header">
              <span>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:</span>
              <button id="chart-preview-btn" class="diagram-btn diagram-btn-primary">
                ğŸ”„ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°
              </button>
            </div>
            <div id="chart-preview" class="diagram-preview empty"></div>
          </div>
        </div>

        <!-- SVGã‚¿ãƒ– -->
        <div class="diagram-tab-content" id="svg-tab">
          <div class="diagram-input-section">
            <div class="diagram-description-input">
              <div class="diagram-template-row">
                <label for="svg-template">ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ:</label>
                <select id="svg-template" class="diagram-template-select">
                  <option value="">-- ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’é¸æŠ --</option>
                  <option value="icon">ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆã‚·ãƒ³ãƒ—ãƒ«ãªå›³å½¢ï¼‰</option>
                  <option value="logo">ãƒ­ã‚´ï¼ˆçµ„ã¿åˆã‚ã›å›³å½¢ï¼‰</option>
                  <option value="diagram">æŠ€è¡“å›³ï¼ˆã‚·ã‚¹ãƒ†ãƒ æ§‹æˆå›³ï¼‰</option>
                  <option value="infographic">ã‚¤ãƒ³ãƒ•ã‚©ã‚°ãƒ©ãƒ•ã‚£ãƒƒã‚¯ï¼ˆæƒ…å ±è¦–è¦šåŒ–ï¼‰</option>
                </select>
              </div>
              <label for="svg-description">è‡ªç„¶è¨€èªã§SVGå›³å½¢ã‚’èª¬æ˜:</label>
              <textarea
                id="svg-description"
                class="diagram-description-field"
                placeholder="ä¾‹: é’ã„å††ã¨èµ¤ã„å››è§’å½¢ã‚’ä¸¦ã¹ãŸã‚¢ã‚¤ã‚³ãƒ³ã‚’ä½œã£ã¦"
                rows="3"
              ></textarea>
              <button id="svg-ai-generate-btn" class="diagram-btn diagram-btn-primary">
                ğŸ¤– AIã§ç”Ÿæˆ
              </button>
            </div>

            <div class="diagram-code-section">
              <label for="svg-code">ç”Ÿæˆã•ã‚ŒãŸSVGã‚³ãƒ¼ãƒ‰ï¼ˆç·¨é›†å¯èƒ½ï¼‰:</label>
              <textarea
                id="svg-code"
                class="diagram-code-input"
                placeholder="AIã§ç”Ÿæˆã•ã‚ŒãŸSVGã‚³ãƒ¼ãƒ‰ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚æ‰‹å‹•ã§ã‚‚ç·¨é›†ã§ãã¾ã™ã€‚"
                rows="10"
              ></textarea>
              <div class="diagram-help">
                <a href="https://developer.mozilla.org/en-US/docs/Web/SVG" target="_blank">SVGãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>
              </div>
            </div>
          </div>
          <div class="diagram-preview-section">
            <div class="diagram-preview-header">
              <span>ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼:</span>
              <button id="svg-preview-btn" class="diagram-btn diagram-btn-primary">
                ğŸ”„ ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼æ›´æ–°
              </button>
            </div>
            <div id="svg-preview" class="diagram-preview empty"></div>
          </div>
        </div>
      </div>

      <div class="diagram-modal-footer">
        <button id="diagram-cancel-btn" class="diagram-btn diagram-btn-secondary">
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        </button>
        <button id="diagram-insert-btn" class="diagram-btn diagram-btn-primary" disabled>
          æŒ¿å…¥
        </button>
      </div>
    </div>
  </div>

</body>
</html>