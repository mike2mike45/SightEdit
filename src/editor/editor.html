<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SightEdit - Visual Markdown Editor</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: #f8f9fa;
      height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .header {
      background: white;
      border-bottom: 1px solid #dee2e6;
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }

    .logo {
      display: flex;
      align-items: center;
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }

    .logo-icon {
      margin-right: 8px;
      font-size: 20px;
    }

    .header-controls {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .btn {
      padding: 6px 12px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      background: white;
      color: #333;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }

    .btn:hover {
      background: #f8f9fa;
      border-color: #adb5bd;
    }

    .btn.primary {
      background: #007bff;
      color: white;
      border-color: #007bff;
    }

    .btn.primary:hover {
      background: #0056b3;
      border-color: #0056b3;
    }

    .main-container {
      flex: 1;
      display: flex;
      min-height: 0;
    }

    .toolbar {
      background: white;
      border-bottom: 1px solid #dee2e6;
      padding: 8px 16px;
      display: flex;
      align-items: center;
      gap: 8px;
      flex-wrap: wrap;
    }

    .toolbar-group {
      display: flex;
      align-items: center;
      gap: 4px;
      padding-right: 12px;
      border-right: 1px solid #dee2e6;
    }

    .toolbar-group:last-child {
      border-right: none;
    }

    .toolbar-btn {
      padding: 6px 8px;
      border: 1px solid transparent;
      border-radius: 3px;
      background: transparent;
      color: #495057;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }

    .toolbar-btn:hover {
      background: #f8f9fa;
      border-color: #dee2e6;
    }

    .toolbar-btn.active {
      background: #e3f2fd;
      color: #1976d2;
      border-color: #bbdefb;
    }

    .editor-container {
      flex: 1;
      display: flex;
      flex-direction: column;
      background: white;
      margin: 20px;
      border-radius: 8px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      overflow: hidden;
    }

    .editor-content {
      flex: 1;
      padding: 20px;
      overflow-y: auto;
      min-height: 0;
    }

    .ProseMirror {
      outline: none;
      line-height: 1.6;
      font-size: 16px;
      color: #333;
    }

    .ProseMirror h1,
    .ProseMirror h2,
    .ProseMirror h3,
    .ProseMirror h4,
    .ProseMirror h5,
    .ProseMirror h6 {
      margin: 1.5em 0 0.5em 0;
      font-weight: 600;
      line-height: 1.3;
    }

    .ProseMirror h1 { font-size: 2em; }
    .ProseMirror h2 { font-size: 1.5em; }
    .ProseMirror h3 { font-size: 1.3em; }
    .ProseMirror h4 { font-size: 1.1em; }
    .ProseMirror h5 { font-size: 1em; }
    .ProseMirror h6 { font-size: 0.9em; }

    .ProseMirror p {
      margin: 0.5em 0;
    }

    .ProseMirror ul,
    .ProseMirror ol {
      padding-left: 1.5em;
      margin: 0.5em 0;
    }

    .ProseMirror blockquote {
      border-left: 4px solid #dee2e6;
      padding-left: 1em;
      margin: 1em 0;
      color: #6c757d;
      font-style: italic;
    }

    .ProseMirror code {
      background: #f8f9fa;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
      font-size: 0.9em;
    }

    .ProseMirror pre {
      background: #282c34;
      color: #abb2bf;
      border: 1px solid #444;
      border-radius: 6px;
      padding: 1.2em;
      margin: 1.5em 0;
      overflow-x: auto;
      font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', monospace;
      font-size: 14px;
      line-height: 1.6;
      white-space: pre;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .ProseMirror pre code {
      background: none;
      padding: 0;
      color: inherit;
      font-size: inherit;
      border-radius: 0;
    }

    /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯å†…ã®ã‚·ãƒ³ã‚¿ãƒƒã‚¯ã‚¹ãƒã‚¤ãƒ©ã‚¤ãƒˆé¢¨ */
    .ProseMirror pre .keyword {
      color: #c678dd;
      font-weight: bold;
    }

    .ProseMirror pre .string {
      color: #98c379;
    }

    .ProseMirror pre .comment {
      color: #5c6370;
      font-style: italic;
    }

    .ProseMirror pre .number {
      color: #d19a66;
    }

    .ProseMirror pre .function {
      color: #61afef;
    }

    /* ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ã®æ”¹è‰¯ */
    .ProseMirror code {
      background: #f1f3f4;
      color: #e74c3c;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: 'JetBrains Mono', 'Fira Code', 'SF Mono', Monaco, Inconsolata, 'Roboto Mono', monospace;
      font-size: 0.9em;
      border: 1px solid #e1e4e8;
      font-weight: 600;
    }

    /* ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ */
    .ProseMirror .task-item {
      display: flex;
      align-items: center;
      margin: 0.5em 0;
    }

    .ProseMirror .task-item input[type="checkbox"] {
      margin-right: 0.5em;
      transform: scale(1.2);
    }

    /* ãƒ†ãƒ¼ãƒ–ãƒ«ã®æ”¹è‰¯ */
    .ProseMirror table,
    .ProseMirror .markdown-table {
      border-collapse: collapse;
      width: 100%;
      margin: 1.5em 0;
      border: 2px solid #dee2e6;
      border-radius: 6px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    .ProseMirror table th,
    .ProseMirror .markdown-table th {
      background: #f8f9fa;
      font-weight: 600;
      text-align: left;
      padding: 12px;
      border-bottom: 2px solid #dee2e6;
      border-right: 1px solid #dee2e6;
    }

    .ProseMirror table td,
    .ProseMirror .markdown-table td {
      padding: 10px 12px;
      border-bottom: 1px solid #dee2e6;
      border-right: 1px solid #dee2e6;
    }

    .ProseMirror table th:last-child,
    .ProseMirror table td:last-child {
      border-right: none;
    }

    .ProseMirror table tr:hover,
    .ProseMirror .markdown-table tr:hover {
      background: #f8f9fa;
    }

    /* å¼•ç”¨ã®æ”¹è‰¯ */
    .ProseMirror blockquote {
      border-left: 4px solid #007bff;
      background: #f8f9fa;
      padding: 1em 1.5em;
      margin: 1.5em 0;
      color: #6c757d;
      font-style: italic;
      border-radius: 0 4px 4px 0;
    }

    .ProseMirror table {
      border-collapse: collapse;
      width: 100%;
      margin: 1em 0;
    }

    .ProseMirror table td,
    .ProseMirror table th {
      border: 1px solid #dee2e6;
      padding: 0.5em;
      text-align: left;
    }

    .ProseMirror table th {
      background: #f8f9fa;
      font-weight: 600;
    }

    /* WYSIWYG Content styles - contentEditableç”¨ */
    /* WYSIWYG ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
    .wysiwyg-editor-content {
      outline: none;
      min-height: 400px;
      padding: 20px;
      line-height: 1.6;
      font-size: 16px;
      color: #333;
      white-space: pre-wrap;
    }

    #wysiwyg-content {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      line-height: 1.6;
      color: #333;
    }

    /* ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰ */
    #wysiwyg-content code {
      background: #f1f3f4;
      color: #e74c3c;
      padding: 0.2em 0.4em;
      border-radius: 3px;
      font-family: 'Monaco', 'Consolas', 'Courier New', monospace;
      font-size: 0.9em;
      border: 1px solid #e1e4e8;
    }

    /* å¼•ç”¨ãƒ–ãƒ­ãƒƒã‚¯ */
    #wysiwyg-content blockquote {
      border-left: 4px solid #007bff;
      background: #f8f9fa;
      padding: 1em 1.5em;
      margin: 1.5em 0;
      border-radius: 0 4px 4px 0;
      color: #495057;
      font-style: italic;
    }

    /* ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯ */
    #wysiwyg-content pre {
      background: #282c34;
      color: #abb2bf;
      border: 1px solid #444;
      border-radius: 6px;
      padding: 1.2em;
      margin: 1.5em 0;
      overflow-x: auto;
      line-height: 1.6;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }

    #wysiwyg-content pre code {
      background: none;
      padding: 0;
      color: inherit;
      border: none;
      font-size: inherit;
    }

    /* ãƒ†ãƒ¼ãƒ–ãƒ« */
    #wysiwyg-content table {
      border-collapse: collapse;
      width: 100%;
      margin: 1.5em 0;
      border: 1px solid #dee2e6;
      border-radius: 6px;
      overflow: hidden;
    }

    #wysiwyg-content table th,
    #wysiwyg-content table td {
      border: 1px solid #dee2e6;
      padding: 10px 12px;
      text-align: left;
      vertical-align: top;
    }

    #wysiwyg-content table th {
      background: #f8f9fa;
      font-weight: 600;
      color: #495057;
    }

    #wysiwyg-content table tr:hover {
      background: #f8f9fa;
    }

    /* ã‚»ãƒ«é…ç½® */
    #wysiwyg-content table td.text-left { text-align: left; }
    #wysiwyg-content table td.text-center { text-align: center; }
    #wysiwyg-content table td.text-right { text-align: right; }

    /* ã‚¿ã‚¹ã‚¯ãƒªã‚¹ãƒˆ */
    #wysiwyg-content .task-item {
      display: flex;
      align-items: flex-start;
      margin: 0.5em 0;
      padding: 0.2em 0;
    }

    #wysiwyg-content .task-item input[type="checkbox"] {
      margin-right: 0.5em;
      margin-top: 0.1em;
      cursor: pointer;
    }

    #wysiwyg-content .task-text {
      flex: 1;
      transition: text-decoration 0.2s ease;
    }

    /* ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‚»ãƒ¬ã‚¯ãƒˆã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .toolbar-select {
      padding: 6px 8px;
      border: 1px solid #dee2e6;
      border-radius: 3px;
      font-size: 14px;
      cursor: pointer;
    }

    /* ã‚½ãƒ¼ã‚¹ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    #source-editor {
      display: none;
      width: 100%;
      height: 100%;
      padding: 20px;
      font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
      font-size: 14px;
      line-height: 1.6;
      border: none;
      outline: none;
      resize: none;
    }

    /* ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.3);
      max-width: 600px;
      max-height: 80vh;
      overflow-y: auto;
      position: relative;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #dee2e6;
    }

    .modal-title {
      margin: 0;
      color: #333;
    }

    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #6c757d;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    /* ç·¨é›†ãƒ€ã‚¤ã‚¢ãƒ­ã‚°ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ« */
    .edit-dialog-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0,0,0,0.5);
      z-index: 10000;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .edit-dialog-content {
      background: white;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      max-width: 400px;
      width: 90%;
    }

    .edit-dialog-title {
      margin: 0 0 15px 0;
      color: #333;
    }

    .edit-dialog-field {
      margin-bottom: 10px;
    }

    .edit-dialog-field:last-of-type {
      margin-bottom: 15px;
    }

    .edit-dialog-label {
      display: block;
      margin-bottom: 5px;
      font-weight: bold;
      color: #555;
    }

    .edit-dialog-input {
      width: 100%;
      padding: 8px;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-sizing: border-box;
    }

    .edit-dialog-buttons {
      text-align: right;
    }

    .edit-dialog-btn {
      padding: 8px 16px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
    }

    .edit-dialog-btn-cancel {
      margin-right: 10px;
      border: 1px solid #ddd;
      background: #f5f5f5;
      color: #333;
    }

    .edit-dialog-btn-ok {
      border: none;
      background: #007cba;
      color: white;
    }

    .status-bar {
      background: #f8f9fa;
      border-top: 1px solid #dee2e6;
      padding: 8px 16px;
      font-size: 12px;
      color: #6c757d;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .ai-loading-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
    }

    .ai-loading-content {
      background: white;
      padding: 30px;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .ai-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #007bff;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 15px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* AIè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« */
    .ai-settings-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10001;
    }

    .ai-settings-panel {
      background: white;
      border-radius: 8px;
      padding: 24px;
      width: 500px;
      max-width: 90vw;
      max-height: 80vh;
      overflow-y: auto;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .ai-settings-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #dee2e6;
    }

    .ai-settings-content label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
      color: #333;
    }

    .ai-settings-content select,
    .ai-settings-content input {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      font-size: 14px;
      margin-bottom: 15px;
    }

    .ai-settings-content small {
      color: #6c757d;
      font-size: 12px;
    }

    .ai-settings-content a {
      color: #007bff;
      text-decoration: none;
    }

    .ai-settings-content a:hover {
      text-decoration: underline;
    }

    .ai-settings-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #dee2e6;
    }

    .close-btn {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #6c757d;
      padding: 0;
      width: 30px;
      height: 30px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .close-btn:hover {
      color: #333;
    }

    /* AIçµæœãƒ¢ãƒ¼ãƒ€ãƒ« */
    .ai-result-modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.5);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10002;
    }

    .ai-result-panel {
      background: white;
      border-radius: 8px;
      padding: 24px;
      width: 700px;
      max-width: 90vw;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
    }

    .ai-result-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #dee2e6;
    }

    .ai-result-content {
      flex: 1;
      overflow-y: auto;
      background: #f8f9fa;
      border: 1px solid #dee2e6;
      border-radius: 4px;
      padding: 16px;
      margin-bottom: 20px;
      line-height: 1.6;
    }

    .ai-result-actions {
      display: flex;
      justify-content: flex-end;
      gap: 10px;
    }

    .secondary {
      background: #6c757d;
      border-color: #6c757d;
    }

    .secondary:hover {
      background: #5a6268;
      border-color: #545b62;
    }

    @media (max-width: 768px) {
      .main-container {
        flex-direction: column;
      }

      .editor-container {
        margin: 10px;
      }

      .toolbar {
        flex-wrap: wrap;
      }

      .header-controls {
        flex-wrap: wrap;
        gap: 8px;
      }
    }
  </style>
</head>
<body>
  <div class="header">
    <div class="logo">
      <span class="logo-icon">ğŸ“</span>
      SightEdit
    </div>
    <div class="header-controls">
      <button class="btn" id="new-file-btn" title="æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«">ğŸ“„ æ–°è¦</button>
      <button class="btn" id="open-file-btn" title="ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é–‹ã">ğŸ“‚ é–‹ã</button>
      <button class="btn" id="save-file-btn" title="ä¿å­˜">ğŸ’¾ ä¿å­˜</button>
      <button class="btn" id="save-as-btn" title="åå‰ã‚’ä»˜ã‘ã¦ä¿å­˜">ğŸ’¾ åå‰ä»˜ãä¿å­˜</button>
      <button class="btn" id="export-btn">ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</button>
      <button class="btn" id="settings-btn">âš™ï¸ è¨­å®š</button>
    </div>
  </div>

  <div class="main-container">
    <div class="editor-container">
      <div class="toolbar">
        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="bold" title="å¤ªå­—"><strong>B</strong></button>
          <button class="toolbar-btn" data-action="italic" title="æ–œä½“"><em>I</em></button>
          <button class="toolbar-btn" data-action="strike" title="å–ã‚Šæ¶ˆã—ç·š"><s>S</s></button>
          <button class="toolbar-btn" data-action="code" title="ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰">&lt;/&gt;</button>
        </div>

        <div class="toolbar-group">
          <select id="heading-select" class="toolbar-select">
            <option value="">è¦‹å‡ºã—</option>
            <option value="1">H1 - å¤§è¦‹å‡ºã—</option>
            <option value="2">H2 - ä¸­è¦‹å‡ºã—</option>
            <option value="3">H3 - å°è¦‹å‡ºã—</option>
            <option value="4">H4 - å°è¦‹å‡ºã—4</option>
            <option value="5">H5 - å°è¦‹å‡ºã—5</option>
            <option value="6">H6 - å°è¦‹å‡ºã—6</option>
            <option value="p">æ®µè½</option>
          </select>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="bulletList" title="ç®‡æ¡æ›¸ããƒªã‚¹ãƒˆ">â€¢ ãƒªã‚¹ãƒˆ</button>
          <button class="toolbar-btn" data-action="orderedList" title="ç•ªå·ä»˜ããƒªã‚¹ãƒˆ">1. ãƒªã‚¹ãƒˆ</button>
          <button class="toolbar-btn" data-action="blockquote" title="å¼•ç”¨">â å¼•ç”¨</button>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="codeBlock" title="ã‚³ãƒ¼ãƒ‰ãƒ–ãƒ­ãƒƒã‚¯">{ } ã‚³ãƒ¼ãƒ‰</button>
          <button class="toolbar-btn" data-action="horizontalRule" title="æ°´å¹³ç·š">â€” æ°´å¹³ç·š</button>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="link" title="ãƒªãƒ³ã‚¯">ğŸ”— ãƒªãƒ³ã‚¯</button>
          <button class="toolbar-btn" data-action="image" title="ç”»åƒ">ğŸ–¼ï¸ ç”»åƒ</button>
          <button class="toolbar-btn" data-action="table" title="è¡¨">ğŸ“¦ è¡¨</button>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" data-action="undo" title="å…ƒã«æˆ»ã™">â†¶</button>
          <button class="toolbar-btn" data-action="redo" title="ã‚„ã‚Šç›´ã—">â†·</button>
        </div>

        <div class="toolbar-group">
          <button class="toolbar-btn" id="ai-command-btn" title="AIã‚³ãƒãƒ³ãƒ‰">ğŸ¤– AI</button>
          <button class="toolbar-btn" id="toggle-mode-btn" title="WYSIWYG/ã‚½ãƒ¼ã‚¹åˆ‡ã‚Šæ›¿ãˆ">ğŸ”„ ãƒ¢ãƒ¼ãƒ‰</button>
          <button class="toolbar-btn" id="toc-btn" title="ç›®æ¬¡ç”Ÿæˆ">ğŸ“‹ ç›®æ¬¡</button>
          <button class="toolbar-btn" id="help-btn" title="ãƒ˜ãƒ«ãƒ—">â“ ãƒ˜ãƒ«ãƒ—</button>
        </div>
      </div>

      <div class="editor-content" id="editor"></div>

      <div class="status-bar">
        <span id="word-count">æ–‡å­—æ•°: 0</span>
        <span id="editor-mode">WYSIWYG ãƒ¢ãƒ¼ãƒ‰</span>
      </div>

      <!-- ã‚½ãƒ¼ã‚¹ãƒ¢ãƒ¼ãƒ‰ç”¨ã®textareaï¼ˆéè¡¨ç¤ºï¼‰ -->
      <textarea id="source-editor"></textarea>
    </div>
  </div>

  <!-- AIã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒãƒ«ãƒ¢ãƒ¼ãƒ€ãƒ« -->
  <div id="ai-command-modal" class="ai-command-modal" style="display: none;">
    <div class="ai-command-container">
      <div class="ai-command-header">
        <div class="ai-command-title">
          <span class="ai-command-title-icon">ğŸ¤–</span>
          <span id="ai-command-title-text">AIã‚³ãƒãƒ³ãƒ‰é¸æŠ</span>
          <span class="ai-command-current-provider" id="ai-command-current-provider"></span>
        </div>
        <button class="ai-command-close" id="ai-command-close">Ã—</button>
      </div>
      <div class="ai-command-body">
        <div class="selected-text-preview" id="selected-text-preview" style="display: none;">
          <div class="selected-text-label">é¸æŠã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆ</div>
          <div class="selected-text-content" id="selected-text-content"></div>
        </div>
        <div id="ai-command-panel-content">
          <!-- AIã‚³ãƒãƒ³ãƒ‰ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã«ã‚ˆã£ã¦å‹•çš„ã«ç”Ÿæˆã•ã‚Œã‚‹ -->
        </div>
      </div>
      <div class="ai-command-loading" id="ai-command-loading" style="display: none;">
        <div class="ai-command-spinner"></div>
      </div>
    </div>
  </div>

  <!-- å…¥åŠ›ãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
  <div id="command-input-dialog" class="command-input-dialog" style="display: none;">
    <div class="command-input-title" id="command-input-title">ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å…¥åŠ›</div>
    <input type="text" class="command-input-field" id="command-input-field" placeholder="å€¤ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„">
    <div class="command-input-buttons">
      <button class="command-input-cancel" id="command-input-cancel">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
      <button class="command-input-confirm" id="command-input-confirm">å®Ÿè¡Œ</button>
    </div>
  </div>


  <!-- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ -->
  <div id="export-menu" class="export-menu" style="display: none;">
    <div class="export-menu-container">
      <div class="export-menu-header">
        <h3>ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãƒ»ã‚³ãƒ”ãƒ¼</h3>
        <button class="export-menu-close" id="export-menu-close">Ã—</button>
      </div>
      <div class="export-menu-body">
        <div class="export-section">
          <h4>ğŸ“‹ ã‚µãƒ¼ãƒ“ã‚¹åˆ¥ã‚³ãƒ”ãƒ¼&ãƒšãƒ¼ã‚¹ãƒˆ</h4>
          <p class="export-section-desc">å„ã‚µãƒ¼ãƒ“ã‚¹ã«æœ€é©åŒ–ã•ã‚ŒãŸãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚¯ãƒªãƒƒãƒ—ãƒœãƒ¼ãƒ‰ã«ã‚³ãƒ”ãƒ¼</p>
          <div class="export-buttons" id="clipboard-buttons">
            <!-- JavaScript ã§å‹•çš„ç”Ÿæˆ -->
          </div>
        </div>
        <div class="export-section">
          <h4>ğŸ’¾ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜</h4>
          <p class="export-section-desc">å„ç¨®ãƒ•ã‚¡ã‚¤ãƒ«å½¢å¼ã§ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ä¿å­˜</p>
          <div class="export-buttons" id="download-buttons">
            <!-- JavaScript ã§å‹•çš„ç”Ÿæˆ -->
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- è¨­å®šãƒ€ã‚¤ã‚¢ãƒ­ã‚° -->
  <div id="settings-overlay" class="settings-overlay" style="display: none;">
    <div class="settings-dialog">
      <div class="settings-header">
        <h3>âš™ï¸ è¨­å®š</h3>
        <button id="settings-close" class="settings-close">&times;</button>
      </div>
      <div class="settings-body">
        
        <!-- è¨­å®šã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¿ãƒ– -->
        <div class="settings-tabs">
          <button class="settings-tab active" data-tab="ai">
            <span>ğŸ¤– AIè¨­å®š</span>
          </button>
          <button class="settings-tab" data-tab="editor">
            <span>ğŸ“ ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼</span>
          </button>
          <button class="settings-tab" data-tab="export">
            <span>ğŸ“¤ ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ</span>
          </button>
        </div>

        <!-- AIè¨­å®šã‚¿ãƒ– -->
        <div id="ai-tab" class="settings-tab-content active">
          <h4>AIè¨­å®š</h4>

          <!-- ç¾åœ¨ä½¿ç”¨ä¸­ã®AIè¡¨ç¤º -->
          <div class="current-ai-display" id="current-ai-display">
            <div class="current-ai-icon">ğŸ¤–</div>
            <div class="current-ai-info">
              <div class="current-ai-label">ç¾åœ¨ä½¿ç”¨ä¸­</div>
              <div class="current-ai-name" id="current-ai-name">Google Gemini - Gemini 2.5 Pro</div>
            </div>
          </div>

          <!-- ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼é¸æŠ -->
          <div class="provider-selection-section">
            <h5 class="provider-selection-title">ğŸ¯ ä½¿ç”¨ã™ã‚‹AIãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚’é¸æŠ</h5>
            <div class="provider-selection-buttons">
              <button type="button" class="provider-choice-btn" data-provider="gemini" id="provider-btn-gemini-tab">
                <span class="provider-icon">ğŸ§ </span>
                <span class="provider-name">Gemini</span>
                <span class="provider-badge">Google</span>
              </button>
              <button type="button" class="provider-choice-btn" data-provider="claude" id="provider-btn-claude-tab">
                <span class="provider-icon">ğŸ¤–</span>
                <span class="provider-name">Claude</span>
                <span class="provider-badge">Anthropic</span>
              </button>
            </div>
          </div>

          <!-- ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ã‚¿ãƒ– -->
          <div class="ai-provider-tabs">
            <button class="ai-provider-tab active" data-provider="gemini">
              <span>ğŸ§  Gemini</span>
            </button>
            <button class="ai-provider-tab" data-provider="claude">
              <span>ğŸ¤– Claude</span>
            </button>
          </div>

          <!-- Geminiè¨­å®š -->
          <div id="gemini-settings" class="ai-provider-content active">
            <div class="ai-api-info">
              <h4>Google Gemini API</h4>
              <p>Google AI Studio ã§APIã‚­ãƒ¼ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚ç„¡æ–™æ ãŒåˆ©ç”¨å¯èƒ½ã§ã™ã€‚</p>
              <a href="https://aistudio.google.com/app/apikey" target="_blank" class="ai-api-link">
                APIã‚­ãƒ¼ã‚’å–å¾— â†—ï¸
              </a>
            </div>
            
            <div class="ai-form-group">
              <label for="gemini-api-key" class="ai-form-label">APIã‚­ãƒ¼:</label>
              <div class="ai-password-group">
                <input type="text" id="gemini-api-key" class="ai-form-input" placeholder="Gemini APIã‚­ãƒ¼ã‚’å…¥åŠ›">
                <button type="button" id="gemini-password-toggle" class="ai-password-toggle">ğŸ‘ï¸</button>
              </div>
            </div>
            
            <div class="ai-form-group">
              <label for="gemini-model" class="ai-form-label">ãƒ¢ãƒ‡ãƒ«é¸æŠ:</label>
              <select id="gemini-model" class="ai-form-select">
                <option value="gemini-2.0-flash-exp">Gemini 2.0 Flash (å®Ÿé¨“ç‰ˆãƒ»æœ€æ–°ãƒ»ç„¡æ–™æ ã‚ã‚Š)</option>
                <option value="gemini-2.0-flash">Gemini 2.0 Flash (ç„¡æ–™æ ã‚ã‚Š)</option>
                <option value="gemini-2.5-pro" selected>Gemini 2.5 Pro (ç„¡æ–™æ ã‚ã‚Šãƒ»æ¨å¥¨)</option>
                <option value="gemini-1.5-flash">Gemini 1.5 Flash (ç„¡æ–™æ ã‚ã‚Šãƒ»é«˜é€Ÿ)</option>
                <option value="gemini-1.5-pro">Gemini 1.5 Pro (ç„¡æ–™æ ã‚ã‚Š)</option>
              </select>
            </div>
            
            <button id="gemini-test-btn" class="ai-button ai-button-secondary ai-test-button">
              ğŸ” æ¥ç¶šãƒ†ã‚¹ãƒˆ
            </button>
          </div>

          <!-- Claudeè¨­å®š -->
          <div id="claude-settings" class="ai-provider-content">
            <div class="ai-api-info">
              <h4>Anthropic Claude API</h4>
              <p>Anthropic Console ã§APIã‚­ãƒ¼ã‚’å–å¾—ã—ã¦ãã ã•ã„ã€‚å¾“é‡èª²é‡‘åˆ¶ã§ã™ã€‚</p>
              <a href="https://console.anthropic.com/settings/keys" target="_blank" class="ai-api-link">
                APIã‚­ãƒ¼ã‚’å–å¾— â†—ï¸
              </a>
            </div>
            
            <div class="ai-form-group">
              <label for="claude-api-key" class="ai-form-label">APIã‚­ãƒ¼:</label>
              <div class="ai-password-group">
                <input type="text" id="claude-api-key" class="ai-form-input" placeholder="Claude APIã‚­ãƒ¼ã‚’å…¥åŠ›">
                <button type="button" id="claude-password-toggle" class="ai-password-toggle">ğŸ‘ï¸</button>
              </div>
            </div>
            
            <div class="ai-form-group">
              <label for="claude-model" class="ai-form-label">ãƒ¢ãƒ‡ãƒ«é¸æŠ:</label>
              <select id="claude-model" class="ai-form-select">
                <option value="claude-sonnet-4-5-20250929" selected>Claude Sonnet 4.5 (æœ€æ–°ãƒ»2025å¹´9æœˆç‰ˆ) â­</option>
                <option value="claude-haiku-4-5-20251015">Claude Haiku 4.5 (æœ€æ–°ãƒ»é«˜é€Ÿãƒ»2025å¹´10æœˆç‰ˆ)</option>
                <option value="claude-opus-4-1-20250801">Claude Opus 4.1 (é«˜æ€§èƒ½ãƒ»2025å¹´8æœˆç‰ˆ)</option>
                <option value="claude-3-5-sonnet-20241022">Claude 3.5 Sonnet (æ—§ä¸–ä»£ãƒ»2024å¹´10æœˆç‰ˆ)</option>
                <option value="claude-3-5-haiku-20241022">Claude 3.5 Haiku (æ—§ä¸–ä»£ãƒ»é«˜é€Ÿãƒ»2024å¹´10æœˆç‰ˆ)</option>
              </select>
            </div>
            
            <button id="claude-test-btn" class="ai-button ai-button-secondary ai-test-button">
              ğŸ” æ¥ç¶šãƒ†ã‚¹ãƒˆ
            </button>
          </div>
        </div>

        <!-- ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼è¨­å®šã‚¿ãƒ– -->
        <div id="editor-tab" class="settings-tab-content">
          <h4>ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼è¨­å®š</h4>
          <p>ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼ã®å‹•ä½œè¨­å®šï¼ˆä»Šå¾Œå®Ÿè£…äºˆå®šï¼‰</p>
          
          <div class="settings-form-group">
            <label>
              <input type="checkbox" id="auto-save" checked>
              è‡ªå‹•ä¿å­˜ã‚’æœ‰åŠ¹ã«ã™ã‚‹
            </label>
          </div>
          
          <div class="settings-form-group">
            <label>
              <input type="checkbox" id="word-wrap" checked>
              è¡Œã®æŠ˜ã‚Šè¿”ã—ã‚’æœ‰åŠ¹ã«ã™ã‚‹
            </label>
          </div>
        </div>

        <!-- ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®šã‚¿ãƒ– -->
        <div id="export-tab" class="settings-tab-content">
          <h4>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆè¨­å®š</h4>
          <p>ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆæ©Ÿèƒ½ã®è¨­å®šï¼ˆä»Šå¾Œå®Ÿè£…äºˆå®šï¼‰</p>
          
          <div class="settings-form-group">
            <label for="default-export-format">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼:</label>
            <select id="default-export-format" class="settings-form-select">
              <option value="markdown">Markdown</option>
              <option value="html">HTML</option>
              <option value="pdf">PDF</option>
            </select>
          </div>
        </div>

        <!-- ä¿å­˜ãƒœã‚¿ãƒ³ -->
        <div class="settings-button-group">
          <button id="settings-save" class="settings-button settings-button-primary">
            ğŸ’¾ è¨­å®šã‚’ä¿å­˜
          </button>
        </div>
      </div>
    </div>
  </div>

</body>
</html>