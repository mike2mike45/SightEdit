/*! For license information please see editor.js.LICENSE.txt */
(()=>{var t,e,n,r,i={241:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(41917).A.Symbol},1297:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(71354),i=n.n(r),o=n(76314),a=n.n(o)()(i());a.push([t.id,"/* ========================================\n   Structured Generation Modal\n   ======================================== */\n\n.structured-gen-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 10000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.structured-gen-modal .modal-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.6);\n    backdrop-filter: blur(4px);\n}\n\n.structured-gen-modal .modal-container {\n    position: relative;\n    width: 90%;\n    max-width: 900px;\n    max-height: 85vh;\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n    display: flex;\n    flex-direction: column;\n    z-index: 1;\n    overflow: hidden;\n}\n\n.structured-gen-modal .modal-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 24px 28px;\n    border-bottom: 1px solid #e0e0e0;\n    flex-shrink: 0;\n}\n\n.structured-gen-modal .modal-header h3 {\n    margin: 0;\n    font-size: 22px;\n    font-weight: 600;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.structured-gen-modal .close-modal {\n    background: transparent;\n    border: none;\n    font-size: 28px;\n    color: #666;\n    cursor: pointer;\n    padding: 0;\n    width: 36px;\n    height: 36px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    transition: all 0.2s;\n}\n\n.structured-gen-modal .close-modal:hover {\n    background: #f0f0f0;\n    color: #333;\n}\n\n.structured-gen-modal .modal-content {\n    padding: 28px;\n    overflow-y: auto;\n    flex: 1;\n}\n\n/* ========================================\n   Template Selection\n   ======================================== */\n\n.template-selection h4 {\n    margin: 0 0 24px 0;\n    font-size: 18px;\n    color: #333;\n}\n\n.template-grid {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\n    gap: 20px;\n}\n\n.template-card {\n    padding: 24px;\n    border: 2px solid #e0e0e0;\n    border-radius: 12px;\n    cursor: pointer;\n    transition: all 0.3s;\n    text-align: center;\n}\n\n.template-card:hover {\n    border-color: #667eea;\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);\n    transform: translateY(-2px);\n}\n\n.template-icon {\n    font-size: 48px;\n    margin-bottom: 12px;\n}\n\n.template-card h5 {\n    margin: 0 0 8px 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: #333;\n}\n\n.template-card p {\n    margin: 0 0 12px 0;\n    font-size: 13px;\n    color: #666;\n    line-height: 1.5;\n}\n\n.template-meta {\n    font-size: 12px;\n    color: #999;\n}\n\n/* ========================================\n   Variable Input Step\n   ======================================== */\n\n.variable-input-step .step-header,\n.generation-mode-step .step-header,\n.section-generation-step .step-header {\n    margin-bottom: 24px;\n}\n\n.variable-input-step .step-header h4,\n.generation-mode-step .step-header h4,\n.section-generation-step .step-header h4 {\n    margin: 0;\n    font-size: 18px;\n    color: #333;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.back-btn {\n    padding: 8px 16px;\n    background: #f0f0f0;\n    border: none;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 14px;\n    margin-bottom: 12px;\n    transition: background 0.2s;\n}\n\n.back-btn:hover {\n    background: #e0e0e0;\n}\n\n.variable-form {\n    display: flex;\n    flex-direction: column;\n    gap: 20px;\n}\n\n.form-group {\n    display: flex;\n    flex-direction: column;\n}\n\n.form-label {\n    font-weight: 500;\n    font-size: 14px;\n    margin-bottom: 8px;\n    color: #333;\n}\n\n.form-control {\n    padding: 12px;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n    font-size: 14px;\n    font-family: inherit;\n    transition: border-color 0.2s;\n}\n\n.form-control:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.step-footer {\n    margin-top: 28px;\n    display: flex;\n    justify-content: flex-end;\n    gap: 12px;\n}\n\n.btn-secondary,\n.btn-primary {\n    padding: 12px 24px;\n    border: none;\n    border-radius: 6px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.btn-secondary {\n    background: #f0f0f0;\n    color: #333;\n}\n\n.btn-secondary:hover {\n    background: #e0e0e0;\n}\n\n.btn-primary {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n}\n\n.btn-primary:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n/* ========================================\n   Generation Mode Selection\n   ======================================== */\n\n.mode-selection {\n    display: grid;\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\n    gap: 24px;\n}\n\n.mode-card {\n    padding: 28px;\n    border: 2px solid #e0e0e0;\n    border-radius: 12px;\n    text-align: center;\n}\n\n.mode-icon {\n    font-size: 56px;\n    margin-bottom: 16px;\n}\n\n.mode-card h5 {\n    margin: 0 0 12px 0;\n    font-size: 18px;\n    font-weight: 600;\n    color: #333;\n}\n\n.mode-card p {\n    margin: 0 0 20px 0;\n    font-size: 14px;\n    color: #666;\n    line-height: 1.6;\n}\n\n.select-mode-btn {\n    width: 100%;\n    padding: 12px;\n}\n\n/* ========================================\n   Section Generation\n   ======================================== */\n\n.progress {\n    margin-top: 12px;\n}\n\n.progress span {\n    display: block;\n    font-size: 13px;\n    color: #666;\n    margin-bottom: 8px;\n}\n\n.progress-bar {\n    width: 100%;\n    height: 8px;\n    background: #e0e0e0;\n    border-radius: 4px;\n    overflow: hidden;\n}\n\n.progress-fill {\n    height: 100%;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    transition: width 0.3s;\n}\n\n.section-list {\n    margin-bottom: 32px;\n}\n\n.section-list h5,\n.generated-sections h5 {\n    margin: 0 0 16px 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: #333;\n}\n\n.section-item {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 20px;\n    border: 1px solid #e0e0e0;\n    border-radius: 8px;\n    margin-bottom: 12px;\n    transition: all 0.2s;\n}\n\n.section-item:hover {\n    border-color: #667eea;\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.section-info h6 {\n    margin: 0 0 4px 0;\n    font-size: 15px;\n    font-weight: 600;\n    color: #333;\n}\n\n.section-info p {\n    margin: 0;\n    font-size: 13px;\n    color: #666;\n}\n\n.generate-section-btn {\n    padding: 10px 20px;\n}\n\n.generated-sections {\n    padding-top: 24px;\n    border-top: 1px solid #e0e0e0;\n}\n\n.empty-message {\n    color: #999;\n    font-style: italic;\n    font-size: 14px;\n}\n\n.completed-section {\n    padding: 16px;\n    background: #f8f9fa;\n    border-radius: 6px;\n    margin-bottom: 8px;\n}\n\n.section-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.section-header span {\n    font-weight: 500;\n    color: #333;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.btn-link {\n    padding: 6px 12px;\n    background: transparent;\n    border: none;\n    color: #667eea;\n    cursor: pointer;\n    font-size: 14px;\n    transition: all 0.2s;\n}\n\n.btn-link:hover {\n    background: rgba(102, 126, 234, 0.1);\n    border-radius: 4px;\n}\n\n.view-section-btn {\n    padding: 6px 12px;\n}\n\n/* ========================================\n   Completion Screen\n   ======================================== */\n\n.completion-screen {\n    text-align: center;\n    padding: 40px 20px;\n}\n\n.completion-icon {\n    font-size: 80px;\n    margin-bottom: 24px;\n}\n\n.completion-screen h4 {\n    margin: 0 0 12px 0;\n    font-size: 24px;\n    font-weight: 600;\n    color: #333;\n}\n\n.completion-screen > p {\n    margin: 0 0 32px 0;\n    font-size: 16px;\n    color: #666;\n}\n\n.completion-stats {\n    display: flex;\n    justify-content: center;\n    gap: 40px;\n    margin-bottom: 32px;\n}\n\n.stat {\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n}\n\n.stat-value {\n    font-size: 36px;\n    font-weight: 700;\n    color: #667eea;\n}\n\n.stat-label {\n    font-size: 14px;\n    color: #666;\n    margin-top: 4px;\n}\n\n.completion-actions {\n    display: flex;\n    justify-content: center;\n    gap: 16px;\n}\n\n/* ========================================\n   Section View Modal\n   ======================================== */\n\n.section-view-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 10001;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.section-view-modal .modal-container {\n    max-width: 700px;\n}\n\n.section-content {\n    white-space: pre-wrap;\n    font-family: 'Courier New', monospace;\n    font-size: 13px;\n    line-height: 1.6;\n    color: #333;\n    padding: 20px;\n    background: #f8f9fa;\n    border-radius: 6px;\n    max-height: 400px;\n    overflow-y: auto;\n}\n\n.modal-footer {\n    padding: 16px 24px;\n    border-top: 1px solid #e0e0e0;\n    display: flex;\n    justify-content: flex-end;\n}\n\n/* Dark mode support */\n@media (prefers-color-scheme: dark) {\n    .structured-gen-modal .modal-container {\n        background: #2c2c2c;\n        color: #e0e0e0;\n    }\n\n    .structured-gen-modal .modal-header {\n        border-bottom-color: #444;\n    }\n\n    .structured-gen-modal .close-modal {\n        color: #aaa;\n    }\n\n    .structured-gen-modal .close-modal:hover {\n        background: #3c3c3c;\n        color: #e0e0e0;\n    }\n\n    .template-selection h4,\n    .template-card h5,\n    .section-info h6 {\n        color: #e0e0e0;\n    }\n\n    .template-card {\n        border-color: #444;\n        background: #1c1c1c;\n    }\n\n    .template-card:hover {\n        border-color: #8b9dc3;\n        background: #2c2c2c;\n    }\n\n    .template-card p,\n    .section-info p {\n        color: #aaa;\n    }\n\n    .form-control {\n        background: #1c1c1c;\n        border-color: #444;\n        color: #e0e0e0;\n    }\n\n    .form-control:focus {\n        border-color: #8b9dc3;\n    }\n\n    .btn-secondary {\n        background: #3c3c3c;\n        color: #e0e0e0;\n    }\n\n    .btn-secondary:hover {\n        background: #4c4c4c;\n    }\n\n    .completed-section {\n        background: #1c1c1c;\n    }\n\n    .section-content {\n        background: #1c1c1c;\n        color: #e0e0e0;\n    }\n}\n","",{version:3,sources:["webpack://./src/editor/structured-generation.css"],names:[],mappings:"AAAA;;6CAE6C;;AAE7C;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,uBAAuB;AAC3B;;AAEA;IACI,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,8BAA8B;IAC9B,0BAA0B;AAC9B;;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,gBAAgB;IAChB,gBAAgB;IAChB,iBAAiB;IACjB,mBAAmB;IACnB,0CAA0C;IAC1C,aAAa;IACb,sBAAsB;IACtB,UAAU;IACV,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,kBAAkB;IAClB,gCAAgC;IAChC,cAAc;AAClB;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;IAChB,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACZ;;AAEA;IACI,uBAAuB;IACvB,YAAY;IACZ,eAAe;IACf,WAAW;IACX,eAAe;IACf,UAAU;IACV,WAAW;IACX,YAAY;IACZ,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,aAAa;IACb,gBAAgB;IAChB,OAAO;AACX;;AAEA;;6CAE6C;;AAE7C;IACI,kBAAkB;IAClB,eAAe;IACf,WAAW;AACf;;AAEA;IACI,aAAa;IACb,4DAA4D;IAC5D,SAAS;AACb;;AAEA;IACI,aAAa;IACb,yBAAyB;IACzB,mBAAmB;IACnB,eAAe;IACf,oBAAoB;IACpB,kBAAkB;AACtB;;AAEA;IACI,qBAAqB;IACrB,+CAA+C;IAC/C,2BAA2B;AAC/B;;AAEA;IACI,eAAe;IACf,mBAAmB;AACvB;;AAEA;IACI,iBAAiB;IACjB,eAAe;IACf,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,WAAW;IACX,gBAAgB;AACpB;;AAEA;IACI,eAAe;IACf,WAAW;AACf;;AAEA;;6CAE6C;;AAE7C;;;IAGI,mBAAmB;AACvB;;AAEA;;;IAGI,SAAS;IACT,eAAe;IACf,WAAW;IACX,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACZ;;AAEA;IACI,iBAAiB;IACjB,mBAAmB;IACnB,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,eAAe;IACf,mBAAmB;IACnB,2BAA2B;AAC/B;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,sBAAsB;IACtB,SAAS;AACb;;AAEA;IACI,aAAa;IACb,sBAAsB;AAC1B;;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,aAAa;IACb,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,oBAAoB;IACpB,6BAA6B;AACjC;;AAEA;IACI,aAAa;IACb,qBAAqB;IACrB,8CAA8C;AAClD;;AAEA;IACI,gBAAgB;IAChB,aAAa;IACb,yBAAyB;IACzB,SAAS;AACb;;AAEA;;IAEI,kBAAkB;IAClB,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,6DAA6D;IAC7D,YAAY;AAChB;;AAEA;IACI,2BAA2B;IAC3B,+CAA+C;AACnD;;AAEA;;6CAE6C;;AAE7C;IACI,aAAa;IACb,2DAA2D;IAC3D,SAAS;AACb;;AAEA;IACI,aAAa;IACb,yBAAyB;IACzB,mBAAmB;IACnB,kBAAkB;AACtB;;AAEA;IACI,eAAe;IACf,mBAAmB;AACvB;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,WAAW;IACX,gBAAgB;AACpB;;AAEA;IACI,WAAW;IACX,aAAa;AACjB;;AAEA;;6CAE6C;;AAE7C;IACI,gBAAgB;AACpB;;AAEA;IACI,cAAc;IACd,eAAe;IACf,WAAW;IACX,kBAAkB;AACtB;;AAEA;IACI,WAAW;IACX,WAAW;IACX,mBAAmB;IACnB,kBAAkB;IAClB,gBAAgB;AACpB;;AAEA;IACI,YAAY;IACZ,6DAA6D;IAC7D,sBAAsB;AAC1B;;AAEA;IACI,mBAAmB;AACvB;;AAEA;;IAEI,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,aAAa;IACb,yBAAyB;IACzB,kBAAkB;IAClB,mBAAmB;IACnB,oBAAoB;AACxB;;AAEA;IACI,qBAAqB;IACrB,wCAAwC;AAC5C;;AAEA;IACI,iBAAiB;IACjB,eAAe;IACf,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,SAAS;IACT,eAAe;IACf,WAAW;AACf;;AAEA;IACI,kBAAkB;AACtB;;AAEA;IACI,iBAAiB;IACjB,6BAA6B;AACjC;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,kBAAkB;IAClB,kBAAkB;AACtB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;AAClC;;AAEA;IACI,gBAAgB;IAChB,WAAW;IACX,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACZ;;AAEA;IACI,iBAAiB;IACjB,uBAAuB;IACvB,YAAY;IACZ,cAAc;IACd,eAAe;IACf,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,oCAAoC;IACpC,kBAAkB;AACtB;;AAEA;IACI,iBAAiB;AACrB;;AAEA;;6CAE6C;;AAE7C;IACI,kBAAkB;IAClB,kBAAkB;AACtB;;AAEA;IACI,eAAe;IACf,mBAAmB;AACvB;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,WAAW;AACf;;AAEA;IACI,aAAa;IACb,uBAAuB;IACvB,SAAS;IACT,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,sBAAsB;IACtB,mBAAmB;AACvB;;AAEA;IACI,eAAe;IACf,gBAAgB;IAChB,cAAc;AAClB;;AAEA;IACI,eAAe;IACf,WAAW;IACX,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,uBAAuB;IACvB,SAAS;AACb;;AAEA;;6CAE6C;;AAE7C;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,uBAAuB;AAC3B;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,qBAAqB;IACrB,qCAAqC;IACrC,eAAe;IACf,gBAAgB;IAChB,WAAW;IACX,aAAa;IACb,mBAAmB;IACnB,kBAAkB;IAClB,iBAAiB;IACjB,gBAAgB;AACpB;;AAEA;IACI,kBAAkB;IAClB,6BAA6B;IAC7B,aAAa;IACb,yBAAyB;AAC7B;;AAEA,sBAAsB;AACtB;IACI;QACI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;QACI,yBAAyB;IAC7B;;IAEA;QACI,WAAW;IACf;;IAEA;QACI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;;;QAGI,cAAc;IAClB;;IAEA;QACI,kBAAkB;QAClB,mBAAmB;IACvB;;IAEA;QACI,qBAAqB;QACrB,mBAAmB;IACvB;;IAEA;;QAEI,WAAW;IACf;;IAEA;QACI,mBAAmB;QACnB,kBAAkB;QAClB,cAAc;IAClB;;IAEA;QACI,qBAAqB;IACzB;;IAEA;QACI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;QACI,mBAAmB;IACvB;;IAEA;QACI,mBAAmB;IACvB;;IAEA;QACI,mBAAmB;QACnB,cAAc;IAClB;AACJ",sourcesContent:["/* ========================================\r\n   Structured Generation Modal\r\n   ======================================== */\r\n\r\n.structured-gen-modal {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 10000;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.structured-gen-modal .modal-overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.6);\r\n    backdrop-filter: blur(4px);\r\n}\r\n\r\n.structured-gen-modal .modal-container {\r\n    position: relative;\r\n    width: 90%;\r\n    max-width: 900px;\r\n    max-height: 85vh;\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\r\n    display: flex;\r\n    flex-direction: column;\r\n    z-index: 1;\r\n    overflow: hidden;\r\n}\r\n\r\n.structured-gen-modal .modal-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 24px 28px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.structured-gen-modal .modal-header h3 {\r\n    margin: 0;\r\n    font-size: 22px;\r\n    font-weight: 600;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.structured-gen-modal .close-modal {\r\n    background: transparent;\r\n    border: none;\r\n    font-size: 28px;\r\n    color: #666;\r\n    cursor: pointer;\r\n    padding: 0;\r\n    width: 36px;\r\n    height: 36px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 4px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.structured-gen-modal .close-modal:hover {\r\n    background: #f0f0f0;\r\n    color: #333;\r\n}\r\n\r\n.structured-gen-modal .modal-content {\r\n    padding: 28px;\r\n    overflow-y: auto;\r\n    flex: 1;\r\n}\r\n\r\n/* ========================================\r\n   Template Selection\r\n   ======================================== */\r\n\r\n.template-selection h4 {\r\n    margin: 0 0 24px 0;\r\n    font-size: 18px;\r\n    color: #333;\r\n}\r\n\r\n.template-grid {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));\r\n    gap: 20px;\r\n}\r\n\r\n.template-card {\r\n    padding: 24px;\r\n    border: 2px solid #e0e0e0;\r\n    border-radius: 12px;\r\n    cursor: pointer;\r\n    transition: all 0.3s;\r\n    text-align: center;\r\n}\r\n\r\n.template-card:hover {\r\n    border-color: #667eea;\r\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.2);\r\n    transform: translateY(-2px);\r\n}\r\n\r\n.template-icon {\r\n    font-size: 48px;\r\n    margin-bottom: 12px;\r\n}\r\n\r\n.template-card h5 {\r\n    margin: 0 0 8px 0;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.template-card p {\r\n    margin: 0 0 12px 0;\r\n    font-size: 13px;\r\n    color: #666;\r\n    line-height: 1.5;\r\n}\r\n\r\n.template-meta {\r\n    font-size: 12px;\r\n    color: #999;\r\n}\r\n\r\n/* ========================================\r\n   Variable Input Step\r\n   ======================================== */\r\n\r\n.variable-input-step .step-header,\r\n.generation-mode-step .step-header,\r\n.section-generation-step .step-header {\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.variable-input-step .step-header h4,\r\n.generation-mode-step .step-header h4,\r\n.section-generation-step .step-header h4 {\r\n    margin: 0;\r\n    font-size: 18px;\r\n    color: #333;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.back-btn {\r\n    padding: 8px 16px;\r\n    background: #f0f0f0;\r\n    border: none;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    margin-bottom: 12px;\r\n    transition: background 0.2s;\r\n}\r\n\r\n.back-btn:hover {\r\n    background: #e0e0e0;\r\n}\r\n\r\n.variable-form {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 20px;\r\n}\r\n\r\n.form-group {\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.form-label {\r\n    font-weight: 500;\r\n    font-size: 14px;\r\n    margin-bottom: 8px;\r\n    color: #333;\r\n}\r\n\r\n.form-control {\r\n    padding: 12px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-family: inherit;\r\n    transition: border-color 0.2s;\r\n}\r\n\r\n.form-control:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.step-footer {\r\n    margin-top: 28px;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 12px;\r\n}\r\n\r\n.btn-secondary,\r\n.btn-primary {\r\n    padding: 12px 24px;\r\n    border: none;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.btn-secondary {\r\n    background: #f0f0f0;\r\n    color: #333;\r\n}\r\n\r\n.btn-secondary:hover {\r\n    background: #e0e0e0;\r\n}\r\n\r\n.btn-primary {\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n/* ========================================\r\n   Generation Mode Selection\r\n   ======================================== */\r\n\r\n.mode-selection {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));\r\n    gap: 24px;\r\n}\r\n\r\n.mode-card {\r\n    padding: 28px;\r\n    border: 2px solid #e0e0e0;\r\n    border-radius: 12px;\r\n    text-align: center;\r\n}\r\n\r\n.mode-icon {\r\n    font-size: 56px;\r\n    margin-bottom: 16px;\r\n}\r\n\r\n.mode-card h5 {\r\n    margin: 0 0 12px 0;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.mode-card p {\r\n    margin: 0 0 20px 0;\r\n    font-size: 14px;\r\n    color: #666;\r\n    line-height: 1.6;\r\n}\r\n\r\n.select-mode-btn {\r\n    width: 100%;\r\n    padding: 12px;\r\n}\r\n\r\n/* ========================================\r\n   Section Generation\r\n   ======================================== */\r\n\r\n.progress {\r\n    margin-top: 12px;\r\n}\r\n\r\n.progress span {\r\n    display: block;\r\n    font-size: 13px;\r\n    color: #666;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.progress-bar {\r\n    width: 100%;\r\n    height: 8px;\r\n    background: #e0e0e0;\r\n    border-radius: 4px;\r\n    overflow: hidden;\r\n}\r\n\r\n.progress-fill {\r\n    height: 100%;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    transition: width 0.3s;\r\n}\r\n\r\n.section-list {\r\n    margin-bottom: 32px;\r\n}\r\n\r\n.section-list h5,\r\n.generated-sections h5 {\r\n    margin: 0 0 16px 0;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.section-item {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 20px;\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 8px;\r\n    margin-bottom: 12px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.section-item:hover {\r\n    border-color: #667eea;\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.section-info h6 {\r\n    margin: 0 0 4px 0;\r\n    font-size: 15px;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.section-info p {\r\n    margin: 0;\r\n    font-size: 13px;\r\n    color: #666;\r\n}\r\n\r\n.generate-section-btn {\r\n    padding: 10px 20px;\r\n}\r\n\r\n.generated-sections {\r\n    padding-top: 24px;\r\n    border-top: 1px solid #e0e0e0;\r\n}\r\n\r\n.empty-message {\r\n    color: #999;\r\n    font-style: italic;\r\n    font-size: 14px;\r\n}\r\n\r\n.completed-section {\r\n    padding: 16px;\r\n    background: #f8f9fa;\r\n    border-radius: 6px;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.section-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.section-header span {\r\n    font-weight: 500;\r\n    color: #333;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.btn-link {\r\n    padding: 6px 12px;\r\n    background: transparent;\r\n    border: none;\r\n    color: #667eea;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.btn-link:hover {\r\n    background: rgba(102, 126, 234, 0.1);\r\n    border-radius: 4px;\r\n}\r\n\r\n.view-section-btn {\r\n    padding: 6px 12px;\r\n}\r\n\r\n/* ========================================\r\n   Completion Screen\r\n   ======================================== */\r\n\r\n.completion-screen {\r\n    text-align: center;\r\n    padding: 40px 20px;\r\n}\r\n\r\n.completion-icon {\r\n    font-size: 80px;\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.completion-screen h4 {\r\n    margin: 0 0 12px 0;\r\n    font-size: 24px;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.completion-screen > p {\r\n    margin: 0 0 32px 0;\r\n    font-size: 16px;\r\n    color: #666;\r\n}\r\n\r\n.completion-stats {\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 40px;\r\n    margin-bottom: 32px;\r\n}\r\n\r\n.stat {\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n}\r\n\r\n.stat-value {\r\n    font-size: 36px;\r\n    font-weight: 700;\r\n    color: #667eea;\r\n}\r\n\r\n.stat-label {\r\n    font-size: 14px;\r\n    color: #666;\r\n    margin-top: 4px;\r\n}\r\n\r\n.completion-actions {\r\n    display: flex;\r\n    justify-content: center;\r\n    gap: 16px;\r\n}\r\n\r\n/* ========================================\r\n   Section View Modal\r\n   ======================================== */\r\n\r\n.section-view-modal {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 10001;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.section-view-modal .modal-container {\r\n    max-width: 700px;\r\n}\r\n\r\n.section-content {\r\n    white-space: pre-wrap;\r\n    font-family: 'Courier New', monospace;\r\n    font-size: 13px;\r\n    line-height: 1.6;\r\n    color: #333;\r\n    padding: 20px;\r\n    background: #f8f9fa;\r\n    border-radius: 6px;\r\n    max-height: 400px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.modal-footer {\r\n    padding: 16px 24px;\r\n    border-top: 1px solid #e0e0e0;\r\n    display: flex;\r\n    justify-content: flex-end;\r\n}\r\n\r\n/* Dark mode support */\r\n@media (prefers-color-scheme: dark) {\r\n    .structured-gen-modal .modal-container {\r\n        background: #2c2c2c;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .structured-gen-modal .modal-header {\r\n        border-bottom-color: #444;\r\n    }\r\n\r\n    .structured-gen-modal .close-modal {\r\n        color: #aaa;\r\n    }\r\n\r\n    .structured-gen-modal .close-modal:hover {\r\n        background: #3c3c3c;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .template-selection h4,\r\n    .template-card h5,\r\n    .section-info h6 {\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .template-card {\r\n        border-color: #444;\r\n        background: #1c1c1c;\r\n    }\r\n\r\n    .template-card:hover {\r\n        border-color: #8b9dc3;\r\n        background: #2c2c2c;\r\n    }\r\n\r\n    .template-card p,\r\n    .section-info p {\r\n        color: #aaa;\r\n    }\r\n\r\n    .form-control {\r\n        background: #1c1c1c;\r\n        border-color: #444;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .form-control:focus {\r\n        border-color: #8b9dc3;\r\n    }\r\n\r\n    .btn-secondary {\r\n        background: #3c3c3c;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .btn-secondary:hover {\r\n        background: #4c4c4c;\r\n    }\r\n\r\n    .completed-section {\r\n        background: #1c1c1c;\r\n    }\r\n\r\n    .section-content {\r\n        background: #1c1c1c;\r\n        color: #e0e0e0;\r\n    }\r\n}\r\n"],sourceRoot:""}]);const s=a},1801:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(90565);const i=function(t,e){var n=e?(0,r.A)(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}},2383:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var r=n(241),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r.A?r.A.toStringTag:void 0;var l=Object.prototype.toString;var c=r.A?r.A.toStringTag:void 0;const h=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":c&&c in Object(t)?function(t){var e=o.call(t,s),n=t[s];try{t[s]=void 0;var r=!0}catch(t){}var i=a.call(t);return r&&(e?t[s]=n:delete t[s]),i}(t):function(t){return l.call(t)}(t)}},2505:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var r=n(25175),i=n(92049),o=n(41200),a=n(25353),s=n(54749),l=Object.prototype.hasOwnProperty;const c=function(t,e){var n=(0,i.A)(t),c=!n&&(0,r.A)(t),h=!n&&!c&&(0,o.A)(t),u=!n&&!c&&!h&&(0,s.A)(t),d=n||c||h||u,p=d?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],f=p.length;for(var g in t)!e&&!l.call(t,g)||d&&("length"==g||h&&("offset"==g||"parent"==g)||u&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,a.A)(g,f))||p.push(g);return p}},3767:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(24326),i=n(6832);const o=function(t){return(0,r.A)(function(e,n){var r=-1,o=n.length,a=o>1?n[o-1]:void 0,s=o>2?n[2]:void 0;for(a=t.length>3&&"function"==typeof a?(o--,a):void 0,s&&(0,i.A)(n[0],n[1],s)&&(a=o<3?void 0:a,o=1),e=Object(e);++r<o;){var l=n[r];l&&t(e,l,r,a)}return e})}},4417:t=>{"use strict";t.exports=function(t,e){return e||(e={}),t?(t=String(t.__esModule?t.default:t),/^['"].*['"]$/.test(t)&&(t=t.slice(1,-1)),e.hash&&(t+=e.hash),/["'() \t\n]|(%20)/.test(t)||e.needQuotes?'"'.concat(t.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):t):t}},5097:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(86309),i=n(51931);const o=t=>(t=>{const{r:e,g:n,b:o}=i.A.parse(t),a=.2126*r.A.channel.toLinear(e)+.7152*r.A.channel.toLinear(n)+.0722*r.A.channel.toLinear(o);return r.A.lang.round(a)})(t)>=.5,a=t=>!o(t)},5164:(t,e,n)=>{"use strict";n.d(e,{IU:()=>y,Jo:()=>T,T_:()=>C,g0:()=>F,jP:()=>x});var r=n(28698),i=n(5894),o=n(63245),a=n(32387),s=n(70607),l=n(13226),c=n(80144),h=n(40797),u=n(51444),d=n(52274),p=(0,h.K2)((t,e,n,r,i,o)=>{e.arrowTypeStart&&g(t,"start",e.arrowTypeStart,n,r,i,o),e.arrowTypeEnd&&g(t,"end",e.arrowTypeEnd,n,r,i,o)},"addEdgeMarkers"),f={arrow_cross:{type:"cross",fill:!1},arrow_point:{type:"point",fill:!0},arrow_barb:{type:"barb",fill:!0},arrow_circle:{type:"circle",fill:!1},aggregation:{type:"aggregation",fill:!1},extension:{type:"extension",fill:!1},composition:{type:"composition",fill:!0},dependency:{type:"dependency",fill:!0},lollipop:{type:"lollipop",fill:!1},only_one:{type:"onlyOne",fill:!1},zero_or_one:{type:"zeroOrOne",fill:!1},one_or_more:{type:"oneOrMore",fill:!1},zero_or_more:{type:"zeroOrMore",fill:!1},requirement_arrow:{type:"requirement_arrow",fill:!1},requirement_contains:{type:"requirement_contains",fill:!1}},g=(0,h.K2)((t,e,n,r,i,o,a)=>{const s=f[n];if(!s)return void h.Rm.warn(`Unknown arrow type: ${n}`);const l=`${i}_${o}-${s.type}${"start"===e?"Start":"End"}`;if(a&&""!==a.trim()){const n=`${l}_${a.replace(/[^\dA-Za-z]/g,"_")}`;if(!document.getElementById(n)){const t=document.getElementById(l);if(t){const e=t.cloneNode(!0);e.id=n,e.querySelectorAll("path, circle, line").forEach(t=>{t.setAttribute("stroke",a),s.fill&&t.setAttribute("fill",a)}),t.parentNode?.appendChild(e)}}t.attr(`marker-${e}`,`url(${r}#${n})`)}else t.attr(`marker-${e}`,`url(${r}#${l})`)},"addEdgeMarker"),m=new Map,A=new Map,y=(0,h.K2)(()=>{m.clear(),A.clear()},"clear"),b=(0,h.K2)(t=>t?t.reduce((t,e)=>t+";"+e,""):"","getLabelStyles"),x=(0,h.K2)(async(t,e)=>{let n=(0,c._3)((0,c.D7)().flowchart.htmlLabels);const{labelStyles:r}=(0,a.GX)(e);e.labelStyle=r;const o=await(0,s.GZ)(t,e.label,{style:e.labelStyle,useHtmlLabels:n,addSvgBackground:!0,isNode:!1});h.Rm.info("abc82",e,e.labelType);const l=t.insert("g").attr("class","edgeLabel"),d=l.insert("g").attr("class","label").attr("data-id",e.id);d.node().appendChild(o);let p,f=o.getBBox();if(n){const t=o.children[0],e=(0,u.Ltv)(o);f=t.getBoundingClientRect(),e.attr("width",f.width),e.attr("height",f.height)}if(d.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),m.set(e.id,l),e.width=f.width,e.height=f.height,e.startLabelLeft){const n=await(0,i.DA)(e.startLabelLeft,b(e.labelStyle)),r=t.insert("g").attr("class","edgeTerminals"),o=r.insert("g").attr("class","inner");p=o.node().appendChild(n);const a=n.getBBox();o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),A.get(e.id)||A.set(e.id,{}),A.get(e.id).startLeft=r,v(p,e.startLabelLeft)}if(e.startLabelRight){const n=await(0,i.DA)(e.startLabelRight,b(e.labelStyle)),r=t.insert("g").attr("class","edgeTerminals"),o=r.insert("g").attr("class","inner");p=r.node().appendChild(n),o.node().appendChild(n);const a=n.getBBox();o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),A.get(e.id)||A.set(e.id,{}),A.get(e.id).startRight=r,v(p,e.startLabelRight)}if(e.endLabelLeft){const n=await(0,i.DA)(e.endLabelLeft,b(e.labelStyle)),r=t.insert("g").attr("class","edgeTerminals"),o=r.insert("g").attr("class","inner");p=o.node().appendChild(n);const a=n.getBBox();o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),r.node().appendChild(n),A.get(e.id)||A.set(e.id,{}),A.get(e.id).endLeft=r,v(p,e.endLabelLeft)}if(e.endLabelRight){const n=await(0,i.DA)(e.endLabelRight,b(e.labelStyle)),r=t.insert("g").attr("class","edgeTerminals"),o=r.insert("g").attr("class","inner");p=o.node().appendChild(n);const a=n.getBBox();o.attr("transform","translate("+-a.width/2+", "+-a.height/2+")"),r.node().appendChild(n),A.get(e.id)||A.set(e.id,{}),A.get(e.id).endRight=r,v(p,e.endLabelRight)}return o},"insertEdgeLabel");function v(t,e){(0,c.D7)().flowchart.htmlLabels&&t&&(t.style.width=9*e.length+"px",t.style.height="12px")}(0,h.K2)(v,"setTerminalWidth");var C=(0,h.K2)((t,e)=>{h.Rm.debug("Moving label abc88 ",t.id,t.label,m.get(t.id),e);let n=e.updatedPath?e.updatedPath:e.originalPath;const r=(0,c.D7)(),{subGraphTitleTotalMargin:i}=(0,o.O)(r);if(t.label){const r=m.get(t.id);let o=t.x,a=t.y;if(n){const r=l._K.calcLabelPosition(n);h.Rm.debug("Moving label "+t.label+" from (",o,",",a,") to (",r.x,",",r.y,") abc88"),e.updatedPath&&(o=r.x,a=r.y)}r.attr("transform",`translate(${o}, ${a+i/2})`)}if(t.startLabelLeft){const e=A.get(t.id).startLeft;let r=t.x,i=t.y;if(n){const e=l._K.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_left",n);r=e.x,i=e.y}e.attr("transform",`translate(${r}, ${i})`)}if(t.startLabelRight){const e=A.get(t.id).startRight;let r=t.x,i=t.y;if(n){const e=l._K.calcTerminalLabelPosition(t.arrowTypeStart?10:0,"start_right",n);r=e.x,i=e.y}e.attr("transform",`translate(${r}, ${i})`)}if(t.endLabelLeft){const e=A.get(t.id).endLeft;let r=t.x,i=t.y;if(n){const e=l._K.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_left",n);r=e.x,i=e.y}e.attr("transform",`translate(${r}, ${i})`)}if(t.endLabelRight){const e=A.get(t.id).endRight;let r=t.x,i=t.y;if(n){const e=l._K.calcTerminalLabelPosition(t.arrowTypeEnd?10:0,"end_right",n);r=e.x,i=e.y}e.attr("transform",`translate(${r}, ${i})`)}},"positionEdgeLabel"),k=(0,h.K2)((t,e)=>{const n=t.x,r=t.y,i=Math.abs(e.x-n),o=Math.abs(e.y-r),a=t.width/2,s=t.height/2;return i>=a||o>=s},"outsideNode"),w=(0,h.K2)((t,e,n)=>{h.Rm.debug(`intersection calc abc89:\n  outsidePoint: ${JSON.stringify(e)}\n  insidePoint : ${JSON.stringify(n)}\n  node        : x:${t.x} y:${t.y} w:${t.width} h:${t.height}`);const r=t.x,i=t.y,o=Math.abs(r-n.x),a=t.width/2;let s=n.x<e.x?a-o:a+o;const l=t.height/2,c=Math.abs(e.y-n.y),u=Math.abs(e.x-n.x);if(Math.abs(i-e.y)*a>Math.abs(r-e.x)*l){let t=n.y<e.y?e.y-l-i:i-l-e.y;s=u*t/c;const r={x:n.x<e.x?n.x+s:n.x-u+s,y:n.y<e.y?n.y+c-t:n.y-c+t};return 0===s&&(r.x=e.x,r.y=e.y),0===u&&(r.x=e.x),0===c&&(r.y=e.y),h.Rm.debug(`abc89 top/bottom calc, Q ${c}, q ${t}, R ${u}, r ${s}`,r),r}{s=n.x<e.x?e.x-a-r:r-a-e.x;let t=c*s/u,i=n.x<e.x?n.x+u-s:n.x-u+s,o=n.y<e.y?n.y+t:n.y-t;return h.Rm.debug(`sides calc abc89, Q ${c}, q ${t}, R ${u}, r ${s}`,{_x:i,_y:o}),0===s&&(i=e.x,o=e.y),0===u&&(i=e.x),0===c&&(o=e.y),{x:i,y:o}}},"intersection"),B=(0,h.K2)((t,e)=>{h.Rm.warn("abc88 cutPathAtIntersect",t,e);let n=[],r=t[0],i=!1;return t.forEach(t=>{if(h.Rm.info("abc88 checking point",t,e),k(e,t)||i)h.Rm.warn("abc88 outside",t,r),r=t,i||n.push(t);else{const o=w(e,r,t);h.Rm.debug("abc88 inside",t,r,o),h.Rm.debug("abc88 intersection",o,e);let a=!1;n.forEach(t=>{a=a||t.x===o.x&&t.y===o.y}),n.some(t=>t.x===o.x&&t.y===o.y)?h.Rm.warn("abc88 no intersect",o,n):n.push(o),i=!0}}),h.Rm.debug("returning points",n),n},"cutPathAtIntersect");function I(t){const e=[],n=[];for(let r=1;r<t.length-1;r++){const i=t[r-1],o=t[r],a=t[r+1];(i.x===o.x&&o.y===a.y&&Math.abs(o.x-a.x)>5&&Math.abs(o.y-i.y)>5||i.y===o.y&&o.x===a.x&&Math.abs(o.x-i.x)>5&&Math.abs(o.y-a.y)>5)&&(e.push(o),n.push(r))}return{cornerPoints:e,cornerPointPositions:n}}(0,h.K2)(I,"extractCornerPoints");var S=(0,h.K2)(function(t,e,n){const r=e.x-t.x,i=e.y-t.y,o=n/Math.sqrt(r*r+i*i);return{x:e.x-o*r,y:e.y-o*i}},"findAdjacentPoint"),_=(0,h.K2)(function(t){const{cornerPointPositions:e}=I(t),n=[];for(let r=0;r<t.length;r++)if(e.includes(r)){const e=t[r-1],i=t[r+1],o=t[r],a=S(e,o,5),s=S(i,o,5),l=s.x-a.x,c=s.y-a.y;n.push(a);const u=2*Math.sqrt(2);let d={x:o.x,y:o.y};if(Math.abs(i.x-e.x)>10&&Math.abs(i.y-e.y)>=10){h.Rm.debug("Corner point fixing",Math.abs(i.x-e.x),Math.abs(i.y-e.y));const t=5;d=o.x===a.x?{x:l<0?a.x-t+u:a.x+t-u,y:c<0?a.y-u:a.y+u}:{x:l<0?a.x-u:a.x+u,y:c<0?a.y-t+u:a.y+t-u}}else h.Rm.debug("Corner point skipping fixing",Math.abs(i.x-e.x),Math.abs(i.y-e.y));n.push(d,s)}else n.push(t[r]);return n},"fixCorners"),E=(0,h.K2)((t,e,n)=>{const r=t-e-n,i=Math.floor(r/4);return`0 ${e} ${Array(i).fill("2 2").join(" ")} ${n}`},"generateDashArray"),T=(0,h.K2)(function(t,e,n,i,o,s,f,g=!1){const{handDrawnSeed:m}=(0,c.D7)();let A=e.points,y=!1;const b=o;var x=s;const v=[];for(const t in e.cssCompiledStyles)(0,a.KX)(t)||v.push(e.cssCompiledStyles[t]);h.Rm.debug("UIO intersect check",e.points,x.x,b.x),x.intersect&&b.intersect&&!g&&(A=A.slice(1,e.points.length-1),A.unshift(b.intersect(A[0])),h.Rm.debug("Last point UIO",e.start,"--\x3e",e.end,A[A.length-1],x,x.intersect(A[A.length-1])),A.push(x.intersect(A[A.length-1])));const C=btoa(JSON.stringify(A));e.toCluster&&(h.Rm.info("to cluster abc88",n.get(e.toCluster)),A=B(e.points,n.get(e.toCluster).node),y=!0),e.fromCluster&&(h.Rm.debug("from cluster abc88",n.get(e.fromCluster),JSON.stringify(A,null,2)),A=B(A.reverse(),n.get(e.fromCluster).node).reverse(),y=!0);let k=A.filter(t=>!Number.isNaN(t.y));k=_(k);let w=u.qrM;switch(w=u.lUB,e.curve){case"linear":w=u.lUB;break;case"basis":default:w=u.qrM;break;case"cardinal":w=u.y8u;break;case"bumpX":w=u.Wi0;break;case"bumpY":w=u.PGM;break;case"catmullRom":w=u.oDi;break;case"monotoneX":w=u.nVG;break;case"monotoneY":w=u.uxU;break;case"natural":w=u.Xf2;break;case"step":w=u.GZz;break;case"stepAfter":w=u.UPb;break;case"stepBefore":w=u.dyv}const{x:I,y:S}=(0,r.RI)(e),T=(0,u.n8j)().x(I).y(S).curve(w);let L,D;switch(e.thickness){case"normal":default:L="edge-thickness-normal";break;case"thick":L="edge-thickness-thick";break;case"invisible":L="edge-thickness-invisible"}switch(e.pattern){case"solid":default:L+=" edge-pattern-solid";break;case"dotted":L+=" edge-pattern-dotted";break;case"dashed":L+=" edge-pattern-dashed"}let P="rounded"===e.curve?M(O(k,e),5):T(k);const F=Array.isArray(e.style)?e.style:[e.style];let j=F.find(t=>t?.startsWith("stroke:")),z=!1;if("handDrawn"===e.look){const n=d.A.svg(t);Object.assign([],k);const r=n.path(P,{roughness:.3,seed:m});L+=" transition",D=(0,u.Ltv)(r).select("path").attr("id",e.id).attr("class"," "+L+(e.classes?" "+e.classes:"")).attr("style",F?F.reduce((t,e)=>t+";"+e,""):"");let i=D.attr("d");D.attr("d",i),t.node().appendChild(D.node())}else{const n=v.join(";"),i=F?F.reduce((t,e)=>t+e+";",""):"";let o="";e.animate&&(o=" edge-animation-fast"),e.animation&&(o=" edge-animation-"+e.animation);const a=(n?n+";"+i+";":i)+";"+(F?F.reduce((t,e)=>t+";"+e,""):"");D=t.append("path").attr("d",P).attr("id",e.id).attr("class"," "+L+(e.classes?" "+e.classes:"")+(o??"")).attr("style",a),j=a.match(/stroke:([^;]+)/)?.[1],z=!0===e.animate||!!e.animation||n.includes("animation");const s=D.node(),l="function"==typeof s.getTotalLength?s.getTotalLength():0,c=r.Nq[e.arrowTypeStart]||0,h=r.Nq[e.arrowTypeEnd]||0;if("neo"===e.look&&!z){const t=`stroke-dasharray: ${"dotted"===e.pattern||"dashed"===e.pattern?E(l,c,h):`0 ${c} ${l-c-h} ${h}`}; stroke-dashoffset: 0;`;D.attr("style",t+D.attr("style"))}}D.attr("data-edge",!0),D.attr("data-et","edge"),D.attr("data-id",e.id),D.attr("data-points",C),e.showPoints&&k.forEach(e=>{t.append("circle").style("stroke","red").style("fill","red").attr("r",1).attr("cx",e.x).attr("cy",e.y)});let $="";((0,c.D7)().flowchart.arrowMarkerAbsolute||(0,c.D7)().state.arrowMarkerAbsolute)&&($=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,$=$.replace(/\(/g,"\\(").replace(/\)/g,"\\)")),h.Rm.info("arrowTypeStart",e.arrowTypeStart),h.Rm.info("arrowTypeEnd",e.arrowTypeEnd),p(D,e,$,f,i,j);const R=A[Math.floor(A.length/2)];l._K.isLabelCoordinateInPath(R,D.attr("d"))||(y=!0);let N={};return y&&(N.updatedPath=A),N.originalPath=e.points,N},"insertEdge");function M(t,e){if(t.length<2)return"";let n="";const r=t.length,i=1e-5;for(let o=0;o<r;o++){const a=t[o],s=t[o-1],l=t[o+1];if(0===o)n+=`M${a.x},${a.y}`;else if(o===r-1)n+=`L${a.x},${a.y}`;else{const t=a.x-s.x,r=a.y-s.y,o=l.x-a.x,c=l.y-a.y,h=Math.hypot(t,r),u=Math.hypot(o,c);if(h<i||u<i){n+=`L${a.x},${a.y}`;continue}const d=t/h,p=r/h,f=o/u,g=c/u,m=d*f+p*g,A=Math.max(-1,Math.min(1,m)),y=Math.acos(A);if(y<i||Math.abs(Math.PI-y)<i){n+=`L${a.x},${a.y}`;continue}const b=Math.min(e/Math.sin(y/2),h/2,u/2),x=a.x-d*b,v=a.y-p*b,C=a.x+f*b,k=a.y+g*b;n+=`L${x},${v}`,n+=`Q${a.x},${a.y} ${C},${k}`}}return n}function L(t,e){if(!t||!e)return{angle:0,deltaX:0,deltaY:0};const n=e.x-t.x,r=e.y-t.y;return{angle:Math.atan2(r,n),deltaX:n,deltaY:r}}function O(t,e){const n=t.map(t=>({...t}));if(t.length>=2&&r.hq[e.arrowTypeStart]){const i=r.hq[e.arrowTypeStart],o=t[0],a=t[1],{angle:s}=L(o,a),l=i*Math.cos(s),c=i*Math.sin(s);n[0].x=o.x+l,n[0].y=o.y+c}const i=t.length;if(i>=2&&r.hq[e.arrowTypeEnd]){const o=r.hq[e.arrowTypeEnd],a=t[i-1],s=t[i-2],{angle:l}=L(s,a),c=o*Math.cos(l),h=o*Math.sin(l);n[i-1].x=a.x-c,n[i-1].y=a.y-h}return n}(0,h.K2)(M,"generateRoundedPath"),(0,h.K2)(L,"calculateDeltaAndAngle"),(0,h.K2)(O,"applyMarkerOffsetsToPoints");var D=(0,h.K2)((t,e,n,r)=>{e.forEach(e=>{P[e](t,n,r)})},"insertMarkers"),P={extension:(0,h.K2)((t,e,n)=>{h.Rm.trace("Making markers for ",n),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionStart").attr("class","marker extension "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 1,7 L18,13 V 1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-extensionEnd").attr("class","marker extension "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 1,1 V 13 L18,7 Z")},"extension"),composition:(0,h.K2)((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionStart").attr("class","marker composition "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-compositionEnd").attr("class","marker composition "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"composition"),aggregation:(0,h.K2)((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationStart").attr("class","marker aggregation "+e).attr("refX",18).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-aggregationEnd").attr("class","marker aggregation "+e).attr("refX",1).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L1,7 L9,1 Z")},"aggregation"),dependency:(0,h.K2)((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyStart").attr("class","marker dependency "+e).attr("refX",6).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("path").attr("d","M 5,7 L9,13 L1,7 L9,1 Z"),t.append("defs").append("marker").attr("id",n+"_"+e+"-dependencyEnd").attr("class","marker dependency "+e).attr("refX",13).attr("refY",7).attr("markerWidth",20).attr("markerHeight",28).attr("orient","auto").append("path").attr("d","M 18,7 L9,13 L14,7 L9,1 Z")},"dependency"),lollipop:(0,h.K2)((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopStart").attr("class","marker lollipop "+e).attr("refX",13).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6),t.append("defs").append("marker").attr("id",n+"_"+e+"-lollipopEnd").attr("class","marker lollipop "+e).attr("refX",1).attr("refY",7).attr("markerWidth",190).attr("markerHeight",240).attr("orient","auto").append("circle").attr("stroke","black").attr("fill","transparent").attr("cx",7).attr("cy",7).attr("r",6)},"lollipop"),point:(0,h.K2)((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-pointEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 0 L 10 5 L 0 10 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-pointStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",4.5).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",8).attr("markerHeight",8).attr("orient","auto").append("path").attr("d","M 0 5 L 10 10 L 10 0 z").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"point"),circle:(0,h.K2)((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-circleEnd").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",11).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-circleStart").attr("class","marker "+e).attr("viewBox","0 0 10 10").attr("refX",-1).attr("refY",5).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("circle").attr("cx","5").attr("cy","5").attr("r","5").attr("class","arrowMarkerPath").style("stroke-width",1).style("stroke-dasharray","1,0")},"circle"),cross:(0,h.K2)((t,e,n)=>{t.append("marker").attr("id",n+"_"+e+"-crossEnd").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",12).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0"),t.append("marker").attr("id",n+"_"+e+"-crossStart").attr("class","marker cross "+e).attr("viewBox","0 0 11 11").attr("refX",-1).attr("refY",5.2).attr("markerUnits","userSpaceOnUse").attr("markerWidth",11).attr("markerHeight",11).attr("orient","auto").append("path").attr("d","M 1,1 l 9,9 M 10,1 l -9,9").attr("class","arrowMarkerPath").style("stroke-width",2).style("stroke-dasharray","1,0")},"cross"),barb:(0,h.K2)((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-barbEnd").attr("refX",19).attr("refY",7).attr("markerWidth",20).attr("markerHeight",14).attr("markerUnits","userSpaceOnUse").attr("orient","auto").append("path").attr("d","M 19,7 L9,13 L14,7 L9,1 Z")},"barb"),only_one:(0,h.K2)((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneStart").attr("class","marker onlyOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M9,0 L9,18 M15,0 L15,18"),t.append("defs").append("marker").attr("id",n+"_"+e+"-onlyOneEnd").attr("class","marker onlyOne "+e).attr("refX",18).attr("refY",9).attr("markerWidth",18).attr("markerHeight",18).attr("orient","auto").append("path").attr("d","M3,0 L3,18 M9,0 L9,18")},"only_one"),zero_or_one:(0,h.K2)((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneStart").attr("class","marker zeroOrOne "+e).attr("refX",0).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",21).attr("cy",9).attr("r",6),r.append("path").attr("d","M9,0 L9,18");const i=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrOneEnd").attr("class","marker zeroOrOne "+e).attr("refX",30).attr("refY",9).attr("markerWidth",30).attr("markerHeight",18).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",9).attr("r",6),i.append("path").attr("d","M21,0 L21,18")},"zero_or_one"),one_or_more:(0,h.K2)((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreStart").attr("class","marker oneOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M0,18 Q 18,0 36,18 Q 18,36 0,18 M42,9 L42,27"),t.append("defs").append("marker").attr("id",n+"_"+e+"-oneOrMoreEnd").attr("class","marker oneOrMore "+e).attr("refX",27).attr("refY",18).attr("markerWidth",45).attr("markerHeight",36).attr("orient","auto").append("path").attr("d","M3,9 L3,27 M9,18 Q27,0 45,18 Q27,36 9,18")},"one_or_more"),zero_or_more:(0,h.K2)((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreStart").attr("class","marker zeroOrMore "+e).attr("refX",18).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");r.append("circle").attr("fill","white").attr("cx",48).attr("cy",18).attr("r",6),r.append("path").attr("d","M0,18 Q18,0 36,18 Q18,36 0,18");const i=t.append("defs").append("marker").attr("id",n+"_"+e+"-zeroOrMoreEnd").attr("class","marker zeroOrMore "+e).attr("refX",39).attr("refY",18).attr("markerWidth",57).attr("markerHeight",36).attr("orient","auto");i.append("circle").attr("fill","white").attr("cx",9).attr("cy",18).attr("r",6),i.append("path").attr("d","M21,18 Q39,0 57,18 Q39,36 21,18")},"zero_or_more"),requirement_arrow:(0,h.K2)((t,e,n)=>{t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_arrowEnd").attr("refX",20).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("path").attr("d","M0,0\n      L20,10\n      M20,10\n      L0,20")},"requirement_arrow"),requirement_contains:(0,h.K2)((t,e,n)=>{const r=t.append("defs").append("marker").attr("id",n+"_"+e+"-requirement_containsStart").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").append("g");r.append("circle").attr("cx",10).attr("cy",10).attr("r",9).attr("fill","none"),r.append("line").attr("x1",1).attr("x2",19).attr("y1",10).attr("y2",10),r.append("line").attr("y1",1).attr("y2",19).attr("x1",10).attr("x2",10)},"requirement_contains")},F=D},5254:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},5894:(t,e,n)=>{"use strict";n.d(e,{DA:()=>v,IU:()=>T,U:()=>E,U7:()=>Ie,U_:()=>_e,Zk:()=>u,aP:()=>ke,gh:()=>Se,lC:()=>p,on:()=>Be});var r=n(63245),i=n(32387),o=n(70607),a=n(13226),s=n(80144),l=n(40797),c=n(51444),h=n(52274),u=(0,l.K2)(async(t,e,n)=>{let r;const i=e.useHtmlLabels||(0,s._3)((0,s.D7)()?.htmlLabels);r=n||"node default";const h=t.insert("g").attr("class",r).attr("id",e.domId||e.id),u=h.insert("g").attr("class","label").attr("style",(0,a.KL)(e.labelStyle));let d;d=void 0===e.label?"":"string"==typeof e.label?e.label:e.label[0];const p=await(0,o.GZ)(u,(0,s.jZ)((0,a.Sm)(d),(0,s.D7)()),{useHtmlLabels:i,width:e.width||(0,s.D7)().flowchart?.wrappingWidth,cssClasses:"markdown-node-label",style:e.labelStyle,addSvgBackground:!!e.icon||!!e.img});let f=p.getBBox();const g=(e?.padding??0)/2;if(i){const t=p.children[0],e=(0,c.Ltv)(p),n=t.getElementsByTagName("img");if(n){const t=""===d.replace(/<img[^>]*>/g,"").trim();await Promise.all([...n].map(e=>new Promise(n=>{function r(){if(e.style.display="flex",e.style.flexDirection="column",t){const t=(0,s.D7)().fontSize?(0,s.D7)().fontSize:window.getComputedStyle(document.body).fontSize,n=5,[r=s.UI.fontSize]=(0,a.I5)(t),i=r*n+"px";e.style.minWidth=i,e.style.maxWidth=i}else e.style.width="100%";n(e)}(0,l.K2)(r,"setupImage"),setTimeout(()=>{e.complete&&r()}),e.addEventListener("error",r),e.addEventListener("load",r)})))}f=t.getBoundingClientRect(),e.attr("width",f.width),e.attr("height",f.height)}return i?u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"):u.attr("transform","translate(0, "+-f.height/2+")"),e.centerLabel&&u.attr("transform","translate("+-f.width/2+", "+-f.height/2+")"),u.insert("rect",":first-child"),{shapeSvg:h,bbox:f,halfPadding:g,label:u}},"labelHelper"),d=(0,l.K2)(async(t,e,n)=>{const r=n.useHtmlLabels||(0,s._3)((0,s.D7)()?.flowchart?.htmlLabels),i=t.insert("g").attr("class","label").attr("style",n.labelStyle||""),l=await(0,o.GZ)(i,(0,s.jZ)((0,a.Sm)(e),(0,s.D7)()),{useHtmlLabels:r,width:n.width||(0,s.D7)()?.flowchart?.wrappingWidth,style:n.labelStyle,addSvgBackground:!!n.icon||!!n.img});let h=l.getBBox();const u=n.padding/2;if((0,s._3)((0,s.D7)()?.flowchart?.htmlLabels)){const t=l.children[0],e=(0,c.Ltv)(l);h=t.getBoundingClientRect(),e.attr("width",h.width),e.attr("height",h.height)}return r?i.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"):i.attr("transform","translate(0, "+-h.height/2+")"),n.centerLabel&&i.attr("transform","translate("+-h.width/2+", "+-h.height/2+")"),i.insert("rect",":first-child"),{shapeSvg:t,bbox:h,halfPadding:u,label:i}},"insertLabel"),p=(0,l.K2)((t,e)=>{const n=e.node().getBBox();t.width=n.width,t.height=n.height},"updateNodeBounds"),f=(0,l.K2)((t,e)=>("handDrawn"===t.look?"rough-node":"node")+" "+t.cssClasses+" "+(e||""),"getNodeClasses");function g(t){const e=t.map((t,e)=>`${0===e?"M":"L"}${t.x},${t.y}`);return e.push("Z"),e.join(" ")}function m(t,e,n,r,i,o){const a=[],s=n-t,l=r-e,c=s/o,h=2*Math.PI/c,u=e+l/2;for(let e=0;e<=50;e++){const n=t+e/50*s,r=u+i*Math.sin(h*(n-t));a.push({x:n,y:r})}return a}function A(t,e,n,r,i,o){const a=[],s=i*Math.PI/180,l=(o*Math.PI/180-s)/(r-1);for(let i=0;i<r;i++){const r=s+i*l,o=t+n*Math.cos(r),c=e+n*Math.sin(r);a.push({x:-o,y:-c})}return a}(0,l.K2)(g,"createPathFromPoints"),(0,l.K2)(m,"generateFullSineWavePoints"),(0,l.K2)(A,"generateCirclePoints");var y=(0,l.K2)((t,e)=>{var n,r,i=t.x,o=t.y,a=e.x-i,s=e.y-o,l=t.width/2,c=t.height/2;return Math.abs(s)*l>Math.abs(a)*c?(s<0&&(c=-c),n=0===s?0:c*a/s,r=c):(a<0&&(l=-l),n=l,r=0===a?0:l*s/a),{x:i+n,y:o+r}},"intersectRect");function b(t,e){e&&t.attr("style",e)}async function x(t){const e=(0,c.Ltv)(document.createElementNS("http://www.w3.org/2000/svg","foreignObject")),n=e.append("xhtml:div"),r=(0,s.D7)();let i=t.label;t.label&&(0,s.Wi)(t.label)&&(i=await(0,s.dj)(t.label.replace(s.Y2.lineBreakRegex,"\n"),r));const o='<span class="'+(t.isNode?"nodeLabel":"edgeLabel")+'" '+(t.labelStyle?'style="'+t.labelStyle+'"':"")+">"+i+"</span>";return n.html((0,s.jZ)(o,r)),b(n,t.labelStyle),n.style("display","inline-block"),n.style("padding-right","1px"),n.style("white-space","nowrap"),n.attr("xmlns","http://www.w3.org/1999/xhtml"),e.node()}(0,l.K2)(b,"applyStyle"),(0,l.K2)(x,"addHtmlLabel");var v=(0,l.K2)(async(t,e,n,r)=>{let i=t||"";if("object"==typeof i&&(i=i[0]),(0,s._3)((0,s.D7)().flowchart.htmlLabels)){i=i.replace(/\\n|\n/g,"<br />"),l.Rm.info("vertexText"+i);const t={isNode:r,label:(0,a.Sm)(i).replace(/fa[blrs]?:fa-[\w-]+/g,t=>`<i class='${t.replace(":"," ")}'></i>`),labelStyle:e?e.replace("fill:","color:"):e};return await x(t)}{const t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttribute("style",e.replace("color:","fill:"));let r=[];r="string"==typeof i?i.split(/\\n|\n|<br\s*\/?>/gi):Array.isArray(i)?i:[];for(const e of r){const r=document.createElementNS("http://www.w3.org/2000/svg","tspan");r.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),r.setAttribute("dy","1em"),r.setAttribute("x","0"),n?r.setAttribute("class","title-row"):r.setAttribute("class","row"),r.textContent=e.trim(),t.appendChild(r)}return t}},"createLabel"),C=(0,l.K2)((t,e,n,r,i)=>["M",t+i,e,"H",t+n-i,"A",i,i,0,0,1,t+n,e+i,"V",e+r-i,"A",i,i,0,0,1,t+n-i,e+r,"H",t+i,"A",i,i,0,0,1,t,e+r-i,"V",e+i,"A",i,i,0,0,1,t+i,e,"Z"].join(" "),"createRoundedRectPathD"),k=(0,l.K2)(async(t,e)=>{l.Rm.info("Creating subgraph rect for ",e.id,e);const n=(0,s.D7)(),{themeVariables:a,handDrawnSeed:u}=n,{clusterBkg:d,clusterBorder:p}=a,{labelStyles:f,nodeStyles:g,borderStyles:m,backgroundStyles:A}=(0,i.GX)(e),b=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),x=(0,s._3)(n.flowchart.htmlLabels),v=b.insert("g").attr("class","cluster-label "),k=await(0,o.GZ)(v,e.label,{style:e.labelStyle,useHtmlLabels:x,isNode:!0});let w=k.getBBox();if((0,s._3)(n.flowchart.htmlLabels)){const t=k.children[0],e=(0,c.Ltv)(k);w=t.getBoundingClientRect(),e.attr("width",w.width),e.attr("height",w.height)}const B=e.width<=w.width+e.padding?w.width+e.padding:e.width;e.width<=w.width+e.padding?e.diff=(B-e.width)/2-e.padding:e.diff=-e.padding;const I=e.height,S=e.x-B/2,_=e.y-I/2;let E;if(l.Rm.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){const t=h.A.svg(b),n=(0,i.Fr)(e,{roughness:.7,fill:d,stroke:p,fillWeight:3,seed:u}),r=t.path(C(S,_,B,I,0),n);E=b.insert(()=>(l.Rm.debug("Rough node insert CXC",r),r),":first-child"),E.select("path:nth-child(2)").attr("style",m.join(";")),E.select("path").attr("style",A.join(";").replace("fill","stroke"))}else E=b.insert("rect",":first-child"),E.attr("style",g).attr("rx",e.rx).attr("ry",e.ry).attr("x",S).attr("y",_).attr("width",B).attr("height",I);const{subGraphTitleTopMargin:T}=(0,r.O)(n);if(v.attr("transform",`translate(${e.x-w.width/2}, ${e.y-e.height/2+T})`),f){const t=v.select("span");t&&t.attr("style",f)}const M=E.node().getBBox();return e.offsetX=0,e.width=M.width,e.height=M.height,e.offsetY=w.height-e.padding/2,e.intersect=function(t){return y(e,t)},{cluster:b,labelBBox:w}},"rect"),w=(0,l.K2)((t,e)=>{const n=t.insert("g").attr("class","note-cluster").attr("id",e.id),r=n.insert("rect",":first-child"),i=0*e.padding,o=i/2;r.attr("rx",e.rx).attr("ry",e.ry).attr("x",e.x-e.width/2-o).attr("y",e.y-e.height/2-o).attr("width",e.width+i).attr("height",e.height+i).attr("fill","none");const a=r.node().getBBox();return e.width=a.width,e.height=a.height,e.intersect=function(t){return y(e,t)},{cluster:n,labelBBox:{width:0,height:0}}},"noteGroup"),B=(0,l.K2)(async(t,e)=>{const n=(0,s.D7)(),{themeVariables:r,handDrawnSeed:i}=n,{altBackground:o,compositeBackground:a,compositeTitleBackground:l,nodeBorder:u}=r,d=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-id",e.id).attr("data-look",e.look),p=d.insert("g",":first-child"),f=d.insert("g").attr("class","cluster-label");let g=d.append("rect");const m=f.node().appendChild(await v(e.label,e.labelStyle,void 0,!0));let A=m.getBBox();if((0,s._3)(n.flowchart.htmlLabels)){const t=m.children[0],e=(0,c.Ltv)(m);A=t.getBoundingClientRect(),e.attr("width",A.width),e.attr("height",A.height)}const b=0*e.padding,x=b/2,k=(e.width<=A.width+e.padding?A.width+e.padding:e.width)+b;e.width<=A.width+e.padding?e.diff=(k-e.width)/2-e.padding:e.diff=-e.padding;const w=e.height+b,B=e.height+b-A.height-6,I=e.x-k/2,S=e.y-w/2;e.width=k;const _=e.y-e.height/2-x+A.height+2;let E;if("handDrawn"===e.look){const t=e.cssClasses.includes("statediagram-cluster-alt"),n=h.A.svg(d),r=e.rx||e.ry?n.path(C(I,S,k,w,10),{roughness:.7,fill:l,fillStyle:"solid",stroke:u,seed:i}):n.rectangle(I,S,k,w,{seed:i});E=d.insert(()=>r,":first-child");const s=n.rectangle(I,_,k,B,{fill:t?o:a,fillStyle:t?"hachure":"solid",stroke:u,seed:i});E=d.insert(()=>r,":first-child"),g=d.insert(()=>s)}else{E=p.insert("rect",":first-child");const t="outer";E.attr("class",t).attr("x",I).attr("y",S).attr("width",k).attr("height",w).attr("data-look",e.look),g.attr("class","inner").attr("x",I).attr("y",_).attr("width",k).attr("height",B)}f.attr("transform",`translate(${e.x-A.width/2}, ${S+1-((0,s._3)(n.flowchart.htmlLabels)?0:3)})`);const T=E.node().getBBox();return e.height=T.height,e.offsetX=0,e.offsetY=A.height-e.padding/2,e.labelBBox=A,e.intersect=function(t){return y(e,t)},{cluster:d,labelBBox:A}},"roundedWithTitle"),I=(0,l.K2)(async(t,e)=>{l.Rm.info("Creating subgraph rect for ",e.id,e);const n=(0,s.D7)(),{themeVariables:a,handDrawnSeed:u}=n,{clusterBkg:d,clusterBorder:p}=a,{labelStyles:f,nodeStyles:g,borderStyles:m,backgroundStyles:A}=(0,i.GX)(e),b=t.insert("g").attr("class","cluster "+e.cssClasses).attr("id",e.id).attr("data-look",e.look),x=(0,s._3)(n.flowchart.htmlLabels),v=b.insert("g").attr("class","cluster-label "),k=await(0,o.GZ)(v,e.label,{style:e.labelStyle,useHtmlLabels:x,isNode:!0,width:e.width});let w=k.getBBox();if((0,s._3)(n.flowchart.htmlLabels)){const t=k.children[0],e=(0,c.Ltv)(k);w=t.getBoundingClientRect(),e.attr("width",w.width),e.attr("height",w.height)}const B=e.width<=w.width+e.padding?w.width+e.padding:e.width;e.width<=w.width+e.padding?e.diff=(B-e.width)/2-e.padding:e.diff=-e.padding;const I=e.height,S=e.x-B/2,_=e.y-I/2;let E;if(l.Rm.trace("Data ",e,JSON.stringify(e)),"handDrawn"===e.look){const t=h.A.svg(b),n=(0,i.Fr)(e,{roughness:.7,fill:d,stroke:p,fillWeight:4,seed:u}),r=t.path(C(S,_,B,I,e.rx),n);E=b.insert(()=>(l.Rm.debug("Rough node insert CXC",r),r),":first-child"),E.select("path:nth-child(2)").attr("style",m.join(";")),E.select("path").attr("style",A.join(";").replace("fill","stroke"))}else E=b.insert("rect",":first-child"),E.attr("style",g).attr("rx",e.rx).attr("ry",e.ry).attr("x",S).attr("y",_).attr("width",B).attr("height",I);const{subGraphTitleTopMargin:T}=(0,r.O)(n);if(v.attr("transform",`translate(${e.x-w.width/2}, ${e.y-e.height/2+T})`),f){const t=v.select("span");t&&t.attr("style",f)}const M=E.node().getBBox();return e.offsetX=0,e.width=M.width,e.height=M.height,e.offsetY=w.height-e.padding/2,e.intersect=function(t){return y(e,t)},{cluster:b,labelBBox:w}},"kanbanSection"),S={rect:k,squareRect:k,roundedWithTitle:B,noteGroup:w,divider:(0,l.K2)((t,e)=>{const n=(0,s.D7)(),{themeVariables:r,handDrawnSeed:i}=n,{nodeBorder:o}=r,a=t.insert("g").attr("class",e.cssClasses).attr("id",e.id).attr("data-look",e.look),l=a.insert("g",":first-child"),c=0*e.padding,u=e.width+c;e.diff=-e.padding;const d=e.height+c,p=e.x-u/2,f=e.y-d/2;let g;if(e.width=u,"handDrawn"===e.look){const t=h.A.svg(a).rectangle(p,f,u,d,{fill:"lightgrey",roughness:.5,strokeLineDash:[5],stroke:o,seed:i});g=a.insert(()=>t,":first-child")}else{g=l.insert("rect",":first-child");const t="divider";g.attr("class",t).attr("x",p).attr("y",f).attr("width",u).attr("height",d).attr("data-look",e.look)}const m=g.node().getBBox();return e.height=m.height,e.offsetX=0,e.offsetY=0,e.intersect=function(t){return y(e,t)},{cluster:a,labelBBox:{}}},"divider"),kanbanSection:I},_=new Map,E=(0,l.K2)(async(t,e)=>{const n=e.shape||"rect",r=await S[n](t,e);return _.set(e.id,r),r},"insertCluster"),T=(0,l.K2)(()=>{_=new Map},"clear");function M(t,e){return t.intersect(e)}(0,l.K2)(M,"intersectNode");var L=M;function O(t,e,n,r){var i=t.x,o=t.y,a=i-r.x,s=o-r.y,l=Math.sqrt(e*e*s*s+n*n*a*a),c=Math.abs(e*n*a/l);r.x<i&&(c=-c);var h=Math.abs(e*n*s/l);return r.y<o&&(h=-h),{x:i+c,y:o+h}}(0,l.K2)(O,"intersectEllipse");var D=O;function P(t,e,n){return D(t,e,e,n)}(0,l.K2)(P,"intersectCircle");var F=P;function j(t,e,n,r){{const i=e.y-t.y,o=t.x-e.x,a=e.x*t.y-t.x*e.y,s=i*n.x+o*n.y+a,l=i*r.x+o*r.y+a,c=1e-6;if(0!==s&&0!==l&&z(s,l))return;const h=r.y-n.y,u=n.x-r.x,d=r.x*n.y-n.x*r.y,p=h*t.x+u*t.y+d,f=h*e.x+u*e.y+d;if(Math.abs(p)<c&&Math.abs(f)<c&&z(p,f))return;const g=i*u-h*o;if(0===g)return;const m=Math.abs(g/2);let A=o*d-u*a;const y=A<0?(A-m)/g:(A+m)/g;return A=h*a-i*d,{x:y,y:A<0?(A-m)/g:(A+m)/g}}}function z(t,e){return t*e>0}(0,l.K2)(j,"intersectLine"),(0,l.K2)(z,"sameSign");var $=j;function R(t,e,n){let r=t.x,i=t.y,o=[],a=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY;"function"==typeof e.forEach?e.forEach(function(t){a=Math.min(a,t.x),s=Math.min(s,t.y)}):(a=Math.min(a,e.x),s=Math.min(s,e.y));let l=r-t.width/2-a,c=i-t.height/2-s;for(let r=0;r<e.length;r++){let i=e[r],a=e[r<e.length-1?r+1:0],s=$(t,n,{x:l+i.x,y:c+i.y},{x:l+a.x,y:c+a.y});s&&o.push(s)}return o.length?(o.length>1&&o.sort(function(t,e){let r=t.x-n.x,i=t.y-n.y,o=Math.sqrt(r*r+i*i),a=e.x-n.x,s=e.y-n.y,l=Math.sqrt(a*a+s*s);return o<l?-1:o===l?0:1}),o[0]):t}(0,l.K2)(R,"intersectPolygon");var N={node:L,circle:F,ellipse:D,polygon:R,rect:y};function q(t,e){const{labelStyles:n}=(0,i.GX)(e);e.labelStyle=n;const r=f(e);let o=r;r||(o="anchor");const s=t.insert("g").attr("class",o).attr("id",e.domId||e.id),{cssStyles:c}=e,u=h.A.svg(s),d=(0,i.Fr)(e,{fill:"black",stroke:"none",fillStyle:"solid"});"handDrawn"!==e.look&&(d.roughness=0);const g=u.circle(0,0,2,d),m=s.insert(()=>g,":first-child");return m.attr("class","anchor").attr("style",(0,a.KL)(c)),p(e,m),e.intersect=function(t){return l.Rm.info("Circle intersect",e,1,t),N.circle(e,1,t)},s}function W(t,e,n,r,i,o,a){const s=(t+n)/2,l=(e+r)/2,c=Math.atan2(r-e,n-t),h=(n-t)/2/i,u=(r-e)/2/o,d=Math.sqrt(h**2+u**2);if(d>1)throw new Error("The given radii are too small to create an arc between the points.");const p=Math.sqrt(1-d**2),f=s+p*o*Math.sin(c)*(a?-1:1),g=l-p*i*Math.cos(c)*(a?-1:1),m=Math.atan2((e-g)/o,(t-f)/i);let A=Math.atan2((r-g)/o,(n-f)/i)-m;a&&A<0&&(A+=2*Math.PI),!a&&A>0&&(A-=2*Math.PI);const y=[];for(let t=0;t<20;t++){const e=m+t/19*A,n=f+i*Math.cos(e),r=g+o*Math.sin(e);y.push({x:n,y:r})}return y}async function K(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=a.width+e.padding+20,l=a.height+e.padding,c=l/2,d=c/(2.5+l/50),{cssStyles:m}=e,A=[{x:s/2,y:-l/2},{x:-s/2,y:-l/2},...W(-s/2,-l/2,-s/2,l/2,d,c,!1),{x:s/2,y:l/2},...W(s/2,l/2,s/2,-l/2,d,c,!0)],y=h.A.svg(o),b=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");const x=g(A),v=y.path(x,b),C=o.insert(()=>v,":first-child");return C.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",m),r&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(${d/2}, 0)`),p(e,C),e.intersect=function(t){return N.polygon(e,A,t)},o}function U(t,e,n,r){return t.insert("polygon",":first-child").attr("points",r.map(function(t){return t.x+","+t.y}).join(" ")).attr("class","label-container").attr("transform","translate("+-e/2+","+n/2+")")}async function H(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=a.height+e.padding,l=a.width+e.padding+12,c=-s,d=[{x:12,y:c},{x:l,y:c},{x:l,y:0},{x:0,y:0},{x:0,y:c+12},{x:12,y:c}];let m;const{cssStyles:A}=e;if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{}),r=g(d),a=t.path(r,n);m=o.insert(()=>a,":first-child").attr("transform",`translate(${-l/2}, ${s/2})`),A&&m.attr("style",A)}else m=U(o,l,s,d);return r&&m.attr("style",r),p(e,m),e.intersect=function(t){return N.polygon(e,d,t)},o}function G(t,e){const{nodeStyles:n}=(0,i.GX)(e);e.label="";const r=t.insert("g").attr("class",f(e)).attr("id",e.domId??e.id),{cssStyles:o}=e,a=Math.max(28,e.width??0),s=[{x:0,y:a/2},{x:a/2,y:0},{x:0,y:-a/2},{x:-a/2,y:0}],l=h.A.svg(r),c=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(c.roughness=0,c.fillStyle="solid");const u=g(s),d=l.path(u,c),p=r.insert(()=>d,":first-child");return o&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",o),n&&"handDrawn"!==e.look&&p.selectAll("path").attr("style",n),e.width=28,e.height=28,e.intersect=function(t){return N.polygon(e,s,t)},r}async function Y(t,e,n){const{labelStyles:r,nodeStyles:o}=(0,i.GX)(e);e.labelStyle=r;const{shapeSvg:s,bbox:c,halfPadding:d}=await u(t,e,f(e)),g=n?.padding??d,m=c.width/2+g;let A;const{cssStyles:y}=e;if("handDrawn"===e.look){const t=h.A.svg(s),n=(0,i.Fr)(e,{}),r=t.circle(0,0,2*m,n);A=s.insert(()=>r,":first-child"),A.attr("class","basic label-container").attr("style",(0,a.KL)(y))}else A=s.insert("circle",":first-child").attr("class","basic label-container").attr("style",o).attr("r",m).attr("cx",0).attr("cy",0);return p(e,A),e.calcIntersect=function(t,e){const n=t.width/2;return N.circle(t,n,e)},e.intersect=function(t){return l.Rm.info("Circle intersect",e,m,t),N.circle(e,m,t)},s}function V(t){const e=Math.cos(Math.PI/4),n=Math.sin(Math.PI/4),r=2*t;return`M ${-r/2*e},${r/2*n} L ${r/2*e},${-r/2*n}\n                   M ${r/2*e},${r/2*n} L ${-r/2*e},${-r/2*n}`}function Q(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n,e.label="";const o=t.insert("g").attr("class",f(e)).attr("id",e.domId??e.id),a=Math.max(30,e?.width??0),{cssStyles:s}=e,c=h.A.svg(o),u=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(u.roughness=0,u.fillStyle="solid");const d=c.circle(0,0,2*a,u),g=V(a),m=c.path(g,u),A=o.insert(()=>d,":first-child");return A.insert(()=>m),s&&"handDrawn"!==e.look&&A.selectAll("path").attr("style",s),r&&"handDrawn"!==e.look&&A.selectAll("path").attr("style",r),p(e,A),e.intersect=function(t){return l.Rm.info("crossedCircle intersect",e,{radius:a,point:t}),N.circle(e,a,t)},o}function X(t,e,n,r=100,i=0,o=180){const a=[],s=i*Math.PI/180,l=(o*Math.PI/180-s)/(r-1);for(let i=0;i<r;i++){const r=s+i*l,o=t+n*Math.cos(r),c=e+n*Math.sin(r);a.push({x:-o,y:-c})}return a}async function Z(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=a.width+(e.padding??0),c=a.height+(e.padding??0),d=Math.max(5,.1*c),{cssStyles:m}=e,A=[...X(l/2,-c/2,d,30,-90,0),{x:-l/2-d,y:d},...X(l/2+2*d,-d,d,20,-180,-270),...X(l/2+2*d,d,d,20,-90,-180),{x:-l/2-d,y:-c/2},...X(l/2,c/2,d,20,0,90)],y=[{x:l/2,y:-c/2-d},{x:-l/2,y:-c/2-d},...X(l/2,-c/2,d,20,-90,0),{x:-l/2-d,y:-d},...X(l/2+.1*l,-d,d,20,-180,-270),...X(l/2+.1*l,d,d,20,-90,-180),{x:-l/2-d,y:c/2},...X(l/2,c/2,d,20,0,90),{x:-l/2,y:c/2+d},{x:l/2,y:c/2+d}],b=h.A.svg(o),x=(0,i.Fr)(e,{fill:"none"});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");const v=g(A).replace("Z",""),C=b.path(v,x),k=g(y),w=b.path(k,{...x}),B=o.insert("g",":first-child");return B.insert(()=>w,":first-child").attr("stroke-opacity",0),B.insert(()=>C,":first-child"),B.attr("class","text"),m&&"handDrawn"!==e.look&&B.selectAll("path").attr("style",m),r&&"handDrawn"!==e.look&&B.selectAll("path").attr("style",r),B.attr("transform",`translate(${d}, 0)`),s.attr("transform",`translate(${-l/2+d-(a.x-(a.left??0))},${-c/2+(e.padding??0)/2-(a.y-(a.top??0))})`),p(e,B),e.intersect=function(t){return N.polygon(e,y,t)},o}function J(t,e,n,r=100,i=0,o=180){const a=[],s=i*Math.PI/180,l=(o*Math.PI/180-s)/(r-1);for(let i=0;i<r;i++){const r=s+i*l,o=t+n*Math.cos(r),c=e+n*Math.sin(r);a.push({x:o,y:c})}return a}async function tt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=a.width+(e.padding??0),c=a.height+(e.padding??0),d=Math.max(5,.1*c),{cssStyles:m}=e,A=[...J(l/2,-c/2,d,20,-90,0),{x:l/2+d,y:-d},...J(l/2+2*d,-d,d,20,-180,-270),...J(l/2+2*d,d,d,20,-90,-180),{x:l/2+d,y:c/2},...J(l/2,c/2,d,20,0,90)],y=[{x:-l/2,y:-c/2-d},{x:l/2,y:-c/2-d},...J(l/2,-c/2,d,20,-90,0),{x:l/2+d,y:-d},...J(l/2+2*d,-d,d,20,-180,-270),...J(l/2+2*d,d,d,20,-90,-180),{x:l/2+d,y:c/2},...J(l/2,c/2,d,20,0,90),{x:l/2,y:c/2+d},{x:-l/2,y:c/2+d}],b=h.A.svg(o),x=(0,i.Fr)(e,{fill:"none"});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");const v=g(A).replace("Z",""),C=b.path(v,x),k=g(y),w=b.path(k,{...x}),B=o.insert("g",":first-child");return B.insert(()=>w,":first-child").attr("stroke-opacity",0),B.insert(()=>C,":first-child"),B.attr("class","text"),m&&"handDrawn"!==e.look&&B.selectAll("path").attr("style",m),r&&"handDrawn"!==e.look&&B.selectAll("path").attr("style",r),B.attr("transform",`translate(${-d}, 0)`),s.attr("transform",`translate(${-l/2+(e.padding??0)/2-(a.x-(a.left??0))},${-c/2+(e.padding??0)/2-(a.y-(a.top??0))})`),p(e,B),e.intersect=function(t){return N.polygon(e,y,t)},o}function et(t,e,n,r=100,i=0,o=180){const a=[],s=i*Math.PI/180,l=(o*Math.PI/180-s)/(r-1);for(let i=0;i<r;i++){const r=s+i*l,o=t+n*Math.cos(r),c=e+n*Math.sin(r);a.push({x:-o,y:-c})}return a}async function nt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=a.width+(e.padding??0),c=a.height+(e.padding??0),d=Math.max(5,.1*c),{cssStyles:m}=e,A=[...et(l/2,-c/2,d,30,-90,0),{x:-l/2-d,y:d},...et(l/2+2*d,-d,d,20,-180,-270),...et(l/2+2*d,d,d,20,-90,-180),{x:-l/2-d,y:-c/2},...et(l/2,c/2,d,20,0,90)],y=[...et(-l/2+d+d/2,-c/2,d,20,-90,-180),{x:l/2-d/2,y:d},...et(-l/2-d/2,-d,d,20,0,90),...et(-l/2-d/2,d,d,20,-90,0),{x:l/2-d/2,y:-d},...et(-l/2+d+d/2,c/2,d,30,-180,-270)],b=[{x:l/2,y:-c/2-d},{x:-l/2,y:-c/2-d},...et(l/2,-c/2,d,20,-90,0),{x:-l/2-d,y:-d},...et(l/2+2*d,-d,d,20,-180,-270),...et(l/2+2*d,d,d,20,-90,-180),{x:-l/2-d,y:c/2},...et(l/2,c/2,d,20,0,90),{x:-l/2,y:c/2+d},{x:l/2-d-d/2,y:c/2+d},...et(-l/2+d+d/2,-c/2,d,20,-90,-180),{x:l/2-d/2,y:d},...et(-l/2-d/2,-d,d,20,0,90),...et(-l/2-d/2,d,d,20,-90,0),{x:l/2-d/2,y:-d},...et(-l/2+d+d/2,c/2,d,30,-180,-270)],x=h.A.svg(o),v=(0,i.Fr)(e,{fill:"none"});"handDrawn"!==e.look&&(v.roughness=0,v.fillStyle="solid");const C=g(A).replace("Z",""),k=x.path(C,v),w=g(y).replace("Z",""),B=x.path(w,v),I=g(b),S=x.path(I,{...v}),_=o.insert("g",":first-child");return _.insert(()=>S,":first-child").attr("stroke-opacity",0),_.insert(()=>k,":first-child"),_.insert(()=>B,":first-child"),_.attr("class","text"),m&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",m),r&&"handDrawn"!==e.look&&_.selectAll("path").attr("style",r),_.attr("transform",`translate(${d-d/4}, 0)`),s.attr("transform",`translate(${-l/2+(e.padding??0)/2-(a.x-(a.left??0))},${-c/2+(e.padding??0)/2-(a.y-(a.top??0))})`),p(e,_),e.intersect=function(t){return N.polygon(e,b,t)},o}async function rt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=Math.max(80,1.25*(a.width+2*(e.padding??0)),e?.width??0),l=Math.max(20,a.height+2*(e.padding??0),e?.height??0),c=l/2,{cssStyles:d}=e,m=h.A.svg(o),y=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");const b=s-c,x=l/4,v=[{x:b,y:0},{x,y:0},{x:0,y:l/2},{x,y:l},{x:b,y:l},...A(-b,-l/2,c,50,270,90)],C=g(v),k=m.path(C,y),w=o.insert(()=>k,":first-child");return w.attr("class","basic label-container"),d&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",d),r&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",r),w.attr("transform",`translate(${-s/2}, ${-l/2})`),p(e,w),e.intersect=function(t){return N.polygon(e,v,t)},o}(0,l.K2)(q,"anchor"),(0,l.K2)(W,"generateArcPoints"),(0,l.K2)(K,"bowTieRect"),(0,l.K2)(U,"insertPolygonShape"),(0,l.K2)(H,"card"),(0,l.K2)(G,"choice"),(0,l.K2)(Y,"circle"),(0,l.K2)(V,"createLine"),(0,l.K2)(Q,"crossedCircle"),(0,l.K2)(X,"generateCirclePoints"),(0,l.K2)(Z,"curlyBraceLeft"),(0,l.K2)(J,"generateCirclePoints"),(0,l.K2)(tt,"curlyBraceRight"),(0,l.K2)(et,"generateCirclePoints"),(0,l.K2)(nt,"curlyBraces"),(0,l.K2)(rt,"curvedTrapezoid");var it=(0,l.K2)((t,e,n,r,i,o)=>[`M${t},${e+o}`,`a${i},${o} 0,0,0 ${n},0`,`a${i},${o} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${o} 0,0,0 ${n},0`,"l0,"+-r].join(" "),"createCylinderPathD"),ot=(0,l.K2)((t,e,n,r,i,o)=>[`M${t},${e+o}`,`M${t+n},${e+o}`,`a${i},${o} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${o} 0,0,0 ${n},0`,"l0,"+-r].join(" "),"createOuterCylinderPathD"),at=(0,l.K2)((t,e,n,r,i,o)=>[`M${t-n/2},${-r/2}`,`a${i},${o} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function st(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:s,label:l}=await u(t,e,f(e)),c=Math.max(s.width+e.padding,e.width??0),d=c/2,g=d/(2.5+c/50),m=Math.max(s.height+g+e.padding,e.height??0);let A;const{cssStyles:y}=e;if("handDrawn"===e.look){const t=h.A.svg(o),n=ot(0,0,c,m,d,g),r=at(0,g,c,m,d,g),a=t.path(n,(0,i.Fr)(e,{})),s=t.path(r,(0,i.Fr)(e,{fill:"none"}));A=o.insert(()=>s,":first-child"),A=o.insert(()=>a,":first-child"),A.attr("class","basic label-container"),y&&A.attr("style",y)}else{const t=it(0,0,c,m,d,g);A=o.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,a.KL)(y)).attr("style",r)}return A.attr("label-offset-y",g),A.attr("transform",`translate(${-c/2}, ${-(m/2+g)})`),p(e,A),l.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-s.height/2+(e.padding??0)/1.5-(s.y-(s.top??0))})`),e.intersect=function(t){const n=N.rect(e,t),r=n.x-(e.x??0);if(0!=d&&(Math.abs(r)<(e.width??0)/2||Math.abs(r)==(e.width??0)/2&&Math.abs(n.y-(e.y??0))>(e.height??0)/2-g)){let i=g*g*(1-r*r/(d*d));i>0&&(i=Math.sqrt(i)),i=g-i,t.y-(e.y??0)>0&&(i=-i),n.y+=i}return n},o}async function lt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=a.width+e.padding,c=a.height+e.padding,d=.2*c,g=-l/2,m=-c/2-d/2,{cssStyles:A}=e,y=h.A.svg(o),b=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");const x=[{x:g,y:m+d},{x:-g,y:m+d},{x:-g,y:-m},{x:g,y:-m},{x:g,y:m},{x:-g,y:m},{x:-g,y:m+d}],v=y.polygon(x.map(t=>[t.x,t.y]),b),C=o.insert(()=>v,":first-child");return C.attr("class","basic label-container"),A&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",A),r&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",r),s.attr("transform",`translate(${g+(e.padding??0)/2-(a.x-(a.left??0))}, ${m+d+(e.padding??0)/2-(a.y-(a.top??0))})`),p(e,C),e.intersect=function(t){return N.rect(e,t)},o}async function ct(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:s,halfPadding:c}=await u(t,e,f(e)),d=s.width/2+c+5,g=s.width/2+c;let m;const{cssStyles:A}=e;if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{roughness:.2,strokeWidth:2.5}),r=(0,i.Fr)(e,{roughness:.2,strokeWidth:1.5}),s=t.circle(0,0,2*d,n),l=t.circle(0,0,2*g,r);m=o.insert("g",":first-child"),m.attr("class",(0,a.KL)(e.cssClasses)).attr("style",(0,a.KL)(A)),m.node()?.appendChild(s),m.node()?.appendChild(l)}else{m=o.insert("g",":first-child");const t=m.insert("circle",":first-child"),e=m.insert("circle");m.attr("class","basic label-container").attr("style",r),t.attr("class","outer-circle").attr("style",r).attr("r",d).attr("cx",0).attr("cy",0),e.attr("class","inner-circle").attr("style",r).attr("r",g).attr("cx",0).attr("cy",0)}return p(e,m),e.intersect=function(t){return l.Rm.info("DoubleCircle intersect",e,d,t),N.circle(e,d,t)},o}function ht(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:o}=(0,i.GX)(e);e.label="",e.labelStyle=r;const a=t.insert("g").attr("class",f(e)).attr("id",e.domId??e.id),{cssStyles:s}=e,c=h.A.svg(a),{nodeBorder:u}=n,d=(0,i.Fr)(e,{fillStyle:"solid"});"handDrawn"!==e.look&&(d.roughness=0);const g=c.circle(0,0,14,d),m=a.insert(()=>g,":first-child");return m.selectAll("path").attr("style",`fill: ${u} !important;`),s&&s.length>0&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",s),o&&"handDrawn"!==e.look&&m.selectAll("path").attr("style",o),p(e,m),e.intersect=function(t){return l.Rm.info("filledCircle intersect",e,{radius:7,point:t}),N.circle(e,7,t)},a}async function ut(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),c=a.width+(e.padding??0),d=c+a.height,m=c+a.height,A=[{x:0,y:-d},{x:m,y:-d},{x:m/2,y:0}],{cssStyles:y}=e,b=h.A.svg(o),x=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");const v=g(A),C=b.path(v,x),k=o.insert(()=>C,":first-child").attr("transform",`translate(${-d/2}, ${d/2})`);return y&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",y),r&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",r),e.width=c,e.height=d,p(e,k),s.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${-d/2+(e.padding??0)/2+(a.y-(a.top??0))})`),e.intersect=function(t){return l.Rm.info("Triangle intersect",e,A,t),N.polygon(e,A,t)},o}function dt(t,e,{dir:n,config:{state:r,themeVariables:o}}){const{nodeStyles:a}=(0,i.GX)(e);e.label="";const s=t.insert("g").attr("class",f(e)).attr("id",e.domId??e.id),{cssStyles:l}=e;let c=Math.max(70,e?.width??0),u=Math.max(10,e?.height??0);"LR"===n&&(c=Math.max(10,e?.width??0),u=Math.max(70,e?.height??0));const d=-1*c/2,g=-1*u/2,m=h.A.svg(s),A=(0,i.Fr)(e,{stroke:o.lineColor,fill:o.lineColor});"handDrawn"!==e.look&&(A.roughness=0,A.fillStyle="solid");const y=m.rectangle(d,g,c,u,A),b=s.insert(()=>y,":first-child");l&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",l),a&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",a),p(e,b);const x=r?.padding??0;return e.width&&e.height&&(e.width+=x/2||0,e.height+=x/2||0),e.intersect=function(t){return N.rect(e,t)},s}async function pt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=Math.max(80,a.width+2*(e.padding??0),e?.width??0),c=Math.max(50,a.height+2*(e.padding??0),e?.height??0),d=c/2,{cssStyles:m}=e,y=h.A.svg(o),b=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");const x=[{x:-s/2,y:-c/2},{x:s/2-d,y:-c/2},...A(-s/2+d,0,d,50,90,270),{x:s/2-d,y:c/2},{x:-s/2,y:c/2}],v=g(x),C=y.path(v,b),k=o.insert(()=>C,":first-child");return k.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",m),r&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",r),p(e,k),e.intersect=function(t){return l.Rm.info("Pill intersect",e,{radius:d,point:t}),N.polygon(e,x,t)},o}async function ft(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=a.height+(e.padding??0),l=a.width+2.5*(e.padding??0),{cssStyles:c}=e,d=h.A.svg(o),m=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");let A=l/2;A+=A/6;const y=s/2,b=A-y/2,x=[{x:-b,y:-y},{x:0,y:-y},{x:b,y:-y},{x:A,y:0},{x:b,y},{x:0,y},{x:-b,y},{x:-A,y:0}],v=g(x),C=d.path(v,m),k=o.insert(()=>C,":first-child");return k.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",c),r&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",r),e.width=l,e.height=s,p(e,k),e.intersect=function(t){return N.polygon(e,x,t)},o}async function gt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.label="",e.labelStyle=n;const{shapeSvg:o}=await u(t,e,f(e)),a=Math.max(30,e?.width??0),s=Math.max(30,e?.height??0),{cssStyles:c}=e,d=h.A.svg(o),m=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");const A=[{x:0,y:0},{x:a,y:0},{x:0,y:s},{x:a,y:s}],y=g(A),b=d.path(y,m),x=o.insert(()=>b,":first-child");return x.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",c),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),x.attr("transform",`translate(${-a/2}, ${-s/2})`),p(e,x),e.intersect=function(t){return l.Rm.info("Pill intersect",e,{points:A}),N.polygon(e,A,t)},o}async function mt(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:a}=(0,i.GX)(e);e.labelStyle=a;const s=e.assetHeight??48,c=e.assetWidth??48,d=Math.max(s,c),f=r?.wrappingWidth;e.width=Math.max(d,f??0);const{shapeSvg:g,bbox:m,label:A}=await u(t,e,"icon-shape default"),y="t"===e.pos,b=d,x=d,{nodeBorder:v}=n,{stylesMap:C}=(0,i.WW)(e),k=-x/2,w=-b/2,B=e.label?8:0,I=h.A.svg(g),S=(0,i.Fr)(e,{stroke:"none",fill:"none"});"handDrawn"!==e.look&&(S.roughness=0,S.fillStyle="solid");const _=I.rectangle(k,w,x,b,S),E=Math.max(x,m.width),T=b+m.height+B,M=I.rectangle(-E/2,-T/2,E,T,{...S,fill:"transparent",stroke:"none"}),L=g.insert(()=>_,":first-child"),O=g.insert(()=>M);if(e.icon){const t=g.append("g");t.html(`<g>${await(0,o.WY)(e.icon,{height:d,width:d,fallbackPrefix:""})}</g>`);const n=t.node().getBBox(),r=n.width,i=n.height,a=n.x,s=n.y;t.attr("transform",`translate(${-r/2-a},${y?m.height/2+B/2-i/2-s:-m.height/2-B/2-i/2-s})`),t.attr("style",`color: ${C.get("stroke")??v};`)}return A.attr("transform",`translate(${-m.width/2-(m.x-(m.left??0))},${y?-T/2:T/2-m.height})`),L.attr("transform",`translate(0,${y?m.height/2+B/2:-m.height/2-B/2})`),p(e,O),e.intersect=function(t){if(l.Rm.info("iconSquare intersect",e,t),!e.label)return N.rect(e,t);const n=e.x??0,r=e.y??0,i=e.height??0;let o=[];return o=y?[{x:n-m.width/2,y:r-i/2},{x:n+m.width/2,y:r-i/2},{x:n+m.width/2,y:r-i/2+m.height+B},{x:n+x/2,y:r-i/2+m.height+B},{x:n+x/2,y:r+i/2},{x:n-x/2,y:r+i/2},{x:n-x/2,y:r-i/2+m.height+B},{x:n-m.width/2,y:r-i/2+m.height+B}]:[{x:n-x/2,y:r-i/2},{x:n+x/2,y:r-i/2},{x:n+x/2,y:r-i/2+b},{x:n+m.width/2,y:r-i/2+b},{x:n+m.width/2/2,y:r+i/2},{x:n-m.width/2,y:r+i/2},{x:n-m.width/2,y:r-i/2+b},{x:n-x/2,y:r-i/2+b}],N.polygon(e,o,t)},g}async function At(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:a}=(0,i.GX)(e);e.labelStyle=a;const s=e.assetHeight??48,c=e.assetWidth??48,d=Math.max(s,c),f=r?.wrappingWidth;e.width=Math.max(d,f??0);const{shapeSvg:g,bbox:m,label:A}=await u(t,e,"icon-shape default"),y=e.label?8:0,b="t"===e.pos,{nodeBorder:x,mainBkg:v}=n,{stylesMap:C}=(0,i.WW)(e),k=h.A.svg(g),w=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");const B=C.get("fill");w.stroke=B??v;const I=g.append("g");e.icon&&I.html(`<g>${await(0,o.WY)(e.icon,{height:d,width:d,fallbackPrefix:""})}</g>`);const S=I.node().getBBox(),_=S.width,E=S.height,T=S.x,M=S.y,L=Math.max(_,E)*Math.SQRT2+40,O=k.circle(0,0,L,w),D=Math.max(L,m.width),P=L+m.height+y,F=k.rectangle(-D/2,-P/2,D,P,{...w,fill:"transparent",stroke:"none"}),j=g.insert(()=>O,":first-child"),z=g.insert(()=>F);return I.attr("transform",`translate(${-_/2-T},${b?m.height/2+y/2-E/2-M:-m.height/2-y/2-E/2-M})`),I.attr("style",`color: ${C.get("stroke")??x};`),A.attr("transform",`translate(${-m.width/2-(m.x-(m.left??0))},${b?-P/2:P/2-m.height})`),j.attr("transform",`translate(0,${b?m.height/2+y/2:-m.height/2-y/2})`),p(e,z),e.intersect=function(t){return l.Rm.info("iconSquare intersect",e,t),N.rect(e,t)},g}async function yt(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:a}=(0,i.GX)(e);e.labelStyle=a;const s=e.assetHeight??48,c=e.assetWidth??48,d=Math.max(s,c),f=r?.wrappingWidth;e.width=Math.max(d,f??0);const{shapeSvg:g,bbox:m,halfPadding:A,label:y}=await u(t,e,"icon-shape default"),b="t"===e.pos,x=d+2*A,v=d+2*A,{nodeBorder:k,mainBkg:w}=n,{stylesMap:B}=(0,i.WW)(e),I=-v/2,S=-x/2,_=e.label?8:0,E=h.A.svg(g),T=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(T.roughness=0,T.fillStyle="solid");const M=B.get("fill");T.stroke=M??w;const L=E.path(C(I,S,v,x,5),T),O=Math.max(v,m.width),D=x+m.height+_,P=E.rectangle(-O/2,-D/2,O,D,{...T,fill:"transparent",stroke:"none"}),F=g.insert(()=>L,":first-child").attr("class","icon-shape2"),j=g.insert(()=>P);if(e.icon){const t=g.append("g");t.html(`<g>${await(0,o.WY)(e.icon,{height:d,width:d,fallbackPrefix:""})}</g>`);const n=t.node().getBBox(),r=n.width,i=n.height,a=n.x,s=n.y;t.attr("transform",`translate(${-r/2-a},${b?m.height/2+_/2-i/2-s:-m.height/2-_/2-i/2-s})`),t.attr("style",`color: ${B.get("stroke")??k};`)}return y.attr("transform",`translate(${-m.width/2-(m.x-(m.left??0))},${b?-D/2:D/2-m.height})`),F.attr("transform",`translate(0,${b?m.height/2+_/2:-m.height/2-_/2})`),p(e,j),e.intersect=function(t){if(l.Rm.info("iconSquare intersect",e,t),!e.label)return N.rect(e,t);const n=e.x??0,r=e.y??0,i=e.height??0;let o=[];return o=b?[{x:n-m.width/2,y:r-i/2},{x:n+m.width/2,y:r-i/2},{x:n+m.width/2,y:r-i/2+m.height+_},{x:n+v/2,y:r-i/2+m.height+_},{x:n+v/2,y:r+i/2},{x:n-v/2,y:r+i/2},{x:n-v/2,y:r-i/2+m.height+_},{x:n-m.width/2,y:r-i/2+m.height+_}]:[{x:n-v/2,y:r-i/2},{x:n+v/2,y:r-i/2},{x:n+v/2,y:r-i/2+x},{x:n+m.width/2,y:r-i/2+x},{x:n+m.width/2/2,y:r+i/2},{x:n-m.width/2,y:r+i/2},{x:n-m.width/2,y:r-i/2+x},{x:n-v/2,y:r-i/2+x}],N.polygon(e,o,t)},g}async function bt(t,e,{config:{themeVariables:n,flowchart:r}}){const{labelStyles:a}=(0,i.GX)(e);e.labelStyle=a;const s=e.assetHeight??48,c=e.assetWidth??48,d=Math.max(s,c),f=r?.wrappingWidth;e.width=Math.max(d,f??0);const{shapeSvg:g,bbox:m,halfPadding:A,label:y}=await u(t,e,"icon-shape default"),b="t"===e.pos,x=d+2*A,v=d+2*A,{nodeBorder:k,mainBkg:w}=n,{stylesMap:B}=(0,i.WW)(e),I=-v/2,S=-x/2,_=e.label?8:0,E=h.A.svg(g),T=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(T.roughness=0,T.fillStyle="solid");const M=B.get("fill");T.stroke=M??w;const L=E.path(C(I,S,v,x,.1),T),O=Math.max(v,m.width),D=x+m.height+_,P=E.rectangle(-O/2,-D/2,O,D,{...T,fill:"transparent",stroke:"none"}),F=g.insert(()=>L,":first-child"),j=g.insert(()=>P);if(e.icon){const t=g.append("g");t.html(`<g>${await(0,o.WY)(e.icon,{height:d,width:d,fallbackPrefix:""})}</g>`);const n=t.node().getBBox(),r=n.width,i=n.height,a=n.x,s=n.y;t.attr("transform",`translate(${-r/2-a},${b?m.height/2+_/2-i/2-s:-m.height/2-_/2-i/2-s})`),t.attr("style",`color: ${B.get("stroke")??k};`)}return y.attr("transform",`translate(${-m.width/2-(m.x-(m.left??0))},${b?-D/2:D/2-m.height})`),F.attr("transform",`translate(0,${b?m.height/2+_/2:-m.height/2-_/2})`),p(e,j),e.intersect=function(t){if(l.Rm.info("iconSquare intersect",e,t),!e.label)return N.rect(e,t);const n=e.x??0,r=e.y??0,i=e.height??0;let o=[];return o=b?[{x:n-m.width/2,y:r-i/2},{x:n+m.width/2,y:r-i/2},{x:n+m.width/2,y:r-i/2+m.height+_},{x:n+v/2,y:r-i/2+m.height+_},{x:n+v/2,y:r+i/2},{x:n-v/2,y:r+i/2},{x:n-v/2,y:r-i/2+m.height+_},{x:n-m.width/2,y:r-i/2+m.height+_}]:[{x:n-v/2,y:r-i/2},{x:n+v/2,y:r-i/2},{x:n+v/2,y:r-i/2+x},{x:n+m.width/2,y:r-i/2+x},{x:n+m.width/2/2,y:r+i/2},{x:n-m.width/2,y:r+i/2},{x:n-m.width/2,y:r-i/2+x},{x:n-v/2,y:r-i/2+x}],N.polygon(e,o,t)},g}async function xt(t,e,{config:{flowchart:n}}){const r=new Image;r.src=e?.img??"",await r.decode();const o=Number(r.naturalWidth.toString().replace("px","")),a=Number(r.naturalHeight.toString().replace("px",""));e.imageAspectRatio=o/a;const{labelStyles:s}=(0,i.GX)(e);e.labelStyle=s;const c=n?.wrappingWidth;e.defaultWidth=n?.wrappingWidth;const d=Math.max(e.label?c??0:0,e?.assetWidth??o),f="on"===e.constraint&&e?.assetHeight?e.assetHeight*e.imageAspectRatio:d,g="on"===e.constraint?f/e.imageAspectRatio:e?.assetHeight??a;e.width=Math.max(f,c??0);const{shapeSvg:m,bbox:A,label:y}=await u(t,e,"image-shape default"),b="t"===e.pos,x=-f/2,v=-g/2,C=e.label?8:0,k=h.A.svg(m),w=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(w.roughness=0,w.fillStyle="solid");const B=k.rectangle(x,v,f,g,w),I=Math.max(f,A.width),S=g+A.height+C,_=k.rectangle(-I/2,-S/2,I,S,{...w,fill:"none",stroke:"none"}),E=m.insert(()=>B,":first-child"),T=m.insert(()=>_);if(e.img){const t=m.append("image");t.attr("href",e.img),t.attr("width",f),t.attr("height",g),t.attr("preserveAspectRatio","none"),t.attr("transform",`translate(${-f/2},${b?S/2-g:-S/2})`)}return y.attr("transform",`translate(${-A.width/2-(A.x-(A.left??0))},${b?-g/2-A.height/2-C/2:g/2-A.height/2+C/2})`),E.attr("transform",`translate(0,${b?A.height/2+C/2:-A.height/2-C/2})`),p(e,T),e.intersect=function(t){if(l.Rm.info("iconSquare intersect",e,t),!e.label)return N.rect(e,t);const n=e.x??0,r=e.y??0,i=e.height??0;let o=[];return o=b?[{x:n-A.width/2,y:r-i/2},{x:n+A.width/2,y:r-i/2},{x:n+A.width/2,y:r-i/2+A.height+C},{x:n+f/2,y:r-i/2+A.height+C},{x:n+f/2,y:r+i/2},{x:n-f/2,y:r+i/2},{x:n-f/2,y:r-i/2+A.height+C},{x:n-A.width/2,y:r-i/2+A.height+C}]:[{x:n-f/2,y:r-i/2},{x:n+f/2,y:r-i/2},{x:n+f/2,y:r-i/2+g},{x:n+A.width/2,y:r-i/2+g},{x:n+A.width/2/2,y:r+i/2},{x:n-A.width/2,y:r+i/2},{x:n-A.width/2,y:r-i/2+g},{x:n-f/2,y:r-i/2+g}],N.polygon(e,o,t)},m}async function vt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=[{x:0,y:0},{x:s,y:0},{x:s+3*l/6,y:-l},{x:-3*l/6,y:-l}];let d;const{cssStyles:m}=e;if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{}),r=g(c),a=t.path(r,n);d=o.insert(()=>a,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),m&&d.attr("style",m)}else d=U(o,s,l,c);return r&&d.attr("style",r),e.width=s,e.height=l,p(e,d),e.intersect=function(t){return N.polygon(e,c,t)},o}async function Ct(t,e,n){const{labelStyles:r,nodeStyles:o}=(0,i.GX)(e);e.labelStyle=r;const{shapeSvg:s,bbox:l}=await u(t,e,f(e)),c=Math.max(l.width+2*n.labelPaddingX,e?.width||0),d=Math.max(l.height+2*n.labelPaddingY,e?.height||0),g=-c/2,m=-d/2;let A,{rx:y,ry:b}=e;const{cssStyles:x}=e;if(n?.rx&&n.ry&&(y=n.rx,b=n.ry),"handDrawn"===e.look){const t=h.A.svg(s),n=(0,i.Fr)(e,{}),r=y||b?t.path(C(g,m,c,d,y||0),n):t.rectangle(g,m,c,d,n);A=s.insert(()=>r,":first-child"),A.attr("class","basic label-container").attr("style",(0,a.KL)(x))}else A=s.insert("rect",":first-child"),A.attr("class","basic label-container").attr("style",o).attr("rx",(0,a.KL)(y)).attr("ry",(0,a.KL)(b)).attr("x",g).attr("y",m).attr("width",c).attr("height",d);return p(e,A),e.calcIntersect=function(t,e){return N.rect(t,e)},e.intersect=function(t){return N.rect(e,t)},s}async function kt(t,e){const{shapeSvg:n,bbox:r,label:i}=await u(t,e,"label"),o=n.insert("rect",":first-child");return o.attr("width",.1).attr("height",.1),n.attr("class","label edgeLabel"),i.attr("transform",`translate(${-r.width/2-(r.x-(r.left??0))}, ${-r.height/2-(r.y-(r.top??0))})`),p(e,o),e.intersect=function(t){return N.rect(e,t)},n}async function wt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=Math.max(a.width+(e.padding??0),e?.width??0),l=Math.max(a.height+(e.padding??0),e?.height??0),c=[{x:0,y:0},{x:s+3*l/6,y:0},{x:s,y:-l},{x:-3*l/6,y:-l}];let d;const{cssStyles:m}=e;if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{}),r=g(c),a=t.path(r,n);d=o.insert(()=>a,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),m&&d.attr("style",m)}else d=U(o,s,l,c);return r&&d.attr("style",r),e.width=s,e.height=l,p(e,d),e.intersect=function(t){return N.polygon(e,c,t)},o}async function Bt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=Math.max(a.width+(e.padding??0),e?.width??0),l=Math.max(a.height+(e.padding??0),e?.height??0),c=[{x:-3*l/6,y:0},{x:s,y:0},{x:s+3*l/6,y:-l},{x:0,y:-l}];let d;const{cssStyles:m}=e;if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{}),r=g(c),a=t.path(r,n);d=o.insert(()=>a,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),m&&d.attr("style",m)}else d=U(o,s,l,c);return r&&d.attr("style",r),e.width=s,e.height=l,p(e,d),e.intersect=function(t){return N.polygon(e,c,t)},o}function It(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.label="",e.labelStyle=n;const o=t.insert("g").attr("class",f(e)).attr("id",e.domId??e.id),{cssStyles:a}=e,s=Math.max(35,e?.width??0),c=Math.max(35,e?.height??0),u=[{x:s,y:0},{x:0,y:c+3.5},{x:s-14,y:c+3.5},{x:0,y:2*c},{x:s,y:c-3.5},{x:14,y:c-3.5}],d=h.A.svg(o),m=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");const A=g(u),y=d.path(A,m),b=o.insert(()=>y,":first-child");return a&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",a),r&&"handDrawn"!==e.look&&b.selectAll("path").attr("style",r),b.attr("transform",`translate(-${s/2},${-c})`),p(e,b),e.intersect=function(t){return l.Rm.info("lightningBolt intersect",e,t),N.polygon(e,u,t)},o}(0,l.K2)(st,"cylinder"),(0,l.K2)(lt,"dividedRectangle"),(0,l.K2)(ct,"doublecircle"),(0,l.K2)(ht,"filledCircle"),(0,l.K2)(ut,"flippedTriangle"),(0,l.K2)(dt,"forkJoin"),(0,l.K2)(pt,"halfRoundedRectangle"),(0,l.K2)(ft,"hexagon"),(0,l.K2)(gt,"hourglass"),(0,l.K2)(mt,"icon"),(0,l.K2)(At,"iconCircle"),(0,l.K2)(yt,"iconRounded"),(0,l.K2)(bt,"iconSquare"),(0,l.K2)(xt,"imageSquare"),(0,l.K2)(vt,"inv_trapezoid"),(0,l.K2)(Ct,"drawRect"),(0,l.K2)(kt,"labelRect"),(0,l.K2)(wt,"lean_left"),(0,l.K2)(Bt,"lean_right"),(0,l.K2)(It,"lightningBolt");var St=(0,l.K2)((t,e,n,r,i,o,a)=>[`M${t},${e+o}`,`a${i},${o} 0,0,0 ${n},0`,`a${i},${o} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${o} 0,0,0 ${n},0`,"l0,"+-r,`M${t},${e+o+a}`,`a${i},${o} 0,0,0 ${n},0`].join(" "),"createCylinderPathD"),_t=(0,l.K2)((t,e,n,r,i,o,a)=>[`M${t},${e+o}`,`M${t+n},${e+o}`,`a${i},${o} 0,0,0 ${-n},0`,`l0,${r}`,`a${i},${o} 0,0,0 ${n},0`,"l0,"+-r,`M${t},${e+o+a}`,`a${i},${o} 0,0,0 ${n},0`].join(" "),"createOuterCylinderPathD"),Et=(0,l.K2)((t,e,n,r,i,o)=>[`M${t-n/2},${-r/2}`,`a${i},${o} 0,0,0 ${n},0`].join(" "),"createInnerCylinderPathD");async function Tt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:s,label:l}=await u(t,e,f(e)),c=Math.max(s.width+(e.padding??0),e.width??0),d=c/2,g=d/(2.5+c/50),m=Math.max(s.height+g+(e.padding??0),e.height??0),A=.1*m;let y;const{cssStyles:b}=e;if("handDrawn"===e.look){const t=h.A.svg(o),n=_t(0,0,c,m,d,g,A),r=Et(0,g,c,m,d,g),a=(0,i.Fr)(e,{}),s=t.path(n,a),l=t.path(r,a);o.insert(()=>l,":first-child").attr("class","line"),y=o.insert(()=>s,":first-child"),y.attr("class","basic label-container"),b&&y.attr("style",b)}else{const t=St(0,0,c,m,d,g,A);y=o.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,a.KL)(b)).attr("style",r)}return y.attr("label-offset-y",g),y.attr("transform",`translate(${-c/2}, ${-(m/2+g)})`),p(e,y),l.attr("transform",`translate(${-s.width/2-(s.x-(s.left??0))}, ${-s.height/2+g-(s.y-(s.top??0))})`),e.intersect=function(t){const n=N.rect(e,t),r=n.x-(e.x??0);if(0!=d&&(Math.abs(r)<(e.width??0)/2||Math.abs(r)==(e.width??0)/2&&Math.abs(n.y-(e.y??0))>(e.height??0)/2-g)){let i=g*g*(1-r*r/(d*d));i>0&&(i=Math.sqrt(i)),i=g-i,t.y-(e.y??0)>0&&(i=-i),n.y+=i}return n},o}async function Mt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=Math.max(a.width+2*(e.padding??0),e?.width??0),c=Math.max(a.height+2*(e.padding??0),e?.height??0),d=c/4,g=c+d,{cssStyles:A}=e,y=h.A.svg(o),b=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");const x=[{x:-l/2-l/2*.1,y:-g/2},{x:-l/2-l/2*.1,y:g/2},...m(-l/2-l/2*.1,g/2,l/2+l/2*.1,g/2,d,.8),{x:l/2+l/2*.1,y:-g/2},{x:-l/2-l/2*.1,y:-g/2},{x:-l/2,y:-g/2},{x:-l/2,y:g/2*1.1},{x:-l/2,y:-g/2}],v=y.polygon(x.map(t=>[t.x,t.y]),b),C=o.insert(()=>v,":first-child");return C.attr("class","basic label-container"),A&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",A),r&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-l/2+(e.padding??0)+l/2*.1/2-(a.x-(a.left??0))},${-c/2+(e.padding??0)-d/2-(a.y-(a.top??0))})`),p(e,C),e.intersect=function(t){return N.polygon(e,x,t)},o}async function Lt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=Math.max(a.width+2*(e.padding??0),e?.width??0),c=Math.max(a.height+2*(e.padding??0),e?.height??0),d=-l/2,m=-c/2,{cssStyles:A}=e,y=h.A.svg(o),b=(0,i.Fr)(e,{}),x=[{x:d-5,y:m+5},{x:d-5,y:m+c+5},{x:d+l-5,y:m+c+5},{x:d+l-5,y:m+c},{x:d+l,y:m+c},{x:d+l,y:m+c-5},{x:d+l+5,y:m+c-5},{x:d+l+5,y:m-5},{x:d+5,y:m-5},{x:d+5,y:m},{x:d,y:m},{x:d,y:m+5}],v=[{x:d,y:m+5},{x:d+l-5,y:m+5},{x:d+l-5,y:m+c},{x:d+l,y:m+c},{x:d+l,y:m},{x:d,y:m}];"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");const C=g(x),k=y.path(C,b),w=g(v),B=y.path(w,{...b,fill:"none"}),I=o.insert(()=>B,":first-child");return I.insert(()=>k,":first-child"),I.attr("class","basic label-container"),A&&"handDrawn"!==e.look&&I.selectAll("path").attr("style",A),r&&"handDrawn"!==e.look&&I.selectAll("path").attr("style",r),s.attr("transform",`translate(${-a.width/2-5-(a.x-(a.left??0))}, ${-a.height/2+5-(a.y-(a.top??0))})`),p(e,I),e.intersect=function(t){return N.polygon(e,x,t)},o}async function Ot(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=Math.max(a.width+2*(e.padding??0),e?.width??0),c=Math.max(a.height+2*(e.padding??0),e?.height??0),d=c/4,A=c+d,y=-l/2,b=-A/2,{cssStyles:x}=e,v=m(y-5,b+A+5,y+l-5,b+A+5,d,.8),C=v?.[v.length-1],k=[{x:y-5,y:b+5},{x:y-5,y:b+A+5},...v,{x:y+l-5,y:C.y-5},{x:y+l,y:C.y-5},{x:y+l,y:C.y-10},{x:y+l+5,y:C.y-10},{x:y+l+5,y:b-5},{x:y+5,y:b-5},{x:y+5,y:b},{x:y,y:b},{x:y,y:b+5}],w=[{x:y,y:b+5},{x:y+l-5,y:b+5},{x:y+l-5,y:C.y-5},{x:y+l,y:C.y-5},{x:y+l,y:b},{x:y,y:b}],B=h.A.svg(o),I=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(I.roughness=0,I.fillStyle="solid");const S=g(k),_=B.path(S,I),E=g(w),T=B.path(E,I),M=o.insert(()=>_,":first-child");return M.insert(()=>T),M.attr("class","basic label-container"),x&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",x),r&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",r),M.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-a.width/2-5-(a.x-(a.left??0))}, ${-a.height/2+5-d/2-(a.y-(a.top??0))})`),p(e,M),e.intersect=function(t){return N.polygon(e,k,t)},o}async function Dt(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:o}=(0,i.GX)(e);e.labelStyle=r,e.useHtmlLabels||!1!==(0,s.zj)().flowchart?.htmlLabels||(e.centerLabel=!0);const{shapeSvg:a,bbox:l,label:c}=await u(t,e,f(e)),d=Math.max(l.width+2*(e.padding??0),e?.width??0),g=Math.max(l.height+2*(e.padding??0),e?.height??0),m=-d/2,A=-g/2,{cssStyles:y}=e,b=h.A.svg(a),x=(0,i.Fr)(e,{fill:n.noteBkgColor,stroke:n.noteBorderColor});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");const v=b.rectangle(m,A,d,g,x),C=a.insert(()=>v,":first-child");return C.attr("class","basic label-container"),y&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",y),o&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",o),c.attr("transform",`translate(${-l.width/2-(l.x-(l.left??0))}, ${-l.height/2-(l.y-(l.top??0))})`),p(e,C),e.intersect=function(t){return N.rect(e,t)},a}(0,l.K2)(Tt,"linedCylinder"),(0,l.K2)(Mt,"linedWaveEdgedRect"),(0,l.K2)(Lt,"multiRect"),(0,l.K2)(Ot,"multiWaveEdgedRectangle"),(0,l.K2)(Dt,"note");var Pt=(0,l.K2)((t,e,n)=>[`M${t+n/2},${e}`,`L${t+n},${e-n/2}`,`L${t+n/2},${e-n}`,`L${t},${e-n/2}`,"Z"].join(" "),"createDecisionBoxPathD");async function Ft(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=a.width+e.padding+(a.height+e.padding),l=[{x:s/2,y:0},{x:s,y:-s/2},{x:s/2,y:-s},{x:0,y:-s/2}];let c;const{cssStyles:d}=e;if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{}),r=Pt(0,0,s),a=t.path(r,n);c=o.insert(()=>a,":first-child").attr("transform",`translate(${-s/2+.5}, ${s/2})`),d&&c.attr("style",d)}else c=U(o,s,s,l),c.attr("transform",`translate(${-s/2+.5}, ${s/2})`);return r&&c.attr("style",r),p(e,c),e.calcIntersect=function(t,e){const n=t.width,r=[{x:n/2,y:0},{x:n,y:-n/2},{x:n/2,y:-n},{x:0,y:-n/2}],i=N.polygon(t,r,e);return{x:i.x-.5,y:i.y-.5}},e.intersect=function(t){return this.calcIntersect(e,t)},o}async function jt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=-Math.max(a.width+(e.padding??0),e?.width??0)/2,c=-Math.max(a.height+(e.padding??0),e?.height??0)/2,d=c/2,m=[{x:l+d,y:c},{x:l,y:0},{x:l+d,y:-c},{x:-l,y:-c},{x:-l,y:c}],{cssStyles:A}=e,y=h.A.svg(o),b=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");const x=g(m),v=y.path(x,b),C=o.insert(()=>v,":first-child");return C.attr("class","basic label-container"),A&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",A),r&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",r),C.attr("transform",`translate(${-d/2},0)`),s.attr("transform",`translate(${-d/2-a.width/2-(a.x-(a.left??0))}, ${-a.height/2-(a.y-(a.top??0))})`),p(e,C),e.intersect=function(t){return N.polygon(e,m,t)},o}async function zt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);let o;e.labelStyle=n,o=e.cssClasses?"node "+e.cssClasses:"node default";const a=t.insert("g").attr("class",o).attr("id",e.domId||e.id),u=a.insert("g"),d=a.insert("g").attr("class","label").attr("style",r),f=e.description,g=e.label,m=d.node().appendChild(await v(g,e.labelStyle,!0,!0));let A={width:0,height:0};if((0,s._3)((0,s.D7)()?.flowchart?.htmlLabels)){const t=m.children[0],e=(0,c.Ltv)(m);A=t.getBoundingClientRect(),e.attr("width",A.width),e.attr("height",A.height)}l.Rm.info("Text 2",f);const y=f||[],b=m.getBBox(),x=d.node().appendChild(await v(y.join?y.join("<br/>"):y,e.labelStyle,!0,!0)),k=x.children[0],w=(0,c.Ltv)(x);A=k.getBoundingClientRect(),w.attr("width",A.width),w.attr("height",A.height);const B=(e.padding||0)/2;(0,c.Ltv)(x).attr("transform","translate( "+(A.width>b.width?0:(b.width-A.width)/2)+", "+(b.height+B+5)+")"),(0,c.Ltv)(m).attr("transform","translate( "+(A.width<b.width?0:-(b.width-A.width)/2)+", 0)"),A=d.node().getBBox(),d.attr("transform","translate("+-A.width/2+", "+(-A.height/2-B+3)+")");const I=A.width+(e.padding||0),S=A.height+(e.padding||0),_=-A.width/2-B,E=-A.height/2-B;let T,M;if("handDrawn"===e.look){const t=h.A.svg(a),n=(0,i.Fr)(e,{}),r=t.path(C(_,E,I,S,e.rx||0),n),o=t.line(-A.width/2-B,-A.height/2-B+b.height+B,A.width/2+B,-A.height/2-B+b.height+B,n);M=a.insert(()=>(l.Rm.debug("Rough node insert CXC",r),o),":first-child"),T=a.insert(()=>(l.Rm.debug("Rough node insert CXC",r),r),":first-child")}else T=u.insert("rect",":first-child"),M=u.insert("line"),T.attr("class","outer title-state").attr("style",r).attr("x",-A.width/2-B).attr("y",-A.height/2-B).attr("width",A.width+(e.padding||0)).attr("height",A.height+(e.padding||0)),M.attr("class","divider").attr("x1",-A.width/2-B).attr("x2",A.width/2+B).attr("y1",-A.height/2-B+b.height+B).attr("y2",-A.height/2-B+b.height+B);return p(e,T),e.intersect=function(t){return N.rect(e,t)},a}function $t(t,e,n,r,i,o,a){const s=(t+n)/2,l=(e+r)/2,c=Math.atan2(r-e,n-t),h=(n-t)/2/i,u=(r-e)/2/o,d=Math.sqrt(h**2+u**2);if(d>1)throw new Error("The given radii are too small to create an arc between the points.");const p=Math.sqrt(1-d**2),f=s+p*o*Math.sin(c)*(a?-1:1),g=l-p*i*Math.cos(c)*(a?-1:1),m=Math.atan2((e-g)/o,(t-f)/i);let A=Math.atan2((r-g)/o,(n-f)/i)-m;a&&A<0&&(A+=2*Math.PI),!a&&A>0&&(A-=2*Math.PI);const y=[];for(let t=0;t<20;t++){const e=m+t/19*A,n=f+i*Math.cos(e),r=g+o*Math.sin(e);y.push({x:n,y:r})}return y}async function Rt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=e?.padding??0,l=e?.padding??0,c=(e?.width?e?.width:a.width)+2*s,d=(e?.height?e?.height:a.height)+2*l,m=e.radius||5,A=e.taper||5,{cssStyles:y}=e,b=h.A.svg(o),x=(0,i.Fr)(e,{});e.stroke&&(x.stroke=e.stroke),"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");const v=[{x:-c/2+A,y:-d/2},{x:c/2-A,y:-d/2},...$t(c/2-A,-d/2,c/2,-d/2+A,m,m,!0),{x:c/2,y:-d/2+A},{x:c/2,y:d/2-A},...$t(c/2,d/2-A,c/2-A,d/2,m,m,!0),{x:c/2-A,y:d/2},{x:-c/2+A,y:d/2},...$t(-c/2+A,d/2,-c/2,d/2-A,m,m,!0),{x:-c/2,y:d/2-A},{x:-c/2,y:-d/2+A},...$t(-c/2,-d/2+A,-c/2+A,-d/2,m,m,!0)],C=g(v),k=b.path(C,x),w=o.insert(()=>k,":first-child");return w.attr("class","basic label-container outer-path"),y&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",y),r&&"handDrawn"!==e.look&&w.selectChildren("path").attr("style",r),p(e,w),e.intersect=function(t){return N.polygon(e,v,t)},o}async function Nt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:s,label:l}=await u(t,e,f(e)),c=e?.padding??0,d=Math.max(s.width+2*(e.padding??0),e?.width??0),g=Math.max(s.height+2*(e.padding??0),e?.height??0),m=-s.width/2-c,A=-s.height/2-c,{cssStyles:y}=e,b=h.A.svg(o),x=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");const v=[{x:m,y:A},{x:m+d+8,y:A},{x:m+d+8,y:A+g},{x:m-8,y:A+g},{x:m-8,y:A},{x:m,y:A},{x:m,y:A+g}],C=b.polygon(v.map(t=>[t.x,t.y]),x),k=o.insert(()=>C,":first-child");return k.attr("class","basic label-container").attr("style",(0,a.KL)(y)),r&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",r),y&&"handDrawn"!==e.look&&k.selectAll("path").attr("style",r),l.attr("transform",`translate(${-d/2+4+(e.padding??0)-(s.x-(s.left??0))},${-g/2+(e.padding??0)-(s.y-(s.top??0))})`),p(e,k),e.intersect=function(t){return N.rect(e,t)},o}async function qt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=Math.max(a.width+2*(e.padding??0),e?.width??0),c=Math.max(a.height+2*(e.padding??0),e?.height??0),d=-l/2,m=-c/2,{cssStyles:A}=e,y=h.A.svg(o),b=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");const x=[{x:d,y:m},{x:d,y:m+c},{x:d+l,y:m+c},{x:d+l,y:m-c/2}],v=g(x),C=y.path(v,b),k=o.insert(()=>C,":first-child");return k.attr("class","basic label-container"),A&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",A),r&&"handDrawn"!==e.look&&k.selectChildren("path").attr("style",r),k.attr("transform",`translate(0, ${c/4})`),s.attr("transform",`translate(${-l/2+(e.padding??0)-(a.x-(a.left??0))}, ${-c/4+(e.padding??0)-(a.y-(a.top??0))})`),p(e,k),e.intersect=function(t){return N.polygon(e,x,t)},o}async function Wt(t,e){return Ct(t,e,{rx:0,ry:0,classes:"",labelPaddingX:e.labelPaddingX??2*(e?.padding||0),labelPaddingY:1*(e?.padding||0)})}async function Kt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=a.height+e.padding,l=a.width+s/4+e.padding,c=s/2,{cssStyles:d}=e,m=h.A.svg(o),y=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");const b=[{x:-l/2+c,y:-s/2},{x:l/2-c,y:-s/2},...A(-l/2+c,0,c,50,90,270),{x:l/2-c,y:s/2},...A(l/2-c,0,c,50,270,450)],x=g(b),v=m.path(x,y),C=o.insert(()=>v,":first-child");return C.attr("class","basic label-container outer-path"),d&&"handDrawn"!==e.look&&C.selectChildren("path").attr("style",d),r&&"handDrawn"!==e.look&&C.selectChildren("path").attr("style",r),p(e,C),e.intersect=function(t){return N.polygon(e,b,t)},o}async function Ut(t,e){return Ct(t,e,{rx:5,ry:5,classes:"flowchart-node"})}function Ht(t,e,{config:{themeVariables:n}}){const{labelStyles:r,nodeStyles:o}=(0,i.GX)(e);e.labelStyle=r;const{cssStyles:a}=e,{lineColor:s,stateBorder:l,nodeBorder:c}=n,u=t.insert("g").attr("class","node default").attr("id",e.domId||e.id),d=h.A.svg(u),f=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(f.roughness=0,f.fillStyle="solid");const g=d.circle(0,0,14,{...f,stroke:s,strokeWidth:2}),m=l??c,A=d.circle(0,0,5,{...f,fill:m,stroke:m,strokeWidth:2,fillStyle:"solid"}),y=u.insert(()=>g,":first-child");return y.insert(()=>A),a&&y.selectAll("path").attr("style",a),o&&y.selectAll("path").attr("style",o),p(e,y),e.intersect=function(t){return N.circle(e,7,t)},u}function Gt(t,e,{config:{themeVariables:n}}){const{lineColor:r}=n,o=t.insert("g").attr("class","node default").attr("id",e.domId||e.id);let a;if("handDrawn"===e.look){const t=h.A.svg(o).circle(0,0,14,(0,i.ue)(r));a=o.insert(()=>t),a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14)}else a=o.insert("circle",":first-child"),a.attr("class","state-start").attr("r",7).attr("width",14).attr("height",14);return p(e,a),e.intersect=function(t){return N.circle(e,7,t)},o}async function Yt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:s}=await u(t,e,f(e)),l=(e?.padding||0)/2,c=s.width+e.padding,d=s.height+e.padding,g=-s.width/2-l,m=-s.height/2-l,A=[{x:0,y:0},{x:c,y:0},{x:c,y:-d},{x:0,y:-d},{x:0,y:0},{x:-8,y:0},{x:c+8,y:0},{x:c+8,y:-d},{x:-8,y:-d},{x:-8,y:0}];if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{}),r=t.rectangle(g-8,m,c+16,d,n),s=t.line(g,m,g,m+d,n),l=t.line(g+c,m,g+c,m+d,n);o.insert(()=>s,":first-child"),o.insert(()=>l,":first-child");const u=o.insert(()=>r,":first-child"),{cssStyles:f}=e;u.attr("class","basic label-container").attr("style",(0,a.KL)(f)),p(e,u)}else{const t=U(o,c,d,A);r&&t.attr("style",r),p(e,t)}return e.intersect=function(t){return N.polygon(e,A,t)},o}async function Vt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=-s/2,d=-l/2,m=.2*l,A=.2*l,{cssStyles:y}=e,b=h.A.svg(o),x=(0,i.Fr)(e,{}),v=[{x:c-m/2,y:d},{x:c+s+m/2,y:d},{x:c+s+m/2,y:d+l},{x:c-m/2,y:d+l}],C=[{x:c+s-m/2,y:d+l},{x:c+s+m/2,y:d+l},{x:c+s+m/2,y:d+l-A}];"handDrawn"!==e.look&&(x.roughness=0,x.fillStyle="solid");const k=g(v),w=b.path(k,x),B=g(C),I=b.path(B,{...x,fillStyle:"solid"}),S=o.insert(()=>I,":first-child");return S.insert(()=>w,":first-child"),S.attr("class","basic label-container"),y&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",y),r&&"handDrawn"!==e.look&&S.selectAll("path").attr("style",r),p(e,S),e.intersect=function(t){return N.polygon(e,v,t)},o}async function Qt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=Math.max(a.width+2*(e.padding??0),e?.width??0),c=Math.max(a.height+2*(e.padding??0),e?.height??0),d=c/4,A=.2*l,y=.2*c,b=c+d,{cssStyles:x}=e,v=h.A.svg(o),C=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");const k=[{x:-l/2-l/2*.1,y:b/2},...m(-l/2-l/2*.1,b/2,l/2+l/2*.1,b/2,d,.8),{x:l/2+l/2*.1,y:-b/2},{x:-l/2-l/2*.1,y:-b/2}],w=-l/2+l/2*.1,B=-b/2-.4*y,I=[{x:w+l-A,y:1.4*(B+c)},{x:w+l,y:B+c-y},{x:w+l,y:.9*(B+c)},...m(w+l,1.3*(B+c),w+l-A,1.5*(B+c),.03*-c,.5)],S=g(k),_=v.path(S,C),E=g(I),T=v.path(E,{...C,fillStyle:"solid"}),M=o.insert(()=>T,":first-child");return M.insert(()=>_,":first-child"),M.attr("class","basic label-container"),x&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",x),r&&"handDrawn"!==e.look&&M.selectAll("path").attr("style",r),M.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-l/2+(e.padding??0)-(a.x-(a.left??0))},${-c/2+(e.padding??0)-d/2-(a.y-(a.top??0))})`),p(e,M),e.intersect=function(t){return N.polygon(e,k,t)},o}async function Xt(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=Math.max(a.width+e.padding,e?.width||0),l=Math.max(a.height+e.padding,e?.height||0),c=-s/2,h=-l/2,d=o.insert("rect",":first-child");return d.attr("class","text").attr("style",r).attr("rx",0).attr("ry",0).attr("x",c).attr("y",h).attr("width",s).attr("height",l),p(e,d),e.intersect=function(t){return N.rect(e,t)},o}(0,l.K2)(Ft,"question"),(0,l.K2)(jt,"rect_left_inv_arrow"),(0,l.K2)(zt,"rectWithTitle"),(0,l.K2)($t,"generateArcPoints"),(0,l.K2)(Rt,"roundedRect"),(0,l.K2)(Nt,"shadedProcess"),(0,l.K2)(qt,"slopedRect"),(0,l.K2)(Wt,"squareRect"),(0,l.K2)(Kt,"stadium"),(0,l.K2)(Ut,"state"),(0,l.K2)(Ht,"stateEnd"),(0,l.K2)(Gt,"stateStart"),(0,l.K2)(Yt,"subroutine"),(0,l.K2)(Vt,"taggedRect"),(0,l.K2)(Qt,"taggedWaveEdgedRectangle"),(0,l.K2)(Xt,"text");var Zt=(0,l.K2)((t,e,n,r,i,o)=>`M${t},${e}\n    a${i},${o} 0,0,1 0,${-r}\n    l${n},0\n    a${i},${o} 0,0,1 0,${r}\n    M${n},${-r}\n    a${i},${o} 0,0,0 0,${r}\n    l${-n},0`,"createCylinderPathD"),Jt=(0,l.K2)((t,e,n,r,i,o)=>[`M${t},${e}`,`M${t+n},${e}`,`a${i},${o} 0,0,0 0,${-r}`,`l${-n},0`,`a${i},${o} 0,0,0 0,${r}`,`l${n},0`].join(" "),"createOuterCylinderPathD"),te=(0,l.K2)((t,e,n,r,i,o)=>[`M${t+n/2},${-r/2}`,`a${i},${o} 0,0,0 0,${r}`].join(" "),"createInnerCylinderPathD");async function ee(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:s,label:l,halfPadding:c}=await u(t,e,f(e)),d="neo"===e.look?2*c:c,g=s.height+d,m=g/2,A=m/(2.5+g/50),y=s.width+A+d,{cssStyles:b}=e;let x;if("handDrawn"===e.look){const t=h.A.svg(o),n=Jt(0,0,y,g,A,m),r=te(0,0,y,g,A,m),a=t.path(n,(0,i.Fr)(e,{})),s=t.path(r,(0,i.Fr)(e,{fill:"none"}));x=o.insert(()=>s,":first-child"),x=o.insert(()=>a,":first-child"),x.attr("class","basic label-container"),b&&x.attr("style",b)}else{const t=Zt(0,0,y,g,A,m);x=o.insert("path",":first-child").attr("d",t).attr("class","basic label-container").attr("style",(0,a.KL)(b)).attr("style",r),x.attr("class","basic label-container"),b&&x.selectAll("path").attr("style",b),r&&x.selectAll("path").attr("style",r)}return x.attr("label-offset-x",A),x.attr("transform",`translate(${-y/2}, ${g/2} )`),l.attr("transform",`translate(${-s.width/2-A-(s.x-(s.left??0))}, ${-s.height/2-(s.y-(s.top??0))})`),p(e,x),e.intersect=function(t){const n=N.rect(e,t),r=n.y-(e.y??0);if(0!=m&&(Math.abs(r)<(e.height??0)/2||Math.abs(r)==(e.height??0)/2&&Math.abs(n.x-(e.x??0))>(e.width??0)/2-A)){let i=A*A*(1-r*r/(m*m));0!=i&&(i=Math.sqrt(Math.abs(i))),i=A-i,t.x-(e.x??0)>0&&(i=-i),n.x+=i}return n},o}async function ne(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=a.width+e.padding,l=a.height+e.padding,c=[{x:-3*l/6,y:0},{x:s+3*l/6,y:0},{x:s,y:-l},{x:0,y:-l}];let d;const{cssStyles:m}=e;if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{}),r=g(c),a=t.path(r,n);d=o.insert(()=>a,":first-child").attr("transform",`translate(${-s/2}, ${l/2})`),m&&d.attr("style",m)}else d=U(o,s,l,c);return r&&d.attr("style",r),e.width=s,e.height=l,p(e,d),e.intersect=function(t){return N.polygon(e,c,t)},o}async function re(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=Math.max(60,a.width+2*(e.padding??0),e?.width??0),l=Math.max(20,a.height+2*(e.padding??0),e?.height??0),{cssStyles:c}=e,d=h.A.svg(o),m=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(m.roughness=0,m.fillStyle="solid");const A=[{x:-s/2*.8,y:-l/2},{x:s/2*.8,y:-l/2},{x:s/2,y:-l/2*.6},{x:s/2,y:l/2},{x:-s/2,y:l/2},{x:-s/2,y:-l/2*.6}],y=g(A),b=d.path(y,m),x=o.insert(()=>b,":first-child");return x.attr("class","basic label-container"),c&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",c),r&&"handDrawn"!==e.look&&x.selectChildren("path").attr("style",r),p(e,x),e.intersect=function(t){return N.polygon(e,A,t)},o}async function ie(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:c}=await u(t,e,f(e)),d=(0,s._3)((0,s.D7)().flowchart?.htmlLabels),m=a.width+(e.padding??0),A=m+a.height,y=m+a.height,b=[{x:0,y:0},{x:y,y:0},{x:y/2,y:-A}],{cssStyles:x}=e,v=h.A.svg(o),C=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");const k=g(b),w=v.path(k,C),B=o.insert(()=>w,":first-child").attr("transform",`translate(${-A/2}, ${A/2})`);return x&&"handDrawn"!==e.look&&B.selectChildren("path").attr("style",x),r&&"handDrawn"!==e.look&&B.selectChildren("path").attr("style",r),e.width=m,e.height=A,p(e,B),c.attr("transform",`translate(${-a.width/2-(a.x-(a.left??0))}, ${A/2-(a.height+(e.padding??0)/(d?2:1)-(a.y-(a.top??0)))})`),e.intersect=function(t){return l.Rm.info("Triangle intersect",e,b,t),N.polygon(e,b,t)},o}async function oe(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=Math.max(a.width+2*(e.padding??0),e?.width??0),c=Math.max(a.height+2*(e.padding??0),e?.height??0),d=c/8,A=c+d,{cssStyles:y}=e,b=70-l,x=b>0?b/2:0,v=h.A.svg(o),C=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");const k=[{x:-l/2-x,y:A/2},...m(-l/2-x,A/2,l/2+x,A/2,d,.8),{x:l/2+x,y:-A/2},{x:-l/2-x,y:-A/2}],w=g(k),B=v.path(w,C),I=o.insert(()=>B,":first-child");return I.attr("class","basic label-container"),y&&"handDrawn"!==e.look&&I.selectAll("path").attr("style",y),r&&"handDrawn"!==e.look&&I.selectAll("path").attr("style",r),I.attr("transform",`translate(0,${-d/2})`),s.attr("transform",`translate(${-l/2+(e.padding??0)-(a.x-(a.left??0))},${-c/2+(e.padding??0)-d-(a.y-(a.top??0))})`),p(e,I),e.intersect=function(t){return N.polygon(e,k,t)},o}async function ae(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a}=await u(t,e,f(e)),s=Math.max(a.width+2*(e.padding??0),e?.width??0),l=Math.max(a.height+2*(e.padding??0),e?.height??0),c=s/l;let d=s,A=l;d>A*c?A=d/c:d=A*c,d=Math.max(d,100),A=Math.max(A,50);const y=Math.min(.2*A,A/4),b=A+2*y,{cssStyles:x}=e,v=h.A.svg(o),C=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");const k=[{x:-d/2,y:b/2},...m(-d/2,b/2,d/2,b/2,y,1),{x:d/2,y:-b/2},...m(d/2,-b/2,-d/2,-b/2,y,-1)],w=g(k),B=v.path(w,C),I=o.insert(()=>B,":first-child");return I.attr("class","basic label-container"),x&&"handDrawn"!==e.look&&I.selectAll("path").attr("style",x),r&&"handDrawn"!==e.look&&I.selectAll("path").attr("style",r),p(e,I),e.intersect=function(t){return N.polygon(e,k,t)},o}async function se(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,label:s}=await u(t,e,f(e)),l=Math.max(a.width+2*(e.padding??0),e?.width??0),c=Math.max(a.height+2*(e.padding??0),e?.height??0),d=-l/2,g=-c/2,{cssStyles:m}=e,A=h.A.svg(o),y=(0,i.Fr)(e,{}),b=[{x:d-5,y:g-5},{x:d-5,y:g+c},{x:d+l,y:g+c},{x:d+l,y:g-5}],x=`M${d-5},${g-5} L${d+l},${g-5} L${d+l},${g+c} L${d-5},${g+c} L${d-5},${g-5}\n                M${d-5},${g} L${d+l},${g}\n                M${d},${g-5} L${d},${g+c}`;"handDrawn"!==e.look&&(y.roughness=0,y.fillStyle="solid");const v=A.path(x,y),C=o.insert(()=>v,":first-child");return C.attr("transform","translate(2.5, 2.5)"),C.attr("class","basic label-container"),m&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",m),r&&"handDrawn"!==e.look&&C.selectAll("path").attr("style",r),s.attr("transform",`translate(${-a.width/2+2.5-(a.x-(a.left??0))}, ${-a.height/2+2.5-(a.y-(a.top??0))})`),p(e,C),e.intersect=function(t){return N.polygon(e,b,t)},o}async function le(t,e){const n=e;if(n.alias&&(e.label=n.alias),"handDrawn"===e.look){const{themeVariables:n}=(0,s.zj)(),{background:r}=n,i={...e,id:e.id+"-background",look:"default",cssStyles:["stroke: none",`fill: ${r}`]};await le(t,i)}const r=(0,s.zj)();e.useHtmlLabels=r.htmlLabels;let o=r.er?.diagramPadding??10,l=r.er?.entityPadding??6;const{cssStyles:u}=e,{labelStyles:d,nodeStyles:g}=(0,i.GX)(e);if(0===n.attributes.length&&e.label){const n={rx:0,ry:0,labelPaddingX:o,labelPaddingY:1.5*o,classes:""};(0,a.Un)(e.label,r)+2*n.labelPaddingX<r.er.minEntityWidth&&(e.width=r.er.minEntityWidth);const i=await Ct(t,e,n);if(!(0,s._3)(r.htmlLabels)){const t=i.select("text"),e=t.node()?.getBBox();t.attr("transform",`translate(${-e.width/2}, 0)`)}return i}r.htmlLabels||(o*=1.25,l*=1.25);let m=f(e);m||(m="node default");const A=t.insert("g").attr("class",m).attr("id",e.domId||e.id),y=await ce(A,e.label??"",r,0,0,["name"],d);y.height+=l;let b=0;const x=[],v=[];let C=0,k=0,w=0,B=0,I=!0,S=!0;for(const t of n.attributes){const e=await ce(A,t.type,r,0,b,["attribute-type"],d);C=Math.max(C,e.width+o);const n=await ce(A,t.name,r,0,b,["attribute-name"],d);k=Math.max(k,n.width+o);const i=await ce(A,t.keys.join(),r,0,b,["attribute-keys"],d);w=Math.max(w,i.width+o);const a=await ce(A,t.comment,r,0,b,["attribute-comment"],d);B=Math.max(B,a.width+o);const s=Math.max(e.height,n.height,i.height,a.height)+l;v.push({yOffset:b,rowHeight:s}),b+=s}let _=4;w<=o&&(I=!1,w=0,_--),B<=o&&(S=!1,B=0,_--);const E=A.node().getBBox();if(y.width+2*o-(C+k+w+B)>0){const t=y.width+2*o-(C+k+w+B);C+=t/_,k+=t/_,w>0&&(w+=t/_),B>0&&(B+=t/_)}const T=C+k+w+B,M=h.A.svg(A),L=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(L.roughness=0,L.fillStyle="solid");let O=0;v.length>0&&(O=v.reduce((t,e)=>t+(e?.rowHeight??0),0));const D=Math.max(E.width+2*o,e?.width||0,T),P=Math.max((O??0)+y.height,e?.height||0),F=-D/2,j=-P/2;A.selectAll("g:not(:first-child)").each((t,e,n)=>{const r=(0,c.Ltv)(n[e]),i=r.attr("transform");let a=0,s=0;if(i){const t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(i);t&&(a=parseFloat(t[1]),s=parseFloat(t[2]),r.attr("class").includes("attribute-name")?a+=C:r.attr("class").includes("attribute-keys")?a+=C+k:r.attr("class").includes("attribute-comment")&&(a+=C+k+w))}r.attr("transform",`translate(${F+o/2+a}, ${s+j+y.height+l/2})`)}),A.select(".name").attr("transform","translate("+-y.width/2+", "+(j+l/2)+")");const z=M.rectangle(F,j,D,P,L),$=A.insert(()=>z,":first-child").attr("style",u.join("")),{themeVariables:R}=(0,s.zj)(),{rowEven:q,rowOdd:W,nodeBorder:K}=R;x.push(0);for(const[t,e]of v.entries()){const n=(t+1)%2==0&&0!==e.yOffset,r=M.rectangle(F,y.height+j+e?.yOffset,D,e?.rowHeight,{...L,fill:n?q:W,stroke:K});A.insert(()=>r,"g.label").attr("style",u.join("")).attr("class","row-rect-"+(n?"even":"odd"))}let U=M.line(F,y.height+j,D+F,y.height+j,L);A.insert(()=>U).attr("class","divider"),U=M.line(C+F,y.height+j,C+F,P+j,L),A.insert(()=>U).attr("class","divider"),I&&(U=M.line(C+k+F,y.height+j,C+k+F,P+j,L),A.insert(()=>U).attr("class","divider")),S&&(U=M.line(C+k+w+F,y.height+j,C+k+w+F,P+j,L),A.insert(()=>U).attr("class","divider"));for(const t of x)U=M.line(F,y.height+j+t,D+F,y.height+j+t,L),A.insert(()=>U).attr("class","divider");if(p(e,$),g&&"handDrawn"!==e.look){const t=g.split(";"),e=t?.filter(t=>t.includes("stroke"))?.map(t=>`${t}`).join("; ");A.selectAll("path").attr("style",e??""),A.selectAll(".row-rect-even path").attr("style",g)}return e.intersect=function(t){return N.rect(e,t)},A}async function ce(t,e,n,r=0,i=0,l=[],h=""){const u=t.insert("g").attr("class",`label ${l.join(" ")}`).attr("transform",`translate(${r}, ${i})`).attr("style",h);e!==(0,s.QO)(e)&&(e=(e=(0,s.QO)(e)).replaceAll("<","&lt;").replaceAll(">","&gt;"));const d=u.node().appendChild(await(0,o.GZ)(u,e,{width:(0,a.Un)(e,n)+100,style:h,useHtmlLabels:n.htmlLabels},n));if(e.includes("&lt;")||e.includes("&gt;")){let t=d.children[0];for(t.textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">");t.childNodes[0];)t=t.childNodes[0],t.textContent=t.textContent.replaceAll("&lt;","<").replaceAll("&gt;",">")}let p=d.getBBox();if((0,s._3)(n.htmlLabels)){const t=d.children[0];t.style.textAlign="start";const e=(0,c.Ltv)(d);p=t.getBoundingClientRect(),e.attr("width",p.width),e.attr("height",p.height)}return p}async function he(t,e,n,r,i=n.class.padding??12){const o=r?0:3,a=t.insert("g").attr("class",f(e)).attr("id",e.domId||e.id);let s=null,l=null,c=null,h=null,u=0,d=0,p=0;if(s=a.insert("g").attr("class","annotation-group text"),e.annotations.length>0){const t=e.annotations[0];await ue(s,{text:`${t}`},0),u=s.node().getBBox().height}l=a.insert("g").attr("class","label-group text"),await ue(l,e,0,["font-weight: bolder"]);const g=l.node().getBBox();d=g.height,c=a.insert("g").attr("class","members-group text");let m=0;for(const t of e.members)m+=await ue(c,t,m,[t.parseClassifier()])+o;p=c.node().getBBox().height,p<=0&&(p=i/2),h=a.insert("g").attr("class","methods-group text");let A=0;for(const t of e.methods)A+=await ue(h,t,A,[t.parseClassifier()])+o;let y=a.node().getBBox();if(null!==s){const t=s.node().getBBox();s.attr("transform",`translate(${-t.width/2})`)}return l.attr("transform",`translate(${-g.width/2}, ${u})`),y=a.node().getBBox(),c.attr("transform",`translate(0, ${u+d+2*i})`),y=a.node().getBBox(),h.attr("transform",`translate(0, ${u+d+(p?p+4*i:2*i)})`),y=a.node().getBBox(),{shapeSvg:a,bbox:y}}async function ue(t,e,n,r=[]){const i=t.insert("g").attr("class","label").attr("style",r.join("; ")),h=(0,s.zj)();let u="useHtmlLabels"in e?e.useHtmlLabels:(0,s._3)(h.htmlLabels)??!0,d="";d="text"in e?e.text:e.label,!u&&d.startsWith("\\")&&(d=d.substring(1)),(0,s.Wi)(d)&&(u=!0);const p=await(0,o.GZ)(i,(0,s.oB)((0,a.Sm)(d)),{width:(0,a.Un)(d,h)+50,classes:"markdown-node-label",useHtmlLabels:u},h);let f,g=1;if(u){const t=p.children[0],e=(0,c.Ltv)(p);g=t.innerHTML.split("<br>").length,t.innerHTML.includes("</math>")&&(g+=t.innerHTML.split("<mrow>").length-1);const n=t.getElementsByTagName("img");if(n){const t=""===d.replace(/<img[^>]*>/g,"").trim();await Promise.all([...n].map(e=>new Promise(n=>{function r(){if(e.style.display="flex",e.style.flexDirection="column",t){const t=h.fontSize?.toString()??window.getComputedStyle(document.body).fontSize,n=5,r=parseInt(t,10)*n+"px";e.style.minWidth=r,e.style.maxWidth=r}else e.style.width="100%";n(e)}(0,l.K2)(r,"setupImage"),setTimeout(()=>{e.complete&&r()}),e.addEventListener("error",r),e.addEventListener("load",r)})))}f=t.getBoundingClientRect(),e.attr("width",f.width),e.attr("height",f.height)}else{r.includes("font-weight: bolder")&&(0,c.Ltv)(p).selectAll("tspan").attr("font-weight",""),g=p.children.length;const t=p.children[0];(""===p.textContent||p.textContent.includes("&gt"))&&(t.textContent=d[0]+d.substring(1).replaceAll("&gt;",">").replaceAll("&lt;","<").trim()," "===d[1]&&(t.textContent=t.textContent[0]+" "+t.textContent.substring(1))),"undefined"===t.textContent&&(t.textContent=""),f=p.getBBox()}return i.attr("transform","translate(0,"+(-f.height/(2*g)+n)+")"),f.height}async function de(t,e){const n=(0,s.D7)(),r=n.class.padding??12,o=r,a=e.useHtmlLabels??(0,s._3)(n.htmlLabels)??!0,l=e;l.annotations=l.annotations??[],l.members=l.members??[],l.methods=l.methods??[];const{shapeSvg:u,bbox:d}=await he(t,e,n,a,o),{labelStyles:f,nodeStyles:g}=(0,i.GX)(e);e.labelStyle=f,e.cssStyles=l.styles||"";const m=l.styles?.join(";")||g||"";e.cssStyles||(e.cssStyles=m.replaceAll("!important","").split(";"));const A=0===l.members.length&&0===l.methods.length&&!n.class?.hideEmptyMembersBox,y=h.A.svg(u),b=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(b.roughness=0,b.fillStyle="solid");const x=d.width;let v=d.height;0===l.members.length&&0===l.methods.length?v+=o:l.members.length>0&&0===l.methods.length&&(v+=2*o);const C=-x/2,k=-v/2,w=y.rectangle(C-r,k-r-(A?r:0===l.members.length&&0===l.methods.length?-r/2:0),x+2*r,v+2*r+(A?2*r:0===l.members.length&&0===l.methods.length?-r:0),b),B=u.insert(()=>w,":first-child");B.attr("class","basic label-container");const I=B.node().getBBox();u.selectAll(".text").each((t,e,n)=>{const i=(0,c.Ltv)(n[e]),o=i.attr("transform");let s=0;if(o){const t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(o);t&&(s=parseFloat(t[2]))}let h=s+k+r-(A?r:0===l.members.length&&0===l.methods.length?-r/2:0);a||(h-=4);let d=C;(i.attr("class").includes("label-group")||i.attr("class").includes("annotation-group"))&&(d=-i.node()?.getBBox().width/2||0,u.selectAll("text").each(function(t,e,n){"middle"===window.getComputedStyle(n[e]).textAnchor&&(d=0)})),i.attr("transform",`translate(${d}, ${h})`)});const S=u.select(".annotation-group").node().getBBox().height-(A?r/2:0)||0,_=u.select(".label-group").node().getBBox().height-(A?r/2:0)||0,E=u.select(".members-group").node().getBBox().height-(A?r/2:0)||0;if(l.members.length>0||l.methods.length>0||A){const t=y.line(I.x,S+_+k+r,I.x+I.width,S+_+k+r,b);u.insert(()=>t).attr("class","divider").attr("style",m)}if(A||l.members.length>0||l.methods.length>0){const t=y.line(I.x,S+_+E+k+2*o+r,I.x+I.width,S+_+E+k+r+2*o,b);u.insert(()=>t).attr("class","divider").attr("style",m)}if("handDrawn"!==l.look&&u.selectAll("path").attr("style",m),B.select(":nth-child(2)").attr("style",m),u.selectAll(".divider").select("path").attr("style",m),e.labelStyle?u.selectAll("span").attr("style",e.labelStyle):u.selectAll("span").attr("style",m),!a){const t=RegExp(/color\s*:\s*([^;]*)/),e=t.exec(m);if(e){const t=e[0].replace("color","fill");u.selectAll("tspan").attr("style",t)}else if(f){const e=t.exec(f);if(e){const t=e[0].replace("color","fill");u.selectAll("tspan").attr("style",t)}}}return p(e,B),e.intersect=function(t){return N.rect(e,t)},u}async function pe(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const o=e,a=e,s="verifyMethod"in e,l=f(e),u=t.insert("g").attr("class",l).attr("id",e.domId??e.id);let d;d=s?await fe(u,`&lt;&lt;${o.type}&gt;&gt;`,0,e.labelStyle):await fe(u,"&lt;&lt;Element&gt;&gt;",0,e.labelStyle);let g=d;const m=await fe(u,o.name,g,e.labelStyle+"; font-weight: bold;");g+=m+20,s?(g+=await fe(u,o.requirementId?`ID: ${o.requirementId}`:"",g,e.labelStyle),g+=await fe(u,o.text?`Text: ${o.text}`:"",g,e.labelStyle),g+=await fe(u,o.risk?`Risk: ${o.risk}`:"",g,e.labelStyle),await fe(u,o.verifyMethod?`Verification: ${o.verifyMethod}`:"",g,e.labelStyle)):(g+=await fe(u,a.type?`Type: ${a.type}`:"",g,e.labelStyle),await fe(u,a.docRef?`Doc Ref: ${a.docRef}`:"",g,e.labelStyle));const A=(u.node()?.getBBox().width??200)+20,y=(u.node()?.getBBox().height??200)+20,b=-A/2,x=-y/2,v=h.A.svg(u),C=(0,i.Fr)(e,{});"handDrawn"!==e.look&&(C.roughness=0,C.fillStyle="solid");const k=v.rectangle(b,x,A,y,C),w=u.insert(()=>k,":first-child");if(w.attr("class","basic label-container").attr("style",r),u.selectAll(".label").each((t,e,n)=>{const r=(0,c.Ltv)(n[e]),i=r.attr("transform");let o=0,a=0;if(i){const t=RegExp(/translate\(([^,]+),([^)]+)\)/).exec(i);t&&(o=parseFloat(t[1]),a=parseFloat(t[2]))}const s=a-y/2;let l=b+10;0!==e&&1!==e||(l=o),r.attr("transform",`translate(${l}, ${s+20})`)}),g>d+m+20){const t=v.line(b,x+d+m+20,b+A,x+d+m+20,C);u.insert(()=>t).attr("style",r)}return p(e,w),e.intersect=function(t){return N.rect(e,t)},u}async function fe(t,e,n,r=""){if(""===e)return 0;const i=t.insert("g").attr("class","label").attr("style",r),l=(0,s.D7)(),h=l.htmlLabels??!0,u=await(0,o.GZ)(i,(0,s.oB)((0,a.Sm)(e)),{width:(0,a.Un)(e,l)+50,classes:"markdown-node-label",useHtmlLabels:h,style:r},l);let d;if(h){const t=u.children[0],e=(0,c.Ltv)(u);d=t.getBoundingClientRect(),e.attr("width",d.width),e.attr("height",d.height)}else{const t=u.children[0];for(const e of t.children)e.textContent=e.textContent.replaceAll("&gt;",">").replaceAll("&lt;","<"),r&&e.setAttribute("style",r);d=u.getBBox(),d.height+=6}return i.attr("transform",`translate(${-d.width/2},${-d.height/2+n})`),d.height}(0,l.K2)(ee,"tiltedCylinder"),(0,l.K2)(ne,"trapezoid"),(0,l.K2)(re,"trapezoidalPentagon"),(0,l.K2)(ie,"triangle"),(0,l.K2)(oe,"waveEdgedRectangle"),(0,l.K2)(ae,"waveRectangle"),(0,l.K2)(se,"windowPane"),(0,l.K2)(le,"erBox"),(0,l.K2)(ce,"addText"),(0,l.K2)(he,"textHelper"),(0,l.K2)(ue,"addText"),(0,l.K2)(de,"classBox"),(0,l.K2)(pe,"requirementBox"),(0,l.K2)(fe,"addText");var ge=(0,l.K2)(t=>{switch(t){case"Very High":return"red";case"High":return"orange";case"Medium":return null;case"Low":return"blue";case"Very Low":return"lightblue"}},"colorFromPriority");async function me(t,e,{config:n}){const{labelStyles:r,nodeStyles:o}=(0,i.GX)(e);e.labelStyle=r||"";const a=e.width;e.width=(e.width??200)-10;const{shapeSvg:s,bbox:l,label:c}=await u(t,e,f(e)),g=e.padding||10;let m,A="";"ticket"in e&&e.ticket&&n?.kanban?.ticketBaseUrl&&(A=n?.kanban?.ticketBaseUrl.replace("#TICKET#",e.ticket),m=s.insert("svg:a",":first-child").attr("class","kanban-ticket-link").attr("xlink:href",A).attr("target","_blank"));const y={useHtmlLabels:e.useHtmlLabels,labelStyle:e.labelStyle||"",width:e.width,img:e.img,padding:e.padding||8,centerLabel:!1};let b,x;({label:b,bbox:x}=m?await d(m,"ticket"in e&&e.ticket||"",y):await d(s,"ticket"in e&&e.ticket||"",y));const{label:v,bbox:k}=await d(s,"assigned"in e&&e.assigned||"",y);e.width=a;const w=e?.width||0,B=Math.max(x.height,k.height)/2,I=Math.max(l.height+20,e?.height||0)+B,S=-w/2,_=-I/2;let E;c.attr("transform","translate("+(g-w/2)+", "+(-B-l.height/2)+")"),b.attr("transform","translate("+(g-w/2)+", "+(-B+l.height/2)+")"),v.attr("transform","translate("+(g+w/2-k.width-20)+", "+(-B+l.height/2)+")");const{rx:T,ry:M}=e,{cssStyles:L}=e;if("handDrawn"===e.look){const t=h.A.svg(s),n=(0,i.Fr)(e,{}),r=T||M?t.path(C(S,_,w,I,T||0),n):t.rectangle(S,_,w,I,n);E=s.insert(()=>r,":first-child"),E.attr("class","basic label-container").attr("style",L||null)}else{E=s.insert("rect",":first-child"),E.attr("class","basic label-container __APA__").attr("style",o).attr("rx",T??5).attr("ry",M??5).attr("x",S).attr("y",_).attr("width",w).attr("height",I);const t="priority"in e&&e.priority;if(t){const e=s.append("line"),n=S+2,r=_+Math.floor((T??0)/2),i=_+I-Math.floor((T??0)/2);e.attr("x1",n).attr("y1",r).attr("x2",n).attr("y2",i).attr("stroke-width","4").attr("stroke",ge(t))}}return p(e,E),e.height=I,e.intersect=function(t){return N.rect(e,t)},s}async function Ae(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:s,halfPadding:c,label:d}=await u(t,e,f(e)),g=s.width+10*c,m=s.height+8*c,A=.15*g,{cssStyles:y}=e,b=s.width+20,x=s.height+20,v=Math.max(g,b),C=Math.max(m,x);let k;d.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`);const w=`M0 0 \n    a${A},${A} 1 0,0 ${.25*v},${-1*C*.1}\n    a${A},${A} 1 0,0 ${.25*v},0\n    a${A},${A} 1 0,0 ${.25*v},0\n    a${A},${A} 1 0,0 ${.25*v},${.1*C}\n\n    a${A},${A} 1 0,0 ${.15*v},${.33*C}\n    a${.8*A},${.8*A} 1 0,0 0,${.34*C}\n    a${A},${A} 1 0,0 ${-1*v*.15},${.33*C}\n\n    a${A},${A} 1 0,0 ${-1*v*.25},${.15*C}\n    a${A},${A} 1 0,0 ${-1*v*.25},0\n    a${A},${A} 1 0,0 ${-1*v*.25},0\n    a${A},${A} 1 0,0 ${-1*v*.25},${-1*C*.15}\n\n    a${A},${A} 1 0,0 ${-1*v*.1},${-1*C*.33}\n    a${.8*A},${.8*A} 1 0,0 0,${-1*C*.34}\n    a${A},${A} 1 0,0 ${.1*v},${-1*C*.33}\n  H0 V0 Z`;if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{}),r=t.path(w,n);k=o.insert(()=>r,":first-child"),k.attr("class","basic label-container").attr("style",(0,a.KL)(y))}else k=o.insert("path",":first-child").attr("class","basic label-container").attr("style",r).attr("d",w);return k.attr("transform",`translate(${-v/2}, ${-C/2})`),p(e,k),e.calcIntersect=function(t,e){return N.rect(t,e)},e.intersect=function(t){return l.Rm.info("Bang intersect",e,t),N.rect(e,t)},o}async function ye(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:s,halfPadding:c,label:d}=await u(t,e,f(e)),g=s.width+2*c,m=s.height+2*c,A=.15*g,y=.25*g,b=.35*g,x=.2*g,{cssStyles:v}=e;let C;const k=`M0 0 \n    a${A},${A} 0 0,1 ${.25*g},${-1*g*.1}\n    a${b},${b} 1 0,1 ${.4*g},${-1*g*.1}\n    a${y},${y} 1 0,1 ${.35*g},${.2*g}\n\n    a${A},${A} 1 0,1 ${.15*g},${.35*m}\n    a${x},${x} 1 0,1 ${-1*g*.15},${.65*m}\n\n    a${y},${A} 1 0,1 ${-1*g*.25},${.15*g}\n    a${b},${b} 1 0,1 ${-1*g*.5},0\n    a${A},${A} 1 0,1 ${-1*g*.25},${-1*g*.15}\n\n    a${A},${A} 1 0,1 ${-1*g*.1},${-1*m*.35}\n    a${x},${x} 1 0,1 ${.1*g},${-1*m*.65}\n  H0 V0 Z`;if("handDrawn"===e.look){const t=h.A.svg(o),n=(0,i.Fr)(e,{}),r=t.path(k,n);C=o.insert(()=>r,":first-child"),C.attr("class","basic label-container").attr("style",(0,a.KL)(v))}else C=o.insert("path",":first-child").attr("class","basic label-container").attr("style",r).attr("d",k);return d.attr("transform",`translate(${-s.width/2}, ${-s.height/2})`),C.attr("transform",`translate(${-g/2}, ${-m/2})`),p(e,C),e.calcIntersect=function(t,e){return N.rect(t,e)},e.intersect=function(t){return l.Rm.info("Cloud intersect",e,t),N.rect(e,t)},o}async function be(t,e){const{labelStyles:n,nodeStyles:r}=(0,i.GX)(e);e.labelStyle=n;const{shapeSvg:o,bbox:a,halfPadding:s,label:l}=await u(t,e,f(e)),c=a.width+8*s,h=a.height+2*s,d=`\n    M${-c/2} ${h/2-5}\n    v${10-h}\n    q0,-5 5,-5\n    h${c-10}\n    q5,0 5,5\n    v${h-10}\n    q0,5 -5,5\n    h${10-c}\n    q-5,0 -5,-5\n    Z\n  `,g=o.append("path").attr("id","node-"+e.id).attr("class","node-bkg node-"+e.type).attr("style",r).attr("d",d);return o.append("line").attr("class","node-line-").attr("x1",-c/2).attr("y1",h/2).attr("x2",c/2).attr("y2",h/2),l.attr("transform",`translate(${-a.width/2}, ${-a.height/2})`),o.append(()=>l.node()),p(e,g),e.calcIntersect=function(t,e){return N.rect(t,e)},e.intersect=function(t){return N.rect(e,t)},o}async function xe(t,e){return Y(t,e,{padding:e.padding??0})}(0,l.K2)(me,"kanbanItem"),(0,l.K2)(Ae,"bang"),(0,l.K2)(ye,"cloud"),(0,l.K2)(be,"defaultMindmapNode"),(0,l.K2)(xe,"mindmapCircle");var ve=[{semanticName:"Process",name:"Rectangle",shortName:"rect",description:"Standard process shape",aliases:["proc","process","rectangle"],internalAliases:["squareRect"],handler:Wt},{semanticName:"Event",name:"Rounded Rectangle",shortName:"rounded",description:"Represents an event",aliases:["event"],internalAliases:["roundedRect"],handler:Rt},{semanticName:"Terminal Point",name:"Stadium",shortName:"stadium",description:"Terminal point",aliases:["terminal","pill"],handler:Kt},{semanticName:"Subprocess",name:"Framed Rectangle",shortName:"fr-rect",description:"Subprocess",aliases:["subprocess","subproc","framed-rectangle","subroutine"],handler:Yt},{semanticName:"Database",name:"Cylinder",shortName:"cyl",description:"Database storage",aliases:["db","database","cylinder"],handler:st},{semanticName:"Start",name:"Circle",shortName:"circle",description:"Starting point",aliases:["circ"],handler:Y},{semanticName:"Bang",name:"Bang",shortName:"bang",description:"Bang",aliases:["bang"],handler:Ae},{semanticName:"Cloud",name:"Cloud",shortName:"cloud",description:"cloud",aliases:["cloud"],handler:ye},{semanticName:"Decision",name:"Diamond",shortName:"diam",description:"Decision-making step",aliases:["decision","diamond","question"],handler:Ft},{semanticName:"Prepare Conditional",name:"Hexagon",shortName:"hex",description:"Preparation or condition step",aliases:["hexagon","prepare"],handler:ft},{semanticName:"Data Input/Output",name:"Lean Right",shortName:"lean-r",description:"Represents input or output",aliases:["lean-right","in-out"],internalAliases:["lean_right"],handler:Bt},{semanticName:"Data Input/Output",name:"Lean Left",shortName:"lean-l",description:"Represents output or input",aliases:["lean-left","out-in"],internalAliases:["lean_left"],handler:wt},{semanticName:"Priority Action",name:"Trapezoid Base Bottom",shortName:"trap-b",description:"Priority action",aliases:["priority","trapezoid-bottom","trapezoid"],handler:ne},{semanticName:"Manual Operation",name:"Trapezoid Base Top",shortName:"trap-t",description:"Represents a manual task",aliases:["manual","trapezoid-top","inv-trapezoid"],internalAliases:["inv_trapezoid"],handler:vt},{semanticName:"Stop",name:"Double Circle",shortName:"dbl-circ",description:"Represents a stop point",aliases:["double-circle"],internalAliases:["doublecircle"],handler:ct},{semanticName:"Text Block",name:"Text Block",shortName:"text",description:"Text block",handler:Xt},{semanticName:"Card",name:"Notched Rectangle",shortName:"notch-rect",description:"Represents a card",aliases:["card","notched-rectangle"],handler:H},{semanticName:"Lined/Shaded Process",name:"Lined Rectangle",shortName:"lin-rect",description:"Lined process shape",aliases:["lined-rectangle","lined-process","lin-proc","shaded-process"],handler:Nt},{semanticName:"Start",name:"Small Circle",shortName:"sm-circ",description:"Small starting point",aliases:["start","small-circle"],internalAliases:["stateStart"],handler:Gt},{semanticName:"Stop",name:"Framed Circle",shortName:"fr-circ",description:"Stop point",aliases:["stop","framed-circle"],internalAliases:["stateEnd"],handler:Ht},{semanticName:"Fork/Join",name:"Filled Rectangle",shortName:"fork",description:"Fork or join in process flow",aliases:["join"],internalAliases:["forkJoin"],handler:dt},{semanticName:"Collate",name:"Hourglass",shortName:"hourglass",description:"Represents a collate operation",aliases:["hourglass","collate"],handler:gt},{semanticName:"Comment",name:"Curly Brace",shortName:"brace",description:"Adds a comment",aliases:["comment","brace-l"],handler:Z},{semanticName:"Comment Right",name:"Curly Brace",shortName:"brace-r",description:"Adds a comment",handler:tt},{semanticName:"Comment with braces on both sides",name:"Curly Braces",shortName:"braces",description:"Adds a comment",handler:nt},{semanticName:"Com Link",name:"Lightning Bolt",shortName:"bolt",description:"Communication link",aliases:["com-link","lightning-bolt"],handler:It},{semanticName:"Document",name:"Document",shortName:"doc",description:"Represents a document",aliases:["doc","document"],handler:oe},{semanticName:"Delay",name:"Half-Rounded Rectangle",shortName:"delay",description:"Represents a delay",aliases:["half-rounded-rectangle"],handler:pt},{semanticName:"Direct Access Storage",name:"Horizontal Cylinder",shortName:"h-cyl",description:"Direct access storage",aliases:["das","horizontal-cylinder"],handler:ee},{semanticName:"Disk Storage",name:"Lined Cylinder",shortName:"lin-cyl",description:"Disk storage",aliases:["disk","lined-cylinder"],handler:Tt},{semanticName:"Display",name:"Curved Trapezoid",shortName:"curv-trap",description:"Represents a display",aliases:["curved-trapezoid","display"],handler:rt},{semanticName:"Divided Process",name:"Divided Rectangle",shortName:"div-rect",description:"Divided process shape",aliases:["div-proc","divided-rectangle","divided-process"],handler:lt},{semanticName:"Extract",name:"Triangle",shortName:"tri",description:"Extraction process",aliases:["extract","triangle"],handler:ie},{semanticName:"Internal Storage",name:"Window Pane",shortName:"win-pane",description:"Internal storage",aliases:["internal-storage","window-pane"],handler:se},{semanticName:"Junction",name:"Filled Circle",shortName:"f-circ",description:"Junction point",aliases:["junction","filled-circle"],handler:ht},{semanticName:"Loop Limit",name:"Trapezoidal Pentagon",shortName:"notch-pent",description:"Loop limit step",aliases:["loop-limit","notched-pentagon"],handler:re},{semanticName:"Manual File",name:"Flipped Triangle",shortName:"flip-tri",description:"Manual file operation",aliases:["manual-file","flipped-triangle"],handler:ut},{semanticName:"Manual Input",name:"Sloped Rectangle",shortName:"sl-rect",description:"Manual input step",aliases:["manual-input","sloped-rectangle"],handler:qt},{semanticName:"Multi-Document",name:"Stacked Document",shortName:"docs",description:"Multiple documents",aliases:["documents","st-doc","stacked-document"],handler:Ot},{semanticName:"Multi-Process",name:"Stacked Rectangle",shortName:"st-rect",description:"Multiple processes",aliases:["procs","processes","stacked-rectangle"],handler:Lt},{semanticName:"Stored Data",name:"Bow Tie Rectangle",shortName:"bow-rect",description:"Stored data",aliases:["stored-data","bow-tie-rectangle"],handler:K},{semanticName:"Summary",name:"Crossed Circle",shortName:"cross-circ",description:"Summary",aliases:["summary","crossed-circle"],handler:Q},{semanticName:"Tagged Document",name:"Tagged Document",shortName:"tag-doc",description:"Tagged document",aliases:["tag-doc","tagged-document"],handler:Qt},{semanticName:"Tagged Process",name:"Tagged Rectangle",shortName:"tag-rect",description:"Tagged process",aliases:["tagged-rectangle","tag-proc","tagged-process"],handler:Vt},{semanticName:"Paper Tape",name:"Flag",shortName:"flag",description:"Paper tape",aliases:["paper-tape"],handler:ae},{semanticName:"Odd",name:"Odd",shortName:"odd",description:"Odd shape",internalAliases:["rect_left_inv_arrow"],handler:jt},{semanticName:"Lined Document",name:"Lined Document",shortName:"lin-doc",description:"Lined document",aliases:["lined-document"],handler:Mt}],Ce=(0,l.K2)(()=>{const t={state:Ut,choice:G,note:Dt,rectWithTitle:zt,labelRect:kt,iconSquare:bt,iconCircle:At,icon:mt,iconRounded:yt,imageSquare:xt,anchor:q,kanbanItem:me,mindmapCircle:xe,defaultMindmapNode:be,classBox:de,erBox:le,requirementBox:pe},e=[...Object.entries(t),...ve.flatMap(t=>[t.shortName,..."aliases"in t?t.aliases:[],..."internalAliases"in t?t.internalAliases:[]].map(e=>[e,t.handler]))];return Object.fromEntries(e)},"generateShapeMap")();function ke(t){return t in Ce}(0,l.K2)(ke,"isValidShape");var we=new Map;async function Be(t,e,n){let r,i;"rect"===e.shape&&(e.rx&&e.ry?e.shape="roundedRect":e.shape="squareRect");const o=e.shape?Ce[e.shape]:void 0;if(!o)throw new Error(`No such shape: ${e.shape}. Please check your syntax.`);if(e.link){let a;"sandbox"===n.config.securityLevel?a="_top":e.linkTarget&&(a=e.linkTarget||"_blank"),r=t.insert("svg:a").attr("xlink:href",e.link).attr("target",a??null),i=await o(r,e,n)}else i=await o(t,e,n),r=i;return e.tooltip&&i.attr("title",e.tooltip),we.set(e.id,r),e.haveCallback&&r.attr("class",r.attr("class")+" clickable"),r}(0,l.K2)(Be,"insertNode");var Ie=(0,l.K2)((t,e)=>{we.set(e.id,t)},"setNodeElem"),Se=(0,l.K2)(()=>{we.clear()},"clear"),_e=(0,l.K2)(t=>{const e=we.get(t.id);l.Rm.trace("Transforming node",t.diff,t,"translate("+(t.x-t.width/2-5)+", "+t.width/2+")");const n=t.diff||0;return t.clusterNode?e.attr("transform","translate("+(t.x+n-t.width/2)+", "+(t.y-t.height/2-8)+")"):e.attr("transform","translate("+t.x+", "+t.y+")"),n},"positionNode")},6832:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(66984),i=n(38446),o=n(25353),a=n(23149);const s=function(t,e,n){if(!(0,a.A)(n))return!1;var s=typeof e;return!!("number"==s?(0,i.A)(n)&&(0,o.A)(e,n.length):"string"==s&&e in n)&&(0,r.A)(n[e],t)}},7222:(t,e,n)=>{"use strict";n.d(e,{A:()=>L});var r=n(22080),i=n(52528),o=n(66984);const a=function(t,e,n){(void 0!==n&&!(0,o.A)(t[e],n)||void 0===n&&!(e in t))&&(0,i.A)(t,e,n)};var s=n(97132),l=n(80154),c=n(1801),h=n(39759),u=n(50407),d=n(25175),p=n(92049),f=n(53533),g=n(41200),m=n(89610),A=n(23149),y=n(2383),b=n(15647),x=n(53098),v=Function.prototype,C=Object.prototype,k=v.toString,w=C.hasOwnProperty,B=k.call(Object);var I=n(54749);const S=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var _=n(22031),E=n(79999);const T=function(t,e,n,r,i,o,s){var v,C=S(t,n),T=S(e,n),M=s.get(T);if(M)a(t,n,M);else{var L=o?o(C,T,n+"",t,e,s):void 0,O=void 0===L;if(O){var D=(0,p.A)(T),P=!D&&(0,g.A)(T),F=!D&&!P&&(0,I.A)(T);L=T,D||P||F?(0,p.A)(C)?L=C:(0,f.A)(C)?L=(0,h.A)(C):P?(O=!1,L=(0,l.A)(T,!0)):F?(O=!1,L=(0,c.A)(T,!0)):L=[]:function(t){if(!(0,x.A)(t)||"[object Object]"!=(0,y.A)(t))return!1;var e=(0,b.A)(t);if(null===e)return!0;var n=w.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&k.call(n)==B}(T)||(0,d.A)(T)?(L=C,(0,d.A)(C)?(v=C,L=(0,_.A)(v,(0,E.A)(v))):(0,A.A)(C)&&!(0,m.A)(C)||(L=(0,u.A)(T))):O=!1}O&&(s.set(T,L),i(L,T,r,o,s),s.delete(T)),a(t,n,L)}},M=function t(e,n,i,o,l){e!==n&&(0,s.A)(n,function(s,c){if(l||(l=new r.A),(0,A.A)(s))T(e,n,c,i,t,o,l);else{var h=o?o(S(e,c),s,c+"",e,n,l):void 0;void 0===h&&(h=s),a(e,c,h)}},E.A)},L=(0,n(3767).A)(function(t,e,n){M(t,e,n)})},8232:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(86309),i=n(51931);const o=(t,e)=>{const n=i.A.parse(t);for(const t in e)n[t]=r.A.channel.clamp[t](e[t]);return i.A.stringify(n)}},8453:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(71354),i=n.n(r),o=n(76314),a=n.n(o)()(i());a.push([t.id,"/* ========================================\n   Prompt Library Modal\n   ======================================== */\n\n.prompt-library-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 100000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.prompt-library-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    backdrop-filter: blur(2px);\n}\n\n.prompt-library-container {\n    position: relative;\n    width: 90%;\n    max-width: 1200px;\n    height: 85vh;\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    z-index: 1;\n}\n\n/* Header */\n.prompt-library-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 20px 24px;\n    border-bottom: 1px solid #e0e0e0;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n}\n\n.prompt-library-header h3 {\n    margin: 0;\n    font-size: 20px;\n    font-weight: 600;\n}\n\n.header-actions {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.btn-primary {\n    display: flex;\n    align-items: center;\n    gap: 6px;\n    padding: 8px 16px;\n    background: white;\n    color: #667eea;\n    border: none;\n    border-radius: 6px;\n    font-size: 14px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.btn-primary:hover {\n    background: #f0f0f0;\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\n}\n\n.btn-secondary {\n    padding: 8px 16px;\n    background: #f5f5f5;\n    color: #666;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n    font-size: 14px;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.btn-secondary:hover {\n    background: #e8e8e8;\n    border-color: #999;\n}\n\n.btn-icon {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 36px;\n    height: 36px;\n    background: rgba(255, 255, 255, 0.2);\n    border: none;\n    border-radius: 6px;\n    color: white;\n    font-size: 16px;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.btn-icon:hover {\n    background: rgba(255, 255, 255, 0.3);\n}\n\n.btn-close {\n    background: rgba(255, 255, 255, 0.2);\n    border: none;\n    color: white;\n    font-size: 24px;\n    width: 36px;\n    height: 36px;\n    border-radius: 6px;\n    cursor: pointer;\n    transition: background 0.2s;\n}\n\n.btn-close:hover {\n    background: rgba(255, 255, 255, 0.3);\n}\n\n/* Content */\n.prompt-library-content {\n    display: flex;\n    flex: 1;\n    min-height: 0;\n}\n\n/* Sidebar */\n.prompt-sidebar {\n    width: 220px;\n    background: #f8f9fa;\n    border-right: 1px solid #e0e0e0;\n    overflow-y: auto;\n}\n\n.sidebar-header {\n    padding: 16px;\n    font-size: 12px;\n    font-weight: 600;\n    color: #666;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.category-list {\n    list-style: none;\n    padding: 0;\n    margin: 0;\n}\n\n.category-item {\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    padding: 10px 16px;\n    cursor: pointer;\n    transition: all 0.2s;\n    user-select: none;\n}\n\n.category-item:hover {\n    background: rgba(102, 126, 234, 0.1);\n}\n\n.category-item.active {\n    background: #667eea;\n    color: white;\n    font-weight: 600;\n}\n\n.category-item .icon {\n    font-size: 18px;\n}\n\n.category-divider {\n    height: 1px;\n    background: #e0e0e0;\n    margin: 8px 0;\n}\n\n/* Main Content */\n.prompt-main {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n}\n\n.prompt-search-bar {\n    display: flex;\n    gap: 12px;\n    padding: 16px 24px;\n    border-bottom: 1px solid #e0e0e0;\n    background: white;\n}\n\n.prompt-search-input {\n    flex: 1;\n    padding: 10px 16px;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    font-size: 14px;\n    outline: none;\n    transition: border-color 0.2s;\n}\n\n.prompt-search-input:focus {\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.sort-select {\n    padding: 10px 16px;\n    border: 1px solid #ddd;\n    border-radius: 8px;\n    font-size: 14px;\n    cursor: pointer;\n    outline: none;\n    background: white;\n    transition: border-color 0.2s;\n}\n\n.sort-select:focus {\n    border-color: #667eea;\n}\n\n/* Prompt Grid */\n.prompt-grid {\n    flex: 1;\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\n    gap: 16px;\n    padding: 24px;\n    overflow-y: auto;\n    align-content: start;\n}\n\n/* Prompt Card */\n.prompt-card {\n    background: white;\n    border: 1px solid #e0e0e0;\n    border-radius: 10px;\n    padding: 16px;\n    cursor: pointer;\n    transition: all 0.2s;\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n}\n\n.prompt-card:hover {\n    border-color: #667eea;\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);\n    transform: translateY(-2px);\n}\n\n.prompt-card-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.prompt-category {\n    display: inline-block;\n    padding: 4px 10px;\n    background: #f0f0f0;\n    color: #666;\n    font-size: 11px;\n    font-weight: 600;\n    border-radius: 12px;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.btn-favorite {\n    background: none;\n    border: none;\n    font-size: 18px;\n    cursor: pointer;\n    padding: 4px;\n    transition: transform 0.2s;\n}\n\n.btn-favorite:hover {\n    transform: scale(1.2);\n}\n\n.btn-favorite.favorite-active {\n    animation: pulse 0.3s;\n}\n\n@keyframes pulse {\n    0%, 100% { transform: scale(1); }\n    50% { transform: scale(1.3); }\n}\n\n.prompt-card-body {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n}\n\n.prompt-title {\n    margin: 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: #333;\n}\n\n.prompt-description {\n    margin: 0;\n    font-size: 13px;\n    color: #666;\n    line-height: 1.5;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n}\n\n.prompt-variables {\n    display: flex;\n    gap: 6px;\n    flex-wrap: wrap;\n}\n\n.variable-badge {\n    display: inline-block;\n    padding: 3px 8px;\n    background: #e3f2fd;\n    color: #1976d2;\n    font-size: 11px;\n    border-radius: 10px;\n}\n\n.prompt-card-footer {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding-top: 12px;\n    border-top: 1px solid #f0f0f0;\n}\n\n.prompt-stats {\n    display: flex;\n    gap: 12px;\n    font-size: 11px;\n    color: #999;\n}\n\n.prompt-actions {\n    display: flex;\n    gap: 4px;\n}\n\n.prompt-actions .btn-icon {\n    width: 32px;\n    height: 32px;\n    background: #f5f5f5;\n    color: #666;\n    font-size: 14px;\n}\n\n.prompt-actions .btn-icon:hover {\n    background: #e0e0e0;\n    color: #333;\n}\n\n.btn-execute {\n    background: #667eea !important;\n    color: white !important;\n}\n\n.btn-execute:hover {\n    background: #5568d3 !important;\n}\n\n/* Empty State */\n.prompt-empty {\n    flex: 1;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n    gap: 16px;\n    padding: 40px;\n}\n\n.empty-icon {\n    font-size: 64px;\n    opacity: 0.3;\n}\n\n.empty-text {\n    font-size: 16px;\n    color: #999;\n}\n\n/* ========================================\n   Edit Dialog\n   ======================================== */\n\n.prompt-edit-dialog,\n.variable-input-dialog {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 100001;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.dialog-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.6);\n    backdrop-filter: blur(2px);\n}\n\n.dialog-container {\n    position: relative;\n    width: 90%;\n    max-width: 600px;\n    max-height: 85vh;\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\n    display: flex;\n    flex-direction: column;\n    z-index: 1;\n}\n\n.dialog-header {\n    padding: 20px 24px;\n    border-bottom: 1px solid #e0e0e0;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.dialog-header h3 {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n    color: #333;\n}\n\n.dialog-subtitle {\n    font-size: 14px;\n    color: #666;\n    margin-top: 4px;\n}\n\n.dialog-content {\n    flex: 1;\n    padding: 24px;\n    overflow-y: auto;\n}\n\n.dialog-footer {\n    padding: 16px 24px;\n    border-top: 1px solid #e0e0e0;\n    display: flex;\n    gap: 12px;\n    justify-content: flex-end;\n}\n\n/* Form Elements */\n.form-group {\n    margin-bottom: 20px;\n}\n\n.form-group label {\n    display: block;\n    margin-bottom: 8px;\n    font-size: 14px;\n    font-weight: 600;\n    color: #333;\n}\n\n.form-input,\n.form-select,\n.form-textarea {\n    width: 100%;\n    padding: 10px 12px;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n    font-size: 14px;\n    font-family: inherit;\n    outline: none;\n    transition: border-color 0.2s;\n}\n\n.form-input:focus,\n.form-select:focus,\n.form-textarea:focus {\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.form-textarea {\n    resize: vertical;\n    font-family: 'Monaco', 'Menlo', 'Courier New', monospace;\n}\n\n.form-hint {\n    margin-top: 6px;\n    font-size: 12px;\n    color: #999;\n}\n\n.variables-list {\n    display: flex;\n    flex-direction: column;\n    gap: 12px;\n    margin-bottom: 12px;\n}\n\n/* Dark Mode */\n@media (prefers-color-scheme: dark) {\n    .prompt-library-container,\n    .dialog-container {\n        background: #1e1e1e;\n        color: #e0e0e0;\n    }\n\n    .prompt-library-header {\n        border-bottom-color: #333;\n    }\n\n    .prompt-sidebar {\n        background: #252525;\n        border-right-color: #333;\n    }\n\n    .sidebar-header {\n        color: #999;\n    }\n\n    .category-item:hover {\n        background: rgba(102, 126, 234, 0.2);\n    }\n\n    .category-divider {\n        background: #333;\n    }\n\n    .prompt-search-bar {\n        background: #252525;\n        border-bottom-color: #333;\n    }\n\n    .prompt-search-input,\n    .sort-select,\n    .form-input,\n    .form-select,\n    .form-textarea {\n        background: #2a2a2a;\n        border-color: #444;\n        color: #e0e0e0;\n    }\n\n    .prompt-card {\n        background: #252525;\n        border-color: #333;\n    }\n\n    .prompt-card:hover {\n        border-color: #667eea;\n    }\n\n    .prompt-title {\n        color: #e0e0e0;\n    }\n\n    .prompt-description {\n        color: #999;\n    }\n\n    .prompt-category {\n        background: #333;\n        color: #999;\n    }\n\n    .prompt-card-footer {\n        border-top-color: #333;\n    }\n\n    .prompt-actions .btn-icon {\n        background: #333;\n        color: #999;\n    }\n\n    .prompt-actions .btn-icon:hover {\n        background: #3a3a3a;\n        color: #ccc;\n    }\n\n    .btn-secondary {\n        background: #333;\n        color: #ccc;\n        border-color: #444;\n    }\n\n    .btn-secondary:hover {\n        background: #3a3a3a;\n        border-color: #555;\n    }\n\n    .dialog-header,\n    .dialog-footer {\n        border-color: #333;\n    }\n\n    .form-group label {\n        color: #e0e0e0;\n    }\n\n    .form-hint {\n        color: #666;\n    }\n}\n\n/* Responsive */\n@media (max-width: 768px) {\n    .prompt-library-container {\n        width: 95%;\n        height: 90vh;\n    }\n\n    .prompt-library-content {\n        flex-direction: column;\n    }\n\n    .prompt-sidebar {\n        width: 100%;\n        border-right: none;\n        border-bottom: 1px solid #e0e0e0;\n        overflow-x: auto;\n        overflow-y: hidden;\n    }\n\n    .category-list {\n        display: flex;\n        padding: 8px;\n    }\n\n    .category-item {\n        white-space: nowrap;\n    }\n\n    .prompt-grid {\n        grid-template-columns: 1fr;\n        padding: 16px;\n    }\n\n    .dialog-container {\n        width: 95%;\n    }\n}\n","",{version:3,sources:["webpack://./src/editor/prompt-library.css"],names:[],mappings:"AAAA;;6CAE6C;;AAE7C;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,eAAe;IACf,aAAa;IACb,mBAAmB;IACnB,uBAAuB;AAC3B;;AAEA;IACI,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,8BAA8B;IAC9B,0BAA0B;AAC9B;;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,iBAAiB;IACjB,YAAY;IACZ,iBAAiB;IACjB,mBAAmB;IACnB,0CAA0C;IAC1C,aAAa;IACb,sBAAsB;IACtB,gBAAgB;IAChB,UAAU;AACd;;AAEA,WAAW;AACX;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,kBAAkB;IAClB,gCAAgC;IAChC,6DAA6D;IAC7D,YAAY;AAChB;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACZ;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,QAAQ;IACR,iBAAiB;IACjB,iBAAiB;IACjB,cAAc;IACd,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,2BAA2B;IAC3B,yCAAyC;AAC7C;;AAEA;IACI,iBAAiB;IACjB,mBAAmB;IACnB,WAAW;IACX,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,kBAAkB;AACtB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,WAAW;IACX,YAAY;IACZ,oCAAoC;IACpC,YAAY;IACZ,kBAAkB;IAClB,YAAY;IACZ,eAAe;IACf,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,oCAAoC;AACxC;;AAEA;IACI,oCAAoC;IACpC,YAAY;IACZ,YAAY;IACZ,eAAe;IACf,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,2BAA2B;AAC/B;;AAEA;IACI,oCAAoC;AACxC;;AAEA,YAAY;AACZ;IACI,aAAa;IACb,OAAO;IACP,aAAa;AACjB;;AAEA,YAAY;AACZ;IACI,YAAY;IACZ,mBAAmB;IACnB,+BAA+B;IAC/B,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,eAAe;IACf,gBAAgB;IAChB,WAAW;IACX,yBAAyB;IACzB,qBAAqB;AACzB;;AAEA;IACI,gBAAgB;IAChB,UAAU;IACV,SAAS;AACb;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,SAAS;IACT,kBAAkB;IAClB,eAAe;IACf,oBAAoB;IACpB,iBAAiB;AACrB;;AAEA;IACI,oCAAoC;AACxC;;AAEA;IACI,mBAAmB;IACnB,YAAY;IACZ,gBAAgB;AACpB;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,WAAW;IACX,mBAAmB;IACnB,aAAa;AACjB;;AAEA,iBAAiB;AACjB;IACI,OAAO;IACP,aAAa;IACb,sBAAsB;IACtB,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,SAAS;IACT,kBAAkB;IAClB,gCAAgC;IAChC,iBAAiB;AACrB;;AAEA;IACI,OAAO;IACP,kBAAkB;IAClB,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,aAAa;IACb,6BAA6B;AACjC;;AAEA;IACI,qBAAqB;IACrB,8CAA8C;AAClD;;AAEA;IACI,kBAAkB;IAClB,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,eAAe;IACf,aAAa;IACb,iBAAiB;IACjB,6BAA6B;AACjC;;AAEA;IACI,qBAAqB;AACzB;;AAEA,gBAAgB;AAChB;IACI,OAAO;IACP,aAAa;IACb,4DAA4D;IAC5D,SAAS;IACT,aAAa;IACb,gBAAgB;IAChB,oBAAoB;AACxB;;AAEA,gBAAgB;AAChB;IACI,iBAAiB;IACjB,yBAAyB;IACzB,mBAAmB;IACnB,aAAa;IACb,eAAe;IACf,oBAAoB;IACpB,aAAa;IACb,sBAAsB;IACtB,SAAS;AACb;;AAEA;IACI,qBAAqB;IACrB,gDAAgD;IAChD,2BAA2B;AAC/B;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;AAClC;;AAEA;IACI,qBAAqB;IACrB,iBAAiB;IACjB,mBAAmB;IACnB,WAAW;IACX,eAAe;IACf,gBAAgB;IAChB,mBAAmB;IACnB,yBAAyB;IACzB,qBAAqB;AACzB;;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,eAAe;IACf,eAAe;IACf,YAAY;IACZ,0BAA0B;AAC9B;;AAEA;IACI,qBAAqB;AACzB;;AAEA;IACI,qBAAqB;AACzB;;AAEA;IACI,WAAW,mBAAmB,EAAE;IAChC,MAAM,qBAAqB,EAAE;AACjC;;AAEA;IACI,OAAO;IACP,aAAa;IACb,sBAAsB;IACtB,QAAQ;AACZ;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,SAAS;IACT,eAAe;IACf,WAAW;IACX,gBAAgB;IAChB,oBAAoB;IACpB,qBAAqB;IACrB,4BAA4B;IAC5B,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,QAAQ;IACR,eAAe;AACnB;;AAEA;IACI,qBAAqB;IACrB,gBAAgB;IAChB,mBAAmB;IACnB,cAAc;IACd,eAAe;IACf,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,iBAAiB;IACjB,6BAA6B;AACjC;;AAEA;IACI,aAAa;IACb,SAAS;IACT,eAAe;IACf,WAAW;AACf;;AAEA;IACI,aAAa;IACb,QAAQ;AACZ;;AAEA;IACI,WAAW;IACX,YAAY;IACZ,mBAAmB;IACnB,WAAW;IACX,eAAe;AACnB;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,8BAA8B;IAC9B,uBAAuB;AAC3B;;AAEA;IACI,8BAA8B;AAClC;;AAEA,gBAAgB;AAChB;IACI,OAAO;IACP,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,uBAAuB;IACvB,SAAS;IACT,aAAa;AACjB;;AAEA;IACI,eAAe;IACf,YAAY;AAChB;;AAEA;IACI,eAAe;IACf,WAAW;AACf;;AAEA;;6CAE6C;;AAE7C;;IAEI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,eAAe;IACf,aAAa;IACb,mBAAmB;IACnB,uBAAuB;AAC3B;;AAEA;IACI,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,8BAA8B;IAC9B,0BAA0B;AAC9B;;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,gBAAgB;IAChB,gBAAgB;IAChB,iBAAiB;IACjB,mBAAmB;IACnB,0CAA0C;IAC1C,aAAa;IACb,sBAAsB;IACtB,UAAU;AACd;;AAEA;IACI,kBAAkB;IAClB,gCAAgC;IAChC,aAAa;IACb,mBAAmB;IACnB,8BAA8B;AAClC;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,eAAe;IACf,WAAW;IACX,eAAe;AACnB;;AAEA;IACI,OAAO;IACP,aAAa;IACb,gBAAgB;AACpB;;AAEA;IACI,kBAAkB;IAClB,6BAA6B;IAC7B,aAAa;IACb,SAAS;IACT,yBAAyB;AAC7B;;AAEA,kBAAkB;AAClB;IACI,mBAAmB;AACvB;;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,WAAW;AACf;;AAEA;;;IAGI,WAAW;IACX,kBAAkB;IAClB,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,oBAAoB;IACpB,aAAa;IACb,6BAA6B;AACjC;;AAEA;;;IAGI,qBAAqB;IACrB,8CAA8C;AAClD;;AAEA;IACI,gBAAgB;IAChB,wDAAwD;AAC5D;;AAEA;IACI,eAAe;IACf,eAAe;IACf,WAAW;AACf;;AAEA;IACI,aAAa;IACb,sBAAsB;IACtB,SAAS;IACT,mBAAmB;AACvB;;AAEA,cAAc;AACd;IACI;;QAEI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;QACI,yBAAyB;IAC7B;;IAEA;QACI,mBAAmB;QACnB,wBAAwB;IAC5B;;IAEA;QACI,WAAW;IACf;;IAEA;QACI,oCAAoC;IACxC;;IAEA;QACI,gBAAgB;IACpB;;IAEA;QACI,mBAAmB;QACnB,yBAAyB;IAC7B;;IAEA;;;;;QAKI,mBAAmB;QACnB,kBAAkB;QAClB,cAAc;IAClB;;IAEA;QACI,mBAAmB;QACnB,kBAAkB;IACtB;;IAEA;QACI,qBAAqB;IACzB;;IAEA;QACI,cAAc;IAClB;;IAEA;QACI,WAAW;IACf;;IAEA;QACI,gBAAgB;QAChB,WAAW;IACf;;IAEA;QACI,sBAAsB;IAC1B;;IAEA;QACI,gBAAgB;QAChB,WAAW;IACf;;IAEA;QACI,mBAAmB;QACnB,WAAW;IACf;;IAEA;QACI,gBAAgB;QAChB,WAAW;QACX,kBAAkB;IACtB;;IAEA;QACI,mBAAmB;QACnB,kBAAkB;IACtB;;IAEA;;QAEI,kBAAkB;IACtB;;IAEA;QACI,cAAc;IAClB;;IAEA;QACI,WAAW;IACf;AACJ;;AAEA,eAAe;AACf;IACI;QACI,UAAU;QACV,YAAY;IAChB;;IAEA;QACI,sBAAsB;IAC1B;;IAEA;QACI,WAAW;QACX,kBAAkB;QAClB,gCAAgC;QAChC,gBAAgB;QAChB,kBAAkB;IACtB;;IAEA;QACI,aAAa;QACb,YAAY;IAChB;;IAEA;QACI,mBAAmB;IACvB;;IAEA;QACI,0BAA0B;QAC1B,aAAa;IACjB;;IAEA;QACI,UAAU;IACd;AACJ",sourcesContent:["/* ========================================\r\n   Prompt Library Modal\r\n   ======================================== */\r\n\r\n.prompt-library-modal {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 100000;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.prompt-library-overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    backdrop-filter: blur(2px);\r\n}\r\n\r\n.prompt-library-container {\r\n    position: relative;\r\n    width: 90%;\r\n    max-width: 1200px;\r\n    height: 85vh;\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n    z-index: 1;\r\n}\r\n\r\n/* Header */\r\n.prompt-library-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 20px 24px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n}\r\n\r\n.prompt-library-header h3 {\r\n    margin: 0;\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n}\r\n\r\n.header-actions {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.btn-primary {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 6px;\r\n    padding: 8px 16px;\r\n    background: white;\r\n    color: #667eea;\r\n    border: none;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.btn-primary:hover {\r\n    background: #f0f0f0;\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);\r\n}\r\n\r\n.btn-secondary {\r\n    padding: 8px 16px;\r\n    background: #f5f5f5;\r\n    color: #666;\r\n    border: 1px solid #ddd;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.btn-secondary:hover {\r\n    background: #e8e8e8;\r\n    border-color: #999;\r\n}\r\n\r\n.btn-icon {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    width: 36px;\r\n    height: 36px;\r\n    background: rgba(255, 255, 255, 0.2);\r\n    border: none;\r\n    border-radius: 6px;\r\n    color: white;\r\n    font-size: 16px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.btn-icon:hover {\r\n    background: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.btn-close {\r\n    background: rgba(255, 255, 255, 0.2);\r\n    border: none;\r\n    color: white;\r\n    font-size: 24px;\r\n    width: 36px;\r\n    height: 36px;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    transition: background 0.2s;\r\n}\r\n\r\n.btn-close:hover {\r\n    background: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n/* Content */\r\n.prompt-library-content {\r\n    display: flex;\r\n    flex: 1;\r\n    min-height: 0;\r\n}\r\n\r\n/* Sidebar */\r\n.prompt-sidebar {\r\n    width: 220px;\r\n    background: #f8f9fa;\r\n    border-right: 1px solid #e0e0e0;\r\n    overflow-y: auto;\r\n}\r\n\r\n.sidebar-header {\r\n    padding: 16px;\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n    color: #666;\r\n    text-transform: uppercase;\r\n    letter-spacing: 0.5px;\r\n}\r\n\r\n.category-list {\r\n    list-style: none;\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\n.category-item {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n    padding: 10px 16px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    user-select: none;\r\n}\r\n\r\n.category-item:hover {\r\n    background: rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.category-item.active {\r\n    background: #667eea;\r\n    color: white;\r\n    font-weight: 600;\r\n}\r\n\r\n.category-item .icon {\r\n    font-size: 18px;\r\n}\r\n\r\n.category-divider {\r\n    height: 1px;\r\n    background: #e0e0e0;\r\n    margin: 8px 0;\r\n}\r\n\r\n/* Main Content */\r\n.prompt-main {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n}\r\n\r\n.prompt-search-bar {\r\n    display: flex;\r\n    gap: 12px;\r\n    padding: 16px 24px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    background: white;\r\n}\r\n\r\n.prompt-search-input {\r\n    flex: 1;\r\n    padding: 10px 16px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 8px;\r\n    font-size: 14px;\r\n    outline: none;\r\n    transition: border-color 0.2s;\r\n}\r\n\r\n.prompt-search-input:focus {\r\n    border-color: #667eea;\r\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.sort-select {\r\n    padding: 10px 16px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 8px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n    outline: none;\r\n    background: white;\r\n    transition: border-color 0.2s;\r\n}\r\n\r\n.sort-select:focus {\r\n    border-color: #667eea;\r\n}\r\n\r\n/* Prompt Grid */\r\n.prompt-grid {\r\n    flex: 1;\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));\r\n    gap: 16px;\r\n    padding: 24px;\r\n    overflow-y: auto;\r\n    align-content: start;\r\n}\r\n\r\n/* Prompt Card */\r\n.prompt-card {\r\n    background: white;\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 10px;\r\n    padding: 16px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n}\r\n\r\n.prompt-card:hover {\r\n    border-color: #667eea;\r\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.15);\r\n    transform: translateY(-2px);\r\n}\r\n\r\n.prompt-card-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.prompt-category {\r\n    display: inline-block;\r\n    padding: 4px 10px;\r\n    background: #f0f0f0;\r\n    color: #666;\r\n    font-size: 11px;\r\n    font-weight: 600;\r\n    border-radius: 12px;\r\n    text-transform: uppercase;\r\n    letter-spacing: 0.5px;\r\n}\r\n\r\n.btn-favorite {\r\n    background: none;\r\n    border: none;\r\n    font-size: 18px;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n    transition: transform 0.2s;\r\n}\r\n\r\n.btn-favorite:hover {\r\n    transform: scale(1.2);\r\n}\r\n\r\n.btn-favorite.favorite-active {\r\n    animation: pulse 0.3s;\r\n}\r\n\r\n@keyframes pulse {\r\n    0%, 100% { transform: scale(1); }\r\n    50% { transform: scale(1.3); }\r\n}\r\n\r\n.prompt-card-body {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n}\r\n\r\n.prompt-title {\r\n    margin: 0;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.prompt-description {\r\n    margin: 0;\r\n    font-size: 13px;\r\n    color: #666;\r\n    line-height: 1.5;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 2;\r\n    -webkit-box-orient: vertical;\r\n    overflow: hidden;\r\n}\r\n\r\n.prompt-variables {\r\n    display: flex;\r\n    gap: 6px;\r\n    flex-wrap: wrap;\r\n}\r\n\r\n.variable-badge {\r\n    display: inline-block;\r\n    padding: 3px 8px;\r\n    background: #e3f2fd;\r\n    color: #1976d2;\r\n    font-size: 11px;\r\n    border-radius: 10px;\r\n}\r\n\r\n.prompt-card-footer {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding-top: 12px;\r\n    border-top: 1px solid #f0f0f0;\r\n}\r\n\r\n.prompt-stats {\r\n    display: flex;\r\n    gap: 12px;\r\n    font-size: 11px;\r\n    color: #999;\r\n}\r\n\r\n.prompt-actions {\r\n    display: flex;\r\n    gap: 4px;\r\n}\r\n\r\n.prompt-actions .btn-icon {\r\n    width: 32px;\r\n    height: 32px;\r\n    background: #f5f5f5;\r\n    color: #666;\r\n    font-size: 14px;\r\n}\r\n\r\n.prompt-actions .btn-icon:hover {\r\n    background: #e0e0e0;\r\n    color: #333;\r\n}\r\n\r\n.btn-execute {\r\n    background: #667eea !important;\r\n    color: white !important;\r\n}\r\n\r\n.btn-execute:hover {\r\n    background: #5568d3 !important;\r\n}\r\n\r\n/* Empty State */\r\n.prompt-empty {\r\n    flex: 1;\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 16px;\r\n    padding: 40px;\r\n}\r\n\r\n.empty-icon {\r\n    font-size: 64px;\r\n    opacity: 0.3;\r\n}\r\n\r\n.empty-text {\r\n    font-size: 16px;\r\n    color: #999;\r\n}\r\n\r\n/* ========================================\r\n   Edit Dialog\r\n   ======================================== */\r\n\r\n.prompt-edit-dialog,\r\n.variable-input-dialog {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 100001;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.dialog-overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.6);\r\n    backdrop-filter: blur(2px);\r\n}\r\n\r\n.dialog-container {\r\n    position: relative;\r\n    width: 90%;\r\n    max-width: 600px;\r\n    max-height: 85vh;\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);\r\n    display: flex;\r\n    flex-direction: column;\r\n    z-index: 1;\r\n}\r\n\r\n.dialog-header {\r\n    padding: 20px 24px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.dialog-header h3 {\r\n    margin: 0;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.dialog-subtitle {\r\n    font-size: 14px;\r\n    color: #666;\r\n    margin-top: 4px;\r\n}\r\n\r\n.dialog-content {\r\n    flex: 1;\r\n    padding: 24px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.dialog-footer {\r\n    padding: 16px 24px;\r\n    border-top: 1px solid #e0e0e0;\r\n    display: flex;\r\n    gap: 12px;\r\n    justify-content: flex-end;\r\n}\r\n\r\n/* Form Elements */\r\n.form-group {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.form-group label {\r\n    display: block;\r\n    margin-bottom: 8px;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    color: #333;\r\n}\r\n\r\n.form-input,\r\n.form-select,\r\n.form-textarea {\r\n    width: 100%;\r\n    padding: 10px 12px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-family: inherit;\r\n    outline: none;\r\n    transition: border-color 0.2s;\r\n}\r\n\r\n.form-input:focus,\r\n.form-select:focus,\r\n.form-textarea:focus {\r\n    border-color: #667eea;\r\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.form-textarea {\r\n    resize: vertical;\r\n    font-family: 'Monaco', 'Menlo', 'Courier New', monospace;\r\n}\r\n\r\n.form-hint {\r\n    margin-top: 6px;\r\n    font-size: 12px;\r\n    color: #999;\r\n}\r\n\r\n.variables-list {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 12px;\r\n    margin-bottom: 12px;\r\n}\r\n\r\n/* Dark Mode */\r\n@media (prefers-color-scheme: dark) {\r\n    .prompt-library-container,\r\n    .dialog-container {\r\n        background: #1e1e1e;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .prompt-library-header {\r\n        border-bottom-color: #333;\r\n    }\r\n\r\n    .prompt-sidebar {\r\n        background: #252525;\r\n        border-right-color: #333;\r\n    }\r\n\r\n    .sidebar-header {\r\n        color: #999;\r\n    }\r\n\r\n    .category-item:hover {\r\n        background: rgba(102, 126, 234, 0.2);\r\n    }\r\n\r\n    .category-divider {\r\n        background: #333;\r\n    }\r\n\r\n    .prompt-search-bar {\r\n        background: #252525;\r\n        border-bottom-color: #333;\r\n    }\r\n\r\n    .prompt-search-input,\r\n    .sort-select,\r\n    .form-input,\r\n    .form-select,\r\n    .form-textarea {\r\n        background: #2a2a2a;\r\n        border-color: #444;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .prompt-card {\r\n        background: #252525;\r\n        border-color: #333;\r\n    }\r\n\r\n    .prompt-card:hover {\r\n        border-color: #667eea;\r\n    }\r\n\r\n    .prompt-title {\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .prompt-description {\r\n        color: #999;\r\n    }\r\n\r\n    .prompt-category {\r\n        background: #333;\r\n        color: #999;\r\n    }\r\n\r\n    .prompt-card-footer {\r\n        border-top-color: #333;\r\n    }\r\n\r\n    .prompt-actions .btn-icon {\r\n        background: #333;\r\n        color: #999;\r\n    }\r\n\r\n    .prompt-actions .btn-icon:hover {\r\n        background: #3a3a3a;\r\n        color: #ccc;\r\n    }\r\n\r\n    .btn-secondary {\r\n        background: #333;\r\n        color: #ccc;\r\n        border-color: #444;\r\n    }\r\n\r\n    .btn-secondary:hover {\r\n        background: #3a3a3a;\r\n        border-color: #555;\r\n    }\r\n\r\n    .dialog-header,\r\n    .dialog-footer {\r\n        border-color: #333;\r\n    }\r\n\r\n    .form-group label {\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .form-hint {\r\n        color: #666;\r\n    }\r\n}\r\n\r\n/* Responsive */\r\n@media (max-width: 768px) {\r\n    .prompt-library-container {\r\n        width: 95%;\r\n        height: 90vh;\r\n    }\r\n\r\n    .prompt-library-content {\r\n        flex-direction: column;\r\n    }\r\n\r\n    .prompt-sidebar {\r\n        width: 100%;\r\n        border-right: none;\r\n        border-bottom: 1px solid #e0e0e0;\r\n        overflow-x: auto;\r\n        overflow-y: hidden;\r\n    }\r\n\r\n    .category-list {\r\n        display: flex;\r\n        padding: 8px;\r\n    }\r\n\r\n    .category-item {\r\n        white-space: nowrap;\r\n    }\r\n\r\n    .prompt-grid {\r\n        grid-template-columns: 1fr;\r\n        padding: 16px;\r\n    }\r\n\r\n    .dialog-container {\r\n        width: 95%;\r\n    }\r\n}\r\n"],sourceRoot:""}]);const s=a},9137:(t,e,n)=>{"use strict";n.d(e,{A:()=>k});var r=n(28562),i=n(41917);const o=(0,r.A)(i.A,"DataView");var a=n(68335);const s=(0,r.A)(i.A,"Promise");var l=n(39857);const c=(0,r.A)(i.A,"WeakMap");var h=n(2383),u=n(81121),d="[object Map]",p="[object Promise]",f="[object Set]",g="[object WeakMap]",m="[object DataView]",A=(0,u.A)(o),y=(0,u.A)(a.A),b=(0,u.A)(s),x=(0,u.A)(l.A),v=(0,u.A)(c),C=h.A;(o&&C(new o(new ArrayBuffer(1)))!=m||a.A&&C(new a.A)!=d||s&&C(s.resolve())!=p||l.A&&C(new l.A)!=f||c&&C(new c)!=g)&&(C=function(t){var e=(0,h.A)(t),n="[object Object]"==e?t.constructor:void 0,r=n?(0,u.A)(n):"";if(r)switch(r){case A:return m;case y:return d;case b:return p;case x:return f;case v:return g}return e});const k=C},10045:(t,e,n)=>{"use strict";n.d(e,{XX:()=>u,q7:()=>d,sO:()=>h});var r=n(5164),i=n(5894),o=n(13226),a=n(80144),s=n(40797),l={common:a.Y2,getConfig:a.zj,insertCluster:i.U,insertEdge:r.Jo,insertEdgeLabel:r.jP,insertMarkers:r.g0,insertNode:i.on,interpolateToCurve:o.Ib,labelHelper:i.Zk,log:s.Rm,positionEdgeLabel:r.T_},c={},h=(0,s.K2)(t=>{for(const e of t)c[e.name]=e},"registerLayoutLoaders");(0,s.K2)(()=>{h([{name:"dagre",loader:(0,s.K2)(async()=>await Promise.all([n.e(164),n.e(567),n.e(127)]).then(n.bind(n,11127)),"loader")},{name:"cose-bilkent",loader:(0,s.K2)(async()=>await Promise.all([n.e(165),n.e(928)]).then(n.bind(n,77928)),"loader")}])},"registerDefaultLayoutLoaders")();var u=(0,s.K2)(async(t,e)=>{if(!(t.layoutAlgorithm in c))throw new Error(`Unknown layout algorithm: ${t.layoutAlgorithm}`);const n=c[t.layoutAlgorithm];return(await n.loader()).render(t,e,l,{algorithm:n.algorithm})},"render"),d=(0,s.K2)((t="",{fallback:e="dagre"}={})=>{if(t in c)return t;if(e in c)return s.Rm.warn(`Layout algorithm ${t} is not registered. Using ${e} as fallback.`),e;throw new Error(`Both layout algorithms ${t} and ${e} are not registered.`)},"getRegisteredLayoutAlgorithm")},10540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},13226:(t,e,n)=>{"use strict";n.d(e,{$C:()=>_,$t:()=>K,C4:()=>H,I5:()=>W,Ib:()=>m,KL:()=>V,Sm:()=>G,Un:()=>F,_K:()=>U,bH:()=>O,dq:()=>N,pe:()=>c,rY:()=>Y,ru:()=>P,sM:()=>I,vU:()=>f,yT:()=>T});var r=n(80144),i=n(40797),o=n(16750),a=n(51444),s=n(46632),l=n(7222),c="",h={curveBasis:a.qrM,curveBasisClosed:a.Yu4,curveBasisOpen:a.IA3,curveBumpX:a.Wi0,curveBumpY:a.PGM,curveBundle:a.OEq,curveCardinalClosed:a.olC,curveCardinalOpen:a.IrU,curveCardinal:a.y8u,curveCatmullRomClosed:a.Q7f,curveCatmullRomOpen:a.cVp,curveCatmullRom:a.oDi,curveLinear:a.lUB,curveLinearClosed:a.Lx9,curveMonotoneX:a.nVG,curveMonotoneY:a.uxU,curveNatural:a.Xf2,curveStep:a.GZz,curveStepAfter:a.UPb,curveStepBefore:a.dyv},u=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,d=(0,i.K2)(function(t,e){const n=p(t,/(?:init\b)|(?:initialize\b)/);let i={};if(Array.isArray(n)){const t=n.map(t=>t.args);(0,r.$i)(t),i=(0,r.hH)(i,[...t])}else i=n.args;if(!i)return;let o=(0,r.Ch)(t,e);const a="config";return void 0!==i[a]&&("flowchart-v2"===o&&(o="flowchart"),i[o]=i[a],delete i[a]),i},"detectInit"),p=(0,i.K2)(function(t,e=null){try{const n=new RegExp(`[%]{2}(?![{]${u.source})(?=[}][%]{2}).*\n`,"ig");let o;t=t.trim().replace(n,"").replace(/'/gm,'"'),i.Rm.debug(`Detecting diagram directive${null!==e?" type:"+e:""} based on the text:${t}`);const a=[];for(;null!==(o=r.DB.exec(t));)if(o.index===r.DB.lastIndex&&r.DB.lastIndex++,o&&!e||e&&o[1]?.match(e)||e&&o[2]?.match(e)){const t=o[1]?o[1]:o[2],e=o[3]?o[3].trim():o[4]?JSON.parse(o[4].trim()):null;a.push({type:t,args:e})}return 0===a.length?{type:t,args:null}:1===a.length?a[0]:a}catch(n){return i.Rm.error(`ERROR: ${n.message} - Unable to parse directive type: '${e}' based on the text: '${t}'`),{type:void 0,args:null}}},"detectDirective"),f=(0,i.K2)(function(t){return t.replace(r.DB,"")},"removeDirectives"),g=(0,i.K2)(function(t,e){for(const[n,r]of e.entries())if(r.match(t))return n;return-1},"isSubstringInArray");function m(t,e){if(!t)return e;const n=`curve${t.charAt(0).toUpperCase()+t.slice(1)}`;return h[n]??e}function A(t,e){const n=t.trim();if(n)return"loose"!==e.securityLevel?(0,o.J)(n):n}(0,i.K2)(m,"interpolateToCurve"),(0,i.K2)(A,"formatUrl");var y=(0,i.K2)((t,...e)=>{const n=t.split("."),r=n.length-1,o=n[r];let a=window;for(let e=0;e<r;e++)if(a=a[n[e]],!a)return void i.Rm.error(`Function name: ${t} not found in window`);a[o](...e)},"runFunc");function b(t,e){return t&&e?Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)):0}function x(t){let e,n=0;return t.forEach(t=>{n+=b(t,e),e=t}),k(t,n/2)}function v(t){return 1===t.length?t[0]:x(t)}(0,i.K2)(b,"distance"),(0,i.K2)(x,"traverseEdge"),(0,i.K2)(v,"calcLabelPosition");var C=(0,i.K2)((t,e=2)=>{const n=Math.pow(10,e);return Math.round(t*n)/n},"roundNumber"),k=(0,i.K2)((t,e)=>{let n,r=e;for(const e of t){if(n){const t=b(e,n);if(0===t)return n;if(t<r)r-=t;else{const i=r/t;if(i<=0)return n;if(i>=1)return{x:e.x,y:e.y};if(i>0&&i<1)return{x:C((1-i)*n.x+i*e.x,5),y:C((1-i)*n.y+i*e.y,5)}}}n=e}throw new Error("Could not find a suitable point for the given distance")},"calculatePoint"),w=(0,i.K2)((t,e,n)=>{i.Rm.info(`our points ${JSON.stringify(e)}`),e[0]!==n&&(e=e.reverse());const r=k(e,25),o=t?10:5,a=Math.atan2(e[0].y-r.y,e[0].x-r.x),s={x:0,y:0};return s.x=Math.sin(a)*o+(e[0].x+r.x)/2,s.y=-Math.cos(a)*o+(e[0].y+r.y)/2,s},"calcCardinalityPosition");function B(t,e,n){const r=structuredClone(n);i.Rm.info("our points",r),"start_left"!==e&&"start_right"!==e&&r.reverse();const o=k(r,25+t),a=10+.5*t,s=Math.atan2(r[0].y-o.y,r[0].x-o.x),l={x:0,y:0};return"start_left"===e?(l.x=Math.sin(s+Math.PI)*a+(r[0].x+o.x)/2,l.y=-Math.cos(s+Math.PI)*a+(r[0].y+o.y)/2):"end_right"===e?(l.x=Math.sin(s-Math.PI)*a+(r[0].x+o.x)/2-5,l.y=-Math.cos(s-Math.PI)*a+(r[0].y+o.y)/2-5):"end_left"===e?(l.x=Math.sin(s)*a+(r[0].x+o.x)/2-5,l.y=-Math.cos(s)*a+(r[0].y+o.y)/2-5):(l.x=Math.sin(s)*a+(r[0].x+o.x)/2,l.y=-Math.cos(s)*a+(r[0].y+o.y)/2),l}function I(t){let e="",n="";for(const r of t)void 0!==r&&(r.startsWith("color:")||r.startsWith("text-align:")?n=n+r+";":e=e+r+";");return{style:e,labelStyle:n}}(0,i.K2)(B,"calcTerminalLabelPosition"),(0,i.K2)(I,"getStylesFromArray");var S=0,_=(0,i.K2)(()=>(S++,"id-"+Math.random().toString(36).substr(2,12)+"-"+S),"generateId");function E(t){let e="";for(let n=0;n<t;n++)e+="0123456789abcdef".charAt(Math.floor(16*Math.random()));return e}(0,i.K2)(E,"makeRandomHex");var T=(0,i.K2)(t=>E(t.length),"random"),M=(0,i.K2)(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),L=(0,i.K2)(function(t,e){const n=e.text.replace(r.Y2.lineBreakRegex," "),[,i]=W(e.fontSize),o=t.append("text");o.attr("x",e.x),o.attr("y",e.y),o.style("text-anchor",e.anchor),o.style("font-family",e.fontFamily),o.style("font-size",i),o.style("font-weight",e.fontWeight),o.attr("fill",e.fill),void 0!==e.class&&o.attr("class",e.class);const a=o.append("tspan");return a.attr("x",e.x+2*e.textMargin),a.attr("fill",e.fill),a.text(n),o},"drawSimpleText"),O=(0,s.A)((t,e,n)=>{if(!t)return t;if(n=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},n),r.Y2.lineBreakRegex.test(t))return t;const i=t.split(" ").filter(Boolean),o=[];let a="";return i.forEach((t,r)=>{const s=F(`${t} `,n),l=F(a,n);if(s>e){const{hyphenatedStrings:r,remainingWord:i}=D(t,e,"-",n);o.push(a,...r),a=i}else l+s>=e?(o.push(a),a=t):a=[a,t].filter(Boolean).join(" ");r+1===i.length&&o.push(a)}),o.filter(t=>""!==t).join(n.joinWith)},(t,e,n)=>`${t}${e}${n.fontSize}${n.fontWeight}${n.fontFamily}${n.joinWith}`),D=(0,s.A)((t,e,n="-",r)=>{r=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},r);const i=[...t],o=[];let a="";return i.forEach((t,s)=>{const l=`${a}${t}`;if(F(l,r)>=e){const t=s+1,e=i.length===t,r=`${l}${n}`;o.push(e?l:r),a=""}else a=l}),{hyphenatedStrings:o,remainingWord:a}},(t,e,n="-",r)=>`${t}${e}${n}${r.fontSize}${r.fontWeight}${r.fontFamily}`);function P(t,e){return z(t,e).height}function F(t,e){return z(t,e).width}(0,i.K2)(P,"calculateTextHeight"),(0,i.K2)(F,"calculateTextWidth");var j,z=(0,s.A)((t,e)=>{const{fontSize:n=12,fontFamily:i="Arial",fontWeight:o=400}=e;if(!t)return{width:0,height:0};const[,s]=W(n),l=["sans-serif",i],h=t.split(r.Y2.lineBreakRegex),u=[],d=(0,a.Ltv)("body");if(!d.remove)return{width:0,height:0,lineHeight:0};const p=d.append("svg");for(const t of l){let e=0;const n={width:0,height:0,lineHeight:0};for(const r of h){const i=M();i.text=r||c;const a=L(p,i).style("font-size",s).style("font-weight",o).style("font-family",t),l=(a._groups||a)[0][0].getBBox();if(0===l.width&&0===l.height)throw new Error("svg element not in render tree");n.width=Math.round(Math.max(n.width,l.width)),e=Math.round(l.height),n.height+=e,n.lineHeight=Math.round(Math.max(n.lineHeight,e))}u.push(n)}return p.remove(),u[isNaN(u[1].height)||isNaN(u[1].width)||isNaN(u[1].lineHeight)||u[0].height>u[1].height&&u[0].width>u[1].width&&u[0].lineHeight>u[1].lineHeight?0:1]},(t,e)=>`${t}${e.fontSize}${e.fontWeight}${e.fontFamily}`),$=class{constructor(t=!1,e){this.count=0,this.count=e?e.length:0,this.next=t?()=>this.count++:()=>Date.now()}static{(0,i.K2)(this,"InitIDGenerator")}},R=(0,i.K2)(function(t){return j=j||document.createElement("div"),t=escape(t).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),j.innerHTML=t,unescape(j.textContent)},"entityDecode");function N(t){return"str"in t}(0,i.K2)(N,"isDetailedError");var q=(0,i.K2)((t,e,n,r)=>{if(!r)return;const i=t.node()?.getBBox();i&&t.append("text").text(r).attr("text-anchor","middle").attr("x",i.x+i.width/2).attr("y",-n).attr("class",e)},"insertTitle"),W=(0,i.K2)(t=>{if("number"==typeof t)return[t,t+"px"];const e=parseInt(t??"",10);return Number.isNaN(e)?[void 0,void 0]:t===String(e)?[e,t+"px"]:[e,t]},"parseFontSize");function K(t,e){return(0,l.A)({},t,e)}(0,i.K2)(K,"cleanAndMerge");var U={assignWithDepth:r.hH,wrapLabel:O,calculateTextHeight:P,calculateTextWidth:F,calculateTextDimensions:z,cleanAndMerge:K,detectInit:d,detectDirective:p,isSubstringInArray:g,interpolateToCurve:m,calcLabelPosition:v,calcCardinalityPosition:w,calcTerminalLabelPosition:B,formatUrl:A,getStylesFromArray:I,generateId:_,random:T,runFunc:y,entityDecode:R,insertTitle:q,isLabelCoordinateInPath:Q,parseFontSize:W,InitIDGenerator:$},H=(0,i.K2)(function(t){let e=t;return e=e.replace(/style.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)}),e=e.replace(/classDef.*:\S*#.*;/g,function(t){return t.substring(0,t.length-1)}),e=e.replace(/#\w+;/g,function(t){const e=t.substring(1,t.length-1);return/^\+?\d+$/.test(e)?""+e+"":""+e+""}),e},"encodeEntities"),G=(0,i.K2)(function(t){return t.replace(//g,"&#").replace(//g,"&").replace(//g,";")},"decodeEntities"),Y=(0,i.K2)((t,e,{counter:n=0,prefix:r,suffix:i},o)=>o||`${r?`${r}_`:""}${t}_${e}_${n}${i?`_${i}`:""}`,"getEdgeId");function V(t){return t??null}function Q(t,e){const n=Math.round(t.x),r=Math.round(t.y),i=e.replace(/(\d+\.\d+)/g,t=>Math.round(parseFloat(t)).toString());return i.includes(n.toString())||i.includes(r.toString())}(0,i.K2)(V,"handleUndefinedAttr"),(0,i.K2)(Q,"isLabelCoordinateInPath")},14453:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(97271);const i=(0,n(40367).A)(Object.keys,Object);var o=Object.prototype.hasOwnProperty;const a=function(t){if(!(0,r.A)(t))return i(t);var e=[];for(var n in Object(t))o.call(t,n)&&"constructor"!=n&&e.push(n);return e}},15647:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=(0,n(40367).A)(Object.getPrototypeOf,Object)},16750:(t,e,n)=>{"use strict";e.J=void 0;var r=n(69119);function i(t){return t.replace(r.ctrlCharactersRegex,"").replace(r.htmlEntitiesRegex,function(t,e){return String.fromCharCode(e)})}function o(t){try{return decodeURIComponent(t)}catch(e){return t}}e.J=function(t){if(!t)return r.BLANK_URL;var e,n=o(t.trim());do{e=(n=o(n=i(n).replace(r.htmlCtrlEntityRegex,"").replace(r.ctrlCharactersRegex,"").replace(r.whitespaceEscapeCharsRegex,"").trim())).match(r.ctrlCharactersRegex)||n.match(r.htmlEntitiesRegex)||n.match(r.htmlCtrlEntityRegex)||n.match(r.whitespaceEscapeCharsRegex)}while(e&&e.length>0);var a=n;if(!a)return r.BLANK_URL;if(function(t){return r.relativeFirstCharacters.indexOf(t[0])>-1}(a))return a;var s=a.trimStart(),l=s.match(r.urlSchemeRegex);if(!l)return a;var c=l[0].toLowerCase().trim();if(r.invalidProtocolRegex.test(c))return r.BLANK_URL;var h=s.replace(/\\/g,"/");if("mailto:"===c||c.includes("://"))return h;if("http:"===c||"https:"===c){if(!function(t){return URL.canParse(t)}(h))return r.BLANK_URL;var u=new URL(h);return u.protocol=u.protocol.toLowerCase(),u.hostname=u.hostname.toLowerCase(),u.toString()}return h}},18431:(t,e,n)=>{"use strict";function r(t,e){return Array(e+1).join(t)}function i(t){return t.replace(/^\n*/,"")}function o(t){for(var e=t.length;e>0&&"\n"===t[e-1];)e--;return t.substring(0,e)}function a(t){return o(i(t))}n.d(e,{A:()=>F});var s=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function l(t){return d(t,s)}var c=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function h(t){return d(t,c)}var u=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function d(t,e){return e.indexOf(t.nodeName)>=0}function p(t,e){return t.getElementsByTagName&&e.some(function(e){return t.getElementsByTagName(e).length})}var f={};function g(t){return t?t.replace(/(\n+\s*)+/g,"\n"):""}function m(t){for(var e in this.options=t,this._keep=[],this._remove=[],this.blankRule={replacement:t.blankReplacement},this.keepReplacement=t.keepReplacement,this.defaultRule={replacement:t.defaultReplacement},this.array=[],t.rules)this.array.push(t.rules[e])}function A(t,e,n){for(var r=0;r<t.length;r++){var i=t[r];if(y(i,e,n))return i}}function y(t,e,n){var r=t.filter;if("string"==typeof r){if(r===e.nodeName.toLowerCase())return!0}else if(Array.isArray(r)){if(r.indexOf(e.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof r)throw new TypeError("`filter` needs to be a string, array, or function");if(r.call(t,e,n))return!0}}function b(t){var e=t.nextSibling||t.parentNode;return t.parentNode.removeChild(t),e}function x(t,e,n){return t&&t.parentNode===e||n(e)?e.nextSibling||e.parentNode:e.firstChild||e.nextSibling||e.parentNode}f.paragraph={filter:"p",replacement:function(t){return"\n\n"+t+"\n\n"}},f.lineBreak={filter:"br",replacement:function(t,e,n){return n.br+"\n"}},f.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(t,e,n){var i=Number(e.nodeName.charAt(1));return"setext"===n.headingStyle&&i<3?"\n\n"+t+"\n"+r(1===i?"=":"-",t.length)+"\n\n":"\n\n"+r("#",i)+" "+t+"\n\n"}},f.blockquote={filter:"blockquote",replacement:function(t){return"\n\n"+(t=a(t).replace(/^/gm,"> "))+"\n\n"}},f.list={filter:["ul","ol"],replacement:function(t,e){var n=e.parentNode;return"LI"===n.nodeName&&n.lastElementChild===e?"\n"+t:"\n\n"+t+"\n\n"}},f.listItem={filter:"li",replacement:function(t,e,n){var r=n.bulletListMarker+"   ",i=e.parentNode;if("OL"===i.nodeName){var o=i.getAttribute("start"),s=Array.prototype.indexOf.call(i.children,e);r=(o?Number(o)+s:s+1)+".  "}var l=/\n$/.test(t);return r+(t=(t=a(t)+(l?"\n":"")).replace(/\n/gm,"\n"+" ".repeat(r.length)))+(e.nextSibling?"\n":"")}},f.indentedCodeBlock={filter:function(t,e){return"indented"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,n){return"\n\n    "+e.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},f.fencedCodeBlock={filter:function(t,e){return"fenced"===e.codeBlockStyle&&"PRE"===t.nodeName&&t.firstChild&&"CODE"===t.firstChild.nodeName},replacement:function(t,e,n){for(var i,o=((e.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],a=e.firstChild.textContent,s=n.fence.charAt(0),l=3,c=new RegExp("^"+s+"{3,}","gm");i=c.exec(a);)i[0].length>=l&&(l=i[0].length+1);var h=r(s,l);return"\n\n"+h+o+"\n"+a.replace(/\n$/,"")+"\n"+h+"\n\n"}},f.horizontalRule={filter:"hr",replacement:function(t,e,n){return"\n\n"+n.hr+"\n\n"}},f.inlineLink={filter:function(t,e){return"inlined"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e){var n=e.getAttribute("href");n&&(n=n.replace(/([()])/g,"\\$1"));var r=g(e.getAttribute("title"));return r&&(r=' "'+r.replace(/"/g,'\\"')+'"'),"["+t+"]("+n+r+")"}},f.referenceLink={filter:function(t,e){return"referenced"===e.linkStyle&&"A"===t.nodeName&&t.getAttribute("href")},replacement:function(t,e,n){var r,i,o=e.getAttribute("href"),a=g(e.getAttribute("title"));switch(a&&(a=' "'+a+'"'),n.linkReferenceStyle){case"collapsed":r="["+t+"][]",i="["+t+"]: "+o+a;break;case"shortcut":r="["+t+"]",i="["+t+"]: "+o+a;break;default:var s=this.references.length+1;r="["+t+"]["+s+"]",i="["+s+"]: "+o+a}return this.references.push(i),r},references:[],append:function(t){var e="";return this.references.length&&(e="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),e}},f.emphasis={filter:["em","i"],replacement:function(t,e,n){return t.trim()?n.emDelimiter+t+n.emDelimiter:""}},f.strong={filter:["strong","b"],replacement:function(t,e,n){return t.trim()?n.strongDelimiter+t+n.strongDelimiter:""}},f.code={filter:function(t){var e=t.previousSibling||t.nextSibling,n="PRE"===t.parentNode.nodeName&&!e;return"CODE"===t.nodeName&&!n},replacement:function(t){if(!t)return"";t=t.replace(/\r?\n|\r/g," ");for(var e=/^`|^ .*?[^ ].* $|`$/.test(t)?" ":"",n="`",r=t.match(/`+/gm)||[];-1!==r.indexOf(n);)n+="`";return n+e+t+e+n}},f.image={filter:"img",replacement:function(t,e){var n=g(e.getAttribute("alt")),r=e.getAttribute("src")||"",i=g(e.getAttribute("title"));return r?"!["+n+"]("+r+(i?' "'+i+'"':"")+")":""}},m.prototype={add:function(t,e){this.array.unshift(e)},keep:function(t){this._keep.unshift({filter:t,replacement:this.keepReplacement})},remove:function(t){this._remove.unshift({filter:t,replacement:function(){return""}})},forNode:function(t){return t.isBlank?this.blankRule:(e=A(this.array,t,this.options))||(e=A(this._keep,t,this.options))||(e=A(this._remove,t,this.options))?e:this.defaultRule;var e},forEach:function(t){for(var e=0;e<this.array.length;e++)t(this.array[e],e)}};var v,C,k="undefined"!=typeof window?window:{},w=function(){var t=k.DOMParser,e=!1;try{(new t).parseFromString("","text/html")&&(e=!0)}catch(t){}return e}()?k.DOMParser:(v=function(){},function(){var t=!1;try{document.implementation.createHTMLDocument("").open()}catch(e){k.ActiveXObject&&(t=!0)}return t}()?v.prototype.parseFromString=function(t){var e=new window.ActiveXObject("htmlfile");return e.designMode="on",e.open(),e.write(t),e.close(),e}:v.prototype.parseFromString=function(t){var e=document.implementation.createHTMLDocument("");return e.open(),e.write(t),e.close(),e},v);function B(t,e){var n;return function(t){var e=t.element,n=t.isBlock,r=t.isVoid,i=t.isPre||function(t){return"PRE"===t.nodeName};if(e.firstChild&&!i(e)){for(var o=null,a=!1,s=null,l=x(s,e,i);l!==e;){if(3===l.nodeType||4===l.nodeType){var c=l.data.replace(/[ \r\n\t]+/g," ");if(o&&!/ $/.test(o.data)||a||" "!==c[0]||(c=c.substr(1)),!c){l=b(l);continue}l.data=c,o=l}else{if(1!==l.nodeType){l=b(l);continue}n(l)||"BR"===l.nodeName?(o&&(o.data=o.data.replace(/ $/,"")),o=null,a=!1):r(l)||i(l)?(o=null,a=!0):o&&(a=!1)}var h=x(s,l,i);s=l,l=h}o&&(o.data=o.data.replace(/ $/,""),o.data||b(o))}}({element:n="string"==typeof t?(C=C||new w).parseFromString('<x-turndown id="turndown-root">'+t+"</x-turndown>","text/html").getElementById("turndown-root"):t.cloneNode(!0),isBlock:l,isVoid:h,isPre:e.preformattedCode?I:null}),n}function I(t){return"PRE"===t.nodeName||"CODE"===t.nodeName}function S(t,e){return t.isBlock=l(t),t.isCode="CODE"===t.nodeName||t.parentNode.isCode,t.isBlank=function(t){return!h(t)&&!function(t){return d(t,u)}(t)&&/^\s*$/i.test(t.textContent)&&!function(t){return p(t,c)}(t)&&!function(t){return p(t,u)}(t)}(t),t.flankingWhitespace=function(t,e){if(t.isBlock||e.preformattedCode&&t.isCode)return{leading:"",trailing:""};var n,r={leading:(n=t.textContent.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/))[1],leadingAscii:n[2],leadingNonAscii:n[3],trailing:n[4],trailingNonAscii:n[5],trailingAscii:n[6]};return r.leadingAscii&&_("left",t,e)&&(r.leading=r.leadingNonAscii),r.trailingAscii&&_("right",t,e)&&(r.trailing=r.trailingNonAscii),{leading:r.leading,trailing:r.trailing}}(t,e),t}function _(t,e,n){var r,i,o;return"left"===t?(r=e.previousSibling,i=/ $/):(r=e.nextSibling,i=/^ /),r&&(3===r.nodeType?o=i.test(r.nodeValue):n.preformattedCode&&"CODE"===r.nodeName?o=!1:1!==r.nodeType||l(r)||(o=i.test(r.textContent))),o}var E=Array.prototype.reduce,T=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function M(t){if(!(this instanceof M))return new M(t);var e={rules:f,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(t,e){return e.isBlock?"\n\n":""},keepReplacement:function(t,e){return e.isBlock?"\n\n"+e.outerHTML+"\n\n":e.outerHTML},defaultReplacement:function(t,e){return e.isBlock?"\n\n"+t+"\n\n":t}};this.options=function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)n.hasOwnProperty(r)&&(t[r]=n[r])}return t}({},e,t),this.rules=new m(this.options)}function L(t){var e=this;return E.call(t.childNodes,function(t,n){var r="";return 3===(n=new S(n,e.options)).nodeType?r=n.isCode?n.nodeValue:e.escape(n.nodeValue):1===n.nodeType&&(r=D.call(e,n)),P(t,r)},"")}function O(t){var e=this;return this.rules.forEach(function(n){"function"==typeof n.append&&(t=P(t,n.append(e.options)))}),t.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function D(t){var e=this.rules.forNode(t),n=L.call(this,t),r=t.flankingWhitespace;return(r.leading||r.trailing)&&(n=n.trim()),r.leading+e.replacement(n,t,this.options)+r.trailing}function P(t,e){var n=o(t),r=i(e),a=Math.max(t.length-n.length,e.length-r.length);return n+"\n\n".substring(0,a)+r}M.prototype={turndown:function(t){if(!function(t){return null!=t&&("string"==typeof t||t.nodeType&&(1===t.nodeType||9===t.nodeType||11===t.nodeType))}(t))throw new TypeError(t+" is not a string, or an element/document/fragment node.");if(""===t)return"";var e=L.call(this,new B(t,this.options));return O.call(this,e)},use:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this.use(t[e]);else{if("function"!=typeof t)throw new TypeError("plugin must be a Function or an Array of Functions");t(this)}return this},addRule:function(t,e){return this.rules.add(t,e),this},keep:function(t){return this.rules.keep(t),this},remove:function(t){return this.rules.remove(t),this},escape:function(t){return T.reduce(function(t,e){return t.replace(e[0],e[1])},t)}};const F=M},22031:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(52851),i=n(52528);const o=function(t,e,n,o){var a=!n;n||(n={});for(var s=-1,l=e.length;++s<l;){var c=e[s],h=o?o(n[c],t[c],c,n,t):void 0;void 0===h&&(h=t[c]),a?(0,i.A)(n,c,h):(0,r.A)(n,c,h)}return n}},22080:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(89469);var i=n(68335),o=n(62050);function a(t){var e=this.__data__=new r.A(t);this.size=e.size}a.prototype.clear=function(){this.__data__=new r.A,this.size=0},a.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},a.prototype.get=function(t){return this.__data__.get(t)},a.prototype.has=function(t){return this.__data__.has(t)},a.prototype.set=function(t,e){var n=this.__data__;if(n instanceof r.A){var a=n.__data__;if(!i.A||a.length<199)return a.push([t,e]),this.size=++n.size,this;n=this.__data__=new o.A(a)}return n.set(t,e),this.size=n.size,this};const s=a},23149:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},24326:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(29008),i=n(65255),o=n(57424);const a=function(t,e){return(0,o.A)((0,i.A)(t,e,r.A),t+"")}},25175:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var r=n(2383),i=n(53098);const o=function(t){return(0,i.A)(t)&&"[object Arguments]"==(0,r.A)(t)};var a=Object.prototype,s=a.hasOwnProperty,l=a.propertyIsEnumerable;const c=o(function(){return arguments}())?o:function(t){return(0,i.A)(t)&&s.call(t,"callee")&&!l.call(t,"callee")}},25353:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=/^(?:0|[1-9]\d*)$/;const i=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&r.test(t))&&t>-1&&t%1==0&&t<e}},25582:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(86309),i=n(67266),o=n(51931),a=n(8232);const s=(t,e,n=0,s=1)=>{if("number"!=typeof t)return(0,a.A)(t,{a:e});const l=i.A.set({r:r.A.channel.clamp.r(t),g:r.A.channel.clamp.g(e),b:r.A.channel.clamp.b(n),a:r.A.channel.clamp.a(s)});return o.A.stringify(l)}},28562:(t,e,n)=>{"use strict";n.d(e,{A:()=>m});var r=n(89610);const i=n(41917).A["__core-js_shared__"];var o,a=(o=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||""))?"Symbol(src)_1."+o:"";var s=n(23149),l=n(81121),c=/^\[object .+?Constructor\]$/,h=Function.prototype,u=Object.prototype,d=h.toString,p=u.hasOwnProperty,f=RegExp("^"+d.call(p).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const g=function(t){return!(!(0,s.A)(t)||(e=t,a&&a in e))&&((0,r.A)(t)?f:c).test((0,l.A)(t));var e},m=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return g(n)?n:void 0}},28698:(t,e,n)=>{"use strict";n.d(e,{Nq:()=>o,RI:()=>l,hq:()=>i});var r=n(40797),i={aggregation:17.25,extension:17.25,composition:17.25,dependency:6,lollipop:13.5,arrow_point:4},o={arrow_point:9,arrow_cross:12.5,arrow_circle:12.5};function a(t,e){if(void 0===t||void 0===e)return{angle:0,deltaX:0,deltaY:0};t=s(t),e=s(e);const[n,r]=[t.x,t.y],[i,o]=[e.x,e.y],a=i-n,l=o-r;return{angle:Math.atan(l/a),deltaX:a,deltaY:l}}(0,r.K2)(a,"calculateDeltaAndAngle");var s=(0,r.K2)(t=>Array.isArray(t)?{x:t[0],y:t[1]}:t,"pointTransformer"),l=(0,r.K2)(t=>({x:(0,r.K2)(function(e,n,r){let o=0;const l=s(r[0]).x<s(r[r.length-1]).x?"left":"right";if(0===n&&Object.hasOwn(i,t.arrowTypeStart)){const{angle:e,deltaX:n}=a(r[0],r[1]);o=i[t.arrowTypeStart]*Math.cos(e)*(n>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(i,t.arrowTypeEnd)){const{angle:e,deltaX:n}=a(r[r.length-1],r[r.length-2]);o=i[t.arrowTypeEnd]*Math.cos(e)*(n>=0?1:-1)}const c=Math.abs(s(e).x-s(r[r.length-1]).x),h=Math.abs(s(e).y-s(r[r.length-1]).y),u=Math.abs(s(e).x-s(r[0]).x),d=Math.abs(s(e).y-s(r[0]).y),p=i[t.arrowTypeStart],f=i[t.arrowTypeEnd];if(c<f&&c>0&&h<f){let t=f+1-c;t*="right"===l?-1:1,o-=t}if(u<p&&u>0&&d<p){let t=p+1-u;t*="right"===l?-1:1,o+=t}return s(e).x+o},"x"),y:(0,r.K2)(function(e,n,r){let o=0;const l=s(r[0]).y<s(r[r.length-1]).y?"down":"up";if(0===n&&Object.hasOwn(i,t.arrowTypeStart)){const{angle:e,deltaY:n}=a(r[0],r[1]);o=i[t.arrowTypeStart]*Math.abs(Math.sin(e))*(n>=0?1:-1)}else if(n===r.length-1&&Object.hasOwn(i,t.arrowTypeEnd)){const{angle:e,deltaY:n}=a(r[r.length-1],r[r.length-2]);o=i[t.arrowTypeEnd]*Math.abs(Math.sin(e))*(n>=0?1:-1)}const c=Math.abs(s(e).y-s(r[r.length-1]).y),h=Math.abs(s(e).x-s(r[r.length-1]).x),u=Math.abs(s(e).y-s(r[0]).y),d=Math.abs(s(e).x-s(r[0]).x),p=i[t.arrowTypeStart],f=i[t.arrowTypeEnd];if(c<f&&c>0&&h<f){let t=f+1-c;t*="up"===l?-1:1,o-=t}if(u<p&&u>0&&d<p){let t=p+1-u;t*="up"===l?-1:1,o+=t}return s(e).y+o},"y")}),"getLineFunctionsWithOffset")},29008:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t){return t}},32387:(t,e,n)=>{"use strict";n.d(e,{Fr:()=>h,GX:()=>c,KX:()=>l,WW:()=>a,ue:()=>o});var r=n(80144),i=n(40797),o=(0,i.K2)(t=>{const{handDrawnSeed:e}=(0,r.D7)();return{fill:t,hachureAngle:120,hachureGap:4,fillWeight:2,roughness:.7,stroke:t,seed:e}},"solidStateFill"),a=(0,i.K2)(t=>{const e=s([...t.cssCompiledStyles||[],...t.cssStyles||[],...t.labelStyle||[]]);return{stylesMap:e,stylesArray:[...e]}},"compileStyles"),s=(0,i.K2)(t=>{const e=new Map;return t.forEach(t=>{const[n,r]=t.split(":");e.set(n.trim(),r?.trim())}),e},"styles2Map"),l=(0,i.K2)(t=>"color"===t||"font-size"===t||"font-family"===t||"font-weight"===t||"font-style"===t||"text-decoration"===t||"text-align"===t||"text-transform"===t||"line-height"===t||"letter-spacing"===t||"word-spacing"===t||"text-shadow"===t||"text-overflow"===t||"white-space"===t||"word-wrap"===t||"word-break"===t||"overflow-wrap"===t||"hyphens"===t,"isLabelStyle"),c=(0,i.K2)(t=>{const{stylesArray:e}=a(t),n=[],r=[],i=[],o=[];return e.forEach(t=>{const e=t[0];l(e)?n.push(t.join(":")+" !important"):(r.push(t.join(":")+" !important"),e.includes("stroke")&&i.push(t.join(":")+" !important"),"fill"===e&&o.push(t.join(":")+" !important"))}),{labelStyles:n.join(";"),nodeStyles:r.join(";"),stylesArray:e,borderStyles:i,backgroundStyles:o}},"styles2String"),h=(0,i.K2)((t,e)=>{const{themeVariables:n,handDrawnSeed:i}=(0,r.D7)(),{nodeBorder:o,mainBkg:s}=n,{stylesMap:l}=a(t);return Object.assign({roughness:.7,fill:l.get("fill")||s,fillStyle:"hachure",fillWeight:4,hachureGap:5.2,stroke:l.get("stroke")||o,seed:i,strokeWidth:l.get("stroke-width")?.replace("px","")||1.3,fillLineDash:[0,0],strokeLineDash:u(l.get("stroke-dasharray"))},e)},"userNodeOverrides"),u=(0,i.K2)(t=>{if(!t)return[0,0];const e=t.trim().split(/\s+/).map(Number);if(1===e.length){const t=isNaN(e[0])?0:e[0];return[t,t]}return[isNaN(e[0])?0:e[0],isNaN(e[1])?0:e[1]]},"getStrokeDashArray")},38446:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(89610),i=n(5254);const o=function(t){return null!=t&&(0,i.A)(t.length)&&!(0,r.A)(t)}},39142:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t){return function(){return t}}},39759:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}},39857:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(28562),i=n(41917);const o=(0,r.A)(i.A,"Set")},40367:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t,e){return function(n){return t(e(n))}}},40671:(t,e,n)=>{"use strict";n.d(e,{_:()=>E});var r=n(60023);function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function o(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?o(Object(n),!0).forEach(function(e){s(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function s(t,e,n){return(e=g(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function l(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,h=Object.create(l.prototype);return c(h,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),h}var a={};function s(){}function h(){}function u(){}e=Object.getPrototypeOf;var d=[][r]?e(e([][r]())):(c(e={},r,function(){return this}),e),p=u.prototype=s.prototype=Object.create(d);function f(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,u):(t.__proto__=u,c(t,i,"GeneratorFunction")),t.prototype=Object.create(p),t}return h.prototype=u,c(p,"constructor",u),c(u,"constructor",h),h.displayName="GeneratorFunction",c(u,i,"GeneratorFunction"),c(p),c(p,i,"Generator"),c(p,r,function(){return this}),c(p,"toString",function(){return"[object Generator]"}),(l=function(){return{w:o,m:f}})()}function c(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}c=function(t,e,n,r){function o(e,n){c(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},c(t,e,n,r)}function h(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return u(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function d(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function p(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){d(o,r,i,a,s,"next",t)}function s(t){d(o,r,i,a,s,"throw",t)}a(void 0)})}}function f(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,g(r.key),r)}}function g(t){var e=function(t){if("object"!=i(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==i(e)?e:e+""}var m=function(){return t=function t(){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.abortController=null},e=[{key:"streamGemini",value:(o=p(l().m(function t(e,n,r,i,o,a){var s,c,u,d,p,f,g,m,A,y,b,x,v,C,k,w,B,I,S,_,E,T;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:return this.abortController=new AbortController,t.p=1,s=e.includes("?")?"".concat(e,"&alt=sse"):"".concat(e,"?key=").concat(n,"&alt=sse"),t.n=2,fetch(s,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r),signal:this.abortController.signal});case 2:if((c=t.v).ok){t.n=4;break}return t.n=3,c.text();case 3:throw u=t.v,new Error("Gemini API Error: ".concat(c.status," - ").concat(u));case 4:d=c.body.getReader(),p=new TextDecoder,f="",g="";case 5:return t.n=6,d.read();case 6:if(m=t.v,A=m.done,y=m.value,!A){t.n=7;break}return t.a(3,16);case 7:f+=p.decode(y,{stream:!0}),b=f.split("\n"),f=b.pop()||"",x=h(b),t.p=8,x.s();case 9:if((v=x.n()).done){t.n=12;break}if(!(C=v.value).startsWith("data: ")){t.n=11;break}if("[DONE]"!==(k=C.substring(6).trim())){t.n=10;break}return t.a(3,11);case 10:try{if((w=JSON.parse(k)).candidates&&w.candidates[0]&&(B=w.candidates[0]).content&&B.content.parts){I=h(B.content.parts);try{for(I.s();!(S=I.n()).done;)(_=S.value).text&&(g+=_.text,i(_.text))}catch(t){I.e(t)}finally{I.f()}}}catch(t){console.warn("Gemini SSE :",t,k)}case 11:t.n=9;break;case 12:t.n=14;break;case 13:t.p=13,E=t.v,x.e(E);case 14:return t.p=14,x.f(),t.f(14);case 15:t.n=5;break;case 16:o(g),t.n=18;break;case 17:t.p=17,"AbortError"===(T=t.v).name?(console.log("Gemini "),a(new Error(""))):(console.error("Gemini :",T),a(T));case 18:return t.p=18,this.abortController=null,t.f(18);case 19:return t.a(2)}},t,this,[[8,13,14,15],[1,17,18,19]])})),function(t,e,n,r,i,a){return o.apply(this,arguments)})},{key:"streamClaude",value:(i=p(l().m(function t(e,n,r,i,o,s){var c,u,d,p,f,g,m,A,y,b,x,v,C,k,w,B,I,S,_;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:return this.abortController=new AbortController,t.p=1,c=a(a({},r),{},{stream:!0}),t.n=2,fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c),signal:this.abortController.signal});case 2:if((u=t.v).ok){t.n=4;break}return t.n=3,u.text();case 3:throw d=t.v,new Error("Claude API Error: ".concat(u.status," - ").concat(d));case 4:p=u.body.getReader(),f=new TextDecoder,g="",m="";case 5:return t.n=6,p.read();case 6:if(A=t.v,y=A.done,b=A.value,!y){t.n=7;break}return t.a(3,17);case 7:g+=f.decode(b,{stream:!0}),x=this.parseClaudeSSE(g),v=h(x.parsed),t.p=8,v.s();case 9:if((C=v.n()).done){t.n=13;break}if("content_block_delta"!==(k=C.value).type){t.n=10;break}(B=null===(w=k.data)||void 0===w||null===(w=w.delta)||void 0===w?void 0:w.text)&&(m+=B,i(B)),t.n=12;break;case 10:if("message_stop"!==k.type){t.n=11;break}console.log("Claude "),t.n=12;break;case 11:if("error"!==k.type){t.n=12;break}throw new Error("Claude Error: ".concat((null===(I=k.data)||void 0===I||null===(I=I.error)||void 0===I?void 0:I.message)||"Unknown error"));case 12:t.n=9;break;case 13:t.n=15;break;case 14:t.p=14,S=t.v,v.e(S);case 15:return t.p=15,v.f(),t.f(15);case 16:g=x.remaining,t.n=5;break;case 17:o(m),t.n=19;break;case 18:t.p=18,"AbortError"===(_=t.v).name?(console.log("Claude "),s(new Error(""))):(console.error("Claude :",_),s(_));case 19:return t.p=19,this.abortController=null,t.f(19);case 20:return t.a(2)}},t,this,[[8,14,15,16],[1,18,19,20]])})),function(t,e,n,r,o,a){return i.apply(this,arguments)})},{key:"parseClaudeSSE",value:function(t){for(var e=t.split("\n"),n=[],r={type:null,data:null},i="",o=0;o<e.length;o++){var a=e[o];if(""!==a)if(a.startsWith("event: "))r.type=a.substring(7).trim();else if(a.startsWith("data: ")){var s=a.substring(6).trim();try{r.data=JSON.parse(s)}catch(t){console.warn("Claude SSE data :",t,s)}}else o!==e.length-1||a.startsWith("event:")||a.startsWith("data:")||(i=a);else r.type&&(n.push(r),r={type:null,data:null})}return{parsed:n,remaining:i}}},{key:"abort",value:function(){this.abortController&&(console.log(""),this.abortController.abort())}},{key:"isStreaming",value:function(){return null!==this.abortController}},{key:"streamWithRetry",value:(r=p(l().m(function t(e){var n,r,i,o,a,s=arguments;return l().w(function(t){for(;;)switch(t.p=t.n){case 0:n=s.length>1&&void 0!==s[1]?s[1]:3,r=s.length>2&&void 0!==s[2]?s[2]:1e3,i=null,o=0;case 1:if(!(o<n)){t.n=8;break}return t.p=2,t.n=3,e();case 3:return t.a(2);case 4:if(t.p=4,a=t.v,i=a,"AbortError"!==a.name){t.n=5;break}throw a;case 5:if(!(o<n-1)){t.n=7;break}return console.log(" ".concat(o+1,"/").concat(n," (").concat(r,"ms )")),t.n=6,this.sleep(r);case 6:r*=2;case 7:o++,t.n=1;break;case 8:throw i;case 9:return t.a(2)}},t,this,[[2,4]])})),function(t){return r.apply(this,arguments)})},{key:"sleep",value:function(t){return new Promise(function(e){return setTimeout(e,t)})}}],n=[{key:"parseSSE",value:function(t){var e,n=[],r=h(t.split("\n"));try{for(r.s();!(e=r.n()).done;){var i=e.value;if(i.startsWith("data: ")){var o=i.substring(6);if("[DONE]"===o)n.push({type:"done",data:null});else try{n.push({type:"data",data:JSON.parse(o)})}catch(t){console.warn("SSE :",t)}}}}catch(t){r.e(t)}finally{r.f()}return n}}],e&&f(t.prototype,e),n&&f(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o}();function A(t){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},A(t)}function y(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return b(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function x(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return v(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(v(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,v(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,v(u,"constructor",c),v(c,"constructor",l),l.displayName="GeneratorFunction",v(c,i,"GeneratorFunction"),v(u),v(u,i,"Generator"),v(u,r,function(){return this}),v(u,"toString",function(){return"[object Generator]"}),(x=function(){return{w:o,m:d}})()}function v(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}v=function(t,e,n,r){function o(e,n){v(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},v(t,e,n,r)}function C(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?C(Object(n),!0).forEach(function(e){w(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function w(t,e,n){return(e=_(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function B(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function I(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){B(o,r,i,a,s,"next",t)}function s(t){B(o,r,i,a,s,"throw",t)}a(void 0)})}}function S(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_(r.key),r)}}function _(t){var e=function(t){if("object"!=A(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=A(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==A(e)?e:e+""}var E=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.settings={geminiApiKey:"",claudeApiKey:"",aiProvider:"gemini",selectedModel:"gemini-2.5-pro"},this.aiModels={gemini:{"gemini-2.0-flash-exp":{name:"Gemini 2.0 Flash ()",endpoint:"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent",maxTokens:8192},"gemini-2.0-flash":{name:"Gemini 2.0 Flash ()",endpoint:"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent",maxTokens:8192},"gemini-2.5-pro":{name:"Gemini 2.5 Pro ()",endpoint:"https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-pro:generateContent",maxTokens:8192},"gemini-1.5-flash":{name:"Gemini 1.5 Flash ()",endpoint:"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent",maxTokens:8192},"gemini-1.5-pro":{name:"Gemini 1.5 Pro ()",endpoint:"https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro:generateContent",maxTokens:8192}},claude:{"claude-sonnet-4-20250514":{name:"Claude Sonnet 4 (Artifacts)",endpoint:"https://api.anthropic.com/v1/messages",maxTokens:8192}}}},e=[{key:"loadSettings",value:(d=I(x().m(function t(){var e,n;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.getChromeStorageSettings();case 1:(e=t.v)&&(this.settings=k(k({},this.settings),e)),this.settings.selectedModel&&this.aiModels[this.settings.aiProvider][this.settings.selectedModel]||(this.settings.selectedModel="gemini"===this.settings.aiProvider?"gemini-2.5-pro":"claude-sonnet-4-20250514"),this.updateAIButton(),t.n=3;break;case 2:t.p=2,n=t.v,console.error("AI:",n);case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return d.apply(this,arguments)})},{key:"getChromeStorageSettings",value:(u=I(x().m(function t(){return x().w(function(t){for(;;)switch(t.n){case 0:if("undefined"==typeof chrome||!chrome.storage){t.n=1;break}return t.a(2,new Promise(function(t){chrome.storage.sync.get(["geminiApiKey","geminiModel","claudeApiKey","claudeModel"],function(e){var n={};e.geminiApiKey&&(n.geminiApiKey=e.geminiApiKey),e.claudeApiKey&&(n.claudeApiKey=e.claudeApiKey),e.geminiApiKey&&!e.claudeApiKey?(n.aiProvider="gemini",n.selectedModel=e.geminiModel||"gemini-2.5-pro"):!e.geminiApiKey&&e.claudeApiKey?(n.aiProvider="claude",n.selectedModel=e.claudeModel||"claude-sonnet-4-20250514"):e.geminiApiKey&&e.claudeApiKey&&(n.aiProvider="gemini",n.selectedModel=e.geminiModel||"gemini-2.5-pro"),t(n)})}));case 1:return t.a(2,null)}},t)})),function(){return u.apply(this,arguments)})},{key:"saveSettings",value:(h=I(x().m(function t(){var e,n,r=arguments;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:null,t.p=1,e&&(this.settings=k(k({},this.settings),{},{aiProvider:e.aiProvider||this.settings.aiProvider,selectedModel:e.selectedModel||this.settings.selectedModel,geminiApiKey:e.geminiApiKey||this.settings.geminiApiKey,claudeApiKey:e.claudeApiKey||this.settings.claudeApiKey}),this.aiModels[this.settings.aiProvider][this.settings.selectedModel]||(this.settings.selectedModel="gemini"===this.settings.aiProvider?"gemini-2.5-pro":"claude-sonnet-4-20250514")),t.n=2,chrome.storage.local.set({aiSettings:this.settings});case 2:this.updateAIButton(),t.n=4;break;case 3:t.p=3,n=t.v,console.error("AI:",n);case 4:return t.a(2)}},t,this,[[1,3]])})),function(){return h.apply(this,arguments)})},{key:"updateAIButton",value:function(){console.log("AI:",{provider:this.settings.aiProvider,selectedModel:this.settings.selectedModel,hasGeminiKey:!!this.settings.geminiApiKey,hasClaudeKey:!!this.settings.claudeApiKey})}},{key:"getCurrentModel",value:function(){var t=this.settings.aiProvider,e=this.settings.selectedModel;return this.aiModels[t]&&this.aiModels[t][e]?this.aiModels[t][e]:this.aiModels.gemini["gemini-2.5-pro"]}},{key:"getShortModelName",value:function(t){return{"Gemini 2.0 Flash ()":"2.0 Flash","Gemini 2.0 Flash ()":"2.0 Flash","Gemini 2.5 Pro ()":"2.5 Pro","Gemini 1.5 Flash ()":"1.5 Flash","Gemini 1.5 Pro ()":"1.5 Pro","Claude 3.5 Sonnet (202410)":"3.5 Sonnet","Claude 3.5 Haiku (202410)":"3.5 Haiku","Claude 3 Opus ()":"3 Opus","Claude 3 Sonnet":"3 Sonnet","Claude 3 Haiku ()":"3 Haiku"}[t]||t}},{key:"getModelPricing",value:function(t,e){var n;return(null===(n={gemini:{"gemini-2.0-flash-exp":"","gemini-2.0-flash":"","gemini-2.5-pro":"","gemini-1.5-flash":"","gemini-1.5-pro":""},claude:{"claude-sonnet-4-20250514":"Artifacts"}}[t])||void 0===n?void 0:n[e])||""}},{key:"showSettings",value:function(){var t=this,e=document.querySelector(".ai-settings-modal");e&&e.remove();var n=document.createElement("div");n.className="ai-settings-modal",n.innerHTML='\n            <div class="ai-settings-panel">\n                <div class="ai-settings-header">\n                    <h3>AI</h3>\n                    <button class="close-btn" data-action="close"></button>\n                </div>\n                <div class="ai-settings-content">\n                    <div class="ai-provider-section">\n                        <label>AI:</label>\n                        <select id="ai-provider-select">\n                            <option value="gemini" '.concat("gemini"===this.settings.aiProvider?"selected":"",'>Google Gemini</option>\n                            <option value="claude" ').concat("claude"===this.settings.aiProvider?"selected":"",'>Anthropic Claude</option>\n                        </select>\n                    </div>\n\n                    <div class="ai-model-section">\n                        <label>:</label>\n                        <select id="ai-model-select">\n                            ').concat(this.generateModelOptions(),'\n                        </select>\n                    </div>\n\n                    <div class="api-key-section" id="gemini-section" style="display: ').concat("gemini"===this.settings.aiProvider?"block":"none",'">\n                        <label>Gemini API :</label>\n                        <input type="password" id="gemini-api-key" value="').concat(this.settings.geminiApiKey,'" placeholder="AIza...API">\n                        <small>\n                            <a href="https://aistudio.google.com/app/apikey" target="_blank">Google AI Studio</a>\n                        </small>\n                    </div>\n\n                    <div class="api-key-section" id="claude-section" style="display: ').concat("claude"===this.settings.aiProvider?"block":"none",'">\n                        <p class="info-text">Claude Artifacts</p>\n                    </div>\n                </div>\n                <div class="ai-settings-actions">\n                    <button class="btn secondary" data-action="cancel"></button>\n                    <button class="btn primary" data-action="save"></button>\n                </div>\n            </div>\n        '),document.body.appendChild(n),n.querySelector('[data-action="close"]').addEventListener("click",function(){return n.remove()}),n.querySelector('[data-action="cancel"]').addEventListener("click",function(){return n.remove()}),n.querySelector('[data-action="save"]').addEventListener("click",function(){return t.saveSettingsFromModal(n)}),n.querySelector("#ai-provider-select").addEventListener("change",function(e){t.updateProviderSections(n,e.target.value),t.updateModelSelect(n,e.target.value)}),n.addEventListener("click",function(t){t.target===n&&n.remove()})}},{key:"generateModelOptions",value:function(){var t=this.settings.aiProvider,e=this.aiModels[t]||{},n=e[this.settings.selectedModel]?this.settings.selectedModel:"gemini"===t?"gemini-2.5-pro":"claude-sonnet-4-20250514";return Object.entries(e).map(function(t){var e=y(t,2),r=e[0],i=e[1];return'<option value="'.concat(r,'" ').concat(n===r?"selected":"",">").concat(i.name,"</option>")}).join("")}},{key:"updateProviderSections",value:function(t,e){var n=t.querySelector("#gemini-section"),r=t.querySelector("#claude-section");n.style.display="gemini"===e?"block":"none",r.style.display="claude"===e?"block":"none"}},{key:"updateModelSelect",value:function(t,e){var n,r=t.querySelector("#ai-model-select"),i=this.aiModels[e]||{};r.innerHTML=Object.entries(i).map(function(t){var e=y(t,2),n=e[0],r=e[1];return'<option value="'.concat(n,'">').concat(r.name,"</option>")}).join(""),n=e===this.settings.aiProvider&&this.settings.selectedModel&&i[this.settings.selectedModel]?this.settings.selectedModel:"gemini"===e?"gemini-2.5-pro":"claude-sonnet-4-20250514",r.value=n}},{key:"saveSettingsFromModal",value:(c=I(x().m(function t(e){var n,r,i,o;return x().w(function(t){for(;;)switch(t.n){case 0:if(n=e.querySelector("#ai-provider-select").value,r=e.querySelector("#ai-model-select").value,i=e.querySelector("#gemini-api-key"),o=i?i.value.trim():"","gemini"!==n||o){t.n=1;break}return alert("Gemini API"),t.a(2);case 1:return this.settings.aiProvider=n,this.settings.selectedModel=r,this.settings.geminiApiKey=o,this.settings.claudeApiKey="",t.n=2,this.saveSettings();case 2:e.remove(),alert("");case 3:return t.a(2)}},t,this)})),function(t){return c.apply(this,arguments)})},{key:"processAI",value:(l=I(x().m(function t(e){var n,r,i,o,a,s,l=arguments;return x().w(function(t){for(;;)switch(t.n){case 0:if(n=l.length>1&&void 0!==l[1]?l[1]:null,"settings"!==e){t.n=1;break}return this.showSettings(),t.a(2);case 1:if("gemini"!==this.settings.aiProvider){t.n=2;break}if(this.settings.geminiApiKey){t.n=2;break}return alert("Gemini AIAPI"),this.showSettings(),t.a(2);case 2:if("custom"!==e){t.n=5;break}if(r=s("AI:")){t.n=3;break}return t.a(2);case 3:return i=this.getSelectedText(),o=i?"".concat(r,"\n\n:\n").concat(i):r,t.n=4,this.callAI(o);case 4:case 7:return t.a(2);case 5:if(a=this.getSelectedText()){t.n=6;break}return alert(""),t.a(2);case 6:return s=this.buildPrompt(e,a,n),t.n=7,this.callAI(s)}},t,this)})),function(t){return l.apply(this,arguments)})},{key:"getSelectedText",value:function(){if(window.editorManager&&window.editorManager.editor){var t=window.editorManager.editor.state.selection,e=t.from,n=t.to,r=window.editorManager.editor.state.doc.textBetween(e,n," ");if(r)return r}var i=window.getSelection();return i?i.toString():""}},{key:"buildPrompt",value:function(t,e,n){var r={summarize:{short:"50-100\n\n".concat(e),normal:"100-200\n\n".concat(e),long:"200-400\n\n".concat(e),default:"\n\n".concat(e)},proofread:"\n\n".concat(e),translate:{en:"\n\n".concat(e),ja:"\n\n".concat(e),default:"\n\n".concat(e)},"generate-title":"5\n\n".concat(e),"generate-heading":"\n\n".concat(e),"extract-keywords":"\n\n".concat(e),"convert-style":{formal:"\n\n".concat(e),casual:"\n\n".concat(e),default:"\n\n".concat(e)}};return"object"===A(r[t])?r[t][n]||r[t].default:r[t]||"\n\n".concat(e)}},{key:"callAI",value:(s=I(x().m(function t(e){var n,r,i,o;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=this.settings.aiProvider,r=this.showLoading(),t.p=1,"gemini"!==n){t.n=3;break}return t.n=2,this.callGemini(e);case 2:i=t.v,t.n=6;break;case 3:if("claude"!==n){t.n=5;break}return t.n=4,this.callClaude(e);case 4:i=t.v,t.n=6;break;case 5:throw new Error("AI");case 6:this.hideLoading(r),this.showResult(i),t.n=8;break;case 7:t.p=7,o=t.v,this.hideLoading(r),alert("AI: ".concat(o.message));case 8:return t.a(2)}},t,this,[[1,7]])})),function(t){return s.apply(this,arguments)})},{key:"callGemini",value:(a=I(x().m(function t(e){var n,r,i,o,a,s,l;return x().w(function(t){for(;;)switch(t.n){case 0:return n=this.getCurrentModel(),r=this.settings.geminiApiKey,i={contents:[{parts:[{text:e}]}],generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:n.maxTokens}},t.n=1,fetch("".concat(n.endpoint,"?key=").concat(r),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 1:if((o=t.v).ok){t.n=3;break}return t.n=2,o.text();case 2:throw a=t.v,new Error("API Error: ".concat(o.status," - ").concat(a));case 3:return t.n=4,o.json();case 4:if(!(s=t.v).candidates||!s.candidates[0]){t.n=5;break}if(!((l=s.candidates[0]).content&&l.content.parts&&l.content.parts[0])){t.n=5;break}return t.a(2,l.content.parts[0].text);case 5:throw new Error("AI");case 6:return t.a(2)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"callClaude",value:(o=I(x().m(function t(e){var n,r,i,o,a;return x().w(function(t){for(;;)switch(t.n){case 0:return n=this.getCurrentModel(),r={model:this.settings.selectedModel,max_tokens:n.maxTokens,messages:[{role:"user",content:e}]},t.n=1,fetch(n.endpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 1:if((i=t.v).ok){t.n=3;break}return t.n=2,i.text();case 2:throw o=t.v,new Error("API Error: ".concat(i.status," - ").concat(o));case 3:return t.n=4,i.json();case 4:if(!((a=t.v).content&&a.content[0]&&a.content[0].text)){t.n=5;break}return t.a(2,a.content[0].text);case 5:throw new Error("AI");case 6:return t.a(2)}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"showLoading",value:function(){var t=document.querySelector(".ai-loading-overlay");t&&t.remove();var e=document.createElement("div");return e.className="ai-loading-overlay",e.innerHTML='\n            <div class="ai-loading-content">\n                <div class="ai-spinner"></div>\n                <p>AI...</p>\n            </div>\n        ',document.body.appendChild(e),e}},{key:"hideLoading",value:function(t){t&&t.remove()}},{key:"showResult",value:function(t){var e=this,n=document.querySelector(".ai-result-modal");n&&n.remove();var r=document.createElement("div");r.className="ai-result-modal",r.innerHTML='\n            <div class="ai-result-panel">\n                <div class="ai-result-header">\n                    <h3>AI</h3>\n                    <button class="close-btn" data-action="close"></button>\n                </div>\n                <div class="ai-result-content"></div>\n                <div class="ai-result-actions">\n                    <button class="btn secondary" data-action="copy"></button>\n                    <button class="btn secondary" data-action="copy-rich"></button>\n                    <button class="btn secondary" data-action="insert"></button>\n                    <button class="btn primary" data-action="close"></button>\n                </div>\n            </div>\n        ',document.body.appendChild(r);var i=r.querySelector(".ai-result-content");this.renderMarkdown(t,i),r.querySelectorAll('[data-action="close"]').forEach(function(t){t.addEventListener("click",function(){return r.remove()})}),r.querySelector('[data-action="copy"]').addEventListener("click",I(x().m(function e(){var n;return x().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,navigator.clipboard.writeText(t);case 1:alert(""),e.n=3;break;case 2:e.p=2,n=e.v,console.error(":",n);case 3:return e.a(2)}},e,null,[[0,2]])}))),r.querySelector('[data-action="copy-rich"]').addEventListener("click",I(x().m(function n(){var r;return x().w(function(n){for(;;)switch(n.p=n.n){case 0:return n.p=0,n.n=1,e.copyRichText(t);case 1:alert(""),n.n=3;break;case 2:n.p=2,r=n.v,console.error(":",r);case 3:return n.a(2)}},n,null,[[0,2]])}))),r.querySelector('[data-action="insert"]').addEventListener("click",function(){try{e.insertToEditor(t),alert(""),r.remove()}catch(t){console.error(":",t)}}),r.addEventListener("click",function(t){t.target===r&&r.remove()})}},{key:"renderMarkdown",value:function(t,e){try{var n=r.xI.parse(t);e.innerHTML=n}catch(n){console.error("Markdown:",n),e.textContent=t}}},{key:"copyRichText",value:(i=I(x().m(function t(e){var n,i,o,a;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,n=r.xI.parse(e),i=new Blob([n],{type:"text/html"}),o=[new ClipboardItem({"text/html":i,"text/plain":new Blob([e],{type:"text/plain"})})],t.n=1,navigator.clipboard.write(o);case 1:t.n=4;break;case 2:return t.p=2,a=t.v,console.error(":",a),t.n=3,navigator.clipboard.writeText(e);case 3:throw new Error("");case 4:return t.a(2)}},t,null,[[0,2]])})),function(t){return i.apply(this,arguments)})},{key:"insertToEditor",value:function(t){try{var e=window.editorManager;if(!e||!e.editor)throw new Error("");var n=e.editor.state.selection.from,i=r.xI.parse(t);e.editor.chain().focus().setTextSelection(n).insertContent(i).run()}catch(t){throw console.error(":",t),t}}},{key:"callAIWithStreaming",value:(n=I(x().m(function t(e,n,r,i){var o,a,s,l,c,h,u;return x().w(function(t){for(;;)switch(t.p=t.n){case 0:if("gemini"!==(o=this.settings.aiProvider)){t.n=1;break}if(this.settings.geminiApiKey){t.n=1;break}return i(new Error("Gemini API")),t.a(2);case 1:if(a="gemini"===o?this.settings.geminiApiKey:null,s=this.getCurrentModel(),l=new m,t.p=2,"gemini"!==o){t.n=4;break}return c=this.buildGeminiRequestBody(e),t.n=3,l.streamGemini(s.endpoint,a,c,n,r,i);case 3:t.n=7;break;case 4:if("claude"!==o){t.n=6;break}return h=this.buildClaudeRequestBody(e),t.n=5,l.streamClaude(s.endpoint,a,h,n,r,i);case 5:t.n=7;break;case 6:throw new Error(": ".concat(o));case 7:t.n=9;break;case 8:t.p=8,u=t.v,console.error(":",u),i(u);case 9:return t.a(2)}},t,this,[[2,8]])})),function(t,e,r,i){return n.apply(this,arguments)})},{key:"buildGeminiRequestBody",value:function(t){var e=this.getCurrentModel();return{contents:t.map(function(t){return{role:"assistant"===t.role?"model":"user",parts:[{text:t.content}]}}),generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:e.maxTokens}}}},{key:"buildClaudeRequestBody",value:function(t){var e=this.getCurrentModel(),n=t.map(function(t){return{role:t.role,content:t.content}});return{model:this.settings.selectedModel,max_tokens:e.maxTokens,messages:n}}},{key:"manageTokenLimit",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4096,n=function(t){return Math.ceil(t.length/4)},r=0,i=[],o=t.length-1;o>=0;o--){var a=t[o],s=n(a.content);if(r+s>.8*e)break;i.unshift(a),r+=s}return 0===i.length&&t.length>0&&i.push(t[t.length-1]),i}},{key:"createMessage",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return{role:t,content:e,timestamp:Date.now(),metadata:k({model:this.settings.selectedModel,provider:this.settings.aiProvider},n)}}}],e&&S(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,i,o,a,s,l,c,h,u,d}()},40797:(t,e,n)=>{"use strict";n.d(e,{He:()=>c,K2:()=>o,Rm:()=>l,VA:()=>a});var r=n(74353),i=Object.defineProperty,o=(t,e)=>i(t,"name",{value:e,configurable:!0}),a=(t,e)=>{for(var n in e)i(t,n,{get:e[n],enumerable:!0})},s={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},l={trace:o((...t)=>{},"trace"),debug:o((...t)=>{},"debug"),info:o((...t)=>{},"info"),warn:o((...t)=>{},"warn"),error:o((...t)=>{},"error"),fatal:o((...t)=>{},"fatal")},c=o(function(t="fatal"){let e=s.fatal;"string"==typeof t?t.toLowerCase()in s&&(e=s[t]):"number"==typeof t&&(e=t),l.trace=()=>{},l.debug=()=>{},l.info=()=>{},l.warn=()=>{},l.error=()=>{},l.fatal=()=>{},e<=s.fatal&&(l.fatal=console.error?console.error.bind(console,h("FATAL"),"color: orange"):console.log.bind(console,"[35m",h("FATAL"))),e<=s.error&&(l.error=console.error?console.error.bind(console,h("ERROR"),"color: orange"):console.log.bind(console,"[31m",h("ERROR"))),e<=s.warn&&(l.warn=console.warn?console.warn.bind(console,h("WARN"),"color: orange"):console.log.bind(console,"[33m",h("WARN"))),e<=s.info&&(l.info=console.info?console.info.bind(console,h("INFO"),"color: lightblue"):console.log.bind(console,"[34m",h("INFO"))),e<=s.debug&&(l.debug=console.debug?console.debug.bind(console,h("DEBUG"),"color: lightgreen"):console.log.bind(console,"[32m",h("DEBUG"))),e<=s.trace&&(l.trace=console.debug?console.debug.bind(console,h("TRACE"),"color: lightgreen"):console.log.bind(console,"[32m",h("TRACE")))},"setLogLevel"),h=o(t=>`%c${r().format("ss.SSS")} : ${t} : `,"format")},41113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},41200:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(41917);var i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof module&&module&&!module.nodeType&&module,a=o&&o.exports===i?r.A.Buffer:void 0;const s=(a?a.isBuffer:void 0)||function(){return!1}},41375:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(71354),i=n.n(r),o=n(76314),a=n.n(o)()(i());a.push([t.id,"/*  */\n\n.export-menu {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n    animation: fadeIn 0.2s ease-in-out;\n}\n\n.export-menu-container {\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n    width: 90%;\n    max-width: 600px;\n    max-height: 80vh;\n    display: flex;\n    flex-direction: column;\n    animation: slideUp 0.3s ease-out;\n}\n\n.export-menu-header {\n    padding: 20px;\n    border-bottom: 1px solid #e5e7eb;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.export-menu-header h3 {\n    margin: 0;\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n}\n\n.export-menu-close {\n    background: none;\n    border: none;\n    font-size: 24px;\n    color: #6b7280;\n    cursor: pointer;\n    padding: 4px;\n    line-height: 1;\n    border-radius: 6px;\n    transition: all 0.2s;\n}\n\n.export-menu-close:hover {\n    background: #f3f4f6;\n    color: #1f2937;\n}\n\n.export-menu-body {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n}\n\n.export-section {\n    margin-bottom: 24px;\n}\n\n.export-section:last-child {\n    margin-bottom: 0;\n}\n\n.export-section h4 {\n    margin: 0 0 6px 0;\n    font-size: 16px;\n    font-weight: 600;\n    color: #374151;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.export-section-desc {\n    margin: 0 0 12px 0;\n    font-size: 13px;\n    color: #6b7280;\n    line-height: 1.4;\n}\n\n.export-buttons {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n    gap: 8px;\n}\n\n.export-button {\n    background: white;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    padding: 12px 16px;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n    cursor: pointer;\n    transition: all 0.2s;\n    font-size: 14px;\n    color: #374151;\n    text-align: left;\n    text-decoration: none;\n}\n\n.export-button:hover {\n    background: #f0f9ff;\n    border-color: #3b82f6;\n    color: #1e40af;\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\n}\n\n.export-button:active {\n    transform: translateY(0);\n}\n\n.export-button-icon {\n    font-size: 18px;\n    flex-shrink: 0;\n}\n\n.export-button-content {\n    flex: 1;\n}\n\n.export-button-name {\n    font-weight: 500;\n    margin-bottom: 2px;\n}\n\n.export-button-description {\n    font-size: 12px;\n    color: #6b7280;\n    line-height: 1.3;\n}\n\n/*  */\n.export-message {\n    position: fixed;\n    top: 20px;\n    right: 20px;\n    padding: 12px 20px;\n    border-radius: 6px;\n    font-size: 14px;\n    font-weight: 500;\n    z-index: 10001;\n    animation: slideIn 0.3s ease-out;\n    max-width: 300px;\n}\n\n.export-message.success {\n    background: #dcfce7;\n    color: #166534;\n    border: 1px solid #bbf7d0;\n}\n\n.export-message.error {\n    background: #fef2f2;\n    color: #dc2626;\n    border: 1px solid #fecaca;\n}\n\n@keyframes slideIn {\n    from {\n        transform: translateX(100%);\n        opacity: 0;\n    }\n    to {\n        transform: translateX(0);\n        opacity: 1;\n    }\n}\n\n/*  */\n.export-button.loading {\n    pointer-events: none;\n    opacity: 0.7;\n}\n\n.export-button.loading::after {\n    content: '';\n    width: 16px;\n    height: 16px;\n    border: 2px solid #e5e7eb;\n    border-top-color: #3b82f6;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-left: auto;\n}\n\n@keyframes spin {\n    from {\n        transform: rotate(0deg);\n    }\n    to {\n        transform: rotate(360deg);\n    }\n}\n\n/*  */\n@media (max-width: 640px) {\n    .export-menu-container {\n        width: 95%;\n        max-height: 90vh;\n    }\n    \n    .export-buttons {\n        grid-template-columns: 1fr;\n    }\n    \n    .export-menu-header {\n        padding: 16px;\n    }\n    \n    .export-menu-body {\n        padding: 16px;\n    }\n    \n    .export-message {\n        top: 10px;\n        right: 10px;\n        left: 10px;\n        max-width: none;\n    }\n}","",{version:3,sources:["webpack://./src/editor/export-menu.css"],names:[],mappings:"AAAA,oBAAoB;;AAEpB;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,8BAA8B;IAC9B,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,cAAc;IACd,kCAAkC;AACtC;;AAEA;IACI,iBAAiB;IACjB,mBAAmB;IACnB,0CAA0C;IAC1C,UAAU;IACV,gBAAgB;IAChB,gBAAgB;IAChB,aAAa;IACb,sBAAsB;IACtB,gCAAgC;AACpC;;AAEA;IACI,aAAa;IACb,gCAAgC;IAChC,aAAa;IACb,mBAAmB;IACnB,8BAA8B;AAClC;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;IAChB,cAAc;AAClB;;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,eAAe;IACf,cAAc;IACd,eAAe;IACf,YAAY;IACZ,cAAc;IACd,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,cAAc;AAClB;;AAEA;IACI,OAAO;IACP,gBAAgB;IAChB,aAAa;AACjB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,iBAAiB;IACjB,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACZ;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,cAAc;IACd,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,4DAA4D;IAC5D,QAAQ;AACZ;;AAEA;IACI,iBAAiB;IACjB,yBAAyB;IACzB,kBAAkB;IAClB,kBAAkB;IAClB,aAAa;IACb,mBAAmB;IACnB,SAAS;IACT,eAAe;IACf,oBAAoB;IACpB,eAAe;IACf,cAAc;IACd,gBAAgB;IAChB,qBAAqB;AACzB;;AAEA;IACI,mBAAmB;IACnB,qBAAqB;IACrB,cAAc;IACd,2BAA2B;IAC3B,6CAA6C;AACjD;;AAEA;IACI,wBAAwB;AAC5B;;AAEA;IACI,eAAe;IACf,cAAc;AAClB;;AAEA;IACI,OAAO;AACX;;AAEA;IACI,gBAAgB;IAChB,kBAAkB;AACtB;;AAEA;IACI,eAAe;IACf,cAAc;IACd,gBAAgB;AACpB;;AAEA,gBAAgB;AAChB;IACI,eAAe;IACf,SAAS;IACT,WAAW;IACX,kBAAkB;IAClB,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,gCAAgC;IAChC,gBAAgB;AACpB;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,yBAAyB;AAC7B;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,yBAAyB;AAC7B;;AAEA;IACI;QACI,2BAA2B;QAC3B,UAAU;IACd;IACA;QACI,wBAAwB;QACxB,UAAU;IACd;AACJ;;AAEA,aAAa;AACb;IACI,oBAAoB;IACpB,YAAY;AAChB;;AAEA;IACI,WAAW;IACX,WAAW;IACX,YAAY;IACZ,yBAAyB;IACzB,yBAAyB;IACzB,kBAAkB;IAClB,kCAAkC;IAClC,iBAAiB;AACrB;;AAEA;IACI;QACI,uBAAuB;IAC3B;IACA;QACI,yBAAyB;IAC7B;AACJ;;AAEA,aAAa;AACb;IACI;QACI,UAAU;QACV,gBAAgB;IACpB;;IAEA;QACI,0BAA0B;IAC9B;;IAEA;QACI,aAAa;IACjB;;IAEA;QACI,aAAa;IACjB;;IAEA;QACI,SAAS;QACT,WAAW;QACX,UAAU;QACV,eAAe;IACnB;AACJ",sourcesContent:["/*  */\r\n\r\n.export-menu {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 10000;\r\n    animation: fadeIn 0.2s ease-in-out;\r\n}\r\n\r\n.export-menu-container {\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\r\n    width: 90%;\r\n    max-width: 600px;\r\n    max-height: 80vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    animation: slideUp 0.3s ease-out;\r\n}\r\n\r\n.export-menu-header {\r\n    padding: 20px;\r\n    border-bottom: 1px solid #e5e7eb;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.export-menu-header h3 {\r\n    margin: 0;\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    color: #1f2937;\r\n}\r\n\r\n.export-menu-close {\r\n    background: none;\r\n    border: none;\r\n    font-size: 24px;\r\n    color: #6b7280;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n    line-height: 1;\r\n    border-radius: 6px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.export-menu-close:hover {\r\n    background: #f3f4f6;\r\n    color: #1f2937;\r\n}\r\n\r\n.export-menu-body {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 20px;\r\n}\r\n\r\n.export-section {\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.export-section:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.export-section h4 {\r\n    margin: 0 0 6px 0;\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    color: #374151;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.export-section-desc {\r\n    margin: 0 0 12px 0;\r\n    font-size: 13px;\r\n    color: #6b7280;\r\n    line-height: 1.4;\r\n}\r\n\r\n.export-buttons {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n    gap: 8px;\r\n}\r\n\r\n.export-button {\r\n    background: white;\r\n    border: 1px solid #d1d5db;\r\n    border-radius: 6px;\r\n    padding: 12px 16px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    font-size: 14px;\r\n    color: #374151;\r\n    text-align: left;\r\n    text-decoration: none;\r\n}\r\n\r\n.export-button:hover {\r\n    background: #f0f9ff;\r\n    border-color: #3b82f6;\r\n    color: #1e40af;\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.export-button:active {\r\n    transform: translateY(0);\r\n}\r\n\r\n.export-button-icon {\r\n    font-size: 18px;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.export-button-content {\r\n    flex: 1;\r\n}\r\n\r\n.export-button-name {\r\n    font-weight: 500;\r\n    margin-bottom: 2px;\r\n}\r\n\r\n.export-button-description {\r\n    font-size: 12px;\r\n    color: #6b7280;\r\n    line-height: 1.3;\r\n}\r\n\r\n/*  */\r\n.export-message {\r\n    position: fixed;\r\n    top: 20px;\r\n    right: 20px;\r\n    padding: 12px 20px;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    z-index: 10001;\r\n    animation: slideIn 0.3s ease-out;\r\n    max-width: 300px;\r\n}\r\n\r\n.export-message.success {\r\n    background: #dcfce7;\r\n    color: #166534;\r\n    border: 1px solid #bbf7d0;\r\n}\r\n\r\n.export-message.error {\r\n    background: #fef2f2;\r\n    color: #dc2626;\r\n    border: 1px solid #fecaca;\r\n}\r\n\r\n@keyframes slideIn {\r\n    from {\r\n        transform: translateX(100%);\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        transform: translateX(0);\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n/*  */\r\n.export-button.loading {\r\n    pointer-events: none;\r\n    opacity: 0.7;\r\n}\r\n\r\n.export-button.loading::after {\r\n    content: '';\r\n    width: 16px;\r\n    height: 16px;\r\n    border: 2px solid #e5e7eb;\r\n    border-top-color: #3b82f6;\r\n    border-radius: 50%;\r\n    animation: spin 1s linear infinite;\r\n    margin-left: auto;\r\n}\r\n\r\n@keyframes spin {\r\n    from {\r\n        transform: rotate(0deg);\r\n    }\r\n    to {\r\n        transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n/*  */\r\n@media (max-width: 640px) {\r\n    .export-menu-container {\r\n        width: 95%;\r\n        max-height: 90vh;\r\n    }\r\n    \r\n    .export-buttons {\r\n        grid-template-columns: 1fr;\r\n    }\r\n    \r\n    .export-menu-header {\r\n        padding: 16px;\r\n    }\r\n    \r\n    .export-menu-body {\r\n        padding: 16px;\r\n    }\r\n    \r\n    .export-message {\r\n        top: 10px;\r\n        right: 10px;\r\n        left: 10px;\r\n        max-width: none;\r\n    }\r\n}"],sourceRoot:""}]);const s=a},41917:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(72136),i="object"==typeof self&&self&&self.Object===Object&&self;const o=r.A||i||Function("return this")()},42949:t=>{"use strict";t.exports='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>'},43988:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=n(41917).A.Uint8Array},46632:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(62050);function i(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r.A),n}i.Cache=r.A;const o=i},50407:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var r=n(23149),i=Object.create;const o=function(){function t(){}return function(e){if(!(0,r.A)(e))return{};if(i)return i(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var a=n(15647),s=n(97271);const l=function(t){return"function"!=typeof t.constructor||(0,s.A)(t)?{}:o((0,a.A)(t))}},51444:(t,e,n)=>{"use strict";function r(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n<e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function i(t,e){let n;if(void 0===e)for(const e of t)null!=e&&(n>e||void 0===n&&e>=e)&&(n=e);else{let r=-1;for(let i of t)null!=(i=e(i,++r,t))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function o(t){return t}n.d(e,{JLW:()=>Ja,l78:()=>y,tlR:()=>A,qrM:()=>ds,Yu4:()=>fs,IA3:()=>ms,Wi0:()=>ys,PGM:()=>bs,OEq:()=>vs,y8u:()=>ws,olC:()=>Is,IrU:()=>_s,oDi:()=>Ms,Q7f:()=>Os,cVp:()=>Ps,lUB:()=>ns,Lx9:()=>js,nVG:()=>Us,uxU:()=>Hs,Xf2:()=>Vs,GZz:()=>Xs,UPb:()=>Js,dyv:()=>Zs,GPZ:()=>Kn,Sk5:()=>Vn,bEH:()=>Ir,n8j:()=>os,T9B:()=>r,jkA:()=>i,rLf:()=>ls,WH:()=>Or,m4Y:()=>li,UMr:()=>Lr,w7C:()=>wa,zt:()=>Ba,Ltv:()=>Ia,UAC:()=>wi,DCK:()=>no,TUC:()=>Oi,Agd:()=>Ci,t6C:()=>yi,wXd:()=>xi,ABi:()=>Ei,Ui6:()=>Wi,rGn:()=>Di,ucG:()=>bi,YPH:()=>_i,Mol:()=>Li,PGu:()=>Ti,GuW:()=>Mi,hkb:()=>sr});var a=1,s=2,l=3,c=4,h=1e-6;function u(t){return"translate("+t+",0)"}function d(t){return"translate(0,"+t+")"}function p(t){return e=>+t(e)}function f(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),n=>+t(n)+e}function g(){return!this.__axis}function m(t,e){var n=[],r=null,i=null,m=6,A=6,y=3,b="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,x=t===a||t===c?-1:1,v=t===c||t===s?"x":"y",C=t===a||t===l?u:d;function k(u){var d=null==r?e.ticks?e.ticks.apply(e,n):e.domain():r,k=null==i?e.tickFormat?e.tickFormat.apply(e,n):o:i,w=Math.max(m,0)+y,B=e.range(),I=+B[0]+b,S=+B[B.length-1]+b,_=(e.bandwidth?f:p)(e.copy(),b),E=u.selection?u.selection():u,T=E.selectAll(".domain").data([null]),M=E.selectAll(".tick").data(d,e).order(),L=M.exit(),O=M.enter().append("g").attr("class","tick"),D=M.select("line"),P=M.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(O),D=D.merge(O.append("line").attr("stroke","currentColor").attr(v+"2",x*m)),P=P.merge(O.append("text").attr("fill","currentColor").attr(v,x*w).attr("dy",t===a?"0em":t===l?"0.71em":"0.32em")),u!==E&&(T=T.transition(u),M=M.transition(u),D=D.transition(u),P=P.transition(u),L=L.transition(u).attr("opacity",h).attr("transform",function(t){return isFinite(t=_(t))?C(t+b):this.getAttribute("transform")}),O.attr("opacity",h).attr("transform",function(t){var e=this.parentNode.__axis;return C((e&&isFinite(e=e(t))?e:_(t))+b)})),L.remove(),T.attr("d",t===c||t===s?A?"M"+x*A+","+I+"H"+b+"V"+S+"H"+x*A:"M"+b+","+I+"V"+S:A?"M"+I+","+x*A+"V"+b+"H"+S+"V"+x*A:"M"+I+","+b+"H"+S),M.attr("opacity",1).attr("transform",function(t){return C(_(t)+b)}),D.attr(v+"2",x*m),P.attr(v,x*w).text(k),E.filter(g).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===s?"start":t===c?"end":"middle"),E.each(function(){this.__axis=_})}return k.scale=function(t){return arguments.length?(e=t,k):e},k.ticks=function(){return n=Array.from(arguments),k},k.tickArguments=function(t){return arguments.length?(n=null==t?[]:Array.from(t),k):n.slice()},k.tickValues=function(t){return arguments.length?(r=null==t?null:Array.from(t),k):r&&r.slice()},k.tickFormat=function(t){return arguments.length?(i=t,k):i},k.tickSize=function(t){return arguments.length?(m=A=+t,k):m},k.tickSizeInner=function(t){return arguments.length?(m=+t,k):m},k.tickSizeOuter=function(t){return arguments.length?(A=+t,k):A},k.tickPadding=function(t){return arguments.length?(y=+t,k):y},k.offset=function(t){return arguments.length?(b=+t,k):b},k}function A(t){return m(a,t)}function y(t){return m(l,t)}function b(){}function x(t){return null==t?b:function(){return this.querySelector(t)}}function v(){return[]}function C(t){return null==t?v:function(){return this.querySelectorAll(t)}}function k(t){return function(){return this.matches(t)}}function w(t){return function(e){return e.matches(t)}}var B=Array.prototype.find;function I(){return this.firstElementChild}var S=Array.prototype.filter;function _(){return Array.from(this.children)}function E(t){return new Array(t.length)}function T(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function M(t,e,n,r,i,o){for(var a,s=0,l=e.length,c=o.length;s<c;++s)(a=e[s])?(a.__data__=o[s],r[s]=a):n[s]=new T(t,o[s]);for(;s<l;++s)(a=e[s])&&(i[s]=a)}function L(t,e,n,r,i,o,a){var s,l,c,h=new Map,u=e.length,d=o.length,p=new Array(u);for(s=0;s<u;++s)(l=e[s])&&(p[s]=c=a.call(l,l.__data__,s,e)+"",h.has(c)?i[s]=l:h.set(c,l));for(s=0;s<d;++s)c=a.call(t,o[s],s,o)+"",(l=h.get(c))?(r[s]=l,l.__data__=o[s],h.delete(c)):n[s]=new T(t,o[s]);for(s=0;s<u;++s)(l=e[s])&&h.get(p[s])===l&&(i[s]=l)}function O(t){return t.__data__}function D(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function P(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}T.prototype={constructor:T,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var F="http://www.w3.org/1999/xhtml";const j={svg:"http://www.w3.org/2000/svg",xhtml:F,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function z(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),j.hasOwnProperty(e)?{space:j[e],local:t}:t}function $(t){return function(){this.removeAttribute(t)}}function R(t){return function(){this.removeAttributeNS(t.space,t.local)}}function N(t,e){return function(){this.setAttribute(t,e)}}function q(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function W(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function K(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function U(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function H(t){return function(){this.style.removeProperty(t)}}function G(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Y(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function V(t,e){return t.style.getPropertyValue(e)||U(t).getComputedStyle(t,null).getPropertyValue(e)}function Q(t){return function(){delete this[t]}}function X(t,e){return function(){this[t]=e}}function Z(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function J(t){return t.trim().split(/^|\s+/)}function tt(t){return t.classList||new et(t)}function et(t){this._node=t,this._names=J(t.getAttribute("class")||"")}function nt(t,e){for(var n=tt(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function rt(t,e){for(var n=tt(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function it(t){return function(){nt(this,t)}}function ot(t){return function(){rt(this,t)}}function at(t,e){return function(){(e.apply(this,arguments)?nt:rt)(this,t)}}function st(){this.textContent=""}function lt(t){return function(){this.textContent=t}}function ct(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function ht(){this.innerHTML=""}function ut(t){return function(){this.innerHTML=t}}function dt(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function pt(){this.nextSibling&&this.parentNode.appendChild(this)}function ft(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gt(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===F&&e.documentElement.namespaceURI===F?e.createElement(t):e.createElementNS(n,t)}}function mt(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function At(t){var e=z(t);return(e.local?mt:gt)(e)}function yt(){return null}function bt(){var t=this.parentNode;t&&t.removeChild(this)}function xt(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ct(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,o=e.length;r<o;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.options);++i?e.length=i:delete this.__on}}}function kt(t,e,n){return function(){var r,i=this.__on,o=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(i)for(var a=0,s=i.length;a<s;++a)if((r=i[a]).type===t.type&&r.name===t.name)return this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=o,r.options=n),void(r.value=e);this.addEventListener(t.type,o,n),r={type:t.type,name:t.name,value:e,listener:o,options:n},i?i.push(r):this.__on=[r]}}function wt(t,e,n){var r=U(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function Bt(t,e){return function(){return wt(this,t,e)}}function It(t,e){return function(){return wt(this,t,e.apply(this,arguments))}}et.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var St=[null];function _t(t,e){this._groups=t,this._parents=e}function Et(){return new _t([[document.documentElement]],St)}_t.prototype=Et.prototype={constructor:_t,select:function(t){"function"!=typeof t&&(t=x(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a,s=e[i],l=s.length,c=r[i]=new Array(l),h=0;h<l;++h)(o=s[h])&&(a=t.call(o,o.__data__,h,s))&&("__data__"in o&&(a.__data__=o.__data__),c[h]=a);return new _t(r,this._parents)},selectAll:function(t){t="function"==typeof t?function(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}(t):C(t);for(var e=this._groups,n=e.length,r=[],i=[],o=0;o<n;++o)for(var a,s=e[o],l=s.length,c=0;c<l;++c)(a=s[c])&&(r.push(t.call(a,a.__data__,c,s)),i.push(a));return new _t(r,i)},selectChild:function(t){return this.select(null==t?I:function(t){return function(){return B.call(this.children,t)}}("function"==typeof t?t:w(t)))},selectChildren:function(t){return this.selectAll(null==t?_:function(t){return function(){return S.call(this.children,t)}}("function"==typeof t?t:w(t)))},filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new _t(r,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,O);var n,r=e?L:M,i=this._parents,o=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var a=o.length,s=new Array(a),l=new Array(a),c=new Array(a),h=0;h<a;++h){var u=i[h],d=o[h],p=d.length,f=D(t.call(u,u&&u.__data__,h,i)),g=f.length,m=l[h]=new Array(g),A=s[h]=new Array(g);r(u,d,m,A,c[h]=new Array(p),f,e);for(var y,b,x=0,v=0;x<g;++x)if(y=m[x]){for(x>=v&&(v=x+1);!(b=A[v])&&++v<g;);y._next=b||null}}return(s=new _t(s,i))._enter=l,s._exit=c,s},enter:function(){return new _t(this._enter||this._groups.map(E),this._parents)},exit:function(){return new _t(this._exit||this._groups.map(E),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,o=this.exit();return"function"==typeof t?(r=t(r))&&(r=r.selection()):r=r.append(t+""),null!=e&&(i=e(i))&&(i=i.selection()),null==n?o.remove():n(o),r&&i?r.merge(i).order():i},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,o=r.length,a=Math.min(i,o),s=new Array(i),l=0;l<a;++l)for(var c,h=n[l],u=r[l],d=h.length,p=s[l]=new Array(d),f=0;f<d;++f)(c=h[f]||u[f])&&(p[f]=c);for(;l<i;++l)s[l]=n[l];return new _t(s,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=P);for(var n=this._groups,r=n.length,i=new Array(r),o=0;o<r;++o){for(var a,s=n[o],l=s.length,c=i[o]=new Array(l),h=0;h<l;++h)(a=s[h])&&(c[h]=a);c.sort(e)}return new _t(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,o=e[n],a=0,s=o.length;a<s;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,e){var n=z(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?R:$:"function"==typeof e?n.local?K:W:n.local?q:N)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?H:"function"==typeof e?Y:G)(t,e,null==n?"":n)):V(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?Q:"function"==typeof e?Z:X)(t,e)):this.node()[t]},classed:function(t,e){var n=J(t+"");if(arguments.length<2){for(var r=tt(this.node()),i=-1,o=n.length;++i<o;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?at:e?it:ot)(n,e))},text:function(t){return arguments.length?this.each(null==t?st:("function"==typeof t?ct:lt)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?ht:("function"==typeof t?dt:ut)(t)):this.node().innerHTML},raise:function(){return this.each(pt)},lower:function(){return this.each(ft)},append:function(t){var e="function"==typeof t?t:At(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})},insert:function(t,e){var n="function"==typeof t?t:At(t),r=null==e?yt:"function"==typeof e?e:x(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(bt)},clone:function(t){return this.select(t?vt:xt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}})}(t+""),a=o.length;if(!(arguments.length<2)){for(s=e?kt:Ct,r=0;r<a;++r)this.each(s(o[r],e,n));return this}var s=this.node().__on;if(s)for(var l,c=0,h=s.length;c<h;++c)for(r=0,l=s[c];r<a;++r)if((i=o[r]).type===l.type&&i.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?It:Bt)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r,i=t[e],o=0,a=i.length;o<a;++o)(r=i[o])&&(yield r)}};const Tt=Et;var Mt={value:()=>{}};function Lt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new Ot(r)}function Ot(t){this._=t}function Dt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Pt(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Mt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}Ot.prototype=Lt.prototype={constructor:Ot,on:function(t,e){var n,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var e="",n=t.indexOf(".");if(n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:e}})),a=-1,s=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=o[a]).type)i[n]=Pt(i[n],t.name,e);else if(null==e)for(n in i)i[n]=Pt(i[n],t.name,null);return this}for(;++a<s;)if((n=(t=o[a]).type)&&(n=Dt(i[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Ot(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),o=0;o<n;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,n=(r=this._[t]).length;o<n;++o)r[o].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(e,n)}};const Ft=Lt;var jt,zt,$t=0,Rt=0,Nt=0,qt=0,Wt=0,Kt=0,Ut="object"==typeof performance&&performance.now?performance:Date,Ht="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Gt(){return Wt||(Ht(Yt),Wt=Ut.now()+Kt)}function Yt(){Wt=0}function Vt(){this._call=this._time=this._next=null}function Qt(t,e,n){var r=new Vt;return r.restart(t,e,n),r}function Xt(){Wt=(qt=Ut.now())+Kt,$t=Rt=0;try{!function(){Gt(),++$t;for(var t,e=jt;e;)(t=Wt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$t}()}finally{$t=0,function(){for(var t,e,n=jt,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:jt=e);zt=t,Jt(r)}(),Wt=0}}function Zt(){var t=Ut.now(),e=t-qt;e>1e3&&(Kt-=e,qt=t)}function Jt(t){$t||(Rt&&(Rt=clearTimeout(Rt)),t-Wt>24?(t<1/0&&(Rt=setTimeout(Xt,t-Ut.now()-Kt)),Nt&&(Nt=clearInterval(Nt))):(Nt||(qt=Ut.now(),Nt=setInterval(Zt,1e3)),$t=1,Ht(Xt)))}function te(t,e,n){var r=new Vt;return e=null==e?0:+e,r.restart(n=>{r.stop(),t(n+e)},e,n),r}Vt.prototype=Qt.prototype={constructor:Vt,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?Gt():+n)+(null==e?0:+e),this._next||zt===this||(zt?zt._next=this:jt=this,zt=this),this._call=t,this._time=n,Jt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Jt())}};var ee=Ft("start","end","cancel","interrupt"),ne=[];function re(t,e,n,r,i,o){var a=t.__transition;if(a){if(n in a)return}else t.__transition={};!function(t,e,n){var r,i=t.__transition;function o(l){var c,h,u,d;if(1!==n.state)return s();for(c in i)if((d=i[c]).name===n.name){if(3===d.state)return te(o);4===d.state?(d.state=6,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete i[c]):+c<e&&(d.state=6,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete i[c])}if(te(function(){3===n.state&&(n.state=4,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=2,n.on.call("start",t,t.__data__,n.index,n.group),2===n.state){for(n.state=3,r=new Array(u=n.tween.length),c=0,h=-1;c<u;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(r[++h]=d);r.length=h+1}}function a(e){for(var i=e<n.duration?n.ease.call(null,e/n.duration):(n.timer.restart(s),n.state=5,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);5===n.state&&(n.on.call("end",t,t.__data__,n.index,n.group),s())}function s(){for(var r in n.state=6,n.timer.stop(),delete i[e],i)return;delete t.__transition}i[e]=n,n.timer=Qt(function(t){n.state=1,n.timer.restart(o,n.delay,n.time),n.delay<=t&&o(t-n.delay)},0,n.time)}(t,n,{name:e,index:r,group:i,on:ee,tween:ne,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:0})}function ie(t,e){var n=ae(t,e);if(n.state>0)throw new Error("too late; already scheduled");return n}function oe(t,e){var n=ae(t,e);if(n.state>3)throw new Error("too late; already running");return n}function ae(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function se(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var le,ce=180/Math.PI,he={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ue(t,e,n,r,i,o){var a,s,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(e,t)*ce,skewX:Math.atan(l)*ce,scaleX:a,scaleY:s}}function de(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var s=[],l=[];return o=t(o),a=t(a),function(t,r,i,o,a,s){if(t!==i||r!==o){var l=a.push("translate(",null,e,null,n);s.push({i:l-4,x:se(t,i)},{i:l-2,x:se(r,o)})}else(i||o)&&a.push("translate("+i+e+o+n)}(o.translateX,o.translateY,a.translateX,a.translateY,s,l),function(t,e,n,o){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),o.push({i:n.push(i(n)+"rotate(",null,r)-2,x:se(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}(o.rotate,a.rotate,s,l),function(t,e,n,o){t!==e?o.push({i:n.push(i(n)+"skewX(",null,r)-2,x:se(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}(o.skewX,a.skewX,s,l),function(t,e,n,r,o,a){if(t!==n||e!==r){var s=o.push(i(o)+"scale(",null,",",null,")");a.push({i:s-4,x:se(t,n)},{i:s-2,x:se(e,r)})}else 1===n&&1===r||o.push(i(o)+"scale("+n+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,s,l),o=a=null,function(t){for(var e,n=-1,r=l.length;++n<r;)s[(e=l[n]).i]=e.x(t);return s.join("")}}}var pe=de(function(t){const e=new("function"==typeof DOMMatrix?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?he:ue(e.a,e.b,e.c,e.d,e.e,e.f)},"px, ","px)","deg)"),fe=de(function(t){return null==t?he:(le||(le=document.createElementNS("http://www.w3.org/2000/svg","g")),le.setAttribute("transform",t),(t=le.transform.baseVal.consolidate())?ue((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):he)},", ",")",")");function ge(t,e){var n,r;return function(){var i=oe(this,t),o=i.tween;if(o!==n)for(var a=0,s=(r=n=o).length;a<s;++a)if(r[a].name===e){(r=r.slice()).splice(a,1);break}i.tween=r}}function me(t,e,n){var r,i;if("function"!=typeof n)throw new Error;return function(){var o=oe(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var s={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=s;break}l===c&&i.push(s)}o.tween=i}}function Ae(t,e,n){var r=t._id;return t.each(function(){var t=oe(this,r);(t.value||(t.value={}))[e]=n.apply(this,arguments)}),function(t){return ae(t,r).value[e]}}function ye(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function be(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function xe(){}var ve=.7,Ce=1/ve,ke="\\s*([+-]?\\d+)\\s*",we="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Be="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ie=/^#([0-9a-f]{3,8})$/,Se=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),_e=new RegExp(`^rgb\\(${Be},${Be},${Be}\\)$`),Ee=new RegExp(`^rgba\\(${ke},${ke},${ke},${we}\\)$`),Te=new RegExp(`^rgba\\(${Be},${Be},${Be},${we}\\)$`),Me=new RegExp(`^hsl\\(${we},${Be},${Be}\\)$`),Le=new RegExp(`^hsla\\(${we},${Be},${Be},${we}\\)$`),Oe={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function De(){return this.rgb().formatHex()}function Pe(){return this.rgb().formatRgb()}function Fe(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Ie.exec(t))?(n=e[1].length,e=parseInt(e[1],16),6===n?je(e):3===n?new Ne(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1):8===n?ze(e>>24&255,e>>16&255,e>>8&255,(255&e)/255):4===n?ze(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|240&e,((15&e)<<4|15&e)/255):null):(e=Se.exec(t))?new Ne(e[1],e[2],e[3],1):(e=_e.exec(t))?new Ne(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=Ee.exec(t))?ze(e[1],e[2],e[3],e[4]):(e=Te.exec(t))?ze(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=Me.exec(t))?Ge(e[1],e[2]/100,e[3]/100,1):(e=Le.exec(t))?Ge(e[1],e[2]/100,e[3]/100,e[4]):Oe.hasOwnProperty(t)?je(Oe[t]):"transparent"===t?new Ne(NaN,NaN,NaN,0):null}function je(t){return new Ne(t>>16&255,t>>8&255,255&t,1)}function ze(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ne(t,e,n,r)}function $e(t){return t instanceof xe||(t=Fe(t)),t?new Ne((t=t.rgb()).r,t.g,t.b,t.opacity):new Ne}function Re(t,e,n,r){return 1===arguments.length?$e(t):new Ne(t,e,n,null==r?1:r)}function Ne(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function qe(){return`#${He(this.r)}${He(this.g)}${He(this.b)}`}function We(){const t=Ke(this.opacity);return`${1===t?"rgb(":"rgba("}${Ue(this.r)}, ${Ue(this.g)}, ${Ue(this.b)}${1===t?")":`, ${t})`}`}function Ke(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Ue(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function He(t){return((t=Ue(t))<16?"0":"")+t.toString(16)}function Ge(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Ve(t,e,n,r)}function Ye(t){if(t instanceof Ve)return new Ve(t.h,t.s,t.l,t.opacity);if(t instanceof xe||(t=Fe(t)),!t)return new Ve;if(t instanceof Ve)return t;var e=(t=t.rgb()).r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),o=Math.max(e,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=e===o?(n-r)/s+6*(n<r):n===o?(r-e)/s+2:(e-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new Ve(a,s,l,t.opacity)}function Ve(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function Qe(t){return(t=(t||0)%360)<0?t+360:t}function Xe(t){return Math.max(0,Math.min(1,t||0))}function Ze(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function Je(t,e,n,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*e+(4-6*o+3*a)*n+(1+3*t+3*o-3*a)*r+a*i)/6}ye(xe,Fe,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:De,formatHex:De,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return Ye(this).formatHsl()},formatRgb:Pe,toString:Pe}),ye(Ne,Re,be(xe,{brighter(t){return t=null==t?Ce:Math.pow(Ce,t),new Ne(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=null==t?ve:Math.pow(ve,t),new Ne(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ne(Ue(this.r),Ue(this.g),Ue(this.b),Ke(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:qe,formatHex:qe,formatHex8:function(){return`#${He(this.r)}${He(this.g)}${He(this.b)}${He(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:We,toString:We})),ye(Ve,function(t,e,n,r){return 1===arguments.length?Ye(t):new Ve(t,e,n,null==r?1:r)},be(xe,{brighter(t){return t=null==t?Ce:Math.pow(Ce,t),new Ve(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=null==t?ve:Math.pow(ve,t),new Ve(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ne(Ze(t>=240?t-240:t+120,i,r),Ze(t,i,r),Ze(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Ve(Qe(this.h),Xe(this.s),Xe(this.l),Ke(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ke(this.opacity);return`${1===t?"hsl(":"hsla("}${Qe(this.h)}, ${100*Xe(this.s)}%, ${100*Xe(this.l)}%${1===t?")":`, ${t})`}`}}));const tn=t=>()=>t;function en(t,e){return function(n){return t+n*e}}function nn(t,e){var n=e-t;return n?en(t,n):tn(isNaN(t)?e:t)}const rn=function t(e){var n=function(t){return 1===(t=+t)?nn:function(e,n){return n-e?function(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}(e,n,t):tn(isNaN(e)?n:e)}}(e);function r(t,e){var r=n((t=Re(t)).r,(e=Re(e)).r),i=n(t.g,e.g),o=n(t.b,e.b),a=nn(t.opacity,e.opacity);return function(e){return t.r=r(e),t.g=i(e),t.b=o(e),t.opacity=a(e),t+""}}return r.gamma=t,r}(1);function on(t){return function(e){var n,r,i=e.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=Re(e[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=t(o),a=t(a),s=t(s),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=s(t),r+""}}}on(function(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,s=r<e-1?t[r+2]:2*o-i;return Je((n-r/e)*e,a,i,o,s)}}),on(function(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],o=t[r%e],a=t[(r+1)%e],s=t[(r+2)%e];return Je((n-r/e)*e,i,o,a,s)}});var an=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,sn=new RegExp(an.source,"g");function ln(t,e){var n,r,i,o=an.lastIndex=sn.lastIndex=0,a=-1,s=[],l=[];for(t+="",e+="";(n=an.exec(t))&&(r=sn.exec(e));)(i=r.index)>o&&(i=e.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:se(n,r)})),o=sn.lastIndex;return o<e.length&&(i=e.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(t){return function(e){return t(e)+""}}(l[0].x):function(t){return function(){return t}}(e):(e=l.length,function(t){for(var n,r=0;r<e;++r)s[(n=l[r]).i]=n.x(t);return s.join("")})}function cn(t,e){var n;return("number"==typeof e?se:e instanceof Fe?rn:(n=Fe(e))?(e=n,rn):ln)(t,e)}function hn(t){return function(){this.removeAttribute(t)}}function un(t){return function(){this.removeAttributeNS(t.space,t.local)}}function dn(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=e(r=a,n)}}function pn(t,e,n){var r,i,o=n+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=e(r=a,n)}}function fn(t,e,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttribute(t))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttribute(t)}}function gn(t,e,n){var r,i,o;return function(){var a,s,l=n(this);if(null!=l)return(a=this.getAttributeNS(t.space,t.local))===(s=l+"")?null:a===r&&s===i?o:(i=s,o=e(r=a,l));this.removeAttributeNS(t.space,t.local)}}function mn(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}(t,i)),n}return i._value=e,i}function An(t,e){var n,r;function i(){var i=e.apply(this,arguments);return i!==r&&(n=(r=i)&&function(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}(t,i)),n}return i._value=e,i}function yn(t,e){return function(){ie(this,t).delay=+e.apply(this,arguments)}}function bn(t,e){return e=+e,function(){ie(this,t).delay=e}}function xn(t,e){return function(){oe(this,t).duration=+e.apply(this,arguments)}}function vn(t,e){return e=+e,function(){oe(this,t).duration=e}}var Cn=Tt.prototype.constructor;function kn(t){return function(){this.style.removeProperty(t)}}var wn=0;function Bn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function In(){return++wn}var Sn=Tt.prototype;Bn.prototype=function(t){return Tt().transition(t)}.prototype={constructor:Bn,select:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=x(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var s,l,c=r[a],h=c.length,u=o[a]=new Array(h),d=0;d<h;++d)(s=c[d])&&(l=t.call(s,s.__data__,d,c))&&("__data__"in s&&(l.__data__=s.__data__),u[d]=l,re(u[d],e,n,d,u,ae(s,n)));return new Bn(o,this._parents,e,n)},selectAll:function(t){var e=this._name,n=this._id;"function"!=typeof t&&(t=C(t));for(var r=this._groups,i=r.length,o=[],a=[],s=0;s<i;++s)for(var l,c=r[s],h=c.length,u=0;u<h;++u)if(l=c[u]){for(var d,p=t.call(l,l.__data__,u,c),f=ae(l,n),g=0,m=p.length;g<m;++g)(d=p[g])&&re(d,e,n,g,p,f);o.push(p),a.push(l)}return new Bn(o,a,e,n)},selectChild:Sn.selectChild,selectChildren:Sn.selectChildren,filter:function(t){"function"!=typeof t&&(t=k(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var o,a=e[i],s=a.length,l=r[i]=[],c=0;c<s;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&l.push(o);return new Bn(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,o=Math.min(r,i),a=new Array(r),s=0;s<o;++s)for(var l,c=e[s],h=n[s],u=c.length,d=a[s]=new Array(u),p=0;p<u;++p)(l=c[p]||h[p])&&(d[p]=l);for(;s<r;++s)a[s]=e[s];return new Bn(a,this._parents,this._name,this._id)},selection:function(){return new Cn(this._groups,this._parents)},transition:function(){for(var t=this._name,e=this._id,n=In(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)if(a=s[c]){var h=ae(a,e);re(a,t,n,c,s,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Bn(r,this._parents,t,n)},call:Sn.call,nodes:Sn.nodes,node:Sn.node,size:Sn.size,empty:Sn.empty,each:Sn.each,on:function(t,e){var n=this._id;return arguments.length<2?ae(this.node(),n).on.on(t):this.each(function(t,e,n){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var e=t.indexOf(".");return e>=0&&(t=t.slice(0,e)),!t||"start"===t})}(e)?ie:oe;return function(){var a=o(this,t),s=a.on;s!==r&&(i=(r=s).copy()).on(e,n),a.on=i}}(n,t,e))},attr:function(t,e){var n=z(t),r="transform"===n?fe:cn;return this.attrTween(t,"function"==typeof e?(n.local?gn:fn)(n,r,Ae(this,"attr."+t,e)):null==e?(n.local?un:hn)(n):(n.local?pn:dn)(n,r,e))},attrTween:function(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(null==e)return this.tween(n,null);if("function"!=typeof e)throw new Error;var r=z(t);return this.tween(n,(r.local?mn:An)(r,e))},style:function(t,e,n){var r="transform"==(t+="")?pe:cn;return null==e?this.styleTween(t,function(t,e){var n,r,i;return function(){var o=V(this,t),a=(this.style.removeProperty(t),V(this,t));return o===a?null:o===n&&a===r?i:i=e(n=o,r=a)}}(t,r)).on("end.style."+t,kn(t)):"function"==typeof e?this.styleTween(t,function(t,e,n){var r,i,o;return function(){var a=V(this,t),s=n(this),l=s+"";return null==s&&(this.style.removeProperty(t),l=s=V(this,t)),a===l?null:a===r&&l===i?o:(i=l,o=e(r=a,s))}}(t,r,Ae(this,"style."+t,e))).each(function(t,e){var n,r,i,o,a="style."+e,s="end."+a;return function(){var l=oe(this,t),c=l.on,h=null==l.value[a]?o||(o=kn(e)):void 0;c===n&&i===h||(r=(n=c).copy()).on(s,i=h),l.on=r}}(this._id,t)):this.styleTween(t,function(t,e,n){var r,i,o=n+"";return function(){var a=V(this,t);return a===o?null:a===r?i:i=e(r=a,n)}}(t,r,e),n).on("end.style."+t,null)},styleTween:function(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==e)return this.tween(r,null);if("function"!=typeof e)throw new Error;return this.tween(r,function(t,e,n){var r,i;function o(){var o=e.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}(t,o,n)),r}return o._value=e,o}(t,e,null==n?"":n))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var e=t(this);this.textContent=null==e?"":e}}(Ae(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},textTween:function(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(null==t)return this.tween(e,null);if("function"!=typeof t)throw new Error;return this.tween(e,function(t){var e,n;function r(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&function(t){return function(e){this.textContent=t.call(this,e)}}(r)),e}return r._value=t,r}(t))},remove:function(){return this.on("end.remove",function(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}(this._id))},tween:function(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r,i=ae(this.node(),n).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==e?ge:me)(n,t,e))},delay:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?yn:bn)(e,t)):ae(this.node(),e).delay},duration:function(t){var e=this._id;return arguments.length?this.each(("function"==typeof t?xn:vn)(e,t)):ae(this.node(),e).duration},ease:function(t){var e=this._id;return arguments.length?this.each(function(t,e){if("function"!=typeof e)throw new Error;return function(){oe(this,t).ease=e}}(e,t)):ae(this.node(),e).ease},easeVarying:function(t){if("function"!=typeof t)throw new Error;return this.each(function(t,e){return function(){var n=e.apply(this,arguments);if("function"!=typeof n)throw new Error;oe(this,t).ease=n}}(this._id,t))},end:function(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(o,a){var s={value:a},l={value:function(){0===--i&&o()}};n.each(function(){var n=oe(this,r),i=n.on;i!==t&&((e=(t=i).copy())._.cancel.push(s),e._.interrupt.push(s),e._.end.push(l)),n.on=e}),0===i&&o()})},[Symbol.iterator]:Sn[Symbol.iterator]};var _n={time:null,delay:0,duration:250,ease:function(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}};function En(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}Tt.prototype.interrupt=function(t){return this.each(function(){!function(t,e){var n,r,i,o=t.__transition,a=!0;if(o){for(i in e=null==e?null:e+"",o)(n=o[i]).name===e?(r=n.state>2&&n.state<5,n.state=6,n.timer.stop(),n.on.call(r?"interrupt":"cancel",t,t.__data__,n.index,n.group),delete o[i]):a=!1;a&&delete t.__transition}}(this,t)})},Tt.prototype.transition=function(t){var e,n;t instanceof Bn?(e=t._id,t=t._name):(e=In(),(n=_n).time=Gt(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,s=r[o],l=s.length,c=0;c<l;++c)(a=s[c])&&re(a,t,e,c,s,n||En(a,e));return new Bn(r,this._parents,t,e)};const{abs:Tn,max:Mn,min:Ln}=Math;function On(t){return{type:t}}function Dn(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Pn(t){return(t=Dn(Math.abs(t)))?t[1]:NaN}["w","e"].map(On),["n","s"].map(On),["n","w","e","s","nw","ne","sw","se"].map(On);var Fn,jn=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zn(t){if(!(e=jn.exec(t)))throw new Error("invalid format: "+t);var e;return new $n({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function $n(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}function Rn(t,e){var n=Dn(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}zn.prototype=$n.prototype,$n.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Nn={"%":(t,e)=>(100*t).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:function(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)},e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Rn(100*t,e),r:Rn,s:function(t,e){var n=Dn(t,e);if(!n)return t+"";var r=n[0],i=n[1],o=i-(Fn=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Dn(t,Math.max(0,e+o-1))[0]},X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function qn(t){return t}var Wn,Kn,Un,Hn=Array.prototype.map,Gn=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yn(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Vn(t,e){t instanceof Map?(t=[void 0,t],void 0===e&&(e=Xn)):void 0===e&&(e=Qn);for(var n,r,i,o,a,s=new tr(t),l=[s];n=l.pop();)if((i=e(n.data))&&(a=(i=Array.from(i)).length))for(n.children=i,o=a-1;o>=0;--o)l.push(r=i[o]=new tr(i[o])),r.parent=n,r.depth=n.depth+1;return s.eachBefore(Jn)}function Qn(t){return t.children}function Xn(t){return Array.isArray(t)?t[1]:null}function Zn(t){void 0!==t.data.value&&(t.value=t.data.value),t.data=t.data.data}function Jn(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function tr(t){this.data=t,this.depth=this.height=0,this.parent=null}function er(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function nr(t,e,n,r,i){for(var o,a=t.children,s=-1,l=a.length,c=t.value&&(r-e)/t.value;++s<l;)(o=a[s]).y0=n,o.y1=i,o.x0=e,o.x1=e+=o.value*c}function rr(t,e,n,r,i){for(var o,a=t.children,s=-1,l=a.length,c=t.value&&(i-n)/t.value;++s<l;)(o=a[s]).x0=e,o.x1=r,o.y0=n,o.y1=n+=o.value*c}Wn=function(t){var e,n,r=void 0===t.grouping||void 0===t.thousands?qn:(e=Hn.call(t.grouping,Number),n=t.thousands+"",function(t,r){for(var i=t.length,o=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(t.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[a=(a+1)%e.length];return o.reverse().join(n)}),i=void 0===t.currency?"":t.currency[0]+"",o=void 0===t.currency?"":t.currency[1]+"",a=void 0===t.decimal?".":t.decimal+"",s=void 0===t.numerals?qn:function(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}(Hn.call(t.numerals,String)),l=void 0===t.percent?"%":t.percent+"",c=void 0===t.minus?"":t.minus+"",h=void 0===t.nan?"NaN":t.nan+"";function u(t){var e=(t=zn(t)).fill,n=t.align,u=t.sign,d=t.symbol,p=t.zero,f=t.width,g=t.comma,m=t.precision,A=t.trim,y=t.type;"n"===y?(g=!0,y="g"):Nn[y]||(void 0===m&&(m=12),A=!0,y="g"),(p||"0"===e&&"="===n)&&(p=!0,e="0",n="=");var b="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?o:/[%p]/.test(y)?l:"",v=Nn[y],C=/[defgprs%]/.test(y);function k(t){var i,o,l,d=b,k=x;if("c"===y)k=v(t)+k,t="";else{var w=(t=+t)<0||1/t<0;if(t=isNaN(t)?h:v(Math.abs(t),m),A&&(t=function(t){t:for(var e,n=t.length,r=1,i=-1;r<n;++r)switch(t[r]){case".":i=e=r;break;case"0":0===i&&(i=r),e=r;break;default:if(!+t[r])break t;i>0&&(i=0)}return i>0?t.slice(0,i)+t.slice(e+1):t}(t)),w&&0===+t&&"+"!==u&&(w=!1),d=(w?"("===u?u:c:"-"===u||"("===u?"":u)+d,k=("s"===y?Gn[8+Fn/3]:"")+k+(w&&"("===u?")":""),C)for(i=-1,o=t.length;++i<o;)if(48>(l=t.charCodeAt(i))||l>57){k=(46===l?a+t.slice(i+1):t.slice(i))+k,t=t.slice(0,i);break}}g&&!p&&(t=r(t,1/0));var B=d.length+t.length+k.length,I=B<f?new Array(f-B+1).join(e):"";switch(g&&p&&(t=r(I+t,I.length?f-k.length:1/0),I=""),n){case"<":t=d+t+k+I;break;case"=":t=d+I+t+k;break;case"^":t=I.slice(0,B=I.length>>1)+d+t+k+I.slice(B);break;default:t=I+d+t+k}return s(t)}return m=void 0===m?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,m)):Math.max(0,Math.min(20,m)),k.toString=function(){return t+""},k}return{format:u,formatPrefix:function(t,e){var n=u(((t=zn(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(Pn(e)/3))),i=Math.pow(10,-r),o=Gn[8+r/3];return function(t){return n(i*t)+o}}}}({thousands:",",grouping:[3],currency:["$",""]}),Kn=Wn.format,Un=Wn.formatPrefix,tr.prototype=Vn.prototype={constructor:tr,count:function(){return this.eachAfter(Yn)},each:function(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this},eachAfter:function(t,e){for(var n,r,i,o=this,a=[o],s=[],l=-1;o=a.pop();)if(s.push(o),n=o.children)for(r=0,i=n.length;r<i;++r)a.push(n[r]);for(;o=s.pop();)t.call(e,o,++l,this);return this},eachBefore:function(t,e){for(var n,r,i=this,o=[i],a=-1;i=o.pop();)if(t.call(e,i,++a,this),n=i.children)for(r=n.length-1;r>=0;--r)o.push(n[r]);return this},find:function(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r},sum:function(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})},sort:function(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})},path:function(t){for(var e=this,n=function(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e},descendants:function(){return Array.from(this)},leaves:function(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t},links:function(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e},copy:function(){return Vn(this).eachBefore(Zn)},[Symbol.iterator]:function*(){var t,e,n,r,i=this,o=[i];do{for(t=o.reverse(),o=[];i=t.pop();)if(yield i,e=i.children)for(n=0,r=e.length;n<r;++n)o.push(e[n])}while(o.length)}};const ir=function t(e){function n(t,n,r,i,o){!function(t,e,n,r,i,o){for(var a,s,l,c,h,u,d,p,f,g,m,A=[],y=e.children,b=0,x=0,v=y.length,C=e.value;b<v;){l=i-n,c=o-r;do{h=y[x++].value}while(!h&&x<v);for(u=d=h,m=h*h*(g=Math.max(c/l,l/c)/(C*t)),f=Math.max(d/m,m/u);x<v;++x){if(h+=s=y[x].value,s<u&&(u=s),s>d&&(d=s),m=h*h*g,(p=Math.max(d/m,m/u))>f){h-=s;break}f=p}A.push(a={value:h,dice:l<c,children:y.slice(b,x)}),a.dice?nr(a,n,r,i,C?r+=c*h/C:o):rr(a,n,r,C?n+=l*h/C:i,o),C-=h,b=x}}(e,t,n,r,i,o)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}((1+Math.sqrt(5))/2);function or(){return 0}function ar(t){return function(){return t}}function sr(){var t=ir,e=!1,n=1,r=1,i=[0],o=or,a=or,s=or,l=or,c=or;function h(t){return t.x0=t.y0=0,t.x1=n,t.y1=r,t.eachBefore(u),i=[0],e&&t.eachBefore(er),t}function u(e){var n=i[e.depth],r=e.x0+n,h=e.y0+n,u=e.x1-n,d=e.y1-n;u<r&&(r=u=(r+u)/2),d<h&&(h=d=(h+d)/2),e.x0=r,e.y0=h,e.x1=u,e.y1=d,e.children&&(n=i[e.depth+1]=o(e)/2,r+=c(e)-n,h+=a(e)-n,(u-=s(e)-n)<r&&(r=u=(r+u)/2),(d-=l(e)-n)<h&&(h=d=(h+d)/2),t(e,r,h,u,d))}return h.round=function(t){return arguments.length?(e=!!t,h):e},h.size=function(t){return arguments.length?(n=+t[0],r=+t[1],h):[n,r]},h.tile=function(e){return arguments.length?(t=function(t){if("function"!=typeof t)throw new Error;return t}(e),h):t},h.padding=function(t){return arguments.length?h.paddingInner(t).paddingOuter(t):h.paddingInner()},h.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:ar(+t),h):o},h.paddingOuter=function(t){return arguments.length?h.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):h.paddingTop()},h.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:ar(+t),h):a},h.paddingRight=function(t){return arguments.length?(s="function"==typeof t?t:ar(+t),h):s},h.paddingBottom=function(t){return arguments.length?(l="function"==typeof t?t:ar(+t),h):l},h.paddingLeft=function(t){return arguments.length?(c="function"==typeof t?t:ar(+t),h):c},h}const lr=Math.PI/180,cr=180/Math.PI,hr=.96422,ur=.82521,dr=4/29,pr=6/29,fr=3*pr*pr,gr=pr*pr*pr;function mr(t){if(t instanceof Ar)return new Ar(t.l,t.a,t.b,t.opacity);if(t instanceof kr)return wr(t);t instanceof Ne||(t=$e(t));var e,n,r=vr(t.r),i=vr(t.g),o=vr(t.b),a=yr((.2225045*r+.7168786*i+.0606169*o)/1);return r===i&&i===o?e=n=a:(e=yr((.4360747*r+.3850649*i+.1430804*o)/hr),n=yr((.0139322*r+.0971045*i+.7141733*o)/ur)),new Ar(116*a-16,500*(e-a),200*(a-n),t.opacity)}function Ar(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function yr(t){return t>gr?Math.pow(t,1/3):t/fr+dr}function br(t){return t>pr?t*t*t:fr*(t-dr)}function xr(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function vr(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Cr(t,e,n,r){return 1===arguments.length?function(t){if(t instanceof kr)return new kr(t.h,t.c,t.l,t.opacity);if(t instanceof Ar||(t=mr(t)),0===t.a&&0===t.b)return new kr(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*cr;return new kr(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new kr(t,e,n,null==r?1:r)}function kr(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function wr(t){if(isNaN(t.h))return new Ar(t.l,0,0,t.opacity);var e=t.h*lr;return new Ar(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}function Br(t){return function(e,n){var r=t((e=Cr(e)).h,(n=Cr(n)).h),i=nn(e.c,n.c),o=nn(e.l,n.l),a=nn(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=o(t),e.opacity=a(t),e+""}}}ye(Ar,function(t,e,n,r){return 1===arguments.length?mr(t):new Ar(t,e,n,null==r?1:r)},be(xe,{brighter(t){return new Ar(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new Ar(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return new Ne(xr(3.1338561*(e=hr*br(e))-1.6168667*(t=1*br(t))-.4906146*(n=ur*br(n))),xr(-.9787684*e+1.9161415*t+.033454*n),xr(.0719453*e-.2289914*t+1.4052427*n),this.opacity)}})),ye(kr,Cr,be(xe,{brighter(t){return new kr(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new kr(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return wr(this).rgb()}}));const Ir=Br(function(t,e){var n=e-t;return n?en(t,n>180||n<-180?n-360*Math.round(n/360):n):tn(isNaN(t)?e:t)});function Sr(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}Br(nn);class _r extends Map{constructor(t,e=Tr){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),null!=t)for(const[e,n]of t)this.set(e,n)}get(t){return super.get(Er(this,t))}has(t){return super.has(Er(this,t))}set(t,e){return super.set(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}(this,t),e)}delete(t){return super.delete(function({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}(this,t))}}function Er({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Tr(t){return null!==t&&"object"==typeof t?t.valueOf():t}Set;const Mr=Symbol("implicit");function Lr(){var t=new _r,e=[],n=[],r=Mr;function i(i){let o=t.get(i);if(void 0===o){if(r!==Mr)return r;t.set(i,o=e.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return e.slice();e=[],t=new _r;for(const r of n)t.has(r)||t.set(r,e.push(r)-1);return i},i.range=function(t){return arguments.length?(n=Array.from(t),i):n.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return Lr(e,n).unknown(r)},Sr.apply(i,arguments),i}function Or(){var t,e,n=Lr().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,c=0,h=.5;function u(){var n=r().length,u=a<o,d=u?a:o,p=u?o:a;t=(p-d)/Math.max(1,n-l+2*c),s&&(t=Math.floor(t)),d+=(p-d-t*(n-l))*h,e=t*(1-l),s&&(d=Math.round(d),e=Math.round(e));var f=function(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),o=new Array(i);++r<i;)o[r]=t+r*n;return o}(n).map(function(e){return d+t*e});return i(u?f.reverse():f)}return delete n.unknown,n.domain=function(t){return arguments.length?(r(t),u()):r()},n.range=function(t){return arguments.length?([o,a]=t,o=+o,a=+a,u()):[o,a]},n.rangeRound=function(t){return[o,a]=t,o=+o,a=+a,s=!0,u()},n.bandwidth=function(){return e},n.step=function(){return t},n.round=function(t){return arguments.length?(s=!!t,u()):s},n.padding=function(t){return arguments.length?(l=Math.min(1,c=+t),u()):l},n.paddingInner=function(t){return arguments.length?(l=Math.min(1,t),u()):l},n.paddingOuter=function(t){return arguments.length?(c=+t,u()):c},n.align=function(t){return arguments.length?(h=Math.max(0,Math.min(1,t)),u()):h},n.copy=function(){return Or(r(),[o,a]).round(s).paddingInner(l).paddingOuter(c).align(h)},Sr.apply(u(),arguments)}const Dr=Math.sqrt(50),Pr=Math.sqrt(10),Fr=Math.sqrt(2);function jr(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=Dr?10:o>=Pr?5:o>=Fr?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(t*c),l=Math.round(e*c),s/c<t&&++s,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(t/c),l=Math.round(e/c),s*c<t&&++s,l*c>e&&--l),l<s&&.5<=n&&n<2?jr(t,e,2*n):[s,l,c]}function zr(t,e,n){return jr(t=+t,e=+e,n=+n)[2]}function $r(t,e,n){n=+n;const r=(e=+e)<(t=+t),i=r?zr(e,t,n):zr(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Rr(t,e){return null==t||null==e?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nr(t,e){return null==t||null==e?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qr(t){let e,n,r;function i(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<0?i=e+1:o=e}while(i<o)}return i}return 2!==t.length?(e=Rr,n=(e,n)=>Rr(t(e),n),r=(e,n)=>t(e)-n):(e=t===Rr||t===Nr?t:Wr,n=t,r=t),{left:i,center:function(t,e,n=0,o=t.length){const a=i(t,e,n,o-1);return a>n&&r(t[a-1],e)>-r(t[a],e)?a-1:a},right:function(t,r,i=0,o=t.length){if(i<o){if(0!==e(r,r))return o;do{const e=i+o>>>1;n(t[e],r)<=0?i=e+1:o=e}while(i<o)}return i}}}function Wr(){return 0}const Kr=qr(Rr),Ur=Kr.right,Hr=(Kr.left,qr(function(t){return null===t?NaN:+t}).center,Ur);function Gr(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=Xr(t[n],e[n]);for(;n<r;++n)a[n]=e[n];return function(t){for(n=0;n<i;++n)a[n]=o[n](t);return a}}function Yr(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Vr(t,e){var n,r={},i={};for(n in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)n in t?r[n]=Xr(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}function Qr(t,e){e||(e=[]);var n,r=t?Math.min(e.length,t.length):0,i=e.slice();return function(o){for(n=0;n<r;++n)i[n]=t[n]*(1-o)+e[n]*o;return i}}function Xr(t,e){var n,r,i=typeof e;return null==e||"boolean"===i?tn(e):("number"===i?se:"string"===i?(n=Fe(e))?(e=n,rn):ln:e instanceof Fe?rn:e instanceof Date?Yr:(r=e,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(e)?Gr:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Vr:se:Qr))(t,e)}function Zr(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function Jr(t){return+t}var ti=[0,1];function ei(t){return t}function ni(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:(n=isNaN(e)?NaN:.5,function(){return n});var n}function ri(t,e,n){var r=t[0],i=t[1],o=e[0],a=e[1];return i<r?(r=ni(i,r),o=n(a,o)):(r=ni(r,i),o=n(o,a)),function(t){return o(r(t))}}function ii(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),o=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=ni(t[a],t[a+1]),o[a]=n(e[a],e[a+1]);return function(e){var n=Hr(t,e,1,r)-1;return o[n](i[n](e))}}function oi(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ai(){return function(){var t,e,n,r,i,o,a=ti,s=ti,l=Xr,c=ei;function h(){var t,e,n,l=Math.min(a.length,s.length);return c!==ei&&(t=a[0],e=a[l-1],t>e&&(n=t,t=e,e=n),c=function(n){return Math.max(t,Math.min(e,n))}),r=l>2?ii:ri,i=o=null,u}function u(e){return null==e||isNaN(e=+e)?n:(i||(i=r(a.map(t),s,l)))(t(c(e)))}return u.invert=function(n){return c(e((o||(o=r(s,a.map(t),se)))(n)))},u.domain=function(t){return arguments.length?(a=Array.from(t,Jr),h()):a.slice()},u.range=function(t){return arguments.length?(s=Array.from(t),h()):s.slice()},u.rangeRound=function(t){return s=Array.from(t),l=Zr,h()},u.clamp=function(t){return arguments.length?(c=!!t||ei,h()):c!==ei},u.interpolate=function(t){return arguments.length?(l=t,h()):l},u.unknown=function(t){return arguments.length?(n=t,u):n},function(n,r){return t=n,e=r,h()}}()(ei,ei)}function si(t){var e=t.domain;return t.ticks=function(t){var n=e();return function(t,e,n){if(!((n=+n)>0))return[];if((t=+t)===(e=+e))return[t];const r=e<t,[i,o,a]=r?jr(e,t,n):jr(t,e,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let t=0;t<s;++t)l[t]=(o-t)/-a;else for(let t=0;t<s;++t)l[t]=(o-t)*a;else if(a<0)for(let t=0;t<s;++t)l[t]=(i+t)/-a;else for(let t=0;t<s;++t)l[t]=(i+t)*a;return l}(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){var r=e();return function(t,e,n,r){var i,o=$r(t,e,n);switch((r=zn(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(t),Math.abs(e));return null!=r.precision||isNaN(i=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Pn(e)/3)))-Pn(Math.abs(t)))}(o,a))||(r.precision=i),Un(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Pn(e)-Pn(t))+1}(o,Math.max(Math.abs(t),Math.abs(e))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(t){return Math.max(0,-Pn(Math.abs(t)))}(o))||(r.precision=i-2*("%"===r.type))}return Kn(r)}(r[0],r[r.length-1],null==t?10:t,n)},t.nice=function(n){null==n&&(n=10);var r,i,o=e(),a=0,s=o.length-1,l=o[a],c=o[s],h=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);h-- >0;){if((i=zr(l,c,n))===r)return o[a]=l,o[s]=c,e(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return t},t}function li(){var t=ai();return t.copy=function(){return oi(t,li())},Sr.apply(t,arguments),si(t)}const ci=1e3,hi=6e4,ui=36e5,di=864e5,pi=6048e5,fi=31536e6,gi=new Date,mi=new Date;function Ai(t,e,n,r){function i(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return i.floor=e=>(t(e=new Date(+e)),e),i.ceil=n=>(t(n=new Date(n-1)),e(n,1),t(n),n),i.round=t=>{const e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=(t,n)=>(e(t=new Date(+t),null==n?1:Math.floor(n)),t),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r&&o>0))return a;let s;do{a.push(s=new Date(+n)),e(n,o),t(n)}while(s<n&&n<r);return a},i.filter=n=>Ai(e=>{if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},(t,r)=>{if(t>=t)if(r<0)for(;++r<=0;)for(;e(t,-1),!n(t););else for(;--r>=0;)for(;e(t,1),!n(t););}),n&&(i.count=(e,r)=>(gi.setTime(+e),mi.setTime(+r),t(gi),t(mi),Math.floor(n(gi,mi))),i.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?e=>r(e)%t===0:e=>i.count(0,e)%t===0):i:null)),i}const yi=Ai(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);yi.every=t=>(t=Math.floor(t),isFinite(t)&&t>0?t>1?Ai(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):yi:null),yi.range;const bi=Ai(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*ci)},(t,e)=>(e-t)/ci,t=>t.getUTCSeconds()),xi=(bi.range,Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ci)},(t,e)=>{t.setTime(+t+e*hi)},(t,e)=>(e-t)/hi,t=>t.getMinutes())),vi=(xi.range,Ai(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*hi)},(t,e)=>(e-t)/hi,t=>t.getUTCMinutes())),Ci=(vi.range,Ai(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*ci-t.getMinutes()*hi)},(t,e)=>{t.setTime(+t+e*ui)},(t,e)=>(e-t)/ui,t=>t.getHours())),ki=(Ci.range,Ai(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*ui)},(t,e)=>(e-t)/ui,t=>t.getUTCHours())),wi=(ki.range,Ai(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*hi)/di,t=>t.getDate()-1)),Bi=(wi.range,Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/di,t=>t.getUTCDate()-1)),Ii=(Bi.range,Ai(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/di,t=>Math.floor(t/di)));function Si(t){return Ai(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(t,e)=>{t.setDate(t.getDate()+7*e)},(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*hi)/pi)}Ii.range;const _i=Si(0),Ei=Si(1),Ti=Si(2),Mi=Si(3),Li=Si(4),Oi=Si(5),Di=Si(6);function Pi(t){return Ai(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+7*e)},(t,e)=>(e-t)/pi)}_i.range,Ei.range,Ti.range,Mi.range,Li.range,Oi.range,Di.range;const Fi=Pi(0),ji=Pi(1),zi=Pi(2),$i=Pi(3),Ri=Pi(4),Ni=Pi(5),qi=Pi(6),Wi=(Fi.range,ji.range,zi.range,$i.range,Ri.range,Ni.range,qi.range,Ai(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear()),t=>t.getMonth())),Ki=(Wi.range,Ai(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear()),t=>t.getUTCMonth())),Ui=(Ki.range,Ai(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear()));Ui.every=t=>isFinite(t=Math.floor(t))&&t>0?Ai(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)}):null,Ui.range;const Hi=Ai(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());function Gi(t,e,n,r,i,o){const a=[[bi,1,ci],[bi,5,5e3],[bi,15,15e3],[bi,30,3e4],[o,1,hi],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,ui],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,di],[r,2,1728e5],[n,1,pi],[e,1,2592e6],[e,3,7776e6],[t,1,fi]];function s(e,n,r){const i=Math.abs(n-e)/r,o=qr(([,,t])=>t).right(a,i);if(o===a.length)return t.every($r(e/fi,n/fi,r));if(0===o)return yi.every(Math.max($r(e,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(t,e,n){const r=e<t;r&&([t,e]=[e,t]);const i=n&&"function"==typeof n.range?n:s(t,e,n),o=i?i.range(t,+e+1):[];return r?o.reverse():o},s]}Hi.every=t=>isFinite(t=Math.floor(t))&&t>0?Ai(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null,Hi.range;const[Yi,Vi]=Gi(Hi,Ki,Fi,Ii,ki,vi),[Qi,Xi]=Gi(Ui,Wi,_i,wi,Ci,xi);function Zi(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Ji(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function to(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}var eo,no,ro={"-":"",_:" ",0:"0"},io=/^\s*\d+/,oo=/^%/,ao=/[\\^$*+?|[\]().{}]/g;function so(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(e)+i:i)}function lo(t){return t.replace(ao,"\\$&")}function co(t){return new RegExp("^(?:"+t.map(lo).join("|")+")","i")}function ho(t){return new Map(t.map((t,e)=>[t.toLowerCase(),e]))}function uo(t,e,n){var r=io.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function po(t,e,n){var r=io.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function fo(t,e,n){var r=io.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function go(t,e,n){var r=io.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function mo(t,e,n){var r=io.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function Ao(t,e,n){var r=io.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function yo(t,e,n){var r=io.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function bo(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function xo(t,e,n){var r=io.exec(e.slice(n,n+1));return r?(t.q=3*r[0]-3,n+r[0].length):-1}function vo(t,e,n){var r=io.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Co(t,e,n){var r=io.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function ko(t,e,n){var r=io.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function wo(t,e,n){var r=io.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Bo(t,e,n){var r=io.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Io(t,e,n){var r=io.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function So(t,e,n){var r=io.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function _o(t,e,n){var r=io.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Eo(t,e,n){var r=oo.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function To(t,e,n){var r=io.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Mo(t,e,n){var r=io.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Lo(t,e){return so(t.getDate(),e,2)}function Oo(t,e){return so(t.getHours(),e,2)}function Do(t,e){return so(t.getHours()%12||12,e,2)}function Po(t,e){return so(1+wi.count(Ui(t),t),e,3)}function Fo(t,e){return so(t.getMilliseconds(),e,3)}function jo(t,e){return Fo(t,e)+"000"}function zo(t,e){return so(t.getMonth()+1,e,2)}function $o(t,e){return so(t.getMinutes(),e,2)}function Ro(t,e){return so(t.getSeconds(),e,2)}function No(t){var e=t.getDay();return 0===e?7:e}function qo(t,e){return so(_i.count(Ui(t)-1,t),e,2)}function Wo(t){var e=t.getDay();return e>=4||0===e?Li(t):Li.ceil(t)}function Ko(t,e){return t=Wo(t),so(Li.count(Ui(t),t)+(4===Ui(t).getDay()),e,2)}function Uo(t){return t.getDay()}function Ho(t,e){return so(Ei.count(Ui(t)-1,t),e,2)}function Go(t,e){return so(t.getFullYear()%100,e,2)}function Yo(t,e){return so((t=Wo(t)).getFullYear()%100,e,2)}function Vo(t,e){return so(t.getFullYear()%1e4,e,4)}function Qo(t,e){var n=t.getDay();return so((t=n>=4||0===n?Li(t):Li.ceil(t)).getFullYear()%1e4,e,4)}function Xo(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+so(e/60|0,"0",2)+so(e%60,"0",2)}function Zo(t,e){return so(t.getUTCDate(),e,2)}function Jo(t,e){return so(t.getUTCHours(),e,2)}function ta(t,e){return so(t.getUTCHours()%12||12,e,2)}function ea(t,e){return so(1+Bi.count(Hi(t),t),e,3)}function na(t,e){return so(t.getUTCMilliseconds(),e,3)}function ra(t,e){return na(t,e)+"000"}function ia(t,e){return so(t.getUTCMonth()+1,e,2)}function oa(t,e){return so(t.getUTCMinutes(),e,2)}function aa(t,e){return so(t.getUTCSeconds(),e,2)}function sa(t){var e=t.getUTCDay();return 0===e?7:e}function la(t,e){return so(Fi.count(Hi(t)-1,t),e,2)}function ca(t){var e=t.getUTCDay();return e>=4||0===e?Ri(t):Ri.ceil(t)}function ha(t,e){return t=ca(t),so(Ri.count(Hi(t),t)+(4===Hi(t).getUTCDay()),e,2)}function ua(t){return t.getUTCDay()}function da(t,e){return so(ji.count(Hi(t)-1,t),e,2)}function pa(t,e){return so(t.getUTCFullYear()%100,e,2)}function fa(t,e){return so((t=ca(t)).getUTCFullYear()%100,e,2)}function ga(t,e){return so(t.getUTCFullYear()%1e4,e,4)}function ma(t,e){var n=t.getUTCDay();return so((t=n>=4||0===n?Ri(t):Ri.ceil(t)).getUTCFullYear()%1e4,e,4)}function Aa(){return"+0000"}function ya(){return"%"}function ba(t){return+t}function xa(t){return Math.floor(+t/1e3)}function va(t){return new Date(t)}function Ca(t){return t instanceof Date?+t:+new Date(+t)}function ka(t,e,n,r,i,o,a,s,l,c){var h=ai(),u=h.invert,d=h.domain,p=c(".%L"),f=c(":%S"),g=c("%I:%M"),m=c("%I %p"),A=c("%a %d"),y=c("%b %d"),b=c("%B"),x=c("%Y");function v(t){return(l(t)<t?p:s(t)<t?f:a(t)<t?g:o(t)<t?m:r(t)<t?i(t)<t?A:y:n(t)<t?b:x)(t)}return h.invert=function(t){return new Date(u(t))},h.domain=function(t){return arguments.length?d(Array.from(t,Ca)):d().map(va)},h.ticks=function(e){var n=d();return t(n[0],n[n.length-1],null==e?10:e)},h.tickFormat=function(t,e){return null==e?v:c(e)},h.nice=function(t){var n=d();return t&&"function"==typeof t.range||(t=e(n[0],n[n.length-1],null==t?10:t)),t?d(function(t,e){var n,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),t[r]=e.floor(o),t[i]=e.ceil(a),t}(n,t)):h},h.copy=function(){return oi(h,ka(t,e,n,r,i,o,a,s,l,c))},h}function wa(){return Sr.apply(ka(Qi,Xi,Ui,Wi,_i,wi,Ci,xi,bi,no).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}eo=function(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,s=t.months,l=t.shortMonths,c=co(i),h=ho(i),u=co(o),d=ho(o),p=co(a),f=ho(a),g=co(s),m=ho(s),A=co(l),y=ho(l),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return l[t.getMonth()]},B:function(t){return s[t.getMonth()]},c:null,d:Lo,e:Lo,f:jo,g:Yo,G:Qo,H:Oo,I:Do,j:Po,L:Fo,m:zo,M:$o,p:function(t){return i[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:ba,s:xa,S:Ro,u:No,U:qo,V:Ko,w:Uo,W:Ho,x:null,X:null,y:Go,Y:Vo,Z:Xo,"%":ya},x={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return l[t.getUTCMonth()]},B:function(t){return s[t.getUTCMonth()]},c:null,d:Zo,e:Zo,f:ra,g:fa,G:ma,H:Jo,I:ta,j:ea,L:na,m:ia,M:oa,p:function(t){return i[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:ba,s:xa,S:aa,u:sa,U:la,V:ha,w:ua,W:da,x:null,X:null,y:pa,Y:ga,Z:Aa,"%":ya},v={a:function(t,e,n){var r=p.exec(e.slice(n));return r?(t.w=f.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(t,e,n){var r=u.exec(e.slice(n));return r?(t.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(t,e,n){var r=A.exec(e.slice(n));return r?(t.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(t,e,n){var r=g.exec(e.slice(n));return r?(t.m=m.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(t,n,r){return w(t,e,n,r)},d:Co,e:Co,f:_o,g:yo,G:Ao,H:wo,I:wo,j:ko,L:So,m:vo,M:Bo,p:function(t,e,n){var r=c.exec(e.slice(n));return r?(t.p=h.get(r[0].toLowerCase()),n+r[0].length):-1},q:xo,Q:To,s:Mo,S:Io,u:po,U:fo,V:go,w:uo,W:mo,x:function(t,e,r){return w(t,n,e,r)},X:function(t,e,n){return w(t,r,e,n)},y:yo,Y:Ao,Z:bo,"%":Eo};function C(t,e){return function(n){var r,i,o,a=[],s=-1,l=0,c=t.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===t.charCodeAt(s)&&(a.push(t.slice(l,s)),null!=(i=ro[r=t.charAt(++s)])?r=t.charAt(++s):i="e"===r?" ":"0",(o=e[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(t.slice(l,s)),a.join("")}}function k(t,e){return function(n){var r,i,o=to(1900,void 0,1);if(w(o,t,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(e&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Ji(to(o.y,0,1))).getUTCDay(),r=i>4||0===i?ji.ceil(r):ji(r),r=Bi.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=Zi(to(o.y,0,1))).getDay(),r=i>4||0===i?Ei.ceil(r):Ei(r),r=wi.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Ji(to(o.y,0,1)).getUTCDay():Zi(to(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Ji(o)):Zi(o)}}function w(t,e,n,r){for(var i,o,a=0,s=e.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=e.charCodeAt(a++))){if(i=e.charAt(a++),!(o=v[i in ro?e.charAt(a++):i])||(r=o(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return b.x=C(n,b),b.X=C(r,b),b.c=C(e,b),x.x=C(n,x),x.X=C(r,x),x.c=C(e,x),{format:function(t){var e=C(t+="",b);return e.toString=function(){return t},e},parse:function(t){var e=k(t+="",!1);return e.toString=function(){return t},e},utcFormat:function(t){var e=C(t+="",x);return e.toString=function(){return t},e},utcParse:function(t){var e=k(t+="",!0);return e.toString=function(){return t},e}}}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),no=eo.format,eo.parse,eo.utcFormat,eo.utcParse;const Ba=function(t){for(var e=new Array(10),n=0;n<10;)e[n]="#"+t.slice(6*n,6*++n);return e}("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function Ia(t){return"string"==typeof t?new _t([[document.querySelector(t)]],[document.documentElement]):new _t([[t]],St)}function Sa(t){return function(){return t}}const _a=Math.abs,Ea=Math.atan2,Ta=Math.cos,Ma=Math.max,La=Math.min,Oa=Math.sin,Da=Math.sqrt,Pa=1e-12,Fa=Math.PI,ja=Fa/2,za=2*Fa;function $a(t){return t>=1?ja:t<=-1?-ja:Math.asin(t)}const Ra=Math.PI,Na=2*Ra,qa=1e-6,Wa=Na-qa;function Ka(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}class Ua{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==t?Ka:function(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Ka;const n=10**e;return function(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=Math.round(arguments[e]*n)/n+t[e]}}(t)}moveTo(t,e){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,e){this._append`L${this._x1=+t},${this._y1=+e}`}quadraticCurveTo(t,e,n,r){this._append`Q${+t},${+e},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(t,e,n,r,i,o){this._append`C${+t},${+e},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(t,e,n,r,i){if(t=+t,e=+e,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-t,l=r-e,c=o-t,h=a-e,u=c*c+h*h;if(null===this._x1)this._append`M${this._x1=t},${this._y1=e}`;else if(u>qa)if(Math.abs(h*s-l*c)>qa&&i){let d=n-o,p=r-a,f=s*s+l*l,g=d*d+p*p,m=Math.sqrt(f),A=Math.sqrt(u),y=i*Math.tan((Ra-Math.acos((f+u-g)/(2*m*A)))/2),b=y/A,x=y/m;Math.abs(b-1)>qa&&this._append`L${t+b*c},${e+b*h}`,this._append`A${i},${i},0,0,${+(h*d>c*p)},${this._x1=t+x*s},${this._y1=e+x*l}`}else this._append`L${this._x1=t},${this._y1=e}`}arc(t,e,n,r,i,o){if(t=+t,e=+e,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=t+a,c=e+s,h=1^o,u=o?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>qa||Math.abs(this._y1-c)>qa)&&this._append`L${l},${c}`,n&&(u<0&&(u=u%Na+Na),u>Wa?this._append`A${n},${n},0,1,${h},${t-a},${e-s}A${n},${n},0,1,${h},${this._x1=l},${this._y1=c}`:u>qa&&this._append`A${n},${n},0,${+(u>=Ra)},${h},${this._x1=t+n*Math.cos(i)},${this._y1=e+n*Math.sin(i)}`)}rect(t,e,n,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+e}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function Ha(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(null==n)e=null;else{const t=Math.floor(n);if(!(t>=0))throw new RangeError(`invalid digits: ${n}`);e=t}return t},()=>new Ua(e)}function Ga(t){return t.innerRadius}function Ya(t){return t.outerRadius}function Va(t){return t.startAngle}function Qa(t){return t.endAngle}function Xa(t){return t&&t.padAngle}function Za(t,e,n,r,i,o,a){var s=t-n,l=e-r,c=(a?o:-o)/Da(s*s+l*l),h=c*l,u=-c*s,d=t+h,p=e+u,f=n+h,g=r+u,m=(d+f)/2,A=(p+g)/2,y=f-d,b=g-p,x=y*y+b*b,v=i-o,C=d*g-f*p,k=(b<0?-1:1)*Da(Ma(0,v*v*x-C*C)),w=(C*b-y*k)/x,B=(-C*y-b*k)/x,I=(C*b+y*k)/x,S=(-C*y+b*k)/x,_=w-m,E=B-A,T=I-m,M=S-A;return _*_+E*E>T*T+M*M&&(w=I,B=S),{cx:w,cy:B,x01:-h,y01:-u,x11:w*(i/v-1),y11:B*(i/v-1)}}function Ja(){var t=Ga,e=Ya,n=Sa(0),r=null,i=Va,o=Qa,a=Xa,s=null,l=Ha(c);function c(){var c,h,u,d=+t.apply(this,arguments),p=+e.apply(this,arguments),f=i.apply(this,arguments)-ja,g=o.apply(this,arguments)-ja,m=_a(g-f),A=g>f;if(s||(s=c=l()),p<d&&(h=p,p=d,d=h),p>Pa)if(m>za-Pa)s.moveTo(p*Ta(f),p*Oa(f)),s.arc(0,0,p,f,g,!A),d>Pa&&(s.moveTo(d*Ta(g),d*Oa(g)),s.arc(0,0,d,g,f,A));else{var y,b,x=f,v=g,C=f,k=g,w=m,B=m,I=a.apply(this,arguments)/2,S=I>Pa&&(r?+r.apply(this,arguments):Da(d*d+p*p)),_=La(_a(p-d)/2,+n.apply(this,arguments)),E=_,T=_;if(S>Pa){var M=$a(S/d*Oa(I)),L=$a(S/p*Oa(I));(w-=2*M)>Pa?(C+=M*=A?1:-1,k-=M):(w=0,C=k=(f+g)/2),(B-=2*L)>Pa?(x+=L*=A?1:-1,v-=L):(B=0,x=v=(f+g)/2)}var O=p*Ta(x),D=p*Oa(x),P=d*Ta(k),F=d*Oa(k);if(_>Pa){var j,z=p*Ta(v),$=p*Oa(v),R=d*Ta(C),N=d*Oa(C);if(m<Fa)if(j=function(t,e,n,r,i,o,a,s){var l=n-t,c=r-e,h=a-i,u=s-o,d=u*l-h*c;if(!(d*d<Pa))return[t+(d=(h*(e-o)-u*(t-i))/d)*l,e+d*c]}(O,D,R,N,z,$,P,F)){var q=O-j[0],W=D-j[1],K=z-j[0],U=$-j[1],H=1/Oa(((u=(q*K+W*U)/(Da(q*q+W*W)*Da(K*K+U*U)))>1?0:u<-1?Fa:Math.acos(u))/2),G=Da(j[0]*j[0]+j[1]*j[1]);E=La(_,(d-G)/(H-1)),T=La(_,(p-G)/(H+1))}else E=T=0}B>Pa?T>Pa?(y=Za(R,N,O,D,p,T,A),b=Za(z,$,P,F,p,T,A),s.moveTo(y.cx+y.x01,y.cy+y.y01),T<_?s.arc(y.cx,y.cy,T,Ea(y.y01,y.x01),Ea(b.y01,b.x01),!A):(s.arc(y.cx,y.cy,T,Ea(y.y01,y.x01),Ea(y.y11,y.x11),!A),s.arc(0,0,p,Ea(y.cy+y.y11,y.cx+y.x11),Ea(b.cy+b.y11,b.cx+b.x11),!A),s.arc(b.cx,b.cy,T,Ea(b.y11,b.x11),Ea(b.y01,b.x01),!A))):(s.moveTo(O,D),s.arc(0,0,p,x,v,!A)):s.moveTo(O,D),d>Pa&&w>Pa?E>Pa?(y=Za(P,F,z,$,d,-E,A),b=Za(O,D,R,N,d,-E,A),s.lineTo(y.cx+y.x01,y.cy+y.y01),E<_?s.arc(y.cx,y.cy,E,Ea(y.y01,y.x01),Ea(b.y01,b.x01),!A):(s.arc(y.cx,y.cy,E,Ea(y.y01,y.x01),Ea(y.y11,y.x11),!A),s.arc(0,0,d,Ea(y.cy+y.y11,y.cx+y.x11),Ea(b.cy+b.y11,b.cx+b.x11),A),s.arc(b.cx,b.cy,E,Ea(b.y11,b.x11),Ea(b.y01,b.x01),!A))):s.arc(0,0,d,k,C,A):s.lineTo(P,F)}else s.moveTo(0,0);if(s.closePath(),c)return s=null,c+""||null}return c.centroid=function(){var n=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-Fa/2;return[Ta(r)*n,Oa(r)*n]},c.innerRadius=function(e){return arguments.length?(t="function"==typeof e?e:Sa(+e),c):t},c.outerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Sa(+t),c):e},c.cornerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Sa(+t),c):n},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Sa(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Sa(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Sa(+t),c):o},c.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Sa(+t),c):a},c.context=function(t){return arguments.length?(s=null==t?null:t,c):s},c}function ts(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function es(t){this._context=t}function ns(t){return new es(t)}function rs(t){return t[0]}function is(t){return t[1]}function os(t,e){var n=Sa(!0),r=null,i=ns,o=null,a=Ha(s);function s(s){var l,c,h,u=(s=ts(s)).length,d=!1;for(null==r&&(o=i(h=a())),l=0;l<=u;++l)!(l<u&&n(c=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+t(c,l,s),+e(c,l,s));if(h)return o=null,h+""||null}return t="function"==typeof t?t:void 0===t?rs:Sa(t),e="function"==typeof e?e:void 0===e?is:Sa(e),s.x=function(e){return arguments.length?(t="function"==typeof e?e:Sa(+e),s):t},s.y=function(t){return arguments.length?(e="function"==typeof t?t:Sa(+t),s):e},s.defined=function(t){return arguments.length?(n="function"==typeof t?t:Sa(!!t),s):n},s.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),s):i},s.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),s):r},s}function as(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function ss(t){return t}function ls(){var t=ss,e=as,n=null,r=Sa(0),i=Sa(za),o=Sa(0);function a(a){var s,l,c,h,u,d=(a=ts(a)).length,p=0,f=new Array(d),g=new Array(d),m=+r.apply(this,arguments),A=Math.min(za,Math.max(-za,i.apply(this,arguments)-m)),y=Math.min(Math.abs(A)/d,o.apply(this,arguments)),b=y*(A<0?-1:1);for(s=0;s<d;++s)(u=g[f[s]=s]=+t(a[s],s,a))>0&&(p+=u);for(null!=e?f.sort(function(t,n){return e(g[t],g[n])}):null!=n&&f.sort(function(t,e){return n(a[t],a[e])}),s=0,c=p?(A-d*b)/p:0;s<d;++s,m=h)l=f[s],h=m+((u=g[l])>0?u*c:0)+b,g[l]={data:a[l],index:s,value:u,startAngle:m,endAngle:h,padAngle:y};return g}return a.value=function(e){return arguments.length?(t="function"==typeof e?e:Sa(+e),a):t},a.sortValues=function(t){return arguments.length?(e=t,n=null,a):e},a.sort=function(t){return arguments.length?(n=t,e=null,a):n},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Sa(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Sa(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Sa(+t),a):o},a}function cs(){}function hs(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function us(t){this._context=t}function ds(t){return new us(t)}function ps(t){this._context=t}function fs(t){return new ps(t)}function gs(t){this._context=t}function ms(t){return new gs(t)}Ua.prototype,Array.prototype.slice,es.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}},us.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:hs(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:hs(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},ps.prototype={areaStart:cs,areaEnd:cs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:hs(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},gs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:hs(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};class As{constructor(t,e){this._context=t,this._x=e}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,e,t,e):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+e)/2,t,this._y0,t,e)}this._x0=t,this._y0=e}}function ys(t){return new As(t,!0)}function bs(t){return new As(t,!1)}function xs(t,e){this._basis=new us(t),this._beta=e}xs.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],o=e[0],a=t[n]-i,s=e[n]-o,l=-1;++l<=n;)r=l/n,this._basis.point(this._beta*t[l]+(1-this._beta)*(i+r*a),this._beta*e[l]+(1-this._beta)*(o+r*s));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};const vs=function t(e){function n(t){return 1===e?new us(t):new xs(t,e)}return n.beta=function(e){return t(+e)},n}(.85);function Cs(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function ks(t,e){this._context=t,this._k=(1-e)/6}ks.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:Cs(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:Cs(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const ws=function t(e){function n(t){return new ks(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Bs(t,e){this._context=t,this._k=(1-e)/6}Bs.prototype={areaStart:cs,areaEnd:cs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Cs(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Is=function t(e){function n(t){return new Bs(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Ss(t,e){this._context=t,this._k=(1-e)/6}Ss.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Cs(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const _s=function t(e){function n(t){return new Ss(t,e)}return n.tension=function(e){return t(+e)},n}(0);function Es(t,e,n){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>Pa){var s=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,l=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*s-t._x0*t._l12_2a+t._x2*t._l01_2a)/l,i=(i*s-t._y0*t._l12_2a+t._y2*t._l01_2a)/l}if(t._l23_a>Pa){var c=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,h=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*c+t._x1*t._l23_2a-e*t._l12_2a)/h,a=(a*c+t._y1*t._l23_2a-n*t._l12_2a)/h}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function Ts(t,e){this._context=t,this._alpha=e}Ts.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:Es(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ms=function t(e){function n(t){return e?new Ts(t,e):new ks(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ls(t,e){this._context=t,this._alpha=e}Ls.prototype={areaStart:cs,areaEnd:cs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:Es(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Os=function t(e){function n(t){return e?new Ls(t,e):new Bs(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Ds(t,e){this._context=t,this._alpha=e}Ds.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:Es(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};const Ps=function t(e){function n(t){return e?new Ds(t,e):new Ss(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);function Fs(t){this._context=t}function js(t){return new Fs(t)}function zs(t){return t<0?-1:1}function $s(t,e,n){var r=t._x1-t._x0,i=e-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(n-t._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(zs(o)+zs(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Rs(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function Ns(t,e,n){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,s=(o-r)/3;t._context.bezierCurveTo(r+s,i+s*e,o-s,a-s*n,o,a)}function qs(t){this._context=t}function Ws(t){this._context=new Ks(t)}function Ks(t){this._context=t}function Us(t){return new qs(t)}function Hs(t){return new Ws(t)}function Gs(t){this._context=t}function Ys(t){var e,n,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,o[e]=4,a[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/o[e-1],o[e]-=n,a[e]-=n*a[e-1];for(i[r-1]=a[r-1]/o[r-1],e=r-2;e>=0;--e)i[e]=(a[e]-i[e+1])/o[e];for(o[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)o[e]=2*t[e+1]-i[e+1];return[i,o]}function Vs(t){return new Gs(t)}function Qs(t,e){this._context=t,this._t=e}function Xs(t){return new Qs(t,.5)}function Zs(t){return new Qs(t,0)}function Js(t){return new Qs(t,1)}function tl(t,e,n){this.k=t,this.x=e,this.y=n}Fs.prototype={areaStart:cs,areaEnd:cs,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},qs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Ns(this,this._t0,Rs(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(e=+e,(t=+t)!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,Ns(this,Rs(this,n=$s(this,t,e)),n);break;default:Ns(this,this._t0,n=$s(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(Ws.prototype=Object.create(qs.prototype)).point=function(t,e){qs.prototype.point.call(this,e,t)},Ks.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,o){this._context.bezierCurveTo(e,t,r,n,o,i)}},Gs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=Ys(t),i=Ys(e),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],e[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},Qs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}},tl.prototype={constructor:tl,scale:function(t){return 1===t?this:new tl(this.k*t,this.x,this.y)},translate:function(t,e){return 0===t&0===e?this:new tl(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}},new tl(1,0,0),tl.prototype},51931:(t,e,n)=>{"use strict";n.d(e,{A:()=>g});var r=n(67266),i=n(63122);const o={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:t=>{if(35!==t.charCodeAt(0))return;const e=t.match(o.re);if(!e)return;const n=e[1],i=parseInt(n,16),a=n.length,s=a%4==0,l=a>4,c=l?1:17,h=l?8:4,u=s?0:-1,d=l?255:15;return r.A.set({r:(i>>h*(u+3)&d)*c,g:(i>>h*(u+2)&d)*c,b:(i>>h*(u+1)&d)*c,a:s?(i&d)*c/255:1},t)},stringify:t=>{const{r:e,g:n,b:r,a:o}=t;return o<1?`#${i.Y[Math.round(e)]}${i.Y[Math.round(n)]}${i.Y[Math.round(r)]}${i.Y[Math.round(255*o)]}`:`#${i.Y[Math.round(e)]}${i.Y[Math.round(n)]}${i.Y[Math.round(r)]}`}},a=o;var s=n(86309);const l={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:t=>{const e=t.match(l.hueRe);if(e){const[,t,n]=e;switch(n){case"grad":return s.A.channel.clamp.h(.9*parseFloat(t));case"rad":return s.A.channel.clamp.h(180*parseFloat(t)/Math.PI);case"turn":return s.A.channel.clamp.h(360*parseFloat(t))}}return s.A.channel.clamp.h(parseFloat(t))},parse:t=>{const e=t.charCodeAt(0);if(104!==e&&72!==e)return;const n=t.match(l.re);if(!n)return;const[,i,o,a,c,h]=n;return r.A.set({h:l._hue2deg(i),s:s.A.channel.clamp.s(parseFloat(o)),l:s.A.channel.clamp.l(parseFloat(a)),a:c?s.A.channel.clamp.a(h?parseFloat(c)/100:parseFloat(c)):1},t)},stringify:t=>{const{h:e,s:n,l:r,a:i}=t;return i<1?`hsla(${s.A.lang.round(e)}, ${s.A.lang.round(n)}%, ${s.A.lang.round(r)}%, ${i})`:`hsl(${s.A.lang.round(e)}, ${s.A.lang.round(n)}%, ${s.A.lang.round(r)}%)`}},c=l,h={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:t=>{t=t.toLowerCase();const e=h.colors[t];if(e)return a.parse(e)},stringify:t=>{const e=a.stringify(t);for(const t in h.colors)if(h.colors[t]===e)return t}},u=h,d={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:t=>{const e=t.charCodeAt(0);if(114!==e&&82!==e)return;const n=t.match(d.re);if(!n)return;const[,i,o,a,l,c,h,u,p]=n;return r.A.set({r:s.A.channel.clamp.r(o?2.55*parseFloat(i):parseFloat(i)),g:s.A.channel.clamp.g(l?2.55*parseFloat(a):parseFloat(a)),b:s.A.channel.clamp.b(h?2.55*parseFloat(c):parseFloat(c)),a:u?s.A.channel.clamp.a(p?parseFloat(u)/100:parseFloat(u)):1},t)},stringify:t=>{const{r:e,g:n,b:r,a:i}=t;return i<1?`rgba(${s.A.lang.round(e)}, ${s.A.lang.round(n)}, ${s.A.lang.round(r)}, ${s.A.lang.round(i)})`:`rgb(${s.A.lang.round(e)}, ${s.A.lang.round(n)}, ${s.A.lang.round(r)})`}},p=d,f={format:{keyword:h,hex:a,rgb:d,rgba:d,hsl:l,hsla:l},parse:t=>{if("string"!=typeof t)return t;const e=a.parse(t)||p.parse(t)||c.parse(t)||u.parse(t);if(e)return e;throw new Error(`Unsupported color format: "${t}"`)},stringify:t=>!t.changed&&t.color?t.color:t.type.is(i.Z.HSL)||void 0===t.data.r?c.stringify(t):t.a<1||!Number.isInteger(t.r)||!Number.isInteger(t.g)||!Number.isInteger(t.b)?p.stringify(t):a.stringify(t)},g=f},52274:(t,e,n)=>{"use strict";function r(t,e,n){if(t&&t.length){const[r,i]=e,o=Math.PI/180*n,a=Math.cos(o),s=Math.sin(o);for(const e of t){const[t,n]=e;e[0]=(t-r)*a-(n-i)*s+r,e[1]=(t-r)*s+(n-i)*a+i}}}function i(t,e){return t[0]===e[0]&&t[1]===e[1]}function o(t,e,n,o=1){const a=n,s=Math.max(e,.1),l=t[0]&&t[0][0]&&"number"==typeof t[0][0]?[t]:t,c=[0,0];if(a)for(const t of l)r(t,c,a);const h=function(t,e,n){const r=[];for(const e of t){const t=[...e];i(t[0],t[t.length-1])||t.push([t[0][0],t[0][1]]),t.length>2&&r.push(t)}const o=[];e=Math.max(e,.1);const a=[];for(const t of r)for(let e=0;e<t.length-1;e++){const n=t[e],r=t[e+1];if(n[1]!==r[1]){const t=Math.min(n[1],r[1]);a.push({ymin:t,ymax:Math.max(n[1],r[1]),x:t===n[1]?n[0]:r[0],islope:(r[0]-n[0])/(r[1]-n[1])})}}if(a.sort((t,e)=>t.ymin<e.ymin?-1:t.ymin>e.ymin?1:t.x<e.x?-1:t.x>e.x?1:t.ymax===e.ymax?0:(t.ymax-e.ymax)/Math.abs(t.ymax-e.ymax)),!a.length)return o;let s=[],l=a[0].ymin,c=0;for(;s.length||a.length;){if(a.length){let t=-1;for(let e=0;e<a.length&&!(a[e].ymin>l);e++)t=e;a.splice(0,t+1).forEach(t=>{s.push({s:l,edge:t})})}if(s=s.filter(t=>!(t.edge.ymax<=l)),s.sort((t,e)=>t.edge.x===e.edge.x?0:(t.edge.x-e.edge.x)/Math.abs(t.edge.x-e.edge.x)),(1!==n||c%e==0)&&s.length>1)for(let t=0;t<s.length;t+=2){const e=t+1;if(e>=s.length)break;const n=s[t].edge,r=s[e].edge;o.push([[Math.round(n.x),l],[Math.round(r.x),l]])}l+=n,s.forEach(t=>{t.edge.x=t.edge.x+n*t.edge.islope}),c++}return o}(l,s,o);if(a){for(const t of l)r(t,c,-a);!function(t,e,n){const i=[];t.forEach(t=>i.push(...t)),r(i,e,n)}(h,c,-a)}return h}function a(t,e){var n;const r=e.hachureAngle+90;let i=e.hachureGap;i<0&&(i=4*e.strokeWidth),i=Math.round(Math.max(i,.1));let a=1;return e.roughness>=1&&((null===(n=e.randomizer)||void 0===n?void 0:n.next())||Math.random())>.7&&(a=i),o(t,i,r,a||1)}n.d(e,{A:()=>it});class s{constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){const n=a(t,e);return{type:"fillSketch",ops:this.renderLines(n,e)}}renderLines(t,e){const n=[];for(const r of t)n.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],e));return n}}function l(t){const e=t[0],n=t[1];return Math.sqrt(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2))}class c extends s{fillPolygons(t,e){let n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);const r=a(t,Object.assign({},e,{hachureGap:n})),i=Math.PI/180*e.hachureAngle,o=[],s=.5*n*Math.cos(i),c=.5*n*Math.sin(i);for(const[t,e]of r)l([t,e])&&o.push([[t[0]-s,t[1]+c],[...e]],[[t[0]+s,t[1]-c],[...e]]);return{type:"fillSketch",ops:this.renderLines(o,e)}}}class h extends s{fillPolygons(t,e){const n=this._fillPolygons(t,e),r=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),i=this._fillPolygons(t,r);return n.ops=n.ops.concat(i.ops),n}}class u{constructor(t){this.helper=t}fillPolygons(t,e){const n=a(t,e=Object.assign({},e,{hachureAngle:0}));return this.dotsOnLines(n,e)}dotsOnLines(t,e){const n=[];let r=e.hachureGap;r<0&&(r=4*e.strokeWidth),r=Math.max(r,.1);let i=e.fillWeight;i<0&&(i=e.strokeWidth/2);const o=r/4;for(const a of t){const t=l(a),s=t/r,c=Math.ceil(s)-1,h=t-c*r,u=(a[0][0]+a[1][0])/2-r/4,d=Math.min(a[0][1],a[1][1]);for(let t=0;t<c;t++){const a=d+h+t*r,s=u-o+2*Math.random()*o,l=a-o+2*Math.random()*o,c=this.helper.ellipse(s,l,i,i,e);n.push(...c.ops)}}return{type:"fillSketch",ops:n}}}class d{constructor(t){this.helper=t}fillPolygons(t,e){const n=a(t,e);return{type:"fillSketch",ops:this.dashedLine(n,e)}}dashedLine(t,e){const n=e.dashOffset<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashOffset,r=e.dashGap<0?e.hachureGap<0?4*e.strokeWidth:e.hachureGap:e.dashGap,i=[];return t.forEach(t=>{const o=l(t),a=Math.floor(o/(n+r)),s=(o+r-a*(n+r))/2;let c=t[0],h=t[1];c[0]>h[0]&&(c=t[1],h=t[0]);const u=Math.atan((h[1]-c[1])/(h[0]-c[0]));for(let t=0;t<a;t++){const o=t*(n+r),a=o+n,l=[c[0]+o*Math.cos(u)+s*Math.cos(u),c[1]+o*Math.sin(u)+s*Math.sin(u)],h=[c[0]+a*Math.cos(u)+s*Math.cos(u),c[1]+a*Math.sin(u)+s*Math.sin(u)];i.push(...this.helper.doubleLineOps(l[0],l[1],h[0],h[1],e))}}),i}}class p{constructor(t){this.helper=t}fillPolygons(t,e){const n=e.hachureGap<0?4*e.strokeWidth:e.hachureGap,r=e.zigzagOffset<0?n:e.zigzagOffset,i=a(t,e=Object.assign({},e,{hachureGap:n+r}));return{type:"fillSketch",ops:this.zigzagLines(i,r,e)}}zigzagLines(t,e,n){const r=[];return t.forEach(t=>{const i=l(t),o=Math.round(i/(2*e));let a=t[0],s=t[1];a[0]>s[0]&&(a=t[1],s=t[0]);const c=Math.atan((s[1]-a[1])/(s[0]-a[0]));for(let t=0;t<o;t++){const i=2*t*e,o=2*(t+1)*e,s=Math.sqrt(2*Math.pow(e,2)),l=[a[0]+i*Math.cos(c),a[1]+i*Math.sin(c)],h=[a[0]+o*Math.cos(c),a[1]+o*Math.sin(c)],u=[l[0]+s*Math.cos(c+Math.PI/4),l[1]+s*Math.sin(c+Math.PI/4)];r.push(...this.helper.doubleLineOps(l[0],l[1],u[0],u[1],n),...this.helper.doubleLineOps(u[0],u[1],h[0],h[1],n))}}),r}}const f={};class g{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const m={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function A(t,e){return t.type===e}function y(t){const e=[],n=function(t){const e=new Array;for(;""!==t;)if(t.match(/^([ \t\r\n,]+)/))t=t.substr(RegExp.$1.length);else if(t.match(/^([aAcChHlLmMqQsStTvVzZ])/))e[e.length]={type:0,text:RegExp.$1},t=t.substr(RegExp.$1.length);else{if(!t.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];e[e.length]={type:1,text:`${parseFloat(RegExp.$1)}`},t=t.substr(RegExp.$1.length)}return e[e.length]={type:2,text:""},e}(t);let r="BOD",i=0,o=n[i];for(;!A(o,2);){let a=0;const s=[];if("BOD"===r){if("M"!==o.text&&"m"!==o.text)return y("M0,0"+t);i++,a=m[o.text],r=o.text}else A(o,1)?a=m[r]:(i++,a=m[o.text],r=o.text);if(!(i+a<n.length))throw new Error("Path data ended short");for(let t=i;t<i+a;t++){const e=n[t];if(!A(e,1))throw new Error("Param not a number: "+r+","+e.text);s[s.length]=+e.text}if("number"!=typeof m[r])throw new Error("Bad segment: "+r);{const t={key:r,data:s};e.push(t),i+=a,o=n[i],"M"===r&&(r="L"),"m"===r&&(r="l")}}return e}function b(t){let e=0,n=0,r=0,i=0;const o=[];for(const{key:a,data:s}of t)switch(a){case"M":o.push({key:"M",data:[...s]}),[e,n]=s,[r,i]=s;break;case"m":e+=s[0],n+=s[1],o.push({key:"M",data:[e,n]}),r=e,i=n;break;case"L":o.push({key:"L",data:[...s]}),[e,n]=s;break;case"l":e+=s[0],n+=s[1],o.push({key:"L",data:[e,n]});break;case"C":o.push({key:"C",data:[...s]}),e=s[4],n=s[5];break;case"c":{const t=s.map((t,r)=>r%2?t+n:t+e);o.push({key:"C",data:t}),e=t[4],n=t[5];break}case"Q":o.push({key:"Q",data:[...s]}),e=s[2],n=s[3];break;case"q":{const t=s.map((t,r)=>r%2?t+n:t+e);o.push({key:"Q",data:t}),e=t[2],n=t[3];break}case"A":o.push({key:"A",data:[...s]}),e=s[5],n=s[6];break;case"a":e+=s[5],n+=s[6],o.push({key:"A",data:[s[0],s[1],s[2],s[3],s[4],e,n]});break;case"H":o.push({key:"H",data:[...s]}),e=s[0];break;case"h":e+=s[0],o.push({key:"H",data:[e]});break;case"V":o.push({key:"V",data:[...s]}),n=s[0];break;case"v":n+=s[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...s]}),e=s[2],n=s[3];break;case"s":{const t=s.map((t,r)=>r%2?t+n:t+e);o.push({key:"S",data:t}),e=t[2],n=t[3];break}case"T":o.push({key:"T",data:[...s]}),e=s[0],n=s[1];break;case"t":e+=s[0],n+=s[1],o.push({key:"T",data:[e,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),e=r,n=i}return o}function x(t){const e=[];let n="",r=0,i=0,o=0,a=0,s=0,l=0;for(const{key:c,data:h}of t){switch(c){case"M":e.push({key:"M",data:[...h]}),[r,i]=h,[o,a]=h;break;case"C":e.push({key:"C",data:[...h]}),r=h[4],i=h[5],s=h[2],l=h[3];break;case"L":e.push({key:"L",data:[...h]}),[r,i]=h;break;case"H":r=h[0],e.push({key:"L",data:[r,i]});break;case"V":i=h[0],e.push({key:"L",data:[r,i]});break;case"S":{let t=0,o=0;"C"===n||"S"===n?(t=r+(r-s),o=i+(i-l)):(t=r,o=i),e.push({key:"C",data:[t,o,...h]}),s=h[0],l=h[1],r=h[2],i=h[3];break}case"T":{const[t,o]=h;let a=0,c=0;"Q"===n||"T"===n?(a=r+(r-s),c=i+(i-l)):(a=r,c=i);const u=r+2*(a-r)/3,d=i+2*(c-i)/3,p=t+2*(a-t)/3,f=o+2*(c-o)/3;e.push({key:"C",data:[u,d,p,f,t,o]}),s=a,l=c,r=t,i=o;break}case"Q":{const[t,n,o,a]=h,c=r+2*(t-r)/3,u=i+2*(n-i)/3,d=o+2*(t-o)/3,p=a+2*(n-a)/3;e.push({key:"C",data:[c,u,d,p,o,a]}),s=t,l=n,r=o,i=a;break}case"A":{const t=Math.abs(h[0]),n=Math.abs(h[1]),o=h[2],a=h[3],s=h[4],l=h[5],c=h[6];0===t||0===n?(e.push({key:"C",data:[r,i,l,c,l,c]}),r=l,i=c):r===l&&i===c||(C(r,i,l,c,t,n,o,a,s).forEach(function(t){e.push({key:"C",data:t})}),r=l,i=c);break}case"Z":e.push({key:"Z",data:[]}),r=o,i=a}n=c}return e}function v(t,e,n){return[t*Math.cos(n)-e*Math.sin(n),t*Math.sin(n)+e*Math.cos(n)]}function C(t,e,n,r,i,o,a,s,l,c){const h=(u=a,Math.PI*u/180);var u;let d=[],p=0,f=0,g=0,m=0;if(c)[p,f,g,m]=c;else{[t,e]=v(t,e,-h),[n,r]=v(n,r,-h);const a=(t-n)/2,c=(e-r)/2;let u=a*a/(i*i)+c*c/(o*o);u>1&&(u=Math.sqrt(u),i*=u,o*=u);const d=i*i,A=o*o,y=d*A-d*c*c-A*a*a,b=d*c*c+A*a*a,x=(s===l?-1:1)*Math.sqrt(Math.abs(y/b));g=x*i*c/o+(t+n)/2,m=x*-o*a/i+(e+r)/2,p=Math.asin(parseFloat(((e-m)/o).toFixed(9))),f=Math.asin(parseFloat(((r-m)/o).toFixed(9))),t<g&&(p=Math.PI-p),n<g&&(f=Math.PI-f),p<0&&(p=2*Math.PI+p),f<0&&(f=2*Math.PI+f),l&&p>f&&(p-=2*Math.PI),!l&&f>p&&(f-=2*Math.PI)}let A=f-p;if(Math.abs(A)>120*Math.PI/180){const t=f,e=n,s=r;f=l&&f>p?p+120*Math.PI/180*1:p+120*Math.PI/180*-1,d=C(n=g+i*Math.cos(f),r=m+o*Math.sin(f),e,s,i,o,a,0,l,[f,t,g,m])}A=f-p;const y=Math.cos(p),b=Math.sin(p),x=Math.cos(f),k=Math.sin(f),w=Math.tan(A/4),B=4/3*i*w,I=4/3*o*w,S=[t,e],_=[t+B*b,e-I*y],E=[n+B*k,r-I*x],T=[n,r];if(_[0]=2*S[0]-_[0],_[1]=2*S[1]-_[1],c)return[_,E,T].concat(d);{d=[_,E,T].concat(d);const t=[];for(let e=0;e<d.length;e+=3){const n=v(d[e][0],d[e][1],h),r=v(d[e+1][0],d[e+1][1],h),i=v(d[e+2][0],d[e+2][1],h);t.push([n[0],n[1],r[0],r[1],i[0],i[1]])}return t}}const k={randOffset:function(t,e){return F(t,e)},randOffsetWithRange:function(t,e,n){return P(t,e,n)},ellipse:function(t,e,n,r,i){return _(t,e,i,S(n,r,i)).opset},doubleLineOps:function(t,e,n,r,i){return j(t,e,n,r,i,!0)}};function w(t,e,n,r,i){return{type:"path",ops:j(t,e,n,r,i)}}function B(t,e,n){const r=(t||[]).length;if(r>2){const i=[];for(let e=0;e<r-1;e++)i.push(...j(t[e][0],t[e][1],t[e+1][0],t[e+1][1],n));return e&&i.push(...j(t[r-1][0],t[r-1][1],t[0][0],t[0][1],n)),{type:"path",ops:i}}return 2===r?w(t[0][0],t[0][1],t[1][0],t[1][1],n):{type:"path",ops:[]}}function I(t,e){if(t.length){const n="number"==typeof t[0][0]?[t]:t,r=$(n[0],1*(1+.2*e.roughness),e),i=e.disableMultiStroke?[]:$(n[0],1.5*(1+.22*e.roughness),O(e));for(let t=1;t<n.length;t++){const o=n[t];if(o.length){const t=$(o,1*(1+.2*e.roughness),e),n=e.disableMultiStroke?[]:$(o,1.5*(1+.22*e.roughness),O(e));for(const e of t)"move"!==e.op&&r.push(e);for(const t of n)"move"!==t.op&&i.push(t)}}return{type:"path",ops:r.concat(i)}}return{type:"path",ops:[]}}function S(t,e,n){const r=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(t/2,2)+Math.pow(e/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=2*Math.PI/i;let a=Math.abs(t/2),s=Math.abs(e/2);const l=1-n.curveFitting;return a+=F(a*l,n),s+=F(s*l,n),{increment:o,rx:a,ry:s}}function _(t,e,n,r){const[i,o]=N(r.increment,t,e,r.rx,r.ry,1,r.increment*P(.1,P(.4,1,n),n),n);let a=R(i,null,n);if(!n.disableMultiStroke&&0!==n.roughness){const[i]=N(r.increment,t,e,r.rx,r.ry,1.5,0,n),o=R(i,null,n);a=a.concat(o)}return{estimatedPoints:o,opset:{type:"path",ops:a}}}function E(t,e,n,r,i,o,a,s,l){const c=t,h=e;let u=Math.abs(n/2),d=Math.abs(r/2);u+=F(.01*u,l),d+=F(.01*d,l);let p=i,f=o;for(;p<0;)p+=2*Math.PI,f+=2*Math.PI;f-p>2*Math.PI&&(p=0,f=2*Math.PI);const g=2*Math.PI/l.curveStepCount,m=Math.min(g/2,(f-p)/2),A=q(m,c,h,u,d,p,f,1,l);if(!l.disableMultiStroke){const t=q(m,c,h,u,d,p,f,1.5,l);A.push(...t)}return a&&(s?A.push(...j(c,h,c+u*Math.cos(p),h+d*Math.sin(p),l),...j(c,h,c+u*Math.cos(f),h+d*Math.sin(f),l)):A.push({op:"lineTo",data:[c,h]},{op:"lineTo",data:[c+u*Math.cos(p),h+d*Math.sin(p)]})),{type:"path",ops:A}}function T(t,e){const n=x(b(y(t))),r=[];let i=[0,0],o=[0,0];for(const{key:t,data:a}of n)switch(t){case"M":o=[a[0],a[1]],i=[a[0],a[1]];break;case"L":r.push(...j(o[0],o[1],a[0],a[1],e)),o=[a[0],a[1]];break;case"C":{const[t,n,i,s,l,c]=a;r.push(...W(t,n,i,s,l,c,o,e)),o=[l,c];break}case"Z":r.push(...j(o[0],o[1],i[0],i[1],e)),o=[i[0],i[1]]}return{type:"path",ops:r}}function M(t,e){const n=[];for(const r of t)if(r.length){const t=e.maxRandomnessOffset||0,i=r.length;if(i>2){n.push({op:"move",data:[r[0][0]+F(t,e),r[0][1]+F(t,e)]});for(let o=1;o<i;o++)n.push({op:"lineTo",data:[r[o][0]+F(t,e),r[o][1]+F(t,e)]})}}return{type:"fillPath",ops:n}}function L(t,e){return function(t,e){let n=t.fillStyle||"hachure";if(!f[n])switch(n){case"zigzag":f[n]||(f[n]=new c(e));break;case"cross-hatch":f[n]||(f[n]=new h(e));break;case"dots":f[n]||(f[n]=new u(e));break;case"dashed":f[n]||(f[n]=new d(e));break;case"zigzag-line":f[n]||(f[n]=new p(e));break;default:n="hachure",f[n]||(f[n]=new s(e))}return f[n]}(e,k).fillPolygons(t,e)}function O(t){const e=Object.assign({},t);return e.randomizer=void 0,t.seed&&(e.seed=t.seed+1),e}function D(t){return t.randomizer||(t.randomizer=new g(t.seed||0)),t.randomizer.next()}function P(t,e,n,r=1){return n.roughness*r*(D(n)*(e-t)+t)}function F(t,e,n=1){return P(-t,t,e,n)}function j(t,e,n,r,i,o=!1){const a=o?i.disableMultiStrokeFill:i.disableMultiStroke,s=z(t,e,n,r,i,!0,!1);if(a)return s;const l=z(t,e,n,r,i,!0,!0);return s.concat(l)}function z(t,e,n,r,i,o,a){const s=Math.pow(t-n,2)+Math.pow(e-r,2),l=Math.sqrt(s);let c=1;c=l<200?1:l>500?.4:-.0016668*l+1.233334;let h=i.maxRandomnessOffset||0;h*h*100>s&&(h=l/10);const u=h/2,d=.2+.2*D(i);let p=i.bowing*i.maxRandomnessOffset*(r-e)/200,f=i.bowing*i.maxRandomnessOffset*(t-n)/200;p=F(p,i,c),f=F(f,i,c);const g=[],m=()=>F(u,i,c),A=()=>F(h,i,c),y=i.preserveVertices;return o&&(a?g.push({op:"move",data:[t+(y?0:m()),e+(y?0:m())]}):g.push({op:"move",data:[t+(y?0:F(h,i,c)),e+(y?0:F(h,i,c))]})),a?g.push({op:"bcurveTo",data:[p+t+(n-t)*d+m(),f+e+(r-e)*d+m(),p+t+2*(n-t)*d+m(),f+e+2*(r-e)*d+m(),n+(y?0:m()),r+(y?0:m())]}):g.push({op:"bcurveTo",data:[p+t+(n-t)*d+A(),f+e+(r-e)*d+A(),p+t+2*(n-t)*d+A(),f+e+2*(r-e)*d+A(),n+(y?0:A()),r+(y?0:A())]}),g}function $(t,e,n){if(!t.length)return[];const r=[];r.push([t[0][0]+F(e,n),t[0][1]+F(e,n)]),r.push([t[0][0]+F(e,n),t[0][1]+F(e,n)]);for(let i=1;i<t.length;i++)r.push([t[i][0]+F(e,n),t[i][1]+F(e,n)]),i===t.length-1&&r.push([t[i][0]+F(e,n),t[i][1]+F(e,n)]);return R(r,null,n)}function R(t,e,n){const r=t.length,i=[];if(r>3){const o=[],a=1-n.curveTightness;i.push({op:"move",data:[t[1][0],t[1][1]]});for(let e=1;e+2<r;e++){const n=t[e];o[0]=[n[0],n[1]],o[1]=[n[0]+(a*t[e+1][0]-a*t[e-1][0])/6,n[1]+(a*t[e+1][1]-a*t[e-1][1])/6],o[2]=[t[e+1][0]+(a*t[e][0]-a*t[e+2][0])/6,t[e+1][1]+(a*t[e][1]-a*t[e+2][1])/6],o[3]=[t[e+1][0],t[e+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}if(e&&2===e.length){const t=n.maxRandomnessOffset;i.push({op:"lineTo",data:[e[0]+F(t,n),e[1]+F(t,n)]})}}else 3===r?(i.push({op:"move",data:[t[1][0],t[1][1]]}),i.push({op:"bcurveTo",data:[t[1][0],t[1][1],t[2][0],t[2][1],t[2][0],t[2][1]]})):2===r&&i.push(...z(t[0][0],t[0][1],t[1][0],t[1][1],n,!0,!0));return i}function N(t,e,n,r,i,o,a,s){const l=[],c=[];if(0===s.roughness){t/=4,c.push([e+r*Math.cos(-t),n+i*Math.sin(-t)]);for(let o=0;o<=2*Math.PI;o+=t){const t=[e+r*Math.cos(o),n+i*Math.sin(o)];l.push(t),c.push(t)}c.push([e+r*Math.cos(0),n+i*Math.sin(0)]),c.push([e+r*Math.cos(t),n+i*Math.sin(t)])}else{const h=F(.5,s)-Math.PI/2;c.push([F(o,s)+e+.9*r*Math.cos(h-t),F(o,s)+n+.9*i*Math.sin(h-t)]);const u=2*Math.PI+h-.01;for(let a=h;a<u;a+=t){const t=[F(o,s)+e+r*Math.cos(a),F(o,s)+n+i*Math.sin(a)];l.push(t),c.push(t)}c.push([F(o,s)+e+r*Math.cos(h+2*Math.PI+.5*a),F(o,s)+n+i*Math.sin(h+2*Math.PI+.5*a)]),c.push([F(o,s)+e+.98*r*Math.cos(h+a),F(o,s)+n+.98*i*Math.sin(h+a)]),c.push([F(o,s)+e+.9*r*Math.cos(h+.5*a),F(o,s)+n+.9*i*Math.sin(h+.5*a)])}return[c,l]}function q(t,e,n,r,i,o,a,s,l){const c=o+F(.1,l),h=[];h.push([F(s,l)+e+.9*r*Math.cos(c-t),F(s,l)+n+.9*i*Math.sin(c-t)]);for(let o=c;o<=a;o+=t)h.push([F(s,l)+e+r*Math.cos(o),F(s,l)+n+i*Math.sin(o)]);return h.push([e+r*Math.cos(a),n+i*Math.sin(a)]),h.push([e+r*Math.cos(a),n+i*Math.sin(a)]),R(h,null,l)}function W(t,e,n,r,i,o,a,s){const l=[],c=[s.maxRandomnessOffset||1,(s.maxRandomnessOffset||1)+.3];let h=[0,0];const u=s.disableMultiStroke?1:2,d=s.preserveVertices;for(let p=0;p<u;p++)0===p?l.push({op:"move",data:[a[0],a[1]]}):l.push({op:"move",data:[a[0]+(d?0:F(c[0],s)),a[1]+(d?0:F(c[0],s))]}),h=d?[i,o]:[i+F(c[p],s),o+F(c[p],s)],l.push({op:"bcurveTo",data:[t+F(c[p],s),e+F(c[p],s),n+F(c[p],s),r+F(c[p],s),h[0],h[1]]});return l}function K(t){return[...t]}function U(t,e=0){const n=t.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(3===n)r.push(K(t[0]),K(t[1]),K(t[2]),K(t[2]));else{const n=[];n.push(t[0],t[0]);for(let e=1;e<t.length;e++)n.push(t[e]),e===t.length-1&&n.push(t[e]);const i=[],o=1-e;r.push(K(n[0]));for(let t=1;t+2<n.length;t++){const e=n[t];i[0]=[e[0],e[1]],i[1]=[e[0]+(o*n[t+1][0]-o*n[t-1][0])/6,e[1]+(o*n[t+1][1]-o*n[t-1][1])/6],i[2]=[n[t+1][0]+(o*n[t][0]-o*n[t+2][0])/6,n[t+1][1]+(o*n[t][1]-o*n[t+2][1])/6],i[3]=[n[t+1][0],n[t+1][1]],r.push(i[1],i[2],i[3])}}return r}function H(t,e){return Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)}function G(t,e,n){const r=H(e,n);if(0===r)return H(t,e);let i=((t[0]-e[0])*(n[0]-e[0])+(t[1]-e[1])*(n[1]-e[1]))/r;return i=Math.max(0,Math.min(1,i)),H(t,Y(e,n,i))}function Y(t,e,n){return[t[0]+(e[0]-t[0])*n,t[1]+(e[1]-t[1])*n]}function V(t,e,n,r){const i=r||[];if(function(t,e){const n=t[e+0],r=t[e+1],i=t[e+2],o=t[e+3];let a=3*r[0]-2*n[0]-o[0];a*=a;let s=3*r[1]-2*n[1]-o[1];s*=s;let l=3*i[0]-2*o[0]-n[0];l*=l;let c=3*i[1]-2*o[1]-n[1];return c*=c,a<l&&(a=l),s<c&&(s=c),a+s}(t,e)<n){const n=t[e+0];i.length?(o=i[i.length-1],a=n,Math.sqrt(H(o,a))>1&&i.push(n)):i.push(n),i.push(t[e+3])}else{const r=.5,o=t[e+0],a=t[e+1],s=t[e+2],l=t[e+3],c=Y(o,a,r),h=Y(a,s,r),u=Y(s,l,r),d=Y(c,h,r),p=Y(h,u,r),f=Y(d,p,r);V([o,c,d,f],0,n,i),V([f,p,u,l],0,n,i)}var o,a;return i}function Q(t,e){return X(t,0,t.length,e)}function X(t,e,n,r,i){const o=i||[],a=t[e],s=t[n-1];let l=0,c=1;for(let r=e+1;r<n-1;++r){const e=G(t[r],a,s);e>l&&(l=e,c=r)}return Math.sqrt(l)>r?(X(t,e,c+1,r,o),X(t,c,n,r,o)):(o.length||o.push(a),o.push(s)),o}function Z(t,e=.15,n){const r=[],i=(t.length-1)/3;for(let n=0;n<i;n++)V(t,3*n,e,r);return n&&n>0?X(r,0,r.length,n):r}const J="none";class tt{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,n){return{shape:t,sets:e||[],options:n||this.defaultOptions}}line(t,e,n,r,i){const o=this._o(i);return this._d("line",[w(t,e,n,r,o)],o)}rectangle(t,e,n,r,i){const o=this._o(i),a=[],s=function(t,e,n,r,i){return function(t,e){return B(t,!0,e)}([[t,e],[t+n,e],[t+n,e+r],[t,e+r]],i)}(t,e,n,r,o);if(o.fill){const i=[[t,e],[t+n,e],[t+n,e+r],[t,e+r]];"solid"===o.fillStyle?a.push(M([i],o)):a.push(L([i],o))}return o.stroke!==J&&a.push(s),this._d("rectangle",a,o)}ellipse(t,e,n,r,i){const o=this._o(i),a=[],s=S(n,r,o),l=_(t,e,o,s);if(o.fill)if("solid"===o.fillStyle){const n=_(t,e,o,s).opset;n.type="fillPath",a.push(n)}else a.push(L([l.estimatedPoints],o));return o.stroke!==J&&a.push(l.opset),this._d("ellipse",a,o)}circle(t,e,n,r){const i=this.ellipse(t,e,n,n,r);return i.shape="circle",i}linearPath(t,e){const n=this._o(e);return this._d("linearPath",[B(t,!1,n)],n)}arc(t,e,n,r,i,o,a=!1,s){const l=this._o(s),c=[],h=E(t,e,n,r,i,o,a,!0,l);if(a&&l.fill)if("solid"===l.fillStyle){const a=Object.assign({},l);a.disableMultiStroke=!0;const s=E(t,e,n,r,i,o,!0,!1,a);s.type="fillPath",c.push(s)}else c.push(function(t,e,n,r,i,o,a){const s=t,l=e;let c=Math.abs(n/2),h=Math.abs(r/2);c+=F(.01*c,a),h+=F(.01*h,a);let u=i,d=o;for(;u<0;)u+=2*Math.PI,d+=2*Math.PI;d-u>2*Math.PI&&(u=0,d=2*Math.PI);const p=(d-u)/a.curveStepCount,f=[];for(let t=u;t<=d;t+=p)f.push([s+c*Math.cos(t),l+h*Math.sin(t)]);return f.push([s+c*Math.cos(d),l+h*Math.sin(d)]),f.push([s,l]),L([f],a)}(t,e,n,r,i,o,l));return l.stroke!==J&&c.push(h),this._d("arc",c,l)}curve(t,e){const n=this._o(e),r=[],i=I(t,n);if(n.fill&&n.fill!==J)if("solid"===n.fillStyle){const e=I(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else{const e=[],i=t;if(i.length){const t="number"==typeof i[0][0]?[i]:i;for(const r of t)r.length<3?e.push(...r):3===r.length?e.push(...Z(U([r[0],r[0],r[1],r[2]]),10,(1+n.roughness)/2)):e.push(...Z(U(r),10,(1+n.roughness)/2))}e.length&&r.push(L([e],n))}return n.stroke!==J&&r.push(i),this._d("curve",r,n)}polygon(t,e){const n=this._o(e),r=[],i=B(t,!0,n);return n.fill&&("solid"===n.fillStyle?r.push(M([t],n)):r.push(L([t],n))),n.stroke!==J&&r.push(i),this._d("polygon",r,n)}path(t,e){const n=this._o(e),r=[];if(!t)return this._d("path",r,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=n.fill&&"transparent"!==n.fill&&n.fill!==J,o=n.stroke!==J,a=!!(n.simplification&&n.simplification<1),s=function(t,e,n){const r=x(b(y(t))),i=[];let o=[],a=[0,0],s=[];const l=()=>{s.length>=4&&o.push(...Z(s,1)),s=[]},c=()=>{l(),o.length&&(i.push(o),o=[])};for(const{key:t,data:e}of r)switch(t){case"M":c(),a=[e[0],e[1]],o.push(a);break;case"L":l(),o.push([e[0],e[1]]);break;case"C":if(!s.length){const t=o.length?o[o.length-1]:a;s.push([t[0],t[1]])}s.push([e[0],e[1]]),s.push([e[2],e[3]]),s.push([e[4],e[5]]);break;case"Z":l(),o.push([a[0],a[1]])}if(c(),!n)return i;const h=[];for(const t of i){const e=Q(t,n);e.length&&h.push(e)}return h}(t,0,a?4-4*(n.simplification||1):(1+n.roughness)/2),l=T(t,n);if(i)if("solid"===n.fillStyle)if(1===s.length){const e=T(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));r.push({type:"fillPath",ops:this._mergedShape(e.ops)})}else r.push(M(s,n));else r.push(L(s,n));return o&&(a?s.forEach(t=>{r.push(B(t,!1,n))}):r.push(l)),this._d("path",r,n)}opsToPath(t,e){let n="";for(const r of t.ops){const t="number"==typeof e&&e>=0?r.data.map(t=>+t.toFixed(e)):r.data;switch(r.op){case"move":n+=`M${t[0]} ${t[1]} `;break;case"bcurveTo":n+=`C${t[0]} ${t[1]}, ${t[2]} ${t[3]}, ${t[4]} ${t[5]} `;break;case"lineTo":n+=`L${t[0]} ${t[1]} `}}return n.trim()}toPaths(t){const e=t.sets||[],n=t.options||this.defaultOptions,r=[];for(const t of e){let e=null;switch(t.type){case"path":e={d:this.opsToPath(t),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:J};break;case"fillPath":e={d:this.opsToPath(t),stroke:J,strokeWidth:0,fill:n.fill||J};break;case"fillSketch":e=this.fillSketch(t,n)}e&&r.push(e)}return r}fillSketch(t,e){let n=e.fillWeight;return n<0&&(n=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||J,strokeWidth:n,fill:J}}_mergedShape(t){return t.filter((t,e)=>0===e||"move"!==t.op)}}class et{constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new tt(e)}draw(t){const e=t.sets||[],n=t.options||this.getDefaultOptions(),r=this.ctx,i=t.options.fixedDecimalPlaceDigits;for(const o of e)switch(o.type){case"path":r.save(),r.strokeStyle="none"===n.stroke?"transparent":n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,o,i),r.restore();break;case"fillPath":{r.save(),r.fillStyle=n.fill||"";const e="curve"===t.shape||"polygon"===t.shape||"path"===t.shape?"evenodd":"nonzero";this._drawToContext(r,o,i,e),r.restore();break}case"fillSketch":this.fillSketch(r,o,n)}}fillSketch(t,e,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=r,this._drawToContext(t,e,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,n,r="nonzero"){t.beginPath();for(const r of e.ops){const e="number"==typeof n&&n>=0?r.data.map(t=>+t.toFixed(n)):r.data;switch(r.op){case"move":t.moveTo(e[0],e[1]);break;case"bcurveTo":t.bezierCurveTo(e[0],e[1],e[2],e[3],e[4],e[5]);break;case"lineTo":t.lineTo(e[0],e[1])}}"fillPath"===e.type?t.fill(r):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,n,r,i){const o=this.gen.line(t,e,n,r,i);return this.draw(o),o}rectangle(t,e,n,r,i){const o=this.gen.rectangle(t,e,n,r,i);return this.draw(o),o}ellipse(t,e,n,r,i){const o=this.gen.ellipse(t,e,n,r,i);return this.draw(o),o}circle(t,e,n,r){const i=this.gen.circle(t,e,n,r);return this.draw(i),i}linearPath(t,e){const n=this.gen.linearPath(t,e);return this.draw(n),n}polygon(t,e){const n=this.gen.polygon(t,e);return this.draw(n),n}arc(t,e,n,r,i,o,a=!1,s){const l=this.gen.arc(t,e,n,r,i,o,a,s);return this.draw(l),l}curve(t,e){const n=this.gen.curve(t,e);return this.draw(n),n}path(t,e){const n=this.gen.path(t,e);return this.draw(n),n}}const nt="http://www.w3.org/2000/svg";class rt{constructor(t,e){this.svg=t,this.gen=new tt(e)}draw(t){const e=t.sets||[],n=t.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,i=r.createElementNS(nt,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of e){let e=null;switch(a.type){case"path":e=r.createElementNS(nt,"path"),e.setAttribute("d",this.opsToPath(a,o)),e.setAttribute("stroke",n.stroke),e.setAttribute("stroke-width",n.strokeWidth+""),e.setAttribute("fill","none"),n.strokeLineDash&&e.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&e.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":e=r.createElementNS(nt,"path"),e.setAttribute("d",this.opsToPath(a,o)),e.setAttribute("stroke","none"),e.setAttribute("stroke-width","0"),e.setAttribute("fill",n.fill||""),"curve"!==t.shape&&"polygon"!==t.shape||e.setAttribute("fill-rule","evenodd");break;case"fillSketch":e=this.fillSketch(r,a,n)}e&&i.appendChild(e)}return i}fillSketch(t,e,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);const i=t.createElementNS(nt,"path");return i.setAttribute("d",this.opsToPath(e,n.fixedDecimalPlaceDigits)),i.setAttribute("stroke",n.fill||""),i.setAttribute("stroke-width",r+""),i.setAttribute("fill","none"),n.fillLineDash&&i.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,n,r,i){const o=this.gen.line(t,e,n,r,i);return this.draw(o)}rectangle(t,e,n,r,i){const o=this.gen.rectangle(t,e,n,r,i);return this.draw(o)}ellipse(t,e,n,r,i){const o=this.gen.ellipse(t,e,n,r,i);return this.draw(o)}circle(t,e,n,r){const i=this.gen.circle(t,e,n,r);return this.draw(i)}linearPath(t,e){const n=this.gen.linearPath(t,e);return this.draw(n)}polygon(t,e){const n=this.gen.polygon(t,e);return this.draw(n)}arc(t,e,n,r,i,o,a=!1,s){const l=this.gen.arc(t,e,n,r,i,o,a,s);return this.draw(l)}curve(t,e){const n=this.gen.curve(t,e);return this.draw(n)}path(t,e){const n=this.gen.path(t,e);return this.draw(n)}}var it={canvas:(t,e)=>new et(t,e),svg:(t,e)=>new rt(t,e),generator:t=>new tt(t),newSeed:()=>tt.newSeed()}},52528:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(84171);const i=function(t,e,n){"__proto__"==e&&r.A?(0,r.A)(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}},52789:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t){return function(e){return t(e)}}},52851:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(52528),i=n(66984),o=Object.prototype.hasOwnProperty;const a=function(t,e,n){var a=t[e];o.call(t,e)&&(0,i.A)(a,n)&&(void 0!==n||e in t)||(0,r.A)(t,e,n)}},53098:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t){return null!=t&&"object"==typeof t}},53533:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(38446),i=n(53098);const o=function(t){return(0,i.A)(t)&&(0,r.A)(t)}},54749:(t,e,n)=>{"use strict";n.d(e,{A:()=>h});var r=n(2383),i=n(5254),o=n(53098),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1;var s=n(52789),l=n(64841),c=l.A&&l.A.isTypedArray;const h=c?(0,s.A)(c):function(t){return(0,o.A)(t)&&(0,i.A)(t.length)&&!!a[(0,r.A)(t)]}},55056:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},57424:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var r=n(39142),i=n(84171),o=n(29008);const a=i.A?function(t,e){return(0,i.A)(t,"toString",{configurable:!0,enumerable:!1,value:(0,r.A)(e),writable:!0})}:o.A;var s=Date.now;const l=(c=a,h=0,u=0,function(){var t=s(),e=16-(t-u);if(u=t,e>0){if(++h>=800)return arguments[0]}else h=0;return c.apply(void 0,arguments)});var c,h,u},60023:(t,e,n)=>{"use strict";n.d(e,{xI:()=>lt});let r={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function i(t){r=t}const o=/[&<>"']/,a=new RegExp(o.source,"g"),s=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,l=new RegExp(s.source,"g"),c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},h=t=>c[t];function u(t,e){if(e){if(o.test(t))return t.replace(a,h)}else if(s.test(t))return t.replace(l,h);return t}const d=/(^|[^\[])\^/g;function p(t,e){let n="string"==typeof t?t:t.source;e=e||"";const r={replace:(t,e)=>{let i="string"==typeof e?e:e.source;return i=i.replace(d,"$1"),n=n.replace(t,i),r},getRegex:()=>new RegExp(n,e)};return r}function f(t){try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const g={exec:()=>null};function m(t,e){const n=t.replace(/\|/g,(t,e,n)=>{let r=!1,i=e;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(/ \|/);let r=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function A(t,e,n){const r=t.length;if(0===r)return"";let i=0;for(;i<r;){const o=t.charAt(r-i-1);if(o!==e||n){if(o===e||!n)break;i++}else i++}return t.slice(0,r-i)}function y(t,e,n,r){const i=e.href,o=e.title?u(e.title):null,a=t[1].replace(/\\([\[\]])/g,"$1");if("!"!==t[0].charAt(0)){r.state.inLink=!0;const t={type:"link",raw:n,href:i,title:o,text:a,tokens:r.inlineTokens(a)};return r.state.inLink=!1,t}return{type:"image",raw:n,href:i,title:o,text:u(a)}}class b{options;rules;lexer;constructor(t){this.options=t||r}space(t){const e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){const e=this.rules.block.code.exec(t);if(e){const t=e[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:A(t,"\n")}}}fences(t){const e=this.rules.block.fences.exec(t);if(e){const t=e[0],n=function(t,e){const n=t.match(/^(\s+)(?:```)/);if(null===n)return e;const r=n[1];return e.split("\n").map(t=>{const e=t.match(/^\s+/);if(null===e)return t;const[n]=e;return n.length>=r.length?t.slice(r.length):t}).join("\n")}(t,e[3]||"");return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(t){const e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(/#$/.test(t)){const e=A(t,"#");this.options.pedantic?t=e.trim():e&&!/ $/.test(e)||(t=e.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(t){const e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:A(e[0],"\n")}}blockquote(t){const e=this.rules.block.blockquote.exec(t);if(e){let t=A(e[0],"\n").split("\n"),n="",r="";const i=[];for(;t.length>0;){let e=!1;const o=[];let a;for(a=0;a<t.length;a++)if(/^ {0,3}>/.test(t[a]))o.push(t[a]),e=!0;else{if(e)break;o.push(t[a])}t=t.slice(a);const s=o.join("\n"),l=s.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}\n${s}`:s,r=r?`${r}\n${l}`:l;const c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===t.length)break;const h=i[i.length-1];if("code"===h?.type)break;if("blockquote"===h?.type){const e=h,o=e.raw+"\n"+t.join("\n"),a=this.blockquote(o);i[i.length-1]=a,n=n.substring(0,n.length-e.raw.length)+a.raw,r=r.substring(0,r.length-e.text.length)+a.text;break}if("list"===h?.type){const e=h,o=e.raw+"\n"+t.join("\n"),a=this.list(o);i[i.length-1]=a,n=n.substring(0,n.length-h.raw.length)+a.raw,r=r.substring(0,r.length-e.raw.length)+a.raw,t=o.substring(i[i.length-1].raw.length).split("\n");continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let a=!1;for(;t;){let n=!1,r="",s="";if(!(e=o.exec(t)))break;if(this.rules.block.hr.test(t))break;r=e[0],t=t.substring(r.length);let l=e[2].split("\n",1)[0].replace(/^\t+/,t=>" ".repeat(3*t.length)),c=t.split("\n",1)[0],h=!l.trim(),u=0;if(this.options.pedantic?(u=2,s=l.trimStart()):h?u=e[1].length+1:(u=e[2].search(/[^ ]/),u=u>4?1:u,s=l.slice(u),u+=e[1].length),h&&/^[ \t]*$/.test(c)&&(r+=c+"\n",t=t.substring(c.length+1),n=!0),!n){const e=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,u-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,u-1)}}(?:\`\`\`|~~~)`),o=new RegExp(`^ {0,${Math.min(3,u-1)}}#`),a=new RegExp(`^ {0,${Math.min(3,u-1)}}<(?:[a-z].*>|!--)`,"i");for(;t;){const d=t.split("\n",1)[0];let p;if(c=d,this.options.pedantic?(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),p=c):p=c.replace(/\t/g,"    "),i.test(c))break;if(o.test(c))break;if(a.test(c))break;if(e.test(c))break;if(n.test(c))break;if(p.search(/[^ ]/)>=u||!c.trim())s+="\n"+p.slice(u);else{if(h)break;if(l.replace(/\t/g,"    ").search(/[^ ]/)>=4)break;if(i.test(l))break;if(o.test(l))break;if(n.test(l))break;s+="\n"+c}h||c.trim()||(h=!0),r+=d+"\n",t=t.substring(d.length+1),l=p.slice(u)}}i.loose||(a?i.loose=!0:/\n[ \t]*\n[ \t]*$/.test(r)&&(a=!0));let d,p=null;this.options.gfm&&(p=/^\[[ xX]\] /.exec(s),p&&(d="[ ] "!==p[0],s=s.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:r,task:!!p,checked:d,loose:!1,text:s,tokens:[]}),i.raw+=r}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let t=0;t<i.items.length;t++)if(this.lexer.state.top=!1,i.items[t].tokens=this.lexer.blockTokens(i.items[t].text,[]),!i.loose){const e=i.items[t].tokens.filter(t=>"space"===t.type),n=e.length>0&&e.some(t=>/\n.*\n/.test(t.raw));i.loose=n}if(i.loose)for(let t=0;t<i.items.length;t++)i.items[t].loose=!0;return i}}html(t){const e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}def(t){const e=this.rules.block.def.exec(t);if(e){const t=e[1].toLowerCase().replace(/\s+/g," "),n=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(t){const e=this.rules.block.table.exec(t);if(!e)return;if(!/[:|]/.test(e[2]))return;const n=m(e[1]),r=e[2].replace(/^\||\| *$/g,"").split("|"),i=e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split("\n"):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const t of r)/^ *-+: *$/.test(t)?o.align.push("right"):/^ *:-+: *$/.test(t)?o.align.push("center"):/^ *:-+ *$/.test(t)?o.align.push("left"):o.align.push(null);for(let t=0;t<n.length;t++)o.header.push({text:n[t],tokens:this.lexer.inline(n[t]),header:!0,align:o.align[t]});for(const t of i)o.rows.push(m(t,o.header.length).map((t,e)=>({text:t,tokens:this.lexer.inline(t),header:!1,align:o.align[e]})));return o}}lheading(t){const e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){const e=this.rules.block.paragraph.exec(t);if(e){const t="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(t){const e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){const e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:u(e[1])}}tag(t){const e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){const e=this.rules.inline.link.exec(t);if(e){const t=e[2].trim();if(!this.options.pedantic&&/^</.test(t)){if(!/>$/.test(t))return;const e=A(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{const t=function(t,e){if(-1===t.indexOf(e[1]))return-1;let n=0;for(let r=0;r<t.length;r++)if("\\"===t[r])r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return-1}(e[2],"()");if(t>-1){const n=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,n).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){const t=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);t&&(n=t[1],r=t[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(t)?n.slice(1):n.slice(1,-1)),y(e,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r},e[0],this.lexer)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){const t=e[(n[2]||n[1]).replace(/\s+/g," ").toLowerCase()];if(!t){const t=n[0].charAt(0);return{type:"text",raw:t,text:t}}return y(n,t,n[0],this.lexer)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(r&&(!r[3]||!n.match(/[\p{L}\p{N}]/u))&&(!r[1]&&!r[2]||!n||this.rules.inline.punctuation.exec(n))){const n=[...r[0]].length-1;let i,o,a=n,s=0;const l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+n);null!=(r=l.exec(e));){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=[...i].length,r[3]||r[4]){a+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){s+=o;continue}if(a-=o,a>0)continue;o=Math.min(o,o+a+s);const e=[...r[0]][0].length,l=t.slice(0,n+r.index+e+o);if(Math.min(n,o)%2){const t=l.slice(1,-1);return{type:"em",raw:l,text:t,tokens:this.lexer.inlineTokens(t)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(t){const e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(/\n/g," ");const n=/[^ ]/.test(t),r=/^ /.test(t)&&/ $/.test(t);return n&&r&&(t=t.substring(1,t.length-1)),t=u(t,!0),{type:"codespan",raw:e[0],text:t}}}br(t){const e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){const e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){const e=this.rules.inline.autolink.exec(t);if(e){let t,n;return"@"===e[2]?(t=u(e[1]),n="mailto:"+t):(t=u(e[1]),n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let t,n;if("@"===e[2])t=u(e[0]),n="mailto:"+t;else{let r;do{r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??""}while(r!==e[0]);t=u(e[0]),n="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t){const e=this.rules.inline.text.exec(t);if(e){let t;return t=this.lexer.state.inRawBlock?e[0]:u(e[0]),{type:"text",raw:e[0],text:t}}}}const x=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,v=/(?:[*+-]|\d{1,9}[.)])/,C=p(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,v).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),k=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,w=/(?!\s*\])(?:\\.|[^\[\]\\])+/,B=p(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",w).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),I=p(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,v).getRegex(),S="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",_=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,E=p("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",_).replace("tag",S).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),T=p(k).replace("hr",x).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",S).getRegex(),M={blockquote:p(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",T).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:B,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:x,html:E,lheading:C,list:I,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:T,table:g,text:/^[^\n]+/},L=p("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",x).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",S).getRegex(),O={...M,table:L,paragraph:p(k).replace("hr",x).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",L).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",S).getRegex()},D={...M,html:p("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",_).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:g,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:p(k).replace("hr",x).replace("heading"," *#{1,6} *[^\n]").replace("lheading",C).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},P=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,F=/^( {2,}|\\)\n(?!\s*$)/,j="\\p{P}\\p{S}",z=p(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,j).getRegex(),$=p(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,j).getRegex(),R=p("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,j).getRegex(),N=p("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,j).getRegex(),q=p(/\\([punct])/,"gu").replace(/punct/g,j).getRegex(),W=p(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),K=p(_).replace("(?:--\x3e|$)","--\x3e").getRegex(),U=p("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",K).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),H=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,G=p(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",H).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Y=p(/^!?\[(label)\]\[(ref)\]/).replace("label",H).replace("ref",w).getRegex(),V=p(/^!?\[(ref)\](?:\[\])?/).replace("ref",w).getRegex(),Q={_backpedal:g,anyPunctuation:q,autolink:W,blockSkip:/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,br:F,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:g,emStrongLDelim:$,emStrongRDelimAst:R,emStrongRDelimUnd:N,escape:P,link:G,nolink:V,punctuation:z,reflink:Y,reflinkSearch:p("reflink|nolink(?!\\()","g").replace("reflink",Y).replace("nolink",V).getRegex(),tag:U,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:g},X={...Q,link:p(/^!?\[(label)\]\((.*?)\)/).replace("label",H).getRegex(),reflink:p(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",H).getRegex()},Z={...Q,escape:p(P).replace("])","~|])").getRegex(),url:p(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},J={...Z,br:p(F).replace("{2,}","*").getRegex(),text:p(Z.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},tt={normal:M,gfm:O,pedantic:D},et={normal:Q,gfm:Z,breaks:J,pedantic:X};class nt{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||r,this.options.tokenizer=this.options.tokenizer||new b,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const e={block:tt.normal,inline:et.normal};this.options.pedantic?(e.block=tt.pedantic,e.inline=et.pedantic):this.options.gfm&&(e.block=tt.gfm,this.options.breaks?e.inline=et.breaks:e.inline=et.gfm),this.tokenizer.rules=e}static get rules(){return{block:tt,inline:et}}static lex(t,e){return new nt(e).lex(t)}static lexInline(t,e){return new nt(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,"\n"),this.blockTokens(t,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],n=!1){let r,i,o;for(this.options.pedantic&&(t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""));t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(n=>!!(r=n.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0))))if(r=this.tokenizer.space(t))t=t.substring(r.raw.length),1===r.raw.length&&e.length>0?e[e.length-1].raw+="\n":e.push(r);else if(r=this.tokenizer.code(t))t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?e.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(r=this.tokenizer.fences(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.heading(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.hr(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.blockquote(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.list(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.html(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.def(t))t=t.substring(r.raw.length),i=e[e.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(r=this.tokenizer.table(t))t=t.substring(r.raw.length),e.push(r);else if(r=this.tokenizer.lheading(t))t=t.substring(r.raw.length),e.push(r);else{if(o=t,this.options.extensions&&this.options.extensions.startBlock){let e=1/0;const n=t.slice(1);let r;this.options.extensions.startBlock.forEach(t=>{r=t.call({lexer:this},n),"number"==typeof r&&r>=0&&(e=Math.min(e,r))}),e<1/0&&e>=0&&(o=t.substring(0,e+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o)))i=e[e.length-1],n&&"paragraph"===i?.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r),n=o.length!==t.length,t=t.substring(r.raw.length);else if(r=this.tokenizer.text(t))t=t.substring(r.raw.length),i=e[e.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):e.push(r);else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n,r,i,o,a,s,l=t;if(this.tokens.links){const t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l));)t.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l));)l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(l));)l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(a||(s=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(r=>!!(n=r.call({lexer:this},t,e))&&(t=t.substring(n.raw.length),e.push(n),!0))))if(n=this.tokenizer.escape(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.tag(t))t=t.substring(n.raw.length),r=e[e.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):e.push(n);else if(n=this.tokenizer.link(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.reflink(t,this.tokens.links))t=t.substring(n.raw.length),r=e[e.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):e.push(n);else if(n=this.tokenizer.emStrong(t,l,s))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.codespan(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.br(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.del(t))t=t.substring(n.raw.length),e.push(n);else if(n=this.tokenizer.autolink(t))t=t.substring(n.raw.length),e.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(t))){if(i=t,this.options.extensions&&this.options.extensions.startInline){let e=1/0;const n=t.slice(1);let r;this.options.extensions.startInline.forEach(t=>{r=t.call({lexer:this},n),"number"==typeof r&&r>=0&&(e=Math.min(e,r))}),e<1/0&&e>=0&&(i=t.substring(0,e+1))}if(n=this.tokenizer.inlineText(i))t=t.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(s=n.raw.slice(-1)),a=!0,r=e[e.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):e.push(n);else if(t){const e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}else t=t.substring(n.raw.length),e.push(n);return e}}class rt{options;parser;constructor(t){this.options=t||r}space(t){return""}code({text:t,lang:e,escaped:n}){const r=(e||"").match(/^\S*/)?.[0],i=t.replace(/\n$/,"")+"\n";return r?'<pre><code class="language-'+u(r)+'">'+(n?i:u(i,!0))+"</code></pre>\n":"<pre><code>"+(n?i:u(i,!0))+"</code></pre>\n"}blockquote({tokens:t}){return`<blockquote>\n${this.parser.parse(t)}</blockquote>\n`}html({text:t}){return t}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>\n`}hr(t){return"<hr>\n"}list(t){const e=t.ordered,n=t.start;let r="";for(let e=0;e<t.items.length;e++){const n=t.items[e];r+=this.listitem(n)}const i=e?"ol":"ul";return"<"+i+(e&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+i+">\n"}listitem(t){let e="";if(t.task){const n=this.checkbox({checked:!!t.checked});t.loose?t.tokens.length>0&&"paragraph"===t.tokens[0].type?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=n+" "+t.tokens[0].tokens[0].text)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):e+=n+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>\n`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>\n`}table(t){let e="",n="";for(let e=0;e<t.header.length;e++)n+=this.tablecell(t.header[e]);e+=this.tablerow({text:n});let r="";for(let e=0;e<t.rows.length;e++){const i=t.rows[e];n="";for(let t=0;t<i.length;t++)n+=this.tablecell(i[t]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+r+"</table>\n"}tablerow({text:t}){return`<tr>\n${t}</tr>\n`}tablecell(t){const e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${t}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){const r=this.parser.parseInline(n),i=f(t);if(null===i)return r;let o='<a href="'+(t=i)+'"';return e&&(o+=' title="'+e+'"'),o+=">"+r+"</a>",o}image({href:t,title:e,text:n}){const r=f(t);if(null===r)return n;let i=`<img src="${t=r}" alt="${n}"`;return e&&(i+=` title="${e}"`),i+=">",i}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):t.text}}class it{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}}class ot{options;renderer;textRenderer;constructor(t){this.options=t||r,this.options.renderer=this.options.renderer||new rt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new it}static parse(t,e){return new ot(e).parse(t)}static parseInline(t,e){return new ot(e).parseInline(t)}parse(t,e=!0){let n="";for(let r=0;r<t.length;r++){const i=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const t=i,e=this.options.extensions.renderers[t.type].call({parser:this},t);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(t.type)){n+=e||"";continue}}const o=i;switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let i=o,a=this.renderer.text(i);for(;r+1<t.length&&"text"===t[r+1].type;)i=t[++r],a+="\n"+this.renderer.text(i);n+=e?this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a}]}):a;continue}default:{const t='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}parseInline(t,e){e=e||this.renderer;let n="";for(let r=0;r<t.length;r++){const i=t[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const t=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==t||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=t||"";continue}}const o=i;switch(o.type){case"escape":case"text":n+=e.text(o);break;case"html":n+=e.html(o);break;case"link":n+=e.link(o);break;case"image":n+=e.image(o);break;case"strong":n+=e.strong(o);break;case"em":n+=e.em(o);break;case"codespan":n+=e.codespan(o);break;case"br":n+=e.br(o);break;case"del":n+=e.del(o);break;default:{const t='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}}class at{options;block;constructor(t){this.options=t||r}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}provideLexer(){return this.block?nt.lex:nt.lexInline}provideParser(){return this.block?ot.parse:ot.parseInline}}const st=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=ot;Renderer=rt;TextRenderer=it;Lexer=nt;Tokenizer=b;Hooks=at;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(const r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{const t=r;for(const r of t.header)n=n.concat(this.walkTokens(r.tokens,e));for(const r of t.rows)for(const t of r)n=n.concat(this.walkTokens(t.tokens,e));break}case"list":{const t=r;n=n.concat(this.walkTokens(t.items,e));break}default:{const t=r;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach(r=>{const i=t[r].flat(1/0);n=n.concat(this.walkTokens(i,e))}):t.tokens&&(n=n.concat(this.walkTokens(t.tokens,e)))}}return n}use(...t){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(t=>{const n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){const n=e.renderers[t.name];e.renderers[t.name]=n?function(...e){let r=t.renderer.apply(this,e);return!1===r&&(r=n.apply(this,e)),r}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");const n=e[t.level];n?n.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)}),n.extensions=e),t.renderer){const e=this.defaults.renderer||new rt(this.defaults);for(const n in t.renderer){if(!(n in e))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const r=n,i=t.renderer[r],o=e[r];e[r]=(...t)=>{let n=i.apply(e,t);return!1===n&&(n=o.apply(e,t)),n||""}}n.renderer=e}if(t.tokenizer){const e=this.defaults.tokenizer||new b(this.defaults);for(const n in t.tokenizer){if(!(n in e))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const r=n,i=t.tokenizer[r],o=e[r];e[r]=(...t)=>{let n=i.apply(e,t);return!1===n&&(n=o.apply(e,t)),n}}n.tokenizer=e}if(t.hooks){const e=this.defaults.hooks||new at;for(const n in t.hooks){if(!(n in e))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;const r=n,i=t.hooks[r],o=e[r];at.passThroughHooks.has(n)?e[r]=t=>{if(this.defaults.async)return Promise.resolve(i.call(e,t)).then(t=>o.call(e,t));const n=i.call(e,t);return o.call(e,n)}:e[r]=(...t)=>{let n=i.apply(e,t);return!1===n&&(n=o.apply(e,t)),n}}n.hooks=e}if(t.walkTokens){const e=this.defaults.walkTokens,r=t.walkTokens;n.walkTokens=function(t){let n=[];return n.push(r.call(this,t)),e&&(n=n.concat(e.call(this,t))),n}}this.defaults={...this.defaults,...n}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return nt.lex(t,e??this.defaults)}parser(t,e){return ot.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{const r={...n},i={...this.defaults,...r},o=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===r.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(null==e)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=t);const a=i.hooks?i.hooks.provideLexer():t?nt.lex:nt.lexInline,s=i.hooks?i.hooks.provideParser():t?ot.parse:ot.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(e):e).then(t=>a(t,i)).then(t=>i.hooks?i.hooks.processAllTokens(t):t).then(t=>i.walkTokens?Promise.all(this.walkTokens(t,i.walkTokens)).then(()=>t):t).then(t=>s(t,i)).then(t=>i.hooks?i.hooks.postprocess(t):t).catch(o);try{i.hooks&&(e=i.hooks.preprocess(e));let t=a(e,i);i.hooks&&(t=i.hooks.processAllTokens(t)),i.walkTokens&&this.walkTokens(t,i.walkTokens);let n=s(t,i);return i.hooks&&(n=i.hooks.postprocess(n)),n}catch(t){return o(t)}}}onError(t,e){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",t){const t="<p>An error occurred:</p><pre>"+u(n.message+"",!0)+"</pre>";return e?Promise.resolve(t):t}if(e)return Promise.reject(n);throw n}}};function lt(t,e){return st.parse(t,e)}lt.options=lt.setOptions=function(t){return st.setOptions(t),lt.defaults=st.defaults,i(lt.defaults),lt},lt.getDefaults=function(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},lt.defaults=r,lt.use=function(...t){return st.use(...t),lt.defaults=st.defaults,i(lt.defaults),lt},lt.walkTokens=function(t,e){return st.walkTokens(t,e)},lt.parseInline=st.parseInline,lt.Parser=ot,lt.parser=ot.parse,lt.Renderer=rt,lt.TextRenderer=it,lt.Lexer=nt,lt.lexer=nt.lex,lt.Tokenizer=b,lt.Hooks=at,lt.parse=lt,lt.options,lt.setOptions,lt.use,lt.walkTokens,lt.parseInline,ot.parse,nt.lex},60513:(t,e,n)=>{"use strict";function r(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from("string"==typeof t?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(t,e){var n=e.match(/\n([\t ]+|(?!\s).)/g);return n?t.concat(n.map(function(t){var e,n;return null!==(n=null===(e=t.match(/[\t ]/g))||void 0===e?void 0:e.length)&&void 0!==n?n:0})):t},[]);if(i.length){var o=new RegExp("\n[\t ]{"+Math.min.apply(Math,i)+"}","g");r=r.map(function(t){return t.replace(o,"\n")})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return e.forEach(function(t,e){var n=a.match(/(?:^|\n)( *)$/),i=n?n[1]:"",o=t;"string"==typeof t&&t.includes("\n")&&(o=String(t).split("\n").map(function(t,e){return 0===e?t:""+i+t}).join("\n")),a+=o+r[e+1]}),a}n.d(e,{T:()=>r})},62050:(t,e,n)=>{"use strict";n.d(e,{A:()=>d});const r=(0,n(28562).A)(Object,"create");var i=Object.prototype.hasOwnProperty;var o=Object.prototype.hasOwnProperty;function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=function(){this.__data__=r?r(null):{},this.size=0},a.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},a.prototype.get=function(t){var e=this.__data__;if(r){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(e,t)?e[t]:void 0},a.prototype.has=function(t){var e=this.__data__;return r?void 0!==e[t]:o.call(e,t)},a.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this};const s=a;var l=n(89469),c=n(68335);const h=function(t,e){var n,r,i=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?i["string"==typeof e?"string":"hash"]:i.map};function u(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}u.prototype.clear=function(){this.size=0,this.__data__={hash:new s,map:new(c.A||l.A),string:new s}},u.prototype.delete=function(t){var e=h(this,t).delete(t);return this.size-=e?1:0,e},u.prototype.get=function(t){return h(this,t).get(t)},u.prototype.has=function(t){return h(this,t).has(t)},u.prototype.set=function(t,e){var n=h(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const d=u},63122:(t,e,n)=>{"use strict";n.d(e,{Y:()=>i,Z:()=>o});var r=n(86309);const i={};for(let t=0;t<=255;t++)i[t]=r.A.unit.dec2hex(t);const o={ALL:0,RGB:1,HSL:2}},63245:(t,e,n)=>{"use strict";n.d(e,{O:()=>r});var r=(0,n(40797).K2)(({flowchart:t})=>{const e=t?.subGraphTitleMargin?.top??0,n=t?.subGraphTitleMargin?.bottom??0;return{subGraphTitleTopMargin:e,subGraphTitleBottomMargin:n,subGraphTitleTotalMargin:e+n}},"getSubGraphTitleMargins")},64841:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(72136),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof module&&module&&!module.nodeType&&module,a=o&&o.exports===i&&r.A.process;const s=function(){try{return o&&o.require&&o.require("util").types||a&&a.binding&&a.binding("util")}catch(t){}}()},65255:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=Math.max;const i=function(t,e,n){return e=r(void 0===e?t.length-1:e,0),function(){for(var i=arguments,o=-1,a=r(i.length-e,0),s=Array(a);++o<a;)s[o]=i[e+o];o=-1;for(var l=Array(e+1);++o<e;)l[o]=i[o];return l[e]=n(s),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,l)}}},66401:(t,e,n)=>{"use strict";n.d(e,{A:()=>d});var r=n(14453),i=n(9137),o=n(25175),a=n(92049),s=n(38446),l=n(41200),c=n(97271),h=n(54749),u=Object.prototype.hasOwnProperty;const d=function(t){if(null==t)return!0;if((0,s.A)(t)&&((0,a.A)(t)||"string"==typeof t||"function"==typeof t.splice||(0,l.A)(t)||(0,h.A)(t)||(0,o.A)(t)))return!t.length;var e=(0,i.A)(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if((0,c.A)(t))return!(0,r.A)(t).length;for(var n in t)if(u.call(t,n))return!1;return!0}},66984:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t,e){return t===e||t!=t&&e!=e}},67266:(t,e,n)=>{"use strict";n.d(e,{A:()=>a});var r=n(86309),i=n(63122);const o=class{constructor(){this.type=i.Z.ALL}get(){return this.type}set(t){if(this.type&&this.type!==t)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=t}reset(){this.type=i.Z.ALL}is(t){return this.type===t}},a=new class{constructor(t,e){this.color=e,this.changed=!1,this.data=t,this.type=new o}set(t,e){return this.color=e,this.changed=!1,this.data=t,this.type.type=i.Z.ALL,this}_ensureHSL(){const t=this.data,{h:e,s:n,l:i}=t;void 0===e&&(t.h=r.A.channel.rgb2hsl(t,"h")),void 0===n&&(t.s=r.A.channel.rgb2hsl(t,"s")),void 0===i&&(t.l=r.A.channel.rgb2hsl(t,"l"))}_ensureRGB(){const t=this.data,{r:e,g:n,b:i}=t;void 0===e&&(t.r=r.A.channel.hsl2rgb(t,"r")),void 0===n&&(t.g=r.A.channel.hsl2rgb(t,"g")),void 0===i&&(t.b=r.A.channel.hsl2rgb(t,"b"))}get r(){const t=this.data,e=t.r;return this.type.is(i.Z.HSL)||void 0===e?(this._ensureHSL(),r.A.channel.hsl2rgb(t,"r")):e}get g(){const t=this.data,e=t.g;return this.type.is(i.Z.HSL)||void 0===e?(this._ensureHSL(),r.A.channel.hsl2rgb(t,"g")):e}get b(){const t=this.data,e=t.b;return this.type.is(i.Z.HSL)||void 0===e?(this._ensureHSL(),r.A.channel.hsl2rgb(t,"b")):e}get h(){const t=this.data,e=t.h;return this.type.is(i.Z.RGB)||void 0===e?(this._ensureRGB(),r.A.channel.rgb2hsl(t,"h")):e}get s(){const t=this.data,e=t.s;return this.type.is(i.Z.RGB)||void 0===e?(this._ensureRGB(),r.A.channel.rgb2hsl(t,"s")):e}get l(){const t=this.data,e=t.l;return this.type.is(i.Z.RGB)||void 0===e?(this._ensureRGB(),r.A.channel.rgb2hsl(t,"l")):e}get a(){return this.data.a}set r(t){this.type.set(i.Z.RGB),this.changed=!0,this.data.r=t}set g(t){this.type.set(i.Z.RGB),this.changed=!0,this.data.g=t}set b(t){this.type.set(i.Z.RGB),this.changed=!0,this.data.b=t}set h(t){this.type.set(i.Z.HSL),this.changed=!0,this.data.h=t}set s(t){this.type.set(i.Z.HSL),this.changed=!0,this.data.s=t}set l(t){this.type.set(i.Z.HSL),this.changed=!0,this.data.l=t}set a(t){this.changed=!0,this.data.a=t}}({r:0,g:0,b:0,a:0},"transparent")},68335:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(28562),i=n(41917);const o=(0,r.A)(i.A,"Map")},69119:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BLANK_URL=e.relativeFirstCharacters=e.whitespaceEscapeCharsRegex=e.urlSchemeRegex=e.ctrlCharactersRegex=e.htmlCtrlEntityRegex=e.htmlEntitiesRegex=e.invalidProtocolRegex=void 0,e.invalidProtocolRegex=/^([^\w]*)(javascript|data|vbscript)/im,e.htmlEntitiesRegex=/&#(\w+)(^\w|;)?/g,e.htmlCtrlEntityRegex=/&(newline|tab);/gi,e.ctrlCharactersRegex=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,e.urlSchemeRegex=/^.+(:|&colon;)/gim,e.whitespaceEscapeCharsRegex=/(\\|%5[cC])((%(6[eE]|72|74))|[nrt])/g,e.relativeFirstCharacters=[".","/"],e.BLANK_URL="about:blank"},70607:(t,e,n)=>{"use strict";n.d(e,{W6:()=>te,GZ:()=>ie,WY:()=>Nt,pC:()=>zt,hE:()=>re,Gc:()=>Pt});var r=n(13226),i=n(80144),o=n(40797);const a=(t,e)=>!!t&&!(!(e&&""===t.prefix||t.prefix)||!t.name),s=Object.freeze({left:0,top:0,width:16,height:16}),l=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),c=Object.freeze({...s,...l}),h=Object.freeze({...c,body:"",hidden:!1});function u(t,e){const n=function(t,e){const n={};!t.hFlip!=!e.hFlip&&(n.hFlip=!0),!t.vFlip!=!e.vFlip&&(n.vFlip=!0);const r=((t.rotate||0)+(e.rotate||0))%4;return r&&(n.rotate=r),n}(t,e);for(const r in h)r in l?r in t&&!(r in n)&&(n[r]=l[r]):r in e?n[r]=e[r]:r in t&&(n[r]=t[r]);return n}function d(t,e,n){const r=t.icons,i=t.aliases||Object.create(null);let o={};function a(t){o=u(r[t]||i[t],o)}return a(e),n.forEach(a),u(t,o)}const p=Object.freeze({width:null,height:null}),f=Object.freeze({...p,...l}),g=/(-?[0-9.]*[0-9]+[0-9.]*)/g,m=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function A(t,e,n){if(1===e)return t;if(n=n||100,"number"==typeof t)return Math.ceil(t*e*n)/n;if("string"!=typeof t)return t;const r=t.split(g);if(null===r||!r.length)return t;const i=[];let o=r.shift(),a=m.test(o);for(;;){if(a){const t=parseFloat(o);isNaN(t)?i.push(o):i.push(Math.ceil(t*e*n)/n)}else i.push(o);if(o=r.shift(),void 0===o)return i.join("");a=!a}}const y=/\sid="(\S+)"/g,b="IconifyId"+Date.now().toString(16)+(16777216*Math.random()|0).toString(16);let x=0;var v=n(51444);var C={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};function k(t){C=t}var w={exec:()=>null};function B(t,e=""){let n="string"==typeof t?t:t.source,r={replace:(t,e)=>{let i="string"==typeof e?e:e.source;return i=i.replace(I.caret,"$1"),n=n.replace(t,i),r},getRegex:()=>new RegExp(n,e)};return r}var I={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:t=>new RegExp(`^( {0,3}${t})((?:[\t ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),hrRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}#`),htmlBeginRegex:t=>new RegExp(`^ {0,${Math.min(3,t-1)}}<(?:[a-z].*>|!--)`,"i")},S=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,_=/(?:[*+-]|\d{1,9}[.)])/,E=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,T=B(E).replace(/bull/g,_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),M=B(E).replace(/bull/g,_).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),L=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,O=/(?!\s*\])(?:\\[\s\S]|[^\[\]\\])+/,D=B(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",O).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),P=B(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,_).getRegex(),F="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",j=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,z=B("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",j).replace("tag",F).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),$=B(L).replace("hr",S).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F).getRegex(),R={blockquote:B(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",$).getRegex(),code:/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,def:D,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,hr:S,html:z,lheading:T,list:P,newline:/^(?:[ \t]*(?:\n|$))+/,paragraph:$,table:w,text:/^[^\n]+/},N=B("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",S).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F).getRegex(),q={...R,lheading:M,table:N,paragraph:B(L).replace("hr",S).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",N).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",F).getRegex()},W={...R,html:B("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",j).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:w,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:B(L).replace("hr",S).replace("heading"," *#{1,6} *[^\n]").replace("lheading",T).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},K=/^( {2,}|\\)\n(?!\s*$)/,U=/[\p{P}\p{S}]/u,H=/[\s\p{P}\p{S}]/u,G=/[^\s\p{P}\p{S}]/u,Y=B(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,H).getRegex(),V=/(?!~)[\p{P}\p{S}]/u,Q=B(/link|code|html/,"g").replace("link",/\[(?:[^\[\]`]|(?<!`)(?<a>`+)[^`]+\k<a>(?!`))*?\]\((?:\\[\s\S]|[^\\\(\)]|\((?:\\[\s\S]|[^\\\(\)])*\))*\)/).replace("code",/(?<!`)(?<b>`+)[^`]+\k<b>(?!`)/).replace("html",/<(?! )[^<>]*?>/).getRegex(),X=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Z=B(X,"u").replace(/punct/g,U).getRegex(),J=B(X,"u").replace(/punct/g,V).getRegex(),tt="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",et=B(tt,"gu").replace(/notPunctSpace/g,G).replace(/punctSpace/g,H).replace(/punct/g,U).getRegex(),nt=B(tt,"gu").replace(/notPunctSpace/g,/(?:[^\s\p{P}\p{S}]|~)/u).replace(/punctSpace/g,/(?!~)[\s\p{P}\p{S}]/u).replace(/punct/g,V).getRegex(),rt=B("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,G).replace(/punctSpace/g,H).replace(/punct/g,U).getRegex(),it=B(/\\(punct)/,"gu").replace(/punct/g,U).getRegex(),ot=B(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),at=B(j).replace("(?:--\x3e|$)","--\x3e").getRegex(),st=B("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",at).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),lt=/(?:\[(?:\\[\s\S]|[^\[\]\\])*\]|\\[\s\S]|`+[^`]*?`+(?!`)|[^\[\]\\`])*?/,ct=B(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",lt).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),ht=B(/^!?\[(label)\]\[(ref)\]/).replace("label",lt).replace("ref",O).getRegex(),ut=B(/^!?\[(ref)\](?:\[\])?/).replace("ref",O).getRegex(),dt=/[hH][tT][tT][pP][sS]?|[fF][tT][pP]/,pt={_backpedal:w,anyPunctuation:it,autolink:ot,blockSkip:Q,br:K,code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,del:w,emStrongLDelim:Z,emStrongRDelimAst:et,emStrongRDelimUnd:rt,escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,link:ct,nolink:ut,punctuation:Y,reflink:ht,reflinkSearch:B("reflink|nolink(?!\\()","g").replace("reflink",ht).replace("nolink",ut).getRegex(),tag:st,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,url:w},ft={...pt,link:B(/^!?\[(label)\]\((.*?)\)/).replace("label",lt).getRegex(),reflink:B(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",lt).getRegex()},gt={...pt,emStrongRDelimAst:nt,emStrongLDelim:J,url:B(/^((?:protocol):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/).replace("protocol",dt).replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\[\s\S]|[^\\])*?(?:\\[\s\S]|[^\s~\\]))\1(?=[^~]|$)/,text:B(/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|protocol:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/).replace("protocol",dt).getRegex()},mt={...gt,br:B(K).replace("{2,}","*").getRegex(),text:B(gt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},At={normal:R,gfm:q,pedantic:W},yt={normal:pt,gfm:gt,breaks:mt,pedantic:ft},bt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},xt=t=>bt[t];function vt(t,e){if(e){if(I.escapeTest.test(t))return t.replace(I.escapeReplace,xt)}else if(I.escapeTestNoEncode.test(t))return t.replace(I.escapeReplaceNoEncode,xt);return t}function Ct(t){try{t=encodeURI(t).replace(I.percentDecode,"%")}catch{return null}return t}function kt(t,e){let n=t.replace(I.findPipe,(t,e,n)=>{let r=!1,i=e;for(;--i>=0&&"\\"===n[i];)r=!r;return r?"|":" |"}).split(I.splitPipe),r=0;if(n[0].trim()||n.shift(),n.length>0&&!n.at(-1)?.trim()&&n.pop(),e)if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(I.slashPipe,"|");return n}function wt(t,e,n){let r=t.length;if(0===r)return"";let i=0;for(;i<r;){let o=t.charAt(r-i-1);if(o!==e||n){if(o===e||!n)break;i++}else i++}return t.slice(0,r-i)}function Bt(t,e,n,r,i){let o=e.href,a=e.title||null,s=t[1].replace(i.other.outputLinkReplace,"$1");r.state.inLink=!0;let l={type:"!"===t[0].charAt(0)?"image":"link",raw:n,href:o,title:a,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,l}var It=class{options;rules;lexer;constructor(t){this.options=t||C}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:wt(t,"\n")}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let t=e[0],n=function(t,e,n){let r=t.match(n.other.indentCodeCompensation);if(null===r)return e;let i=r[1];return e.split("\n").map(t=>{let e=t.match(n.other.beginningSpace);if(null===e)return t;let[r]=e;return r.length>=i.length?t.slice(i.length):t}).join("\n")}(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:n}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){let e=wt(t,"#");(this.options.pedantic||!e||this.rules.other.endingSpaceChar.test(e))&&(t=e.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:wt(e[0],"\n")}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let t=wt(e[0],"\n").split("\n"),n="",r="",i=[];for(;t.length>0;){let e,o=!1,a=[];for(e=0;e<t.length;e++)if(this.rules.other.blockquoteStart.test(t[e]))a.push(t[e]),o=!0;else{if(o)break;a.push(t[e])}t=t.slice(e);let s=a.join("\n"),l=s.replace(this.rules.other.blockquoteSetextReplace,"\n    $1").replace(this.rules.other.blockquoteSetextReplace2,"");n=n?`${n}\n${s}`:s,r=r?`${r}\n${l}`:l;let c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===t.length)break;let h=i.at(-1);if("code"===h?.type)break;if("blockquote"===h?.type){let e=h,o=e.raw+"\n"+t.join("\n"),a=this.blockquote(o);i[i.length-1]=a,n=n.substring(0,n.length-e.raw.length)+a.raw,r=r.substring(0,r.length-e.text.length)+a.text;break}if("list"===h?.type){let e=h,o=e.raw+"\n"+t.join("\n"),a=this.list(o);i[i.length-1]=a,n=n.substring(0,n.length-h.raw.length)+a.raw,r=r.substring(0,r.length-e.raw.length)+a.raw,t=o.substring(i.at(-1).raw.length).split("\n");continue}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let n=e[1].trim(),r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");let o=this.rules.other.listItemRegex(n),a=!1;for(;t;){let n=!1,r="",s="";if(!(e=o.exec(t))||this.rules.block.hr.test(t))break;r=e[0],t=t.substring(r.length);let l=e[2].split("\n",1)[0].replace(this.rules.other.listReplaceTabs,t=>" ".repeat(3*t.length)),c=t.split("\n",1)[0],h=!l.trim(),u=0;if(this.options.pedantic?(u=2,s=l.trimStart()):h?u=e[1].length+1:(u=e[2].search(this.rules.other.nonSpaceChar),u=u>4?1:u,s=l.slice(u),u+=e[1].length),h&&this.rules.other.blankLine.test(c)&&(r+=c+"\n",t=t.substring(c.length+1),n=!0),!n){let e=this.rules.other.nextBulletRegex(u),n=this.rules.other.hrRegex(u),i=this.rules.other.fencesBeginRegex(u),o=this.rules.other.headingBeginRegex(u),a=this.rules.other.htmlBeginRegex(u);for(;t;){let d,p=t.split("\n",1)[0];if(c=p,this.options.pedantic?(c=c.replace(this.rules.other.listReplaceNesting,"  "),d=c):d=c.replace(this.rules.other.tabCharGlobal,"    "),i.test(c)||o.test(c)||a.test(c)||e.test(c)||n.test(c))break;if(d.search(this.rules.other.nonSpaceChar)>=u||!c.trim())s+="\n"+d.slice(u);else{if(h||l.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||i.test(l)||o.test(l)||n.test(l))break;s+="\n"+c}!h&&!c.trim()&&(h=!0),r+=p+"\n",t=t.substring(p.length+1),l=d.slice(u)}}i.loose||(a?i.loose=!0:this.rules.other.doubleBlankLine.test(r)&&(a=!0));let d,p=null;this.options.gfm&&(p=this.rules.other.listIsTask.exec(s),p&&(d="[ ] "!==p[0],s=s.replace(this.rules.other.listReplaceTask,""))),i.items.push({type:"list_item",raw:r,task:!!p,checked:d,loose:!1,text:s,tokens:[]}),i.raw+=r}let s=i.items.at(-1);if(!s)return;s.raw=s.raw.trimEnd(),s.text=s.text.trimEnd(),i.raw=i.raw.trimEnd();for(let t=0;t<i.items.length;t++)if(this.lexer.state.top=!1,i.items[t].tokens=this.lexer.blockTokens(i.items[t].text,[]),!i.loose){let e=i.items[t].tokens.filter(t=>"space"===t.type),n=e.length>0&&e.some(t=>this.rules.other.anyLine.test(t.raw));i.loose=n}if(i.loose)for(let t=0;t<i.items.length;t++)i.items[t].loose=!0;return i}}html(t){let e=this.rules.block.html.exec(t);if(e)return{type:"html",block:!0,raw:e[0],pre:"pre"===e[1]||"script"===e[1]||"style"===e[1],text:e[0]}}def(t){let e=this.rules.block.def.exec(t);if(e){let t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),n=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:n,title:r}}}table(t){let e=this.rules.block.table.exec(t);if(!e||!this.rules.other.tableDelimiter.test(e[2]))return;let n=kt(e[1]),r=e[2].replace(this.rules.other.tableAlignChars,"").split("|"),i=e[3]?.trim()?e[3].replace(this.rules.other.tableRowBlankLine,"").split("\n"):[],o={type:"table",raw:e[0],header:[],align:[],rows:[]};if(n.length===r.length){for(let t of r)this.rules.other.tableAlignRight.test(t)?o.align.push("right"):this.rules.other.tableAlignCenter.test(t)?o.align.push("center"):this.rules.other.tableAlignLeft.test(t)?o.align.push("left"):o.align.push(null);for(let t=0;t<n.length;t++)o.header.push({text:n[t],tokens:this.lexer.inline(n[t]),header:!0,align:o.align[t]});for(let t of i)o.rows.push(kt(t,o.header.length).map((t,e)=>({text:t,tokens:this.lexer.inline(t),header:!1,align:o.align[e]})));return o}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:"="===e[2].charAt(0)?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let t="\n"===e[1].charAt(e[1].length-1)?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;let e=wt(t.slice(0,-1),"\\");if((t.length-e.length)%2==0)return}else{let t=function(t,e){if(-1===t.indexOf(e[1]))return-1;let n=0;for(let r=0;r<t.length;r++)if("\\"===t[r])r++;else if(t[r]===e[0])n++;else if(t[r]===e[1]&&(n--,n<0))return r;return n>0?-2:-1}(e[2],"()");if(-2===t)return;if(t>-1){let n=(0===e[0].indexOf("!")?5:4)+e[1].length+t;e[2]=e[2].substring(0,t),e[0]=e[0].substring(0,n).trim(),e[3]=""}}let n=e[2],r="";if(this.options.pedantic){let t=this.rules.other.pedanticHrefTitle.exec(n);t&&(n=t[1],r=t[3])}else r=e[3]?e[3].slice(1,-1):"";return n=n.trim(),this.rules.other.startAngleBracket.test(n)&&(n=this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?n.slice(1):n.slice(1,-1)),Bt(e,{href:n&&n.replace(this.rules.inline.anyPunctuation,"$1"),title:r&&r.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(t,e){let n;if((n=this.rules.inline.reflink.exec(t))||(n=this.rules.inline.nolink.exec(t))){let t=e[(n[2]||n[1]).replace(this.rules.other.multipleSpaceGlobal," ").toLowerCase()];if(!t){let t=n[0].charAt(0);return{type:"text",raw:t,text:t}}return Bt(n,t,n[0],this.lexer,this.rules)}}emStrong(t,e,n=""){let r=this.rules.inline.emStrongLDelim.exec(t);if(!(!r||r[3]&&n.match(this.rules.other.unicodeAlphaNumeric))&&(!r[1]&&!r[2]||!n||this.rules.inline.punctuation.exec(n))){let n,i,o=[...r[0]].length-1,a=o,s=0,l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(l.lastIndex=0,e=e.slice(-1*t.length+o);null!=(r=l.exec(e));){if(n=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!n)continue;if(i=[...n].length,r[3]||r[4]){a+=i;continue}if((r[5]||r[6])&&o%3&&!((o+i)%3)){s+=i;continue}if(a-=i,a>0)continue;i=Math.min(i,i+a+s);let e=[...r[0]][0].length,l=t.slice(0,o+r.index+e+i);if(Math.min(o,i)%2){let t=l.slice(1,-1);return{type:"em",raw:l,text:t,tokens:this.lexer.inlineTokens(t)}}let c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," "),n=this.rules.other.nonSpaceChar.test(t),r=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return n&&r&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t){let e=this.rules.inline.autolink.exec(t);if(e){let t,n;return"@"===e[2]?(t=e[1],n="mailto:"+t):(t=e[1],n=t),{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}url(t){let e;if(e=this.rules.inline.url.exec(t)){let t,n;if("@"===e[2])t=e[0],n="mailto:"+t;else{let r;do{r=e[0],e[0]=this.rules.inline._backpedal.exec(e[0])?.[0]??""}while(r!==e[0]);t=e[0],n="www."===e[1]?"http://"+e[0]:e[0]}return{type:"link",raw:e[0],text:t,href:n,tokens:[{type:"text",raw:t,text:t}]}}}inlineText(t){let e=this.rules.inline.text.exec(t);if(e){let t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},St=class t{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||C,this.options.tokenizer=this.options.tokenizer||new It,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={other:I,block:At.normal,inline:yt.normal};this.options.pedantic?(e.block=At.pedantic,e.inline=yt.pedantic):this.options.gfm&&(e.block=At.gfm,this.options.breaks?e.inline=yt.breaks:e.inline=yt.gfm),this.tokenizer.rules=e}static get rules(){return{block:At,inline:yt}}static lex(e,n){return new t(n).lex(e)}static lexInline(e,n){return new t(n).inlineTokens(e)}lex(t){t=t.replace(I.carriageReturn,"\n"),this.blockTokens(t,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){let e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,e=[],n=!1){for(this.options.pedantic&&(t=t.replace(I.tabCharGlobal,"    ").replace(I.spaceLine,""));t;){let r;if(this.options.extensions?.block?.some(n=>!!(r=n.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))continue;if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length);let n=e.at(-1);1===r.raw.length&&void 0!==n?n.raw+="\n":e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length);let n=e.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.text,this.inlineQueue.at(-1).src=n.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length);let n=e.at(-1);"paragraph"===n?.type||"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.raw,this.inlineQueue.at(-1).src=n.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title},e.push(r));continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}let i=t;if(this.options.extensions?.startBlock){let e,n=1/0,r=t.slice(1);this.options.extensions.startBlock.forEach(t=>{e=t.call({lexer:this},r),"number"==typeof e&&e>=0&&(n=Math.min(n,e))}),n<1/0&&n>=0&&(i=t.substring(0,n+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){let o=e.at(-1);n&&"paragraph"===o?.type?(o.raw+=(o.raw.endsWith("\n")?"":"\n")+r.raw,o.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=o.text):e.push(r),n=i.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length);let n=e.at(-1);"text"===n?.type?(n.raw+=(n.raw.endsWith("\n")?"":"\n")+r.raw,n.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=n.text):e.push(r);continue}if(t){let e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let n=t,r=null;if(this.tokens.links){let t=Object.keys(this.tokens.links);if(t.length>0)for(;null!=(r=this.tokenizer.rules.inline.reflinkSearch.exec(n));)t.includes(r[0].slice(r[0].lastIndexOf("[")+1,-1))&&(n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(r=this.tokenizer.rules.inline.anyPunctuation.exec(n));)n=n.slice(0,r.index)+"++"+n.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;null!=(r=this.tokenizer.rules.inline.blockSkip.exec(n));)n=n.slice(0,r.index)+"["+"a".repeat(r[0].length-2)+"]"+n.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);n=this.options.hooks?.emStrongMask?.call({lexer:this},n)??n;let i=!1,o="";for(;t;){let r;if(i||(o=""),i=!1,this.options.extensions?.inline?.some(n=>!!(r=n.call({lexer:this},t,e))&&(t=t.substring(r.raw.length),e.push(r),!0)))continue;if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length);let n=e.at(-1);"text"===r.type&&"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):e.push(r);continue}if(r=this.tokenizer.emStrong(t,n,o)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),e.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),e.push(r);continue}let a=t;if(this.options.extensions?.startInline){let e,n=1/0,r=t.slice(1);this.options.extensions.startInline.forEach(t=>{e=t.call({lexer:this},r),"number"==typeof e&&e>=0&&(n=Math.min(n,e))}),n<1/0&&n>=0&&(a=t.substring(0,n+1))}if(r=this.tokenizer.inlineText(a)){t=t.substring(r.raw.length),"_"!==r.raw.slice(-1)&&(o=r.raw.slice(-1)),i=!0;let n=e.at(-1);"text"===n?.type?(n.raw+=r.raw,n.text+=r.text):e.push(r);continue}if(t){let e="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(e);break}throw new Error(e)}}return e}},_t=class{options;parser;constructor(t){this.options=t||C}space(t){return""}code({text:t,lang:e,escaped:n}){let r=(e||"").match(I.notSpaceStart)?.[0],i=t.replace(I.endingNewline,"")+"\n";return r?'<pre><code class="language-'+vt(r)+'">'+(n?i:vt(i,!0))+"</code></pre>\n":"<pre><code>"+(n?i:vt(i,!0))+"</code></pre>\n"}blockquote({tokens:t}){return`<blockquote>\n${this.parser.parse(t)}</blockquote>\n`}html({text:t}){return t}def(t){return""}heading({tokens:t,depth:e}){return`<h${e}>${this.parser.parseInline(t)}</h${e}>\n`}hr(t){return"<hr>\n"}list(t){let e=t.ordered,n=t.start,r="";for(let e=0;e<t.items.length;e++){let n=t.items[e];r+=this.listitem(n)}let i=e?"ol":"ul";return"<"+i+(e&&1!==n?' start="'+n+'"':"")+">\n"+r+"</"+i+">\n"}listitem(t){let e="";if(t.task){let n=this.checkbox({checked:!!t.checked});t.loose?"paragraph"===t.tokens[0]?.type?(t.tokens[0].text=n+" "+t.tokens[0].text,t.tokens[0].tokens&&t.tokens[0].tokens.length>0&&"text"===t.tokens[0].tokens[0].type&&(t.tokens[0].tokens[0].text=n+" "+vt(t.tokens[0].tokens[0].text),t.tokens[0].tokens[0].escaped=!0)):t.tokens.unshift({type:"text",raw:n+" ",text:n+" ",escaped:!0}):e+=n+" "}return e+=this.parser.parse(t.tokens,!!t.loose),`<li>${e}</li>\n`}checkbox({checked:t}){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:t}){return`<p>${this.parser.parseInline(t)}</p>\n`}table(t){let e="",n="";for(let e=0;e<t.header.length;e++)n+=this.tablecell(t.header[e]);e+=this.tablerow({text:n});let r="";for(let e=0;e<t.rows.length;e++){let i=t.rows[e];n="";for(let t=0;t<i.length;t++)n+=this.tablecell(i[t]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+e+"</thead>\n"+r+"</table>\n"}tablerow({text:t}){return`<tr>\n${t}</tr>\n`}tablecell(t){let e=this.parser.parseInline(t.tokens),n=t.header?"th":"td";return(t.align?`<${n} align="${t.align}">`:`<${n}>`)+e+`</${n}>\n`}strong({tokens:t}){return`<strong>${this.parser.parseInline(t)}</strong>`}em({tokens:t}){return`<em>${this.parser.parseInline(t)}</em>`}codespan({text:t}){return`<code>${vt(t,!0)}</code>`}br(t){return"<br>"}del({tokens:t}){return`<del>${this.parser.parseInline(t)}</del>`}link({href:t,title:e,tokens:n}){let r=this.parser.parseInline(n),i=Ct(t);if(null===i)return r;let o='<a href="'+(t=i)+'"';return e&&(o+=' title="'+vt(e)+'"'),o+=">"+r+"</a>",o}image({href:t,title:e,text:n,tokens:r}){r&&(n=this.parser.parseInline(r,this.parser.textRenderer));let i=Ct(t);if(null===i)return vt(n);let o=`<img src="${t=i}" alt="${n}"`;return e&&(o+=` title="${vt(e)}"`),o+=">",o}text(t){return"tokens"in t&&t.tokens?this.parser.parseInline(t.tokens):"escaped"in t&&t.escaped?t.text:vt(t.text)}},Et=class{strong({text:t}){return t}em({text:t}){return t}codespan({text:t}){return t}del({text:t}){return t}html({text:t}){return t}text({text:t}){return t}link({text:t}){return""+t}image({text:t}){return""+t}br(){return""}},Tt=class t{options;renderer;textRenderer;constructor(t){this.options=t||C,this.options.renderer=this.options.renderer||new _t,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new Et}static parse(e,n){return new t(n).parse(e)}static parseInline(e,n){return new t(n).parseInline(e)}parse(t,e=!0){let n="";for(let r=0;r<t.length;r++){let i=t[r];if(this.options.extensions?.renderers?.[i.type]){let t=i,e=this.options.extensions.renderers[t.type].call({parser:this},t);if(!1!==e||!["space","hr","heading","code","table","blockquote","list","html","def","paragraph","text"].includes(t.type)){n+=e||"";continue}}let o=i;switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"def":n+=this.renderer.def(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let i=o,a=this.renderer.text(i);for(;r+1<t.length&&"text"===t[r+1].type;)i=t[++r],a+="\n"+this.renderer.text(i);n+=e?this.renderer.paragraph({type:"paragraph",raw:a,text:a,tokens:[{type:"text",raw:a,text:a,escaped:!0}]}):a;continue}default:{let t='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}parseInline(t,e=this.renderer){let n="";for(let r=0;r<t.length;r++){let i=t[r];if(this.options.extensions?.renderers?.[i.type]){let t=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==t||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=t||"";continue}}let o=i;switch(o.type){case"escape":case"text":n+=e.text(o);break;case"html":n+=e.html(o);break;case"link":n+=e.link(o);break;case"image":n+=e.image(o);break;case"strong":n+=e.strong(o);break;case"em":n+=e.em(o);break;case"codespan":n+=e.codespan(o);break;case"br":n+=e.br(o);break;case"del":n+=e.del(o);break;default:{let t='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(t),"";throw new Error(t)}}}return n}},Mt=class{options;block;constructor(t){this.options=t||C}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens","emStrongMask"]);static passThroughHooksRespectAsync=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(t){return t}postprocess(t){return t}processAllTokens(t){return t}emStrongMask(t){return t}provideLexer(){return this.block?St.lex:St.lexInline}provideParser(){return this.block?Tt.parse:Tt.parseInline}},Lt=new class{defaults={async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null};options=this.setOptions;parse=this.parseMarkdown(!0);parseInline=this.parseMarkdown(!1);Parser=Tt;Renderer=_t;TextRenderer=Et;Lexer=St;Tokenizer=It;Hooks=Mt;constructor(...t){this.use(...t)}walkTokens(t,e){let n=[];for(let r of t)switch(n=n.concat(e.call(this,r)),r.type){case"table":{let t=r;for(let r of t.header)n=n.concat(this.walkTokens(r.tokens,e));for(let r of t.rows)for(let t of r)n=n.concat(this.walkTokens(t.tokens,e));break}case"list":{let t=r;n=n.concat(this.walkTokens(t.items,e));break}default:{let t=r;this.defaults.extensions?.childTokens?.[t.type]?this.defaults.extensions.childTokens[t.type].forEach(r=>{let i=t[r].flat(1/0);n=n.concat(this.walkTokens(i,e))}):t.tokens&&(n=n.concat(this.walkTokens(t.tokens,e)))}}return n}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(t=>{let n={...t};if(n.async=this.defaults.async||n.async||!1,t.extensions&&(t.extensions.forEach(t=>{if(!t.name)throw new Error("extension name required");if("renderer"in t){let n=e.renderers[t.name];e.renderers[t.name]=n?function(...e){let r=t.renderer.apply(this,e);return!1===r&&(r=n.apply(this,e)),r}:t.renderer}if("tokenizer"in t){if(!t.level||"block"!==t.level&&"inline"!==t.level)throw new Error("extension level must be 'block' or 'inline'");let n=e[t.level];n?n.unshift(t.tokenizer):e[t.level]=[t.tokenizer],t.start&&("block"===t.level?e.startBlock?e.startBlock.push(t.start):e.startBlock=[t.start]:"inline"===t.level&&(e.startInline?e.startInline.push(t.start):e.startInline=[t.start]))}"childTokens"in t&&t.childTokens&&(e.childTokens[t.name]=t.childTokens)}),n.extensions=e),t.renderer){let e=this.defaults.renderer||new _t(this.defaults);for(let n in t.renderer){if(!(n in e))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;let r=n,i=t.renderer[r],o=e[r];e[r]=(...t)=>{let n=i.apply(e,t);return!1===n&&(n=o.apply(e,t)),n||""}}n.renderer=e}if(t.tokenizer){let e=this.defaults.tokenizer||new It(this.defaults);for(let n in t.tokenizer){if(!(n in e))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;let r=n,i=t.tokenizer[r],o=e[r];e[r]=(...t)=>{let n=i.apply(e,t);return!1===n&&(n=o.apply(e,t)),n}}n.tokenizer=e}if(t.hooks){let e=this.defaults.hooks||new Mt;for(let n in t.hooks){if(!(n in e))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;let r=n,i=t.hooks[r],o=e[r];Mt.passThroughHooks.has(n)?e[r]=t=>{if(this.defaults.async&&Mt.passThroughHooksRespectAsync.has(n))return(async()=>{let n=await i.call(e,t);return o.call(e,n)})();let r=i.call(e,t);return o.call(e,r)}:e[r]=(...t)=>{if(this.defaults.async)return(async()=>{let n=await i.apply(e,t);return!1===n&&(n=await o.apply(e,t)),n})();let n=i.apply(e,t);return!1===n&&(n=o.apply(e,t)),n}}n.hooks=e}if(t.walkTokens){let e=this.defaults.walkTokens,r=t.walkTokens;n.walkTokens=function(t){let n=[];return n.push(r.call(this,t)),e&&(n=n.concat(e.call(this,t))),n}}this.defaults={...this.defaults,...n}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}lexer(t,e){return St.lex(t,e??this.defaults)}parser(t,e){return Tt.parse(t,e??this.defaults)}parseMarkdown(t){return(e,n)=>{let r={...n},i={...this.defaults,...r},o=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===r.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||null===e)return o(new Error("marked(): input parameter is undefined or null"));if("string"!=typeof e)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));if(i.hooks&&(i.hooks.options=i,i.hooks.block=t),i.async)return(async()=>{let n=i.hooks?await i.hooks.preprocess(e):e,r=await(i.hooks?await i.hooks.provideLexer():t?St.lex:St.lexInline)(n,i),o=i.hooks?await i.hooks.processAllTokens(r):r;i.walkTokens&&await Promise.all(this.walkTokens(o,i.walkTokens));let a=await(i.hooks?await i.hooks.provideParser():t?Tt.parse:Tt.parseInline)(o,i);return i.hooks?await i.hooks.postprocess(a):a})().catch(o);try{i.hooks&&(e=i.hooks.preprocess(e));let n=(i.hooks?i.hooks.provideLexer():t?St.lex:St.lexInline)(e,i);i.hooks&&(n=i.hooks.processAllTokens(n)),i.walkTokens&&this.walkTokens(n,i.walkTokens);let r=(i.hooks?i.hooks.provideParser():t?Tt.parse:Tt.parseInline)(n,i);return i.hooks&&(r=i.hooks.postprocess(r)),r}catch(t){return o(t)}}}onError(t,e){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",t){let t="<p>An error occurred:</p><pre>"+vt(n.message+"",!0)+"</pre>";return e?Promise.resolve(t):t}if(e)return Promise.reject(n);throw n}}};function Ot(t,e){return Lt.parse(t,e)}Ot.options=Ot.setOptions=function(t){return Lt.setOptions(t),Ot.defaults=Lt.defaults,k(Ot.defaults),Ot},Ot.getDefaults=function(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}},Ot.defaults=C,Ot.use=function(...t){return Lt.use(...t),Ot.defaults=Lt.defaults,k(Ot.defaults),Ot},Ot.walkTokens=function(t,e){return Lt.walkTokens(t,e)},Ot.parseInline=Lt.parseInline,Ot.Parser=Tt,Ot.parser=Tt.parse,Ot.Renderer=_t,Ot.TextRenderer=Et,Ot.Lexer=St,Ot.lexer=St.lex,Ot.Tokenizer=It,Ot.Hooks=Mt,Ot.parse=Ot,Ot.options,Ot.setOptions,Ot.use,Ot.walkTokens,Ot.parseInline,Tt.parse,St.lex;var Dt=n(60513),Pt={body:'<g><rect width="80" height="80" style="fill: #087ebf; stroke-width: 0px;"/><text transform="translate(21.16 64.67)" style="fill: #fff; font-family: ArialMT, Arial; font-size: 67.75px;"><tspan x="0" y="0">?</tspan></text></g>',height:80,width:80},Ft=new Map,jt=new Map,zt=(0,o.K2)(t=>{for(const e of t){if(!e.name)throw new Error('Invalid icon loader. Must have a "name" property with non-empty string value.');if(o.Rm.debug("Registering icon pack:",e.name),"loader"in e)jt.set(e.name,e.loader);else{if(!("icons"in e))throw o.Rm.error("Invalid icon loader:",e),new Error('Invalid icon loader. Must have either "icons" or "loader" property.');Ft.set(e.name,e.icons)}}},"registerIconPacks"),$t=(0,o.K2)(async(t,e)=>{const n=((t,e,n,r="")=>{const i=t.split(":");if("@"===t.slice(0,1)){if(i.length<2||i.length>3)return null;r=i.shift().slice(1)}if(i.length>3||!i.length)return null;if(i.length>1){const t=i.pop(),n=i.pop(),o={provider:i.length>0?i[0]:r,prefix:n,name:t};return e&&!a(o)?null:o}const o=i[0],s=o.split("-");if(s.length>1){const t={provider:r,prefix:s.shift(),name:s.join("-")};return e&&!a(t)?null:t}if(n&&""===r){const t={provider:r,prefix:"",name:o};return e&&!a(t,n)?null:t}return null})(t,!0,void 0!==e);if(!n)throw new Error(`Invalid icon name: ${t}`);const r=n.prefix||e;if(!r)throw new Error(`Icon name must contain a prefix: ${t}`);let i=Ft.get(r);if(!i){const t=jt.get(r);if(!t)throw new Error(`Icon set not found: ${n.prefix}`);try{i={...await t(),prefix:r},Ft.set(r,i)}catch(t){throw o.Rm.error(t),new Error(`Failed to load icon set: ${n.prefix}`)}}const s=function(t,e){if(t.icons[e])return d(t,e,[]);const n=function(t,e){const n=t.icons,r=t.aliases||Object.create(null),i=Object.create(null);return(e||Object.keys(n).concat(Object.keys(r))).forEach(function t(e){if(n[e])return i[e]=[];if(!(e in i)){i[e]=null;const n=r[e]&&r[e].parent,o=n&&t(n);o&&(i[e]=[n].concat(o))}return i[e]}),i}(t,[e])[e];return n?d(t,e,n):null}(i,n.name);if(!s)throw new Error(`Icon not found: ${t}`);return s},"getRegisteredIconData"),Rt=(0,o.K2)(async t=>{try{return await $t(t),!0}catch{return!1}},"isIconAvailable"),Nt=(0,o.K2)(async(t,e,n)=>{let r;try{r=await $t(t,e?.fallbackPrefix)}catch(t){o.Rm.error(t),r=Pt}const a=function(t,e){const n={...c,...t},r={...f,...e},i={left:n.left,top:n.top,width:n.width,height:n.height};let o=n.body;[n,r].forEach(t=>{const e=[],n=t.hFlip,r=t.vFlip;let a,s=t.rotate;switch(n?r?s+=2:(e.push("translate("+(i.width+i.left).toString()+" "+(0-i.top).toString()+")"),e.push("scale(-1 1)"),i.top=i.left=0):r&&(e.push("translate("+(0-i.left).toString()+" "+(i.height+i.top).toString()+")"),e.push("scale(1 -1)"),i.top=i.left=0),s<0&&(s-=4*Math.floor(s/4)),s%=4,s){case 1:a=i.height/2+i.top,e.unshift("rotate(90 "+a.toString()+" "+a.toString()+")");break;case 2:e.unshift("rotate(180 "+(i.width/2+i.left).toString()+" "+(i.height/2+i.top).toString()+")");break;case 3:a=i.width/2+i.left,e.unshift("rotate(-90 "+a.toString()+" "+a.toString()+")")}s%2==1&&(i.left!==i.top&&(a=i.left,i.left=i.top,i.top=a),i.width!==i.height&&(a=i.width,i.width=i.height,i.height=a)),e.length&&(o=function(t,e){const n=function(t,e="defs"){let n="";const r=t.indexOf("<"+e);for(;r>=0;){const i=t.indexOf(">",r),o=t.indexOf("</"+e);if(-1===i||-1===o)break;const a=t.indexOf(">",o);if(-1===a)break;n+=t.slice(i+1,o).trim(),t=t.slice(0,r).trim()+t.slice(a+1)}return{defs:n,content:t}}(t);return r=n.defs,i=e+n.content+"</g>",r?"<defs>"+r+"</defs>"+i:i;var r,i}(o,'<g transform="'+e.join(" ")+'">'))});const a=r.width,s=r.height,l=i.width,h=i.height;let u,d;null===a?(d=null===s?"1em":"auto"===s?h:s,u=A(d,l/h)):(u="auto"===a?l:a,d=null===s?A(u,h/l):"auto"===s?h:s);const p={},g=(t,e)=>{(t=>"unset"===t||"undefined"===t||"none"===t)(e)||(p[t]=e.toString())};g("width",u),g("height",d);const m=[i.left,i.top,l,h];return p.viewBox=m.join(" "),{attributes:p,viewBox:m,body:o}}(r,e),s=function(t,e){let n=-1===t.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const t in e)n+=" "+t+'="'+e[t]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+n+">"+t+"</svg>"}(function(t,e=b){const n=[];let r;for(;r=y.exec(t);)n.push(r[1]);if(!n.length)return t;const i="suffix"+(16777216*Math.random()|Date.now()).toString(16);return n.forEach(n=>{const r="function"==typeof e?e(n):e+(x++).toString(),o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");t=t.replace(new RegExp('([#;"])('+o+')([")]|\\.[a-z])',"g"),"$1"+r+i+"$3")}),t=t.replace(new RegExp(i,"g"),"")}(a.body),{...a.attributes,...n});return(0,i.jZ)(s,(0,i.zj)())},"getIconSVG");function qt(t,{markdownAutoWrap:e}){const n=t.replace(/<br\/>/g,"\n").replace(/\n{2,}/g,"\n"),r=(0,Dt.T)(n);return!1===e?r.replace(/ /g,"&nbsp;"):r}function Wt(t,e={}){const n=qt(t,e),r=Ot.lexer(n),i=[[]];let a=0;function s(t,e="normal"){"text"===t.type?t.text.split("\n").forEach((t,n)=>{0!==n&&(a++,i.push([])),t.split(" ").forEach(t=>{(t=t.replace(/&#39;/g,"'"))&&i[a].push({content:t,type:e})})}):"strong"===t.type||"em"===t.type?t.tokens.forEach(e=>{s(e,t.type)}):"html"===t.type&&i[a].push({content:t.text,type:"normal"})}return(0,o.K2)(s,"processNode"),r.forEach(t=>{"paragraph"===t.type?t.tokens?.forEach(t=>{s(t)}):"html"===t.type?i[a].push({content:t.text,type:"normal"}):i[a].push({content:t.raw,type:"normal"})}),i}function Kt(t,{markdownAutoWrap:e}={}){const n=Ot.lexer(t);function r(t){return"text"===t.type?!1===e?t.text.replace(/\n */g,"<br/>").replace(/ /g,"&nbsp;"):t.text.replace(/\n */g,"<br/>"):"strong"===t.type?`<strong>${t.tokens?.map(r).join("")}</strong>`:"em"===t.type?`<em>${t.tokens?.map(r).join("")}</em>`:"paragraph"===t.type?`<p>${t.tokens?.map(r).join("")}</p>`:"space"===t.type?"":"html"===t.type?`${t.text}`:"escape"===t.type?t.text:(o.Rm.warn(`Unsupported markdown: ${t.type}`),t.raw)}return(0,o.K2)(r,"output"),n.map(r).join("")}function Ut(t){return Intl.Segmenter?[...(new Intl.Segmenter).segment(t)].map(t=>t.segment):[...t]}function Ht(t,e){return Gt(t,[],Ut(e.content),e.type)}function Gt(t,e,n,r){if(0===n.length)return[{content:e.join(""),type:r},{content:"",type:r}];const[i,...o]=n,a=[...e,i];return t([{content:a.join(""),type:r}])?Gt(t,a,o,r):(0===e.length&&i&&(e.push(i),n.shift()),[{content:e.join(""),type:r},{content:n.join(""),type:r}])}function Yt(t,e){if(t.some(({content:t})=>t.includes("\n")))throw new Error("splitLineToFitWidth does not support newlines in the line");return Vt(t,e)}function Vt(t,e,n=[],r=[]){if(0===t.length)return r.length>0&&n.push(r),n.length>0?n:[];let i="";" "===t[0].content&&(i=" ",t.shift());const o=t.shift()??{content:" ",type:"normal"},a=[...r];if(""!==i&&a.push({content:i,type:"normal"}),a.push(o),e(a))return Vt(t,e,n,a);if(r.length>0)n.push(r),t.unshift(o);else if(o.content){const[r,i]=Ht(e,o);n.push([r]),i.content&&t.unshift(i)}return Vt(t,e,n)}function Qt(t,e){e&&t.attr("style",e)}async function Xt(t,e,n,r,o=!1,a=(0,i.zj)()){const s=t.append("foreignObject");s.attr("width",10*n+"px"),s.attr("height",10*n+"px");const l=s.append("xhtml:div"),c=(0,i.Wi)(e.label)?await(0,i.dj)(e.label.replace(i.Y2.lineBreakRegex,"\n"),a):(0,i.jZ)(e.label,a),h=e.isNode?"nodeLabel":"edgeLabel",u=l.append("span");u.html(c),Qt(u,e.labelStyle),u.attr("class",`${h} ${r}`),Qt(l,e.labelStyle),l.style("display","table-cell"),l.style("white-space","nowrap"),l.style("line-height","1.5"),l.style("max-width",n+"px"),l.style("text-align","center"),l.attr("xmlns","http://www.w3.org/1999/xhtml"),o&&l.attr("class","labelBkg");let d=l.node().getBoundingClientRect();return d.width===n&&(l.style("display","table"),l.style("white-space","break-spaces"),l.style("width",n+"px"),d=l.node().getBoundingClientRect()),s.node()}function Zt(t,e,n){return t.append("tspan").attr("class","text-outer-tspan").attr("x",0).attr("y",e*n-.1+"em").attr("dy",n+"em")}function Jt(t,e,n){const r=t.append("text"),i=Zt(r,1,e);ne(i,n);const o=i.node().getComputedTextLength();return r.remove(),o}function te(t,e,n){const r=t.append("text"),i=Zt(r,1,e);ne(i,[{content:n,type:"normal"}]);const o=i.node()?.getBoundingClientRect();return o&&r.remove(),o}function ee(t,e,n,r=!1){const i=e.append("g"),a=i.insert("rect").attr("class","background").attr("style","stroke: none"),s=i.append("text").attr("y","-10.1");let l=0;for(const e of n){const n=(0,o.K2)(e=>Jt(i,1.1,e)<=t,"checkWidth"),r=n(e)?[e]:Yt(e,n);for(const t of r)ne(Zt(s,l,1.1),t),l++}if(r){const t=s.node().getBBox(),e=2;return a.attr("x",t.x-e).attr("y",t.y-e).attr("width",t.width+2*e).attr("height",t.height+2*e),i.node()}return s.node()}function ne(t,e){t.text(""),e.forEach((e,n)=>{const r=t.append("tspan").attr("font-style","em"===e.type?"italic":"normal").attr("class","text-inner-tspan").attr("font-weight","strong"===e.type?"bold":"normal");0===n?r.text(e.content):r.text(" "+e.content)})}async function re(t,e={}){const n=[];t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,(t,r,o)=>(n.push((async()=>{const n=`${r}:${o}`;return await Rt(n)?await Nt(n,void 0,{class:"label-icon"}):`<i class='${(0,i.jZ)(t,e).replace(":"," ")}'></i>`})()),t));const r=await Promise.all(n);return t.replace(/(fa[bklrs]?):fa-([\w-]+)/g,()=>r.shift()??"")}(0,o.K2)(qt,"preprocessMarkdown"),(0,o.K2)(Wt,"markdownToLines"),(0,o.K2)(Kt,"markdownToHTML"),(0,o.K2)(Ut,"splitTextToChars"),(0,o.K2)(Ht,"splitWordToFitWidth"),(0,o.K2)(Gt,"splitWordToFitWidthRecursion"),(0,o.K2)(Yt,"splitLineToFitWidth"),(0,o.K2)(Vt,"splitLineToFitWidthRecursion"),(0,o.K2)(Qt,"applyStyle"),(0,o.K2)(Xt,"addHtmlSpan"),(0,o.K2)(Zt,"createTspan"),(0,o.K2)(Jt,"computeWidthOfText"),(0,o.K2)(te,"computeDimensionOfText"),(0,o.K2)(ee,"createFormattedText"),(0,o.K2)(ne,"updateTextContentAndStyles"),(0,o.K2)(re,"replaceIconSubstring");var ie=(0,o.K2)(async(t,e="",{style:n="",isTitle:a=!1,classes:s="",useHtmlLabels:l=!0,isNode:c=!0,width:h=200,addSvgBackground:u=!1}={},d)=>{if(o.Rm.debug("XYZ createText",e,n,a,s,l,c,"addSvgBackground: ",u),l){const o=Kt(e,d),a=await re((0,r.Sm)(o),d),l=e.replace(/\\\\/g,"\\"),p={isNode:c,label:(0,i.Wi)(e)?l:a,labelStyle:n.replace("fill:","color:")};return await Xt(t,p,h,s,u,d)}{const r=ee(h,t,Wt(e.replace(/<br\s*\/?>/g,"<br/>").replace("<br>","<br/>"),d),!!e&&u);if(c){/stroke:/.exec(n)&&(n=n.replace("stroke:","lineColor:"));const t=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,v.Ltv)(r).attr("style",t)}else{const t=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/background:/g,"fill:");(0,v.Ltv)(r).select("rect").attr("style",t.replace(/background:/g,"fill:"));const e=n.replace(/stroke:[^;]+;?/g,"").replace(/stroke-width:[^;]+;?/g,"").replace(/fill:[^;]+;?/g,"").replace(/color:/g,"fill:");(0,v.Ltv)(r).select("text").attr("style",e)}return r}},"createText")},71354:t=>{"use strict";t.exports=function(t){var e=t[1],n=t[3];if(!n)return e;if("function"==typeof btoa){var r=btoa(unescape(encodeURIComponent(JSON.stringify(n)))),i="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(r),o="/*# ".concat(i," */");return[e].concat([o]).join("\n")}return[e].join("\n")}},72136:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},72826:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(71354),i=n.n(r),o=n(76314),a=n.n(o)()(i());a.push([t.id,"/* AI */\n\n.ai-command-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n    animation: fadeIn 0.2s ease-in-out;\n}\n\n@keyframes fadeIn {\n    from {\n        opacity: 0;\n    }\n    to {\n        opacity: 1;\n    }\n}\n\n.ai-command-container {\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n    width: 90%;\n    max-width: 800px;\n    max-height: 80vh;\n    display: flex;\n    flex-direction: column;\n    animation: slideUp 0.3s ease-out;\n}\n\n@keyframes slideUp {\n    from {\n        transform: translateY(20px);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0);\n        opacity: 1;\n    }\n}\n\n.ai-command-header {\n    padding: 20px;\n    border-bottom: 1px solid #e5e7eb;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.ai-command-title {\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n    display: flex;\n    align-items: center;\n    gap: 10px;\n}\n\n.ai-command-title-icon {\n    font-size: 24px;\n}\n\n.ai-command-close {\n    background: none;\n    border: none;\n    font-size: 24px;\n    color: #6b7280;\n    cursor: pointer;\n    padding: 4px;\n    line-height: 1;\n    border-radius: 6px;\n    transition: all 0.2s;\n}\n\n.ai-command-close:hover {\n    background: #f3f4f6;\n    color: #1f2937;\n}\n\n.ai-command-body {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n}\n\n.ai-command-panel {\n    display: grid;\n    gap: 20px;\n}\n\n.command-category {\n    background: #f9fafb;\n    border-radius: 8px;\n    padding: 16px;\n    border: 1px solid #e5e7eb;\n}\n\n.category-header {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    margin-bottom: 12px;\n    padding-bottom: 8px;\n    border-bottom: 2px solid #e5e7eb;\n}\n\n.category-icon {\n    font-size: 20px;\n}\n\n.category-name {\n    font-size: 16px;\n    font-weight: 600;\n    color: #374151;\n}\n\n.command-list {\n    display: grid;\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\n    gap: 8px;\n}\n\n.command-button {\n    background: white;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    padding: 10px 12px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    cursor: pointer;\n    transition: all 0.2s;\n    font-size: 14px;\n    color: #374151;\n    text-align: left;\n}\n\n.command-button:hover {\n    background: #f0f9ff;\n    border-color: #3b82f6;\n    color: #1e40af;\n    transform: translateY(-1px);\n    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\n}\n\n.command-button:active {\n    transform: translateY(0);\n}\n\n.command-icon {\n    font-size: 18px;\n    flex-shrink: 0;\n}\n\n.command-name {\n    flex: 1;\n    font-weight: 500;\n}\n\n/*  */\n.selected-text-preview {\n    background: #f3f4f6;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    padding: 12px;\n    margin-bottom: 16px;\n    max-height: 120px;\n    overflow-y: auto;\n}\n\n.selected-text-label {\n    font-size: 12px;\n    font-weight: 600;\n    color: #6b7280;\n    margin-bottom: 8px;\n    text-transform: uppercase;\n    letter-spacing: 0.5px;\n}\n\n.selected-text-content {\n    font-size: 14px;\n    color: #374151;\n    line-height: 1.5;\n    white-space: pre-wrap;\n    word-break: break-word;\n}\n\n/*  */\n.command-input-dialog {\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n    padding: 20px;\n    z-index: 10001;\n    min-width: 300px;\n}\n\n.command-input-title {\n    font-size: 16px;\n    font-weight: 600;\n    margin-bottom: 12px;\n    color: #1f2937;\n}\n\n.command-input-field {\n    width: 100%;\n    padding: 8px 12px;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    font-size: 14px;\n    margin-bottom: 16px;\n}\n\n.command-input-field:focus {\n    outline: none;\n    border-color: #3b82f6;\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\n}\n\n.command-input-buttons {\n    display: flex;\n    gap: 8px;\n    justify-content: flex-end;\n}\n\n.command-input-cancel,\n.command-input-confirm {\n    padding: 8px 16px;\n    border-radius: 6px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.command-input-cancel {\n    background: white;\n    border: 1px solid #d1d5db;\n    color: #374151;\n}\n\n.command-input-cancel:hover {\n    background: #f3f4f6;\n}\n\n.command-input-confirm {\n    background: #3b82f6;\n    border: none;\n    color: white;\n}\n\n.command-input-confirm:hover {\n    background: #2563eb;\n}\n\n/*  */\n.ai-command-loading {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(255, 255, 255, 0.9);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10002;\n    border-radius: 12px;\n}\n\n.ai-command-spinner {\n    width: 40px;\n    height: 40px;\n    border: 4px solid #e5e7eb;\n    border-top-color: #3b82f6;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n}\n\n@keyframes spin {\n    from {\n        transform: rotate(0deg);\n    }\n    to {\n        transform: rotate(360deg);\n    }\n}\n\n/*  */\n@media (max-width: 640px) {\n    .ai-command-container {\n        width: 95%;\n        max-height: 90vh;\n    }\n    \n    .command-list {\n        grid-template-columns: 1fr;\n    }\n    \n    .ai-command-header {\n        padding: 16px;\n    }\n    \n    .ai-command-body {\n        padding: 16px;\n    }\n}","",{version:3,sources:["webpack://./src/editor/ai-command-panel.css"],names:[],mappings:"AAAA,mBAAmB;;AAEnB;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,8BAA8B;IAC9B,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,cAAc;IACd,kCAAkC;AACtC;;AAEA;IACI;QACI,UAAU;IACd;IACA;QACI,UAAU;IACd;AACJ;;AAEA;IACI,iBAAiB;IACjB,mBAAmB;IACnB,0CAA0C;IAC1C,UAAU;IACV,gBAAgB;IAChB,gBAAgB;IAChB,aAAa;IACb,sBAAsB;IACtB,gCAAgC;AACpC;;AAEA;IACI;QACI,2BAA2B;QAC3B,UAAU;IACd;IACA;QACI,wBAAwB;QACxB,UAAU;IACd;AACJ;;AAEA;IACI,aAAa;IACb,gCAAgC;IAChC,aAAa;IACb,mBAAmB;IACnB,8BAA8B;AAClC;;AAEA;IACI,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,SAAS;AACb;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,eAAe;IACf,cAAc;IACd,eAAe;IACf,YAAY;IACZ,cAAc;IACd,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,cAAc;AAClB;;AAEA;IACI,OAAO;IACP,gBAAgB;IAChB,aAAa;AACjB;;AAEA;IACI,aAAa;IACb,SAAS;AACb;;AAEA;IACI,mBAAmB;IACnB,kBAAkB;IAClB,aAAa;IACb,yBAAyB;AAC7B;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,QAAQ;IACR,mBAAmB;IACnB,mBAAmB;IACnB,gCAAgC;AACpC;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,eAAe;IACf,gBAAgB;IAChB,cAAc;AAClB;;AAEA;IACI,aAAa;IACb,4DAA4D;IAC5D,QAAQ;AACZ;;AAEA;IACI,iBAAiB;IACjB,yBAAyB;IACzB,kBAAkB;IAClB,kBAAkB;IAClB,aAAa;IACb,mBAAmB;IACnB,QAAQ;IACR,eAAe;IACf,oBAAoB;IACpB,eAAe;IACf,cAAc;IACd,gBAAgB;AACpB;;AAEA;IACI,mBAAmB;IACnB,qBAAqB;IACrB,cAAc;IACd,2BAA2B;IAC3B,6CAA6C;AACjD;;AAEA;IACI,wBAAwB;AAC5B;;AAEA;IACI,eAAe;IACf,cAAc;AAClB;;AAEA;IACI,OAAO;IACP,gBAAgB;AACpB;;AAEA,mBAAmB;AACnB;IACI,mBAAmB;IACnB,yBAAyB;IACzB,kBAAkB;IAClB,aAAa;IACb,mBAAmB;IACnB,iBAAiB;IACjB,gBAAgB;AACpB;;AAEA;IACI,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,kBAAkB;IAClB,yBAAyB;IACzB,qBAAqB;AACzB;;AAEA;IACI,eAAe;IACf,cAAc;IACd,gBAAgB;IAChB,qBAAqB;IACrB,sBAAsB;AAC1B;;AAEA,qBAAqB;AACrB;IACI,eAAe;IACf,QAAQ;IACR,SAAS;IACT,gCAAgC;IAChC,iBAAiB;IACjB,kBAAkB;IAClB,0CAA0C;IAC1C,aAAa;IACb,cAAc;IACd,gBAAgB;AACpB;;AAEA;IACI,eAAe;IACf,gBAAgB;IAChB,mBAAmB;IACnB,cAAc;AAClB;;AAEA;IACI,WAAW;IACX,iBAAiB;IACjB,yBAAyB;IACzB,kBAAkB;IAClB,eAAe;IACf,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,qBAAqB;IACrB,6CAA6C;AACjD;;AAEA;IACI,aAAa;IACb,QAAQ;IACR,yBAAyB;AAC7B;;AAEA;;IAEI,iBAAiB;IACjB,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,iBAAiB;IACjB,yBAAyB;IACzB,cAAc;AAClB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;IACnB,YAAY;IACZ,YAAY;AAChB;;AAEA;IACI,mBAAmB;AACvB;;AAEA,aAAa;AACb;IACI,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,oCAAoC;IACpC,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,cAAc;IACd,mBAAmB;AACvB;;AAEA;IACI,WAAW;IACX,YAAY;IACZ,yBAAyB;IACzB,yBAAyB;IACzB,kBAAkB;IAClB,kCAAkC;AACtC;;AAEA;IACI;QACI,uBAAuB;IAC3B;IACA;QACI,yBAAyB;IAC7B;AACJ;;AAEA,aAAa;AACb;IACI;QACI,UAAU;QACV,gBAAgB;IACpB;;IAEA;QACI,0BAA0B;IAC9B;;IAEA;QACI,aAAa;IACjB;;IAEA;QACI,aAAa;IACjB;AACJ",sourcesContent:["/* AI */\r\n\r\n.ai-command-modal {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 10000;\r\n    animation: fadeIn 0.2s ease-in-out;\r\n}\r\n\r\n@keyframes fadeIn {\r\n    from {\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n.ai-command-container {\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\r\n    width: 90%;\r\n    max-width: 800px;\r\n    max-height: 80vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    animation: slideUp 0.3s ease-out;\r\n}\r\n\r\n@keyframes slideUp {\r\n    from {\r\n        transform: translateY(20px);\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        transform: translateY(0);\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n.ai-command-header {\r\n    padding: 20px;\r\n    border-bottom: 1px solid #e5e7eb;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.ai-command-title {\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    color: #1f2937;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 10px;\r\n}\r\n\r\n.ai-command-title-icon {\r\n    font-size: 24px;\r\n}\r\n\r\n.ai-command-close {\r\n    background: none;\r\n    border: none;\r\n    font-size: 24px;\r\n    color: #6b7280;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n    line-height: 1;\r\n    border-radius: 6px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.ai-command-close:hover {\r\n    background: #f3f4f6;\r\n    color: #1f2937;\r\n}\r\n\r\n.ai-command-body {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 20px;\r\n}\r\n\r\n.ai-command-panel {\r\n    display: grid;\r\n    gap: 20px;\r\n}\r\n\r\n.command-category {\r\n    background: #f9fafb;\r\n    border-radius: 8px;\r\n    padding: 16px;\r\n    border: 1px solid #e5e7eb;\r\n}\r\n\r\n.category-header {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    margin-bottom: 12px;\r\n    padding-bottom: 8px;\r\n    border-bottom: 2px solid #e5e7eb;\r\n}\r\n\r\n.category-icon {\r\n    font-size: 20px;\r\n}\r\n\r\n.category-name {\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    color: #374151;\r\n}\r\n\r\n.command-list {\r\n    display: grid;\r\n    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));\r\n    gap: 8px;\r\n}\r\n\r\n.command-button {\r\n    background: white;\r\n    border: 1px solid #d1d5db;\r\n    border-radius: 6px;\r\n    padding: 10px 12px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    font-size: 14px;\r\n    color: #374151;\r\n    text-align: left;\r\n}\r\n\r\n.command-button:hover {\r\n    background: #f0f9ff;\r\n    border-color: #3b82f6;\r\n    color: #1e40af;\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 2px 8px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.command-button:active {\r\n    transform: translateY(0);\r\n}\r\n\r\n.command-icon {\r\n    font-size: 18px;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.command-name {\r\n    flex: 1;\r\n    font-weight: 500;\r\n}\r\n\r\n/*  */\r\n.selected-text-preview {\r\n    background: #f3f4f6;\r\n    border: 1px solid #d1d5db;\r\n    border-radius: 6px;\r\n    padding: 12px;\r\n    margin-bottom: 16px;\r\n    max-height: 120px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.selected-text-label {\r\n    font-size: 12px;\r\n    font-weight: 600;\r\n    color: #6b7280;\r\n    margin-bottom: 8px;\r\n    text-transform: uppercase;\r\n    letter-spacing: 0.5px;\r\n}\r\n\r\n.selected-text-content {\r\n    font-size: 14px;\r\n    color: #374151;\r\n    line-height: 1.5;\r\n    white-space: pre-wrap;\r\n    word-break: break-word;\r\n}\r\n\r\n/*  */\r\n.command-input-dialog {\r\n    position: fixed;\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    background: white;\r\n    border-radius: 8px;\r\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\r\n    padding: 20px;\r\n    z-index: 10001;\r\n    min-width: 300px;\r\n}\r\n\r\n.command-input-title {\r\n    font-size: 16px;\r\n    font-weight: 600;\r\n    margin-bottom: 12px;\r\n    color: #1f2937;\r\n}\r\n\r\n.command-input-field {\r\n    width: 100%;\r\n    padding: 8px 12px;\r\n    border: 1px solid #d1d5db;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    margin-bottom: 16px;\r\n}\r\n\r\n.command-input-field:focus {\r\n    outline: none;\r\n    border-color: #3b82f6;\r\n    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.command-input-buttons {\r\n    display: flex;\r\n    gap: 8px;\r\n    justify-content: flex-end;\r\n}\r\n\r\n.command-input-cancel,\r\n.command-input-confirm {\r\n    padding: 8px 16px;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.command-input-cancel {\r\n    background: white;\r\n    border: 1px solid #d1d5db;\r\n    color: #374151;\r\n}\r\n\r\n.command-input-cancel:hover {\r\n    background: #f3f4f6;\r\n}\r\n\r\n.command-input-confirm {\r\n    background: #3b82f6;\r\n    border: none;\r\n    color: white;\r\n}\r\n\r\n.command-input-confirm:hover {\r\n    background: #2563eb;\r\n}\r\n\r\n/*  */\r\n.ai-command-loading {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(255, 255, 255, 0.9);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 10002;\r\n    border-radius: 12px;\r\n}\r\n\r\n.ai-command-spinner {\r\n    width: 40px;\r\n    height: 40px;\r\n    border: 4px solid #e5e7eb;\r\n    border-top-color: #3b82f6;\r\n    border-radius: 50%;\r\n    animation: spin 1s linear infinite;\r\n}\r\n\r\n@keyframes spin {\r\n    from {\r\n        transform: rotate(0deg);\r\n    }\r\n    to {\r\n        transform: rotate(360deg);\r\n    }\r\n}\r\n\r\n/*  */\r\n@media (max-width: 640px) {\r\n    .ai-command-container {\r\n        width: 95%;\r\n        max-height: 90vh;\r\n    }\r\n    \r\n    .command-list {\r\n        grid-template-columns: 1fr;\r\n    }\r\n    \r\n    .ai-command-header {\r\n        padding: 16px;\r\n    }\r\n    \r\n    .ai-command-body {\r\n        padding: 16px;\r\n    }\r\n}"],sourceRoot:""}]);const s=a},73590:(t,e,n)=>{"use strict";n.d(e,{D:()=>a});var r=n(80144),i=n(40797),o=n(51444),a=(0,i.K2)(t=>{const{securityLevel:e}=(0,r.D7)();let n=(0,o.Ltv)("body");if("sandbox"===e){const e=(0,o.Ltv)(`#i${t}`),r=e.node()?.contentDocument??document;n=(0,o.Ltv)(r.body)}return n.select(`#${t}`)},"selectSvgElement")},73981:(t,e,n)=>{"use strict";n.d(e,{H:()=>en,r:()=>tn});var r=n(40797);function i(t){return null==t}function o(t){return"object"==typeof t&&null!==t}function a(t){return Array.isArray(t)?t:i(t)?[]:[t]}function s(t,e){var n,r,i,o;if(e)for(n=0,r=(o=Object.keys(e)).length;n<r;n+=1)t[i=o[n]]=e[i];return t}function l(t,e){var n,r="";for(n=0;n<e;n+=1)r+=t;return r}function c(t){return 0===t&&Number.NEGATIVE_INFINITY===1/t}(0,r.K2)(i,"isNothing"),(0,r.K2)(o,"isObject"),(0,r.K2)(a,"toArray"),(0,r.K2)(s,"extend"),(0,r.K2)(l,"repeat"),(0,r.K2)(c,"isNegativeZero");var h={isNothing:i,isObject:o,toArray:a,repeat:l,isNegativeZero:c,extend:s};function u(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+="\n\n"+t.mark.snippet),r+" "+n):r}function d(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=u(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||""}(0,r.K2)(u,"formatError"),(0,r.K2)(d,"YAMLException$1"),d.prototype=Object.create(Error.prototype),d.prototype.constructor=d,d.prototype.toString=(0,r.K2)(function(t){return this.name+": "+u(this,t)},"toString");var p=d;function f(t,e,n,r,i){var o="",a="",s=Math.floor(i/2)-1;return r-e>s&&(e=r-s+(o=" ... ").length),n-r>s&&(n=r+s-(a=" ...").length),{str:o+t.slice(e,n).replace(/\t/g,"")+a,pos:r-e+o.length}}function g(t,e){return h.repeat(" ",e-t.length)+t}function m(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),"number"!=typeof e.indent&&(e.indent=1),"number"!=typeof e.linesBefore&&(e.linesBefore=3),"number"!=typeof e.linesAfter&&(e.linesAfter=2);for(var n,r=/\r?\n|\r|\0/g,i=[0],o=[],a=-1;n=r.exec(t.buffer);)o.push(n.index),i.push(n.index+n[0].length),t.position<=n.index&&a<0&&(a=i.length-2);a<0&&(a=i.length-1);var s,l,c="",u=Math.min(t.line+e.linesAfter,o.length).toString().length,d=e.maxLength-(e.indent+u+3);for(s=1;s<=e.linesBefore&&!(a-s<0);s++)l=f(t.buffer,i[a-s],o[a-s],t.position-(i[a]-i[a-s]),d),c=h.repeat(" ",e.indent)+g((t.line-s+1).toString(),u)+" | "+l.str+"\n"+c;for(l=f(t.buffer,i[a],o[a],t.position,d),c+=h.repeat(" ",e.indent)+g((t.line+1).toString(),u)+" | "+l.str+"\n",c+=h.repeat("-",e.indent+u+3+l.pos)+"^\n",s=1;s<=e.linesAfter&&!(a+s>=o.length);s++)l=f(t.buffer,i[a+s],o[a+s],t.position-(i[a]-i[a+s]),d),c+=h.repeat(" ",e.indent)+g((t.line+s+1).toString(),u)+" | "+l.str+"\n";return c.replace(/\n$/,"")}(0,r.K2)(f,"getLine"),(0,r.K2)(g,"padStart"),(0,r.K2)(m,"makeSnippet");var A=m,y=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],b=["scalar","sequence","mapping"];function x(t){var e={};return null!==t&&Object.keys(t).forEach(function(n){t[n].forEach(function(t){e[String(t)]=n})}),e}function v(t,e){if(e=e||{},Object.keys(e).forEach(function(e){if(-1===y.indexOf(e))throw new p('Unknown option "'+e+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=x(e.styleAliases||null),-1===b.indexOf(this.kind))throw new p('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}(0,r.K2)(x,"compileStyleAliases"),(0,r.K2)(v,"Type$1");var C=v;function k(t,e){var n=[];return t[e].forEach(function(t){var e=n.length;n.forEach(function(n,r){n.tag===t.tag&&n.kind===t.kind&&n.multi===t.multi&&(e=r)}),n[e]=t}),n}function w(){var t,e,n={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}};function i(t){t.multi?(n.multi[t.kind].push(t),n.multi.fallback.push(t)):n[t.kind][t.tag]=n.fallback[t.tag]=t}for((0,r.K2)(i,"collectType"),t=0,e=arguments.length;t<e;t+=1)arguments[t].forEach(i);return n}function B(t){return this.extend(t)}(0,r.K2)(k,"compileList"),(0,r.K2)(w,"compileMap"),(0,r.K2)(B,"Schema$1"),B.prototype.extend=(0,r.K2)(function(t){var e=[],n=[];if(t instanceof C)n.push(t);else if(Array.isArray(t))n=n.concat(t);else{if(!t||!Array.isArray(t.implicit)&&!Array.isArray(t.explicit))throw new p("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");t.implicit&&(e=e.concat(t.implicit)),t.explicit&&(n=n.concat(t.explicit))}e.forEach(function(t){if(!(t instanceof C))throw new p("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(t.loadKind&&"scalar"!==t.loadKind)throw new p("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(t.multi)throw new p("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),n.forEach(function(t){if(!(t instanceof C))throw new p("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var r=Object.create(B.prototype);return r.implicit=(this.implicit||[]).concat(e),r.explicit=(this.explicit||[]).concat(n),r.compiledImplicit=k(r,"implicit"),r.compiledExplicit=k(r,"explicit"),r.compiledTypeMap=w(r.compiledImplicit,r.compiledExplicit),r},"extend");var I=new B({explicit:[new C("tag:yaml.org,2002:str",{kind:"scalar",construct:(0,r.K2)(function(t){return null!==t?t:""},"construct")}),new C("tag:yaml.org,2002:seq",{kind:"sequence",construct:(0,r.K2)(function(t){return null!==t?t:[]},"construct")}),new C("tag:yaml.org,2002:map",{kind:"mapping",construct:(0,r.K2)(function(t){return null!==t?t:{}},"construct")})]});function S(t){if(null===t)return!0;var e=t.length;return 1===e&&"~"===t||4===e&&("null"===t||"Null"===t||"NULL"===t)}function _(){return null}function E(t){return null===t}(0,r.K2)(S,"resolveYamlNull"),(0,r.K2)(_,"constructYamlNull"),(0,r.K2)(E,"isNull");var T=new C("tag:yaml.org,2002:null",{kind:"scalar",resolve:S,construct:_,predicate:E,represent:{canonical:(0,r.K2)(function(){return"~"},"canonical"),lowercase:(0,r.K2)(function(){return"null"},"lowercase"),uppercase:(0,r.K2)(function(){return"NULL"},"uppercase"),camelcase:(0,r.K2)(function(){return"Null"},"camelcase"),empty:(0,r.K2)(function(){return""},"empty")},defaultStyle:"lowercase"});function M(t){if(null===t)return!1;var e=t.length;return 4===e&&("true"===t||"True"===t||"TRUE"===t)||5===e&&("false"===t||"False"===t||"FALSE"===t)}function L(t){return"true"===t||"True"===t||"TRUE"===t}function O(t){return"[object Boolean]"===Object.prototype.toString.call(t)}(0,r.K2)(M,"resolveYamlBoolean"),(0,r.K2)(L,"constructYamlBoolean"),(0,r.K2)(O,"isBoolean");var D=new C("tag:yaml.org,2002:bool",{kind:"scalar",resolve:M,construct:L,predicate:O,represent:{lowercase:(0,r.K2)(function(t){return t?"true":"false"},"lowercase"),uppercase:(0,r.K2)(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:(0,r.K2)(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function P(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}function F(t){return 48<=t&&t<=55}function j(t){return 48<=t&&t<=57}function z(t){if(null===t)return!1;var e,n=t.length,r=0,i=!1;if(!n)return!1;if("-"!==(e=t[r])&&"+"!==e||(e=t[++r]),"0"===e){if(r+1===n)return!0;if("b"===(e=t[++r])){for(r++;r<n;r++)if("_"!==(e=t[r])){if("0"!==e&&"1"!==e)return!1;i=!0}return i&&"_"!==e}if("x"===e){for(r++;r<n;r++)if("_"!==(e=t[r])){if(!P(t.charCodeAt(r)))return!1;i=!0}return i&&"_"!==e}if("o"===e){for(r++;r<n;r++)if("_"!==(e=t[r])){if(!F(t.charCodeAt(r)))return!1;i=!0}return i&&"_"!==e}}if("_"===e)return!1;for(;r<n;r++)if("_"!==(e=t[r])){if(!j(t.charCodeAt(r)))return!1;i=!0}return!(!i||"_"===e)}function $(t){var e,n=t,r=1;if(-1!==n.indexOf("_")&&(n=n.replace(/_/g,"")),"-"!==(e=n[0])&&"+"!==e||("-"===e&&(r=-1),e=(n=n.slice(1))[0]),"0"===n)return 0;if("0"===e){if("b"===n[1])return r*parseInt(n.slice(2),2);if("x"===n[1])return r*parseInt(n.slice(2),16);if("o"===n[1])return r*parseInt(n.slice(2),8)}return r*parseInt(n,10)}function R(t){return"[object Number]"===Object.prototype.toString.call(t)&&t%1==0&&!h.isNegativeZero(t)}(0,r.K2)(P,"isHexCode"),(0,r.K2)(F,"isOctCode"),(0,r.K2)(j,"isDecCode"),(0,r.K2)(z,"resolveYamlInteger"),(0,r.K2)($,"constructYamlInteger"),(0,r.K2)(R,"isInteger");var N=new C("tag:yaml.org,2002:int",{kind:"scalar",resolve:z,construct:$,predicate:R,represent:{binary:(0,r.K2)(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:(0,r.K2)(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:(0,r.K2)(function(t){return t.toString(10)},"decimal"),hexadecimal:(0,r.K2)(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),q=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function W(t){return null!==t&&!(!q.test(t)||"_"===t[t.length-1])}function K(t){var e,n;return n="-"===(e=t.replace(/_/g,"").toLowerCase())[0]?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),".inf"===e?1===n?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:".nan"===e?NaN:n*parseFloat(e,10)}(0,r.K2)(W,"resolveYamlFloat"),(0,r.K2)(K,"constructYamlFloat");var U=/^[-+]?[0-9]+e/;function H(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(h.isNegativeZero(t))return"-0.0";return n=t.toString(10),U.test(n)?n.replace("e",".e"):n}function G(t){return"[object Number]"===Object.prototype.toString.call(t)&&(t%1!=0||h.isNegativeZero(t))}(0,r.K2)(H,"representYamlFloat"),(0,r.K2)(G,"isFloat");var Y=new C("tag:yaml.org,2002:float",{kind:"scalar",resolve:W,construct:K,predicate:G,represent:H,defaultStyle:"lowercase"}),V=I.extend({implicit:[T,D,N,Y]}),Q=V,X=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),Z=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function J(t){return null!==t&&(null!==X.exec(t)||null!==Z.exec(t))}function tt(t){var e,n,r,i,o,a,s,l,c=0,h=null;if(null===(e=X.exec(t))&&(e=Z.exec(t)),null===e)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],s=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(h=6e4*(60*+e[10]+ +(e[11]||0)),"-"===e[9]&&(h=-h)),l=new Date(Date.UTC(n,r,i,o,a,s,c)),h&&l.setTime(l.getTime()-h),l}function et(t){return t.toISOString()}(0,r.K2)(J,"resolveYamlTimestamp"),(0,r.K2)(tt,"constructYamlTimestamp"),(0,r.K2)(et,"representYamlTimestamp");var nt=new C("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:J,construct:tt,instanceOf:Date,represent:et});function rt(t){return"<<"===t||null===t}(0,r.K2)(rt,"resolveYamlMerge");var it=new C("tag:yaml.org,2002:merge",{kind:"scalar",resolve:rt}),ot="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";function at(t){if(null===t)return!1;var e,n,r=0,i=t.length,o=ot;for(n=0;n<i;n++)if(!((e=o.indexOf(t.charAt(n)))>64)){if(e<0)return!1;r+=6}return r%8==0}function st(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=ot,a=0,s=[];for(e=0;e<i;e++)e%4==0&&e&&(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)),a=a<<6|o.indexOf(r.charAt(e));return 0==(n=i%4*6)?(s.push(a>>16&255),s.push(a>>8&255),s.push(255&a)):18===n?(s.push(a>>10&255),s.push(a>>2&255)):12===n&&s.push(a>>4&255),new Uint8Array(s)}function lt(t){var e,n,r="",i=0,o=t.length,a=ot;for(e=0;e<o;e++)e%3==0&&e&&(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]),i=(i<<8)+t[e];return 0==(n=o%3)?(r+=a[i>>18&63],r+=a[i>>12&63],r+=a[i>>6&63],r+=a[63&i]):2===n?(r+=a[i>>10&63],r+=a[i>>4&63],r+=a[i<<2&63],r+=a[64]):1===n&&(r+=a[i>>2&63],r+=a[i<<4&63],r+=a[64],r+=a[64]),r}function ct(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}(0,r.K2)(at,"resolveYamlBinary"),(0,r.K2)(st,"constructYamlBinary"),(0,r.K2)(lt,"representYamlBinary"),(0,r.K2)(ct,"isBinary");var ht=new C("tag:yaml.org,2002:binary",{kind:"scalar",resolve:at,construct:st,predicate:ct,represent:lt}),ut=Object.prototype.hasOwnProperty,dt=Object.prototype.toString;function pt(t){if(null===t)return!0;var e,n,r,i,o,a=[],s=t;for(e=0,n=s.length;e<n;e+=1){if(r=s[e],o=!1,"[object Object]"!==dt.call(r))return!1;for(i in r)if(ut.call(r,i)){if(o)return!1;o=!0}if(!o)return!1;if(-1!==a.indexOf(i))return!1;a.push(i)}return!0}function ft(t){return null!==t?t:[]}(0,r.K2)(pt,"resolveYamlOmap"),(0,r.K2)(ft,"constructYamlOmap");var gt=new C("tag:yaml.org,2002:omap",{kind:"sequence",resolve:pt,construct:ft}),mt=Object.prototype.toString;function At(t){if(null===t)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],"[object Object]"!==mt.call(r))return!1;if(1!==(i=Object.keys(r)).length)return!1;o[e]=[i[0],r[i[0]]]}return!0}function yt(t){if(null===t)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}(0,r.K2)(At,"resolveYamlPairs"),(0,r.K2)(yt,"constructYamlPairs");var bt=new C("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:At,construct:yt}),xt=Object.prototype.hasOwnProperty;function vt(t){if(null===t)return!0;var e,n=t;for(e in n)if(xt.call(n,e)&&null!==n[e])return!1;return!0}function Ct(t){return null!==t?t:{}}(0,r.K2)(vt,"resolveYamlSet"),(0,r.K2)(Ct,"constructYamlSet");var kt=new C("tag:yaml.org,2002:set",{kind:"mapping",resolve:vt,construct:Ct}),wt=Q.extend({implicit:[nt,it],explicit:[ht,gt,bt,kt]}),Bt=Object.prototype.hasOwnProperty,It=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,St=/[\x85\u2028\u2029]/,_t=/[,\[\]\{\}]/,Et=/^(?:!|!!|![a-z\-]+!)$/i,Tt=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function Mt(t){return Object.prototype.toString.call(t)}function Lt(t){return 10===t||13===t}function Ot(t){return 9===t||32===t}function Dt(t){return 9===t||32===t||10===t||13===t}function Pt(t){return 44===t||91===t||93===t||123===t||125===t}function Ft(t){var e;return 48<=t&&t<=57?t-48:97<=(e=32|t)&&e<=102?e-97+10:-1}function jt(t){return 120===t?2:117===t?4:85===t?8:0}function zt(t){return 48<=t&&t<=57?t-48:-1}function $t(t){return 48===t?"\0":97===t?"":98===t?"\b":116===t||9===t?"\t":110===t?"\n":118===t?"\v":102===t?"\f":114===t?"\r":101===t?"":32===t?" ":34===t?'"':47===t?"/":92===t?"\\":78===t?"":95===t?"":76===t?"\u2028":80===t?"\u2029":""}function Rt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode(55296+(t-65536>>10),56320+(t-65536&1023))}(0,r.K2)(Mt,"_class"),(0,r.K2)(Lt,"is_EOL"),(0,r.K2)(Ot,"is_WHITE_SPACE"),(0,r.K2)(Dt,"is_WS_OR_EOL"),(0,r.K2)(Pt,"is_FLOW_INDICATOR"),(0,r.K2)(Ft,"fromHexCode"),(0,r.K2)(jt,"escapedHexLen"),(0,r.K2)(zt,"fromDecimalCode"),(0,r.K2)($t,"simpleEscapeSequence"),(0,r.K2)(Rt,"charFromCodepoint");var Nt,qt=new Array(256),Wt=new Array(256);for(Nt=0;Nt<256;Nt++)qt[Nt]=$t(Nt)?1:0,Wt[Nt]=$t(Nt);function Kt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||wt,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function Ut(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=A(n),new p(e,n)}function Ht(t,e){throw Ut(t,e)}function Gt(t,e){t.onWarning&&t.onWarning.call(null,Ut(t,e))}(0,r.K2)(Kt,"State$1"),(0,r.K2)(Ut,"generateError"),(0,r.K2)(Ht,"throwError"),(0,r.K2)(Gt,"throwWarning");var Yt={YAML:(0,r.K2)(function(t,e,n){var r,i,o;null!==t.version&&Ht(t,"duplication of %YAML directive"),1!==n.length&&Ht(t,"YAML directive accepts exactly one argument"),null===(r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]))&&Ht(t,"ill-formed argument of the YAML directive"),i=parseInt(r[1],10),o=parseInt(r[2],10),1!==i&&Ht(t,"unacceptable YAML version of the document"),t.version=n[0],t.checkLineBreaks=o<2,1!==o&&2!==o&&Gt(t,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:(0,r.K2)(function(t,e,n){var r,i;2!==n.length&&Ht(t,"TAG directive accepts exactly two arguments"),r=n[0],i=n[1],Et.test(r)||Ht(t,"ill-formed tag handle (first argument) of the TAG directive"),Bt.call(t.tagMap,r)&&Ht(t,'there is a previously declared suffix for "'+r+'" tag handle'),Tt.test(i)||Ht(t,"ill-formed tag prefix (second argument) of the TAG directive");try{i=decodeURIComponent(i)}catch(e){Ht(t,"tag prefix is malformed: "+i)}t.tagMap[r]=i},"handleTagDirective")};function Vt(t,e,n,r){var i,o,a,s;if(e<n){if(s=t.input.slice(e,n),r)for(i=0,o=s.length;i<o;i+=1)9===(a=s.charCodeAt(i))||32<=a&&a<=1114111||Ht(t,"expected valid JSON character");else It.test(s)&&Ht(t,"the stream contains non-printable characters");t.result+=s}}function Qt(t,e,n,r){var i,o,a,s;for(h.isObject(n)||Ht(t,"cannot merge mappings; the provided source object is unacceptable"),a=0,s=(i=Object.keys(n)).length;a<s;a+=1)o=i[a],Bt.call(e,o)||(e[o]=n[o],r[o]=!0)}function Xt(t,e,n,r,i,o,a,s,l){var c,h;if(Array.isArray(i))for(c=0,h=(i=Array.prototype.slice.call(i)).length;c<h;c+=1)Array.isArray(i[c])&&Ht(t,"nested arrays are not supported inside keys"),"object"==typeof i&&"[object Object]"===Mt(i[c])&&(i[c]="[object Object]");if("object"==typeof i&&"[object Object]"===Mt(i)&&(i="[object Object]"),i=String(i),null===e&&(e={}),"tag:yaml.org,2002:merge"===r)if(Array.isArray(o))for(c=0,h=o.length;c<h;c+=1)Qt(t,e,o[c],n);else Qt(t,e,o,n);else t.json||Bt.call(n,i)||!Bt.call(e,i)||(t.line=a||t.line,t.lineStart=s||t.lineStart,t.position=l||t.position,Ht(t,"duplicated mapping key")),"__proto__"===i?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete n[i];return e}function Zt(t){var e;10===(e=t.input.charCodeAt(t.position))?t.position++:13===e?(t.position++,10===t.input.charCodeAt(t.position)&&t.position++):Ht(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}function Jt(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);0!==i;){for(;Ot(i);)9===i&&-1===t.firstTabInLine&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&35===i)do{i=t.input.charCodeAt(++t.position)}while(10!==i&&13!==i&&0!==i);if(!Lt(i))break;for(Zt(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;32===i;)t.lineIndent++,i=t.input.charCodeAt(++t.position)}return-1!==n&&0!==r&&t.lineIndent<n&&Gt(t,"deficient indentation"),r}function te(t){var e,n=t.position;return!(45!==(e=t.input.charCodeAt(n))&&46!==e||e!==t.input.charCodeAt(n+1)||e!==t.input.charCodeAt(n+2)||(n+=3,0!==(e=t.input.charCodeAt(n))&&!Dt(e)))}function ee(t,e){1===e?t.result+=" ":e>1&&(t.result+=h.repeat("\n",e-1))}function ne(t,e,n){var r,i,o,a,s,l,c,h,u=t.kind,d=t.result;if(Dt(h=t.input.charCodeAt(t.position))||Pt(h)||35===h||38===h||42===h||33===h||124===h||62===h||39===h||34===h||37===h||64===h||96===h)return!1;if((63===h||45===h)&&(Dt(r=t.input.charCodeAt(t.position+1))||n&&Pt(r)))return!1;for(t.kind="scalar",t.result="",i=o=t.position,a=!1;0!==h;){if(58===h){if(Dt(r=t.input.charCodeAt(t.position+1))||n&&Pt(r))break}else if(35===h){if(Dt(t.input.charCodeAt(t.position-1)))break}else{if(t.position===t.lineStart&&te(t)||n&&Pt(h))break;if(Lt(h)){if(s=t.line,l=t.lineStart,c=t.lineIndent,Jt(t,!1,-1),t.lineIndent>=e){a=!0,h=t.input.charCodeAt(t.position);continue}t.position=o,t.line=s,t.lineStart=l,t.lineIndent=c;break}}a&&(Vt(t,i,o,!1),ee(t,t.line-s),i=o=t.position,a=!1),Ot(h)||(o=t.position+1),h=t.input.charCodeAt(++t.position)}return Vt(t,i,o,!1),!!t.result||(t.kind=u,t.result=d,!1)}function re(t,e){var n,r,i;if(39!==(n=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;0!==(n=t.input.charCodeAt(t.position));)if(39===n){if(Vt(t,r,t.position,!0),39!==(n=t.input.charCodeAt(++t.position)))return!0;r=t.position,t.position++,i=t.position}else Lt(n)?(Vt(t,r,i,!0),ee(t,Jt(t,!1,e)),r=i=t.position):t.position===t.lineStart&&te(t)?Ht(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);Ht(t,"unexpected end of the stream within a single quoted scalar")}function ie(t,e){var n,r,i,o,a,s;if(34!==(s=t.input.charCodeAt(t.position)))return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;0!==(s=t.input.charCodeAt(t.position));){if(34===s)return Vt(t,n,t.position,!0),t.position++,!0;if(92===s){if(Vt(t,n,t.position,!0),Lt(s=t.input.charCodeAt(++t.position)))Jt(t,!1,e);else if(s<256&&qt[s])t.result+=Wt[s],t.position++;else if((a=jt(s))>0){for(i=a,o=0;i>0;i--)(a=Ft(s=t.input.charCodeAt(++t.position)))>=0?o=(o<<4)+a:Ht(t,"expected hexadecimal character");t.result+=Rt(o),t.position++}else Ht(t,"unknown escape sequence");n=r=t.position}else Lt(s)?(Vt(t,n,r,!0),ee(t,Jt(t,!1,e)),n=r=t.position):t.position===t.lineStart&&te(t)?Ht(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}Ht(t,"unexpected end of the stream within a double quoted scalar")}function oe(t,e){var n,r,i,o,a,s,l,c,h,u,d,p,f=!0,g=t.tag,m=t.anchor,A=Object.create(null);if(91===(p=t.input.charCodeAt(t.position)))a=93,c=!1,o=[];else{if(123!==p)return!1;a=125,c=!0,o={}}for(null!==t.anchor&&(t.anchorMap[t.anchor]=o),p=t.input.charCodeAt(++t.position);0!==p;){if(Jt(t,!0,e),(p=t.input.charCodeAt(t.position))===a)return t.position++,t.tag=g,t.anchor=m,t.kind=c?"mapping":"sequence",t.result=o,!0;f?44===p&&Ht(t,"expected the node content, but found ','"):Ht(t,"missed comma between flow collection entries"),d=null,s=l=!1,63===p&&Dt(t.input.charCodeAt(t.position+1))&&(s=l=!0,t.position++,Jt(t,!0,e)),n=t.line,r=t.lineStart,i=t.position,de(t,e,1,!1,!0),u=t.tag,h=t.result,Jt(t,!0,e),p=t.input.charCodeAt(t.position),!l&&t.line!==n||58!==p||(s=!0,p=t.input.charCodeAt(++t.position),Jt(t,!0,e),de(t,e,1,!1,!0),d=t.result),c?Xt(t,o,A,u,h,d,n,r,i):s?o.push(Xt(t,null,A,u,h,d,n,r,i)):o.push(h),Jt(t,!0,e),44===(p=t.input.charCodeAt(t.position))?(f=!0,p=t.input.charCodeAt(++t.position)):f=!1}Ht(t,"unexpected end of the stream within a flow collection")}function ae(t,e){var n,r,i,o,a=1,s=!1,l=!1,c=e,u=0,d=!1;if(124===(o=t.input.charCodeAt(t.position)))r=!1;else{if(62!==o)return!1;r=!0}for(t.kind="scalar",t.result="";0!==o;)if(43===(o=t.input.charCodeAt(++t.position))||45===o)1===a?a=43===o?3:2:Ht(t,"repeat of a chomping mode identifier");else{if(!((i=zt(o))>=0))break;0===i?Ht(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):l?Ht(t,"repeat of an indentation width identifier"):(c=e+i-1,l=!0)}if(Ot(o)){do{o=t.input.charCodeAt(++t.position)}while(Ot(o));if(35===o)do{o=t.input.charCodeAt(++t.position)}while(!Lt(o)&&0!==o)}for(;0!==o;){for(Zt(t),t.lineIndent=0,o=t.input.charCodeAt(t.position);(!l||t.lineIndent<c)&&32===o;)t.lineIndent++,o=t.input.charCodeAt(++t.position);if(!l&&t.lineIndent>c&&(c=t.lineIndent),Lt(o))u++;else{if(t.lineIndent<c){3===a?t.result+=h.repeat("\n",s?1+u:u):1===a&&s&&(t.result+="\n");break}for(r?Ot(o)?(d=!0,t.result+=h.repeat("\n",s?1+u:u)):d?(d=!1,t.result+=h.repeat("\n",u+1)):0===u?s&&(t.result+=" "):t.result+=h.repeat("\n",u):t.result+=h.repeat("\n",s?1+u:u),s=!0,l=!0,u=0,n=t.position;!Lt(o)&&0!==o;)o=t.input.charCodeAt(++t.position);Vt(t,n,t.position,!1)}}return!0}function se(t,e){var n,r,i=t.tag,o=t.anchor,a=[],s=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=a),r=t.input.charCodeAt(t.position);0!==r&&(-1!==t.firstTabInLine&&(t.position=t.firstTabInLine,Ht(t,"tab characters must not be used in indentation")),45===r)&&Dt(t.input.charCodeAt(t.position+1));)if(s=!0,t.position++,Jt(t,!0,-1)&&t.lineIndent<=e)a.push(null),r=t.input.charCodeAt(t.position);else if(n=t.line,de(t,e,3,!1,!0),a.push(t.result),Jt(t,!0,-1),r=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&0!==r)Ht(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break;return!!s&&(t.tag=i,t.anchor=o,t.kind="sequence",t.result=a,!0)}function le(t,e,n){var r,i,o,a,s,l,c,h=t.tag,u=t.anchor,d={},p=Object.create(null),f=null,g=null,m=null,A=!1,y=!1;if(-1!==t.firstTabInLine)return!1;for(null!==t.anchor&&(t.anchorMap[t.anchor]=d),c=t.input.charCodeAt(t.position);0!==c;){if(A||-1===t.firstTabInLine||(t.position=t.firstTabInLine,Ht(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,63!==c&&58!==c||!Dt(r)){if(a=t.line,s=t.lineStart,l=t.position,!de(t,n,2,!1,!0))break;if(t.line===o){for(c=t.input.charCodeAt(t.position);Ot(c);)c=t.input.charCodeAt(++t.position);if(58===c)Dt(c=t.input.charCodeAt(++t.position))||Ht(t,"a whitespace character is expected after the key-value separator within a block mapping"),A&&(Xt(t,d,p,f,g,null,a,s,l),f=g=m=null),y=!0,A=!1,i=!1,f=t.tag,g=t.result;else{if(!y)return t.tag=h,t.anchor=u,!0;Ht(t,"can not read an implicit mapping pair; a colon is missed")}}else{if(!y)return t.tag=h,t.anchor=u,!0;Ht(t,"can not read a block mapping entry; a multiline key may not be an implicit key")}}else 63===c?(A&&(Xt(t,d,p,f,g,null,a,s,l),f=g=m=null),y=!0,A=!0,i=!0):A?(A=!1,i=!0):Ht(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,c=r;if((t.line===o||t.lineIndent>e)&&(A&&(a=t.line,s=t.lineStart,l=t.position),de(t,e,4,!0,i)&&(A?g=t.result:m=t.result),A||(Xt(t,d,p,f,g,m,a,s,l),f=g=m=null),Jt(t,!0,-1),c=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&0!==c)Ht(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return A&&Xt(t,d,p,f,g,null,a,s,l),y&&(t.tag=h,t.anchor=u,t.kind="mapping",t.result=d),y}function ce(t){var e,n,r,i,o=!1,a=!1;if(33!==(i=t.input.charCodeAt(t.position)))return!1;if(null!==t.tag&&Ht(t,"duplication of a tag property"),60===(i=t.input.charCodeAt(++t.position))?(o=!0,i=t.input.charCodeAt(++t.position)):33===i?(a=!0,n="!!",i=t.input.charCodeAt(++t.position)):n="!",e=t.position,o){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&62!==i);t.position<t.length?(r=t.input.slice(e,t.position),i=t.input.charCodeAt(++t.position)):Ht(t,"unexpected end of the stream within a verbatim tag")}else{for(;0!==i&&!Dt(i);)33===i&&(a?Ht(t,"tag suffix cannot contain exclamation marks"):(n=t.input.slice(e-1,t.position+1),Et.test(n)||Ht(t,"named tag handle cannot contain such characters"),a=!0,e=t.position+1)),i=t.input.charCodeAt(++t.position);r=t.input.slice(e,t.position),_t.test(r)&&Ht(t,"tag suffix cannot contain flow indicator characters")}r&&!Tt.test(r)&&Ht(t,"tag name cannot contain such characters: "+r);try{r=decodeURIComponent(r)}catch(e){Ht(t,"tag name is malformed: "+r)}return o?t.tag=r:Bt.call(t.tagMap,n)?t.tag=t.tagMap[n]+r:"!"===n?t.tag="!"+r:"!!"===n?t.tag="tag:yaml.org,2002:"+r:Ht(t,'undeclared tag handle "'+n+'"'),!0}function he(t){var e,n;if(38!==(n=t.input.charCodeAt(t.position)))return!1;for(null!==t.anchor&&Ht(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;0!==n&&!Dt(n)&&!Pt(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&Ht(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}function ue(t){var e,n,r;if(42!==(r=t.input.charCodeAt(t.position)))return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;0!==r&&!Dt(r)&&!Pt(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&Ht(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Bt.call(t.anchorMap,n)||Ht(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],Jt(t,!0,-1),!0}function de(t,e,n,r,i){var o,a,s,l,c,h,u,d,p,f=1,g=!1,m=!1;if(null!==t.listener&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=s=4===n||3===n,r&&Jt(t,!0,-1)&&(g=!0,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)),1===f)for(;ce(t)||he(t);)Jt(t,!0,-1)?(g=!0,s=o,t.lineIndent>e?f=1:t.lineIndent===e?f=0:t.lineIndent<e&&(f=-1)):s=!1;if(s&&(s=g||i),1!==f&&4!==n||(d=1===n||2===n?e:e+1,p=t.position-t.lineStart,1===f?s&&(se(t,p)||le(t,p,d))||oe(t,d)?m=!0:(a&&ae(t,d)||re(t,d)||ie(t,d)?m=!0:ue(t)?(m=!0,null===t.tag&&null===t.anchor||Ht(t,"alias node should not have any properties")):ne(t,d,1===n)&&(m=!0,null===t.tag&&(t.tag="?")),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):0===f&&(m=s&&se(t,p))),null===t.tag)null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);else if("?"===t.tag){for(null!==t.result&&"scalar"!==t.kind&&Ht(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),l=0,c=t.implicitTypes.length;l<c;l+=1)if((u=t.implicitTypes[l]).resolve(t.result)){t.result=u.construct(t.result),t.tag=u.tag,null!==t.anchor&&(t.anchorMap[t.anchor]=t.result);break}}else if("!"!==t.tag){if(Bt.call(t.typeMap[t.kind||"fallback"],t.tag))u=t.typeMap[t.kind||"fallback"][t.tag];else for(u=null,l=0,c=(h=t.typeMap.multi[t.kind||"fallback"]).length;l<c;l+=1)if(t.tag.slice(0,h[l].tag.length)===h[l].tag){u=h[l];break}u||Ht(t,"unknown tag !<"+t.tag+">"),null!==t.result&&u.kind!==t.kind&&Ht(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+u.kind+'", not "'+t.kind+'"'),u.resolve(t.result,t.tag)?(t.result=u.construct(t.result,t.tag),null!==t.anchor&&(t.anchorMap[t.anchor]=t.result)):Ht(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return null!==t.listener&&t.listener("close",t),null!==t.tag||null!==t.anchor||m}function pe(t){var e,n,r,i,o=t.position,a=!1;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);0!==(i=t.input.charCodeAt(t.position))&&(Jt(t,!0,-1),i=t.input.charCodeAt(t.position),!(t.lineIndent>0||37!==i));){for(a=!0,i=t.input.charCodeAt(++t.position),e=t.position;0!==i&&!Dt(i);)i=t.input.charCodeAt(++t.position);for(r=[],(n=t.input.slice(e,t.position)).length<1&&Ht(t,"directive name must not be less than one character in length");0!==i;){for(;Ot(i);)i=t.input.charCodeAt(++t.position);if(35===i){do{i=t.input.charCodeAt(++t.position)}while(0!==i&&!Lt(i));break}if(Lt(i))break;for(e=t.position;0!==i&&!Dt(i);)i=t.input.charCodeAt(++t.position);r.push(t.input.slice(e,t.position))}0!==i&&Zt(t),Bt.call(Yt,n)?Yt[n](t,n,r):Gt(t,'unknown document directive "'+n+'"')}Jt(t,!0,-1),0===t.lineIndent&&45===t.input.charCodeAt(t.position)&&45===t.input.charCodeAt(t.position+1)&&45===t.input.charCodeAt(t.position+2)?(t.position+=3,Jt(t,!0,-1)):a&&Ht(t,"directives end mark is expected"),de(t,t.lineIndent-1,4,!1,!0),Jt(t,!0,-1),t.checkLineBreaks&&St.test(t.input.slice(o,t.position))&&Gt(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&te(t)?46===t.input.charCodeAt(t.position)&&(t.position+=3,Jt(t,!0,-1)):t.position<t.length-1&&Ht(t,"end of the stream or a document separator is expected")}function fe(t,e){e=e||{},0!==(t=String(t)).length&&(10!==t.charCodeAt(t.length-1)&&13!==t.charCodeAt(t.length-1)&&(t+="\n"),65279===t.charCodeAt(0)&&(t=t.slice(1)));var n=new Kt(t,e),r=t.indexOf("\0");for(-1!==r&&(n.position=r,Ht(n,"null byte is not allowed in input")),n.input+="\0";32===n.input.charCodeAt(n.position);)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)pe(n);return n.documents}function ge(t,e,n){null!==e&&"object"==typeof e&&void 0===n&&(n=e,e=null);var r=fe(t,n);if("function"!=typeof e)return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])}function me(t,e){var n=fe(t,e);if(0!==n.length){if(1===n.length)return n[0];throw new p("expected a single document in the stream, but found more")}}(0,r.K2)(Vt,"captureSegment"),(0,r.K2)(Qt,"mergeMappings"),(0,r.K2)(Xt,"storeMappingPair"),(0,r.K2)(Zt,"readLineBreak"),(0,r.K2)(Jt,"skipSeparationSpace"),(0,r.K2)(te,"testDocumentSeparator"),(0,r.K2)(ee,"writeFoldedLines"),(0,r.K2)(ne,"readPlainScalar"),(0,r.K2)(re,"readSingleQuotedScalar"),(0,r.K2)(ie,"readDoubleQuotedScalar"),(0,r.K2)(oe,"readFlowCollection"),(0,r.K2)(ae,"readBlockScalar"),(0,r.K2)(se,"readBlockSequence"),(0,r.K2)(le,"readBlockMapping"),(0,r.K2)(ce,"readTagProperty"),(0,r.K2)(he,"readAnchorProperty"),(0,r.K2)(ue,"readAlias"),(0,r.K2)(de,"composeNode"),(0,r.K2)(pe,"readDocument"),(0,r.K2)(fe,"loadDocuments"),(0,r.K2)(ge,"loadAll$1"),(0,r.K2)(me,"load$1");var Ae=me,ye=Object.prototype.toString,be=Object.prototype.hasOwnProperty,xe=65279,ve={0:"\\0",7:"\\a",8:"\\b",9:"\\t",10:"\\n",11:"\\v",12:"\\f",13:"\\r",27:"\\e",34:'\\"',92:"\\\\",133:"\\N",160:"\\_",8232:"\\L",8233:"\\P"},Ce=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],ke=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function we(t,e){var n,r,i,o,a,s,l;if(null===e)return{};for(n={},i=0,o=(r=Object.keys(e)).length;i<o;i+=1)a=r[i],s=String(e[a]),"!!"===a.slice(0,2)&&(a="tag:yaml.org,2002:"+a.slice(2)),(l=t.compiledTypeMap.fallback[a])&&be.call(l.styleAliases,s)&&(s=l.styleAliases[s]),n[a]=s;return n}function Be(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else{if(!(t<=4294967295))throw new p("code point within a string may not be greater than 0xFFFFFFFF");n="U",r=8}return"\\"+n+h.repeat("0",r-e.length)+e}function Ie(t){this.schema=t.schema||wt,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=h.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=we(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType='"'===t.quotingType?2:1,this.forceQuotes=t.forceQuotes||!1,this.replacer="function"==typeof t.replacer?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function Se(t,e){for(var n,r=h.repeat(" ",e),i=0,o=-1,a="",s=t.length;i<s;)-1===(o=t.indexOf("\n",i))?(n=t.slice(i),i=s):(n=t.slice(i,o+1),i=o+1),n.length&&"\n"!==n&&(a+=r),a+=n;return a}function _e(t,e){return"\n"+h.repeat(" ",t.indent*e)}function Ee(t,e){var n,r;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(t.implicitTypes[n].resolve(e))return!0;return!1}function Te(t){return 32===t||9===t}function Me(t){return 32<=t&&t<=126||161<=t&&t<=55295&&8232!==t&&8233!==t||57344<=t&&t<=65533&&t!==xe||65536<=t&&t<=1114111}function Le(t){return Me(t)&&t!==xe&&13!==t&&10!==t}function Oe(t,e,n){var r=Le(t),i=r&&!Te(t);return(n?r:r&&44!==t&&91!==t&&93!==t&&123!==t&&125!==t)&&35!==t&&!(58===e&&!i)||Le(e)&&!Te(e)&&35===t||58===e&&i}function De(t){return Me(t)&&t!==xe&&!Te(t)&&45!==t&&63!==t&&58!==t&&44!==t&&91!==t&&93!==t&&123!==t&&125!==t&&35!==t&&38!==t&&42!==t&&33!==t&&124!==t&&61!==t&&62!==t&&39!==t&&34!==t&&37!==t&&64!==t&&96!==t}function Pe(t){return!Te(t)&&58!==t}function Fe(t,e){var n,r=t.charCodeAt(e);return r>=55296&&r<=56319&&e+1<t.length&&(n=t.charCodeAt(e+1))>=56320&&n<=57343?1024*(r-55296)+n-56320+65536:r}function je(t){return/^\n* /.test(t)}function ze(t,e,n,r,i,o,a,s){var l,c=0,h=null,u=!1,d=!1,p=-1!==r,f=-1,g=De(Fe(t,0))&&Pe(Fe(t,t.length-1));if(e||a)for(l=0;l<t.length;c>=65536?l+=2:l++){if(!Me(c=Fe(t,l)))return 5;g=g&&Oe(c,h,s),h=c}else{for(l=0;l<t.length;c>=65536?l+=2:l++){if(10===(c=Fe(t,l)))u=!0,p&&(d=d||l-f-1>r&&" "!==t[f+1],f=l);else if(!Me(c))return 5;g=g&&Oe(c,h,s),h=c}d=d||p&&l-f-1>r&&" "!==t[f+1]}return u||d?n>9&&je(t)?5:a?2===o?5:2:d?4:3:!g||a||i(t)?2===o?5:2:1}function $e(t,e,n,i,o){t.dump=function(){if(0===e.length)return 2===t.quotingType?'""':"''";if(!t.noCompatMode&&(-1!==Ce.indexOf(e)||ke.test(e)))return 2===t.quotingType?'"'+e+'"':"'"+e+"'";var a=t.indent*Math.max(1,n),s=-1===t.lineWidth?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-a),l=i||t.flowLevel>-1&&n>=t.flowLevel;function c(e){return Ee(t,e)}switch((0,r.K2)(c,"testAmbiguity"),ze(e,l,t.indent,s,c,t.quotingType,t.forceQuotes&&!i,o)){case 1:return e;case 2:return"'"+e.replace(/'/g,"''")+"'";case 3:return"|"+Re(e,t.indent)+Ne(Se(e,a));case 4:return">"+Re(e,t.indent)+Ne(Se(qe(e,s),a));case 5:return'"'+Ke(e)+'"';default:throw new p("impossible error: invalid scalar style")}}()}function Re(t,e){var n=je(t)?String(e):"",r="\n"===t[t.length-1];return n+(!r||"\n"!==t[t.length-2]&&"\n"!==t?r?"":"-":"+")+"\n"}function Ne(t){return"\n"===t[t.length-1]?t.slice(0,-1):t}function qe(t,e){for(var n,r,i,o=/(\n+)([^\n]*)/g,a=(n=-1!==(n=t.indexOf("\n"))?n:t.length,o.lastIndex=n,We(t.slice(0,n),e)),s="\n"===t[0]||" "===t[0];i=o.exec(t);){var l=i[1],c=i[2];r=" "===c[0],a+=l+(s||r||""===c?"":"\n")+We(c,e),s=r}return a}function We(t,e){if(""===t||" "===t[0])return t;for(var n,r,i=/ [^ ]/g,o=0,a=0,s=0,l="";n=i.exec(t);)(s=n.index)-o>e&&(r=a>o?a:s,l+="\n"+t.slice(o,r),o=r+1),a=s;return l+="\n",t.length-o>e&&a>o?l+=t.slice(o,a)+"\n"+t.slice(a+1):l+=t.slice(o),l.slice(1)}function Ke(t){for(var e,n="",r=0,i=0;i<t.length;r>=65536?i+=2:i++)r=Fe(t,i),!(e=ve[r])&&Me(r)?(n+=t[i],r>=65536&&(n+=t[i+1])):n+=e||Be(r);return n}function Ue(t,e,n){var r,i,o,a="",s=t.tag;for(r=0,i=n.length;r<i;r+=1)o=n[r],t.replacer&&(o=t.replacer.call(n,String(r),o)),(Qe(t,e,o,!1,!1)||void 0===o&&Qe(t,e,null,!1,!1))&&(""!==a&&(a+=","+(t.condenseFlow?"":" ")),a+=t.dump);t.tag=s,t.dump="["+a+"]"}function He(t,e,n,r){var i,o,a,s="",l=t.tag;for(i=0,o=n.length;i<o;i+=1)a=n[i],t.replacer&&(a=t.replacer.call(n,String(i),a)),(Qe(t,e+1,a,!0,!0,!1,!0)||void 0===a&&Qe(t,e+1,null,!0,!0,!1,!0))&&(r&&""===s||(s+=_e(t,e)),t.dump&&10===t.dump.charCodeAt(0)?s+="-":s+="- ",s+=t.dump);t.tag=l,t.dump=s||"[]"}function Ge(t,e,n){var r,i,o,a,s,l="",c=t.tag,h=Object.keys(n);for(r=0,i=h.length;r<i;r+=1)s="",""!==l&&(s+=", "),t.condenseFlow&&(s+='"'),a=n[o=h[r]],t.replacer&&(a=t.replacer.call(n,o,a)),Qe(t,e,o,!1,!1)&&(t.dump.length>1024&&(s+="? "),s+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Qe(t,e,a,!1,!1)&&(l+=s+=t.dump));t.tag=c,t.dump="{"+l+"}"}function Ye(t,e,n,r){var i,o,a,s,l,c,h="",u=t.tag,d=Object.keys(n);if(!0===t.sortKeys)d.sort();else if("function"==typeof t.sortKeys)d.sort(t.sortKeys);else if(t.sortKeys)throw new p("sortKeys must be a boolean or a function");for(i=0,o=d.length;i<o;i+=1)c="",r&&""===h||(c+=_e(t,e)),s=n[a=d[i]],t.replacer&&(s=t.replacer.call(n,a,s)),Qe(t,e+1,a,!0,!0,!0)&&((l=null!==t.tag&&"?"!==t.tag||t.dump&&t.dump.length>1024)&&(t.dump&&10===t.dump.charCodeAt(0)?c+="?":c+="? "),c+=t.dump,l&&(c+=_e(t,e)),Qe(t,e+1,s,!0,l)&&(t.dump&&10===t.dump.charCodeAt(0)?c+=":":c+=": ",h+=c+=t.dump));t.tag=u,t.dump=h||"{}"}function Ve(t,e,n){var r,i,o,a,s,l;for(o=0,a=(i=n?t.explicitTypes:t.implicitTypes).length;o<a;o+=1)if(((s=i[o]).instanceOf||s.predicate)&&(!s.instanceOf||"object"==typeof e&&e instanceof s.instanceOf)&&(!s.predicate||s.predicate(e))){if(n?s.multi&&s.representName?t.tag=s.representName(e):t.tag=s.tag:t.tag="?",s.represent){if(l=t.styleMap[s.tag]||s.defaultStyle,"[object Function]"===ye.call(s.represent))r=s.represent(e,l);else{if(!be.call(s.represent,l))throw new p("!<"+s.tag+'> tag resolver accepts not "'+l+'" style');r=s.represent[l](e,l)}t.dump=r}return!0}return!1}function Qe(t,e,n,r,i,o,a){t.tag=null,t.dump=n,Ve(t,n,!1)||Ve(t,n,!0);var s,l=ye.call(t.dump),c=r;r&&(r=t.flowLevel<0||t.flowLevel>e);var h,u,d="[object Object]"===l||"[object Array]"===l;if(d&&(u=-1!==(h=t.duplicates.indexOf(n))),(null!==t.tag&&"?"!==t.tag||u||2!==t.indent&&e>0)&&(i=!1),u&&t.usedDuplicates[h])t.dump="*ref_"+h;else{if(d&&u&&!t.usedDuplicates[h]&&(t.usedDuplicates[h]=!0),"[object Object]"===l)r&&0!==Object.keys(t.dump).length?(Ye(t,e,t.dump,i),u&&(t.dump="&ref_"+h+t.dump)):(Ge(t,e,t.dump),u&&(t.dump="&ref_"+h+" "+t.dump));else if("[object Array]"===l)r&&0!==t.dump.length?(t.noArrayIndent&&!a&&e>0?He(t,e-1,t.dump,i):He(t,e,t.dump,i),u&&(t.dump="&ref_"+h+t.dump)):(Ue(t,e,t.dump),u&&(t.dump="&ref_"+h+" "+t.dump));else{if("[object String]"!==l){if("[object Undefined]"===l)return!1;if(t.skipInvalid)return!1;throw new p("unacceptable kind of an object to dump "+l)}"?"!==t.tag&&$e(t,t.dump,e,o,c)}null!==t.tag&&"?"!==t.tag&&(s=encodeURI("!"===t.tag[0]?t.tag.slice(1):t.tag).replace(/!/g,"%21"),s="!"===t.tag[0]?"!"+s:"tag:yaml.org,2002:"===s.slice(0,18)?"!!"+s.slice(18):"!<"+s+">",t.dump=s+" "+t.dump)}return!0}function Xe(t,e){var n,r,i=[],o=[];for(Ze(t,i,o),n=0,r=o.length;n<r;n+=1)e.duplicates.push(i[o[n]]);e.usedDuplicates=new Array(r)}function Ze(t,e,n){var r,i,o;if(null!==t&&"object"==typeof t)if(-1!==(i=e.indexOf(t)))-1===n.indexOf(i)&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Ze(t[i],e,n);else for(i=0,o=(r=Object.keys(t)).length;i<o;i+=1)Ze(t[r[i]],e,n)}function Je(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}(0,r.K2)(we,"compileStyleMap"),(0,r.K2)(Be,"encodeHex"),(0,r.K2)(Ie,"State"),(0,r.K2)(Se,"indentString"),(0,r.K2)(_e,"generateNextLine"),(0,r.K2)(Ee,"testImplicitResolving"),(0,r.K2)(Te,"isWhitespace"),(0,r.K2)(Me,"isPrintable"),(0,r.K2)(Le,"isNsCharOrWhitespace"),(0,r.K2)(Oe,"isPlainSafe"),(0,r.K2)(De,"isPlainSafeFirst"),(0,r.K2)(Pe,"isPlainSafeLast"),(0,r.K2)(Fe,"codePointAt"),(0,r.K2)(je,"needIndentIndicator"),(0,r.K2)(ze,"chooseScalarStyle"),(0,r.K2)($e,"writeScalar"),(0,r.K2)(Re,"blockHeader"),(0,r.K2)(Ne,"dropEndingNewline"),(0,r.K2)(qe,"foldString"),(0,r.K2)(We,"foldLine"),(0,r.K2)(Ke,"escapeString"),(0,r.K2)(Ue,"writeFlowSequence"),(0,r.K2)(He,"writeBlockSequence"),(0,r.K2)(Ge,"writeFlowMapping"),(0,r.K2)(Ye,"writeBlockMapping"),(0,r.K2)(Ve,"detectType"),(0,r.K2)(Qe,"writeNode"),(0,r.K2)(Xe,"getDuplicateReferences"),(0,r.K2)(Ze,"inspectNode"),(0,r.K2)(function(t,e){var n=new Ie(e=e||{});n.noRefs||Xe(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Qe(n,0,r,!0,!0)?n.dump+"\n":""},"dump$1"),(0,r.K2)(Je,"renamed");var tn=V,en=Ae;Je("safeLoad","load"),Je("safeLoadAll","loadAll"),Je("safeDump","dump")},74353:function(t){t.exports=function(){"use strict";var t=6e4,e=36e5,n="millisecond",r="second",i="minute",o="hour",a="day",s="week",l="month",c="quarter",h="year",u="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},m=function(t,e,n){var r=String(t);return!r||r.length>=e?t:""+Array(e+1-r.length).join(n)+t},A={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),r=Math.floor(n/60),i=n%60;return(e<=0?"+":"-")+m(r,2,"0")+":"+m(i,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var r=12*(n.year()-e.year())+(n.month()-e.month()),i=e.clone().add(r,l),o=n-i<0,a=e.clone().add(r+(o?-1:1),l);return+(-(r+(n-i)/(o?i-a:a-i))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:h,w:s,d:a,D:u,h:o,m:i,s:r,ms:n,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",b={};b[y]=g;var x="$isDayjsObject",v=function(t){return t instanceof B||!(!t||!t[x])},C=function t(e,n,r){var i;if(!e)return y;if("string"==typeof e){var o=e.toLowerCase();b[o]&&(i=o),n&&(b[o]=n,i=o);var a=e.split("-");if(!i&&a.length>1)return t(a[0])}else{var s=e.name;b[s]=e,i=s}return!r&&i&&(y=i),i||!r&&y},k=function(t,e){if(v(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new B(n)},w=A;w.l=C,w.i=v,w.w=function(t,e){return k(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var B=function(){function g(t){this.$L=C(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[x]=!0}var m=g.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(w.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var r=e.match(p);if(r){var i=r[2]-1||0,o=(r[7]||"0").substring(0,3);return n?new Date(Date.UTC(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)):new Date(r[1],i,r[3]||1,r[4]||0,r[5]||0,r[6]||0,o)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return w},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(t,e){var n=k(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return k(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<k(t)},m.$g=function(t,e,n){return w.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,c=!!w.u(e)||e,d=w.p(t),p=function(t,e){var r=w.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return c?r:r.endOf(a)},f=function(t,e){return w.w(n.toDate()[t].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,m=this.$M,A=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case h:return c?p(1,0):p(31,11);case l:return c?p(1,m):p(0,m+1);case s:var b=this.$locale().weekStart||0,x=(g<b?g+7:g)-b;return p(c?A-x:A+(6-x),m);case a:case u:return f(y+"Hours",0);case o:return f(y+"Minutes",1);case i:return f(y+"Seconds",2);case r:return f(y+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var s,c=w.p(t),d="set"+(this.$u?"UTC":""),p=(s={},s[a]=d+"Date",s[u]=d+"Date",s[l]=d+"Month",s[h]=d+"FullYear",s[o]=d+"Hours",s[i]=d+"Minutes",s[r]=d+"Seconds",s[n]=d+"Milliseconds",s)[c],f=c===a?this.$D+(e-this.$W):e;if(c===l||c===h){var g=this.clone().set(u,1);g.$d[p](f),g.init(),this.$d=g.set(u,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[w.p(t)]()},m.add=function(n,c){var u,d=this;n=Number(n);var p=w.p(c),f=function(t){var e=k(d);return w.w(e.date(e.date()+Math.round(t*n)),d)};if(p===l)return this.set(l,this.$M+n);if(p===h)return this.set(h,this.$y+n);if(p===a)return f(1);if(p===s)return f(7);var g=(u={},u[i]=t,u[o]=e,u[r]=1e3,u)[p]||1,m=this.$d.getTime()+n*g;return w.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var r=t||"YYYY-MM-DDTHH:mm:ssZ",i=w.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,h=n.meridiem,u=function(t,n,i,o){return t&&(t[n]||t(e,r))||i[n].slice(0,o)},p=function(t){return w.s(o%12||12,t,"0")},g=h||function(t,e,n){var r=t<12?"AM":"PM";return n?r.toLowerCase():r};return r.replace(f,function(t,r){return r||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return w.s(e.$y,4,"0");case"M":return s+1;case"MM":return w.s(s+1,2,"0");case"MMM":return u(n.monthsShort,s,c,3);case"MMMM":return u(c,s);case"D":return e.$D;case"DD":return w.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return u(n.weekdaysMin,e.$W,l,2);case"ddd":return u(n.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(o);case"HH":return w.s(o,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return g(o,a,!0);case"A":return g(o,a,!1);case"m":return String(a);case"mm":return w.s(a,2,"0");case"s":return String(e.$s);case"ss":return w.s(e.$s,2,"0");case"SSS":return w.s(e.$ms,3,"0");case"Z":return i}return null}(t)||i.replace(":","")})},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,u,d){var p,f=this,g=w.p(u),m=k(n),A=(m.utcOffset()-this.utcOffset())*t,y=this-m,b=function(){return w.m(f,m)};switch(g){case h:p=b()/12;break;case l:p=b();break;case c:p=b()/3;break;case s:p=(y-A)/6048e5;break;case a:p=(y-A)/864e5;break;case o:p=y/e;break;case i:p=y/t;break;case r:p=y/1e3;break;default:p=y}return d?p:w.a(p)},m.daysInMonth=function(){return this.endOf(l).$D},m.$locale=function(){return b[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),r=C(t,e,!0);return r&&(n.$L=r),n},m.clone=function(){return w.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),I=B.prototype;return k.prototype=I,[["$ms",n],["$s",r],["$m",i],["$H",o],["$W",a],["$M",l],["$y",h],["$D",u]].forEach(function(t){I[t[1]]=function(e){return this.$g(e,t[0],t[1])}}),k.extend=function(t,e){return t.$i||(t(e,B,k),t.$i=!0),k},k.locale=C,k.isDayjs=v,k.unix=function(t){return k(1e3*t)},k.en=b[y],k.Ls=b,k.p={},k}()},75263:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(95635);const i=(t,e)=>(0,r.A)(t,"l",-e)},76314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var n="",r=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),r&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),r&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n}).join("")},e.i=function(t,n,r,i,o){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var c=0;c<t.length;c++){var h=[].concat(t[c]);r&&a[h[0]]||(void 0!==o&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=o),n&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=n):h[2]=n),i&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=i):h[4]="".concat(i)),e.push(h))}},e}},76582:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(71354),i=n.n(r),o=n(76314),a=n.n(o)()(i());a.push([t.id,"/*  */\n\n.settings-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n    animation: fadeIn 0.2s ease-in-out;\n}\n\n.settings-dialog {\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n    width: 90%;\n    max-width: 700px;\n    max-height: 80vh;\n    display: flex;\n    flex-direction: column;\n    animation: slideUp 0.3s ease-out;\n}\n\n.settings-header {\n    padding: 20px;\n    border-bottom: 1px solid #e5e7eb;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.settings-header h3 {\n    margin: 0;\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.settings-close {\n    background: none;\n    border: none;\n    font-size: 24px;\n    color: #6b7280;\n    cursor: pointer;\n    padding: 4px;\n    line-height: 1;\n    border-radius: 6px;\n    transition: all 0.2s;\n}\n\n.settings-close:hover {\n    background: #f3f4f6;\n    color: #1f2937;\n}\n\n.settings-body {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n}\n\n/*  */\n.settings-tabs {\n    display: flex;\n    border-bottom: 1px solid #e5e7eb;\n    margin-bottom: 24px;\n}\n\n.settings-tab {\n    flex: 1;\n    padding: 12px 20px;\n    background: none;\n    border: none;\n    border-bottom: 2px solid transparent;\n    cursor: pointer;\n    font-size: 14px;\n    font-weight: 500;\n    color: #6b7280;\n    transition: all 0.2s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n}\n\n.settings-tab.active {\n    color: #3b82f6;\n    border-bottom-color: #3b82f6;\n}\n\n.settings-tab:hover {\n    background: #f9fafb;\n    color: #1f2937;\n}\n\n/*  */\n.settings-tab-content {\n    display: none;\n}\n\n.settings-tab-content.active {\n    display: block;\n}\n\n.settings-tab-content h4 {\n    margin: 0 0 16px 0;\n    font-size: 18px;\n    font-weight: 600;\n    color: #1f2937;\n}\n\n/* AI */\n.ai-provider-tabs {\n    display: flex;\n    border-bottom: 1px solid #e5e7eb;\n    margin-bottom: 20px;\n}\n\n.ai-provider-tab {\n    flex: 1;\n    padding: 12px 20px;\n    background: none;\n    border: none;\n    border-bottom: 2px solid transparent;\n    cursor: pointer;\n    font-size: 14px;\n    font-weight: 500;\n    color: #6b7280;\n    transition: all 0.2s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n}\n\n.ai-provider-tab.active {\n    color: #3b82f6;\n    border-bottom-color: #3b82f6;\n}\n\n.ai-provider-tab:hover {\n    background: #f9fafb;\n    color: #1f2937;\n}\n\n.ai-provider-content {\n    display: none;\n}\n\n.ai-provider-content.active {\n    display: block;\n}\n\n/* AI */\n.ai-form-group,\n.settings-form-group {\n    margin-bottom: 20px;\n}\n\n.ai-form-label,\n.settings-form-group label {\n    display: block;\n    margin-bottom: 6px;\n    font-size: 14px;\n    font-weight: 500;\n    color: #374151;\n}\n\n.ai-form-input,\n.settings-form-select {\n    width: 100%;\n    padding: 10px 12px;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    font-size: 14px;\n    color: #1f2937;\n    transition: border-color 0.2s;\n    box-sizing: border-box;\n}\n\n.ai-form-input:focus,\n.settings-form-select:focus {\n    outline: none;\n    border-color: #3b82f6;\n    ring: 2px;\n    ring-color: rgba(59, 130, 246, 0.1);\n}\n\n.ai-form-select,\n.settings-form-select {\n    background: white;\n    cursor: pointer;\n}\n\n/*  */\n.ai-password-group {\n    position: relative;\n}\n\n.ai-password-toggle {\n    position: absolute;\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n    background: none;\n    border: none;\n    color: #6b7280;\n    cursor: pointer;\n    font-size: 16px;\n    padding: 2px;\n    border-radius: 4px;\n    transition: all 0.2s;\n}\n\n.ai-password-toggle:hover {\n    color: #374151;\n    background: #f3f4f6;\n}\n\n/* API */\n.ai-api-info {\n    background: #f9fafb;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    padding: 16px;\n    margin-bottom: 20px;\n}\n\n.ai-api-info h4 {\n    margin: 0 0 8px 0;\n    font-size: 14px;\n    font-weight: 600;\n    color: #374151;\n}\n\n.ai-api-info p {\n    margin: 0 0 12px 0;\n    font-size: 13px;\n    color: #6b7280;\n    line-height: 1.4;\n}\n\n.ai-api-link {\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    color: #3b82f6;\n    text-decoration: none;\n    font-size: 13px;\n    font-weight: 500;\n    transition: color 0.2s;\n}\n\n.ai-api-link:hover {\n    color: #1d4ed8;\n    text-decoration: underline;\n}\n\n/*  */\n.settings-button-group {\n    display: flex;\n    gap: 12px;\n    margin-top: 24px;\n    padding-top: 20px;\n    border-top: 1px solid #e5e7eb;\n}\n\n.ai-button,\n.settings-button {\n    padding: 10px 20px;\n    border-radius: 6px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s;\n    border: 1px solid;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.ai-button-primary,\n.settings-button-primary {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n}\n\n.ai-button-primary:hover,\n.settings-button-primary:hover {\n    background: #2563eb;\n    border-color: #2563eb;\n}\n\n.ai-button-secondary,\n.settings-button-secondary {\n    background: white;\n    color: #374151;\n    border-color: #d1d5db;\n}\n\n.ai-button-secondary:hover,\n.settings-button-secondary:hover {\n    background: #f9fafb;\n    border-color: #9ca3af;\n}\n\n.ai-button:disabled,\n.settings-button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n/*  */\n.ai-test-button {\n    width: 100%;\n    margin-top: 16px;\n}\n\n/*  */\n.ai-button.loading,\n.settings-button.loading {\n    pointer-events: none;\n}\n\n.ai-button.loading::after,\n.settings-button.loading::after {\n    content: '';\n    width: 16px;\n    height: 16px;\n    border: 2px solid transparent;\n    border-top: 2px solid currentColor;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-left: 8px;\n}\n\n/*  */\n.settings-form-group input[type=\"checkbox\"] {\n    margin-right: 8px;\n    transform: scale(1.1);\n}\n\n.settings-form-group label {\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    font-weight: normal;\n}\n\n/*  */\n.ai-message,\n.settings-message {\n    padding: 12px 16px;\n    border-radius: 6px;\n    margin-bottom: 16px;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    animation: slideDown 0.3s ease-out;\n}\n\n.ai-message.success,\n.settings-message.success {\n    background: #dcfce7;\n    color: #166534;\n    border: 1px solid #bbf7d0;\n}\n\n.ai-message.error,\n.settings-message.error {\n    background: #fef2f2;\n    color: #dc2626;\n    border: 1px solid #fecaca;\n}\n\n.ai-message.info,\n.settings-message.info {\n    background: #dbeafe;\n    color: #1e40af;\n    border: 1px solid #bfdbfe;\n}\n\n/*  */\n@keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n}\n\n@keyframes slideUp {\n    from {\n        transform: translateY(20px);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0);\n        opacity: 1;\n    }\n}\n\n@keyframes slideDown {\n    from {\n        transform: translateY(-10px);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0);\n        opacity: 1;\n    }\n}\n\n@keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n}\n\n/*  */\n@media (max-width: 640px) {\n    .settings-dialog {\n        width: 95%;\n        max-height: 90vh;\n    }\n    \n    .settings-header {\n        padding: 16px;\n    }\n    \n    .settings-body {\n        padding: 16px;\n    }\n    \n    .settings-button-group {\n        flex-direction: column;\n    }\n    \n    .settings-tab,\n    .ai-provider-tab {\n        padding: 10px 16px;\n        font-size: 13px;\n    }\n\n    .settings-tabs {\n        flex-wrap: wrap;\n    }\n\n    .settings-tab {\n        min-width: 120px;\n    }\n}","",{version:3,sources:["webpack://./src/editor/settings.css"],names:[],mappings:"AAAA,iBAAiB;;AAEjB;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,8BAA8B;IAC9B,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,cAAc;IACd,kCAAkC;AACtC;;AAEA;IACI,iBAAiB;IACjB,mBAAmB;IACnB,0CAA0C;IAC1C,UAAU;IACV,gBAAgB;IAChB,gBAAgB;IAChB,aAAa;IACb,sBAAsB;IACtB,gCAAgC;AACpC;;AAEA;IACI,aAAa;IACb,gCAAgC;IAChC,aAAa;IACb,mBAAmB;IACnB,8BAA8B;AAClC;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACZ;;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,eAAe;IACf,cAAc;IACd,eAAe;IACf,YAAY;IACZ,cAAc;IACd,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,cAAc;AAClB;;AAEA;IACI,OAAO;IACP,gBAAgB;IAChB,aAAa;AACjB;;AAEA,cAAc;AACd;IACI,aAAa;IACb,gCAAgC;IAChC,mBAAmB;AACvB;;AAEA;IACI,OAAO;IACP,kBAAkB;IAClB,gBAAgB;IAChB,YAAY;IACZ,oCAAoC;IACpC,eAAe;IACf,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,oBAAoB;IACpB,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,QAAQ;AACZ;;AAEA;IACI,cAAc;IACd,4BAA4B;AAChC;;AAEA;IACI,mBAAmB;IACnB,cAAc;AAClB;;AAEA,YAAY;AACZ;IACI,aAAa;AACjB;;AAEA;IACI,cAAc;AAClB;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,cAAc;AAClB;;AAEA,qBAAqB;AACrB;IACI,aAAa;IACb,gCAAgC;IAChC,mBAAmB;AACvB;;AAEA;IACI,OAAO;IACP,kBAAkB;IAClB,gBAAgB;IAChB,YAAY;IACZ,oCAAoC;IACpC,eAAe;IACf,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,oBAAoB;IACpB,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,QAAQ;AACZ;;AAEA;IACI,cAAc;IACd,4BAA4B;AAChC;;AAEA;IACI,mBAAmB;IACnB,cAAc;AAClB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,cAAc;AAClB;;AAEA,wBAAwB;AACxB;;IAEI,mBAAmB;AACvB;;AAEA;;IAEI,cAAc;IACd,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,cAAc;AAClB;;AAEA;;IAEI,WAAW;IACX,kBAAkB;IAClB,yBAAyB;IACzB,kBAAkB;IAClB,eAAe;IACf,cAAc;IACd,6BAA6B;IAC7B,sBAAsB;AAC1B;;AAEA;;IAEI,aAAa;IACb,qBAAqB;IACrB,SAAS;IACT,mCAAmC;AACvC;;AAEA;;IAEI,iBAAiB;IACjB,eAAe;AACnB;;AAEA,iBAAiB;AACjB;IACI,kBAAkB;AACtB;;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,QAAQ;IACR,2BAA2B;IAC3B,gBAAgB;IAChB,YAAY;IACZ,cAAc;IACd,eAAe;IACf,eAAe;IACf,YAAY;IACZ,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,cAAc;IACd,mBAAmB;AACvB;;AAEA,eAAe;AACf;IACI,mBAAmB;IACnB,yBAAyB;IACzB,kBAAkB;IAClB,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,iBAAiB;IACjB,eAAe;IACf,gBAAgB;IAChB,cAAc;AAClB;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,cAAc;IACd,gBAAgB;AACpB;;AAEA;IACI,oBAAoB;IACpB,mBAAmB;IACnB,QAAQ;IACR,cAAc;IACd,qBAAqB;IACrB,eAAe;IACf,gBAAgB;IAChB,sBAAsB;AAC1B;;AAEA;IACI,cAAc;IACd,0BAA0B;AAC9B;;AAEA,YAAY;AACZ;IACI,aAAa;IACb,SAAS;IACT,gBAAgB;IAChB,iBAAiB;IACjB,6BAA6B;AACjC;;AAEA;;IAEI,kBAAkB;IAClB,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,oBAAoB;IACpB,iBAAiB;IACjB,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACZ;;AAEA;;IAEI,mBAAmB;IACnB,YAAY;IACZ,qBAAqB;AACzB;;AAEA;;IAEI,mBAAmB;IACnB,qBAAqB;AACzB;;AAEA;;IAEI,iBAAiB;IACjB,cAAc;IACd,qBAAqB;AACzB;;AAEA;;IAEI,mBAAmB;IACnB,qBAAqB;AACzB;;AAEA;;IAEI,YAAY;IACZ,mBAAmB;AACvB;;AAEA,aAAa;AACb;IACI,WAAW;IACX,gBAAgB;AACpB;;AAEA,aAAa;AACb;;IAEI,oBAAoB;AACxB;;AAEA;;IAEI,WAAW;IACX,WAAW;IACX,YAAY;IACZ,6BAA6B;IAC7B,kCAAkC;IAClC,kBAAkB;IAClB,kCAAkC;IAClC,gBAAgB;AACpB;;AAEA,iBAAiB;AACjB;IACI,iBAAiB;IACjB,qBAAqB;AACzB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,eAAe;IACf,mBAAmB;AACvB;;AAEA,gBAAgB;AAChB;;IAEI,kBAAkB;IAClB,kBAAkB;IAClB,mBAAmB;IACnB,eAAe;IACf,aAAa;IACb,mBAAmB;IACnB,QAAQ;IACR,kCAAkC;AACtC;;AAEA;;IAEI,mBAAmB;IACnB,cAAc;IACd,yBAAyB;AAC7B;;AAEA;;IAEI,mBAAmB;IACnB,cAAc;IACd,yBAAyB;AAC7B;;AAEA;;IAEI,mBAAmB;IACnB,cAAc;IACd,yBAAyB;AAC7B;;AAEA,YAAY;AACZ;IACI,OAAO,UAAU,EAAE;IACnB,KAAK,UAAU,EAAE;AACrB;;AAEA;IACI;QACI,2BAA2B;QAC3B,UAAU;IACd;IACA;QACI,wBAAwB;QACxB,UAAU;IACd;AACJ;;AAEA;IACI;QACI,4BAA4B;QAC5B,UAAU;IACd;IACA;QACI,wBAAwB;QACxB,UAAU;IACd;AACJ;;AAEA;IACI,OAAO,uBAAuB,EAAE;IAChC,KAAK,yBAAyB,EAAE;AACpC;;AAEA,aAAa;AACb;IACI;QACI,UAAU;QACV,gBAAgB;IACpB;;IAEA;QACI,aAAa;IACjB;;IAEA;QACI,aAAa;IACjB;;IAEA;QACI,sBAAsB;IAC1B;;IAEA;;QAEI,kBAAkB;QAClB,eAAe;IACnB;;IAEA;QACI,eAAe;IACnB;;IAEA;QACI,gBAAgB;IACpB;AACJ",sourcesContent:["/*  */\r\n\r\n.settings-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 10000;\r\n    animation: fadeIn 0.2s ease-in-out;\r\n}\r\n\r\n.settings-dialog {\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\r\n    width: 90%;\r\n    max-width: 700px;\r\n    max-height: 80vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    animation: slideUp 0.3s ease-out;\r\n}\r\n\r\n.settings-header {\r\n    padding: 20px;\r\n    border-bottom: 1px solid #e5e7eb;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.settings-header h3 {\r\n    margin: 0;\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    color: #1f2937;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.settings-close {\r\n    background: none;\r\n    border: none;\r\n    font-size: 24px;\r\n    color: #6b7280;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n    line-height: 1;\r\n    border-radius: 6px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.settings-close:hover {\r\n    background: #f3f4f6;\r\n    color: #1f2937;\r\n}\r\n\r\n.settings-body {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 20px;\r\n}\r\n\r\n/*  */\r\n.settings-tabs {\r\n    display: flex;\r\n    border-bottom: 1px solid #e5e7eb;\r\n    margin-bottom: 24px;\r\n}\r\n\r\n.settings-tab {\r\n    flex: 1;\r\n    padding: 12px 20px;\r\n    background: none;\r\n    border: none;\r\n    border-bottom: 2px solid transparent;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    color: #6b7280;\r\n    transition: all 0.2s;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 8px;\r\n}\r\n\r\n.settings-tab.active {\r\n    color: #3b82f6;\r\n    border-bottom-color: #3b82f6;\r\n}\r\n\r\n.settings-tab:hover {\r\n    background: #f9fafb;\r\n    color: #1f2937;\r\n}\r\n\r\n/*  */\r\n.settings-tab-content {\r\n    display: none;\r\n}\r\n\r\n.settings-tab-content.active {\r\n    display: block;\r\n}\r\n\r\n.settings-tab-content h4 {\r\n    margin: 0 0 16px 0;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n    color: #1f2937;\r\n}\r\n\r\n/* AI */\r\n.ai-provider-tabs {\r\n    display: flex;\r\n    border-bottom: 1px solid #e5e7eb;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.ai-provider-tab {\r\n    flex: 1;\r\n    padding: 12px 20px;\r\n    background: none;\r\n    border: none;\r\n    border-bottom: 2px solid transparent;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    color: #6b7280;\r\n    transition: all 0.2s;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 8px;\r\n}\r\n\r\n.ai-provider-tab.active {\r\n    color: #3b82f6;\r\n    border-bottom-color: #3b82f6;\r\n}\r\n\r\n.ai-provider-tab:hover {\r\n    background: #f9fafb;\r\n    color: #1f2937;\r\n}\r\n\r\n.ai-provider-content {\r\n    display: none;\r\n}\r\n\r\n.ai-provider-content.active {\r\n    display: block;\r\n}\r\n\r\n/* AI */\r\n.ai-form-group,\r\n.settings-form-group {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.ai-form-label,\r\n.settings-form-group label {\r\n    display: block;\r\n    margin-bottom: 6px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    color: #374151;\r\n}\r\n\r\n.ai-form-input,\r\n.settings-form-select {\r\n    width: 100%;\r\n    padding: 10px 12px;\r\n    border: 1px solid #d1d5db;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    color: #1f2937;\r\n    transition: border-color 0.2s;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.ai-form-input:focus,\r\n.settings-form-select:focus {\r\n    outline: none;\r\n    border-color: #3b82f6;\r\n    ring: 2px;\r\n    ring-color: rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.ai-form-select,\r\n.settings-form-select {\r\n    background: white;\r\n    cursor: pointer;\r\n}\r\n\r\n/*  */\r\n.ai-password-group {\r\n    position: relative;\r\n}\r\n\r\n.ai-password-toggle {\r\n    position: absolute;\r\n    right: 12px;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    background: none;\r\n    border: none;\r\n    color: #6b7280;\r\n    cursor: pointer;\r\n    font-size: 16px;\r\n    padding: 2px;\r\n    border-radius: 4px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.ai-password-toggle:hover {\r\n    color: #374151;\r\n    background: #f3f4f6;\r\n}\r\n\r\n/* API */\r\n.ai-api-info {\r\n    background: #f9fafb;\r\n    border: 1px solid #e5e7eb;\r\n    border-radius: 8px;\r\n    padding: 16px;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.ai-api-info h4 {\r\n    margin: 0 0 8px 0;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    color: #374151;\r\n}\r\n\r\n.ai-api-info p {\r\n    margin: 0 0 12px 0;\r\n    font-size: 13px;\r\n    color: #6b7280;\r\n    line-height: 1.4;\r\n}\r\n\r\n.ai-api-link {\r\n    display: inline-flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n    color: #3b82f6;\r\n    text-decoration: none;\r\n    font-size: 13px;\r\n    font-weight: 500;\r\n    transition: color 0.2s;\r\n}\r\n\r\n.ai-api-link:hover {\r\n    color: #1d4ed8;\r\n    text-decoration: underline;\r\n}\r\n\r\n/*  */\r\n.settings-button-group {\r\n    display: flex;\r\n    gap: 12px;\r\n    margin-top: 24px;\r\n    padding-top: 20px;\r\n    border-top: 1px solid #e5e7eb;\r\n}\r\n\r\n.ai-button,\r\n.settings-button {\r\n    padding: 10px 20px;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    border: 1px solid;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.ai-button-primary,\r\n.settings-button-primary {\r\n    background: #3b82f6;\r\n    color: white;\r\n    border-color: #3b82f6;\r\n}\r\n\r\n.ai-button-primary:hover,\r\n.settings-button-primary:hover {\r\n    background: #2563eb;\r\n    border-color: #2563eb;\r\n}\r\n\r\n.ai-button-secondary,\r\n.settings-button-secondary {\r\n    background: white;\r\n    color: #374151;\r\n    border-color: #d1d5db;\r\n}\r\n\r\n.ai-button-secondary:hover,\r\n.settings-button-secondary:hover {\r\n    background: #f9fafb;\r\n    border-color: #9ca3af;\r\n}\r\n\r\n.ai-button:disabled,\r\n.settings-button:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n}\r\n\r\n/*  */\r\n.ai-test-button {\r\n    width: 100%;\r\n    margin-top: 16px;\r\n}\r\n\r\n/*  */\r\n.ai-button.loading,\r\n.settings-button.loading {\r\n    pointer-events: none;\r\n}\r\n\r\n.ai-button.loading::after,\r\n.settings-button.loading::after {\r\n    content: '';\r\n    width: 16px;\r\n    height: 16px;\r\n    border: 2px solid transparent;\r\n    border-top: 2px solid currentColor;\r\n    border-radius: 50%;\r\n    animation: spin 1s linear infinite;\r\n    margin-left: 8px;\r\n}\r\n\r\n/*  */\r\n.settings-form-group input[type=\"checkbox\"] {\r\n    margin-right: 8px;\r\n    transform: scale(1.1);\r\n}\r\n\r\n.settings-form-group label {\r\n    display: flex;\r\n    align-items: center;\r\n    cursor: pointer;\r\n    font-weight: normal;\r\n}\r\n\r\n/*  */\r\n.ai-message,\r\n.settings-message {\r\n    padding: 12px 16px;\r\n    border-radius: 6px;\r\n    margin-bottom: 16px;\r\n    font-size: 14px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    animation: slideDown 0.3s ease-out;\r\n}\r\n\r\n.ai-message.success,\r\n.settings-message.success {\r\n    background: #dcfce7;\r\n    color: #166534;\r\n    border: 1px solid #bbf7d0;\r\n}\r\n\r\n.ai-message.error,\r\n.settings-message.error {\r\n    background: #fef2f2;\r\n    color: #dc2626;\r\n    border: 1px solid #fecaca;\r\n}\r\n\r\n.ai-message.info,\r\n.settings-message.info {\r\n    background: #dbeafe;\r\n    color: #1e40af;\r\n    border: 1px solid #bfdbfe;\r\n}\r\n\r\n/*  */\r\n@keyframes fadeIn {\r\n    from { opacity: 0; }\r\n    to { opacity: 1; }\r\n}\r\n\r\n@keyframes slideUp {\r\n    from {\r\n        transform: translateY(20px);\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        transform: translateY(0);\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n@keyframes slideDown {\r\n    from {\r\n        transform: translateY(-10px);\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        transform: translateY(0);\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n@keyframes spin {\r\n    from { transform: rotate(0deg); }\r\n    to { transform: rotate(360deg); }\r\n}\r\n\r\n/*  */\r\n@media (max-width: 640px) {\r\n    .settings-dialog {\r\n        width: 95%;\r\n        max-height: 90vh;\r\n    }\r\n    \r\n    .settings-header {\r\n        padding: 16px;\r\n    }\r\n    \r\n    .settings-body {\r\n        padding: 16px;\r\n    }\r\n    \r\n    .settings-button-group {\r\n        flex-direction: column;\r\n    }\r\n    \r\n    .settings-tab,\r\n    .ai-provider-tab {\r\n        padding: 10px 16px;\r\n        font-size: 13px;\r\n    }\r\n\r\n    .settings-tabs {\r\n        flex-wrap: wrap;\r\n    }\r\n\r\n    .settings-tab {\r\n        min-width: 120px;\r\n    }\r\n}"],sourceRoot:""}]);const s=a},77659:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},78041:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(95635);const i=(t,e)=>(0,r.A)(t,"l",e)},79999:(t,e,n)=>{"use strict";n.d(e,{A:()=>c});var r=n(2505),i=n(23149),o=n(97271);var a=Object.prototype.hasOwnProperty;const s=function(t){if(!(0,i.A)(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=(0,o.A)(t),n=[];for(var r in t)("constructor"!=r||!e&&a.call(t,r))&&n.push(r);return n};var l=n(38446);const c=function(t){return(0,l.A)(t)?(0,r.A)(t,!0):s(t)}},80005:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(71354),i=n.n(r),o=n(76314),a=n.n(o)()(i());a.push([t.id,"/* AI */\n\n.ai-settings-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n    animation: fadeIn 0.2s ease-in-out;\n}\n\n.ai-settings-dialog {\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\n    width: 90%;\n    max-width: 500px;\n    max-height: 80vh;\n    display: flex;\n    flex-direction: column;\n    animation: slideUp 0.3s ease-out;\n}\n\n.ai-settings-header {\n    padding: 20px;\n    border-bottom: 1px solid #e5e7eb;\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n}\n\n.ai-settings-header h3 {\n    margin: 0;\n    font-size: 20px;\n    font-weight: 600;\n    color: #1f2937;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.ai-settings-close {\n    background: none;\n    border: none;\n    font-size: 24px;\n    color: #6b7280;\n    cursor: pointer;\n    padding: 4px;\n    line-height: 1;\n    border-radius: 6px;\n    transition: all 0.2s;\n}\n\n.ai-settings-close:hover {\n    background: #f3f4f6;\n    color: #1f2937;\n}\n\n.ai-settings-body {\n    flex: 1;\n    overflow-y: auto;\n    padding: 20px;\n}\n\n/*  */\n.ai-provider-tabs {\n    display: flex;\n    border-bottom: 1px solid #e5e7eb;\n    margin-bottom: 20px;\n}\n\n.ai-provider-tab {\n    flex: 1;\n    padding: 12px 20px;\n    background: none;\n    border: none;\n    border-bottom: 2px solid transparent;\n    cursor: pointer;\n    font-size: 14px;\n    font-weight: 500;\n    color: #6b7280;\n    transition: all 0.2s;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n}\n\n.ai-provider-tab.active {\n    color: #3b82f6;\n    border-bottom-color: #3b82f6;\n}\n\n.ai-provider-tab:hover {\n    background: #f9fafb;\n    color: #1f2937;\n}\n\n/*  */\n.ai-provider-content {\n    display: none;\n}\n\n.ai-provider-content.active {\n    display: block;\n}\n\n/*  */\n.ai-form-group {\n    margin-bottom: 20px;\n}\n\n.ai-form-label {\n    display: block;\n    margin-bottom: 6px;\n    font-size: 14px;\n    font-weight: 500;\n    color: #374151;\n}\n\n.ai-form-input {\n    width: 100%;\n    padding: 10px 12px;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    font-size: 14px;\n    color: #1f2937;\n    transition: border-color 0.2s;\n    box-sizing: border-box;\n}\n\n.ai-form-input:focus {\n    outline: none;\n    border-color: #3b82f6;\n    ring: 2px;\n    ring-color: rgba(59, 130, 246, 0.1);\n}\n\n.ai-form-select {\n    width: 100%;\n    padding: 10px 12px;\n    border: 1px solid #d1d5db;\n    border-radius: 6px;\n    font-size: 14px;\n    color: #1f2937;\n    background: white;\n    cursor: pointer;\n    transition: border-color 0.2s;\n    box-sizing: border-box;\n}\n\n.ai-form-select:focus {\n    outline: none;\n    border-color: #3b82f6;\n}\n\n/*  */\n.ai-password-group {\n    position: relative;\n}\n\n.ai-password-toggle {\n    position: absolute;\n    right: 12px;\n    top: 50%;\n    transform: translateY(-50%);\n    background: none;\n    border: none;\n    color: #6b7280;\n    cursor: pointer;\n    font-size: 16px;\n    padding: 2px;\n    border-radius: 4px;\n    transition: all 0.2s;\n}\n\n.ai-password-toggle:hover {\n    color: #374151;\n    background: #f3f4f6;\n}\n\n/* API */\n.ai-api-info {\n    background: #f9fafb;\n    border: 1px solid #e5e7eb;\n    border-radius: 8px;\n    padding: 16px;\n    margin-bottom: 20px;\n}\n\n.ai-api-info h4 {\n    margin: 0 0 8px 0;\n    font-size: 14px;\n    font-weight: 600;\n    color: #374151;\n}\n\n.ai-api-info p {\n    margin: 0 0 12px 0;\n    font-size: 13px;\n    color: #6b7280;\n    line-height: 1.4;\n}\n\n.ai-api-link {\n    display: inline-flex;\n    align-items: center;\n    gap: 4px;\n    color: #3b82f6;\n    text-decoration: none;\n    font-size: 13px;\n    font-weight: 500;\n    transition: color 0.2s;\n}\n\n.ai-api-link:hover {\n    color: #1d4ed8;\n    text-decoration: underline;\n}\n\n/*  */\n.ai-button-group {\n    display: flex;\n    gap: 12px;\n    margin-top: 24px;\n}\n\n.ai-button {\n    padding: 10px 20px;\n    border-radius: 6px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s;\n    border: 1px solid;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n}\n\n.ai-button-primary {\n    background: #3b82f6;\n    color: white;\n    border-color: #3b82f6;\n}\n\n.ai-button-primary:hover {\n    background: #2563eb;\n    border-color: #2563eb;\n}\n\n.ai-button-secondary {\n    background: white;\n    color: #374151;\n    border-color: #d1d5db;\n}\n\n.ai-button-secondary:hover {\n    background: #f9fafb;\n    border-color: #9ca3af;\n}\n\n.ai-button:disabled {\n    opacity: 0.5;\n    cursor: not-allowed;\n}\n\n/*  */\n.ai-test-button {\n    width: 100%;\n    margin-top: 16px;\n}\n\n/*  */\n.ai-button.loading {\n    pointer-events: none;\n}\n\n.ai-button.loading::after {\n    content: '';\n    width: 16px;\n    height: 16px;\n    border: 2px solid transparent;\n    border-top: 2px solid currentColor;\n    border-radius: 50%;\n    animation: spin 1s linear infinite;\n    margin-left: 8px;\n}\n\n@keyframes fadeIn {\n    from { opacity: 0; }\n    to { opacity: 1; }\n}\n\n@keyframes slideUp {\n    from {\n        transform: translateY(20px);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0);\n        opacity: 1;\n    }\n}\n\n@keyframes spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n}\n\n/*  */\n@media (max-width: 640px) {\n    .ai-settings-dialog {\n        width: 95%;\n        max-height: 90vh;\n    }\n    \n    .ai-settings-header {\n        padding: 16px;\n    }\n    \n    .ai-settings-body {\n        padding: 16px;\n    }\n    \n    .ai-button-group {\n        flex-direction: column;\n    }\n    \n    .ai-provider-tab {\n        padding: 10px 16px;\n        font-size: 13px;\n    }\n}\n\n/*  */\n.ai-message {\n    padding: 12px 16px;\n    border-radius: 6px;\n    margin-bottom: 16px;\n    font-size: 14px;\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    animation: slideDown 0.3s ease-out;\n}\n\n.ai-message.success {\n    background: #dcfce7;\n    color: #166534;\n    border: 1px solid #bbf7d0;\n}\n\n.ai-message.error {\n    background: #fef2f2;\n    color: #dc2626;\n    border: 1px solid #fecaca;\n}\n\n.ai-message.info {\n    background: #dbeafe;\n    color: #1e40af;\n    border: 1px solid #bfdbfe;\n}\n\n@keyframes slideDown {\n    from {\n        transform: translateY(-10px);\n        opacity: 0;\n    }\n    to {\n        transform: translateY(0);\n        opacity: 1;\n    }\n}","",{version:3,sources:["webpack://./src/editor/ai-settings.css"],names:[],mappings:"AAAA,mBAAmB;;AAEnB;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,8BAA8B;IAC9B,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,cAAc;IACd,kCAAkC;AACtC;;AAEA;IACI,iBAAiB;IACjB,mBAAmB;IACnB,0CAA0C;IAC1C,UAAU;IACV,gBAAgB;IAChB,gBAAgB;IAChB,aAAa;IACb,sBAAsB;IACtB,gCAAgC;AACpC;;AAEA;IACI,aAAa;IACb,gCAAgC;IAChC,aAAa;IACb,mBAAmB;IACnB,8BAA8B;AAClC;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACZ;;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,eAAe;IACf,cAAc;IACd,eAAe;IACf,YAAY;IACZ,cAAc;IACd,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,cAAc;AAClB;;AAEA;IACI,OAAO;IACP,gBAAgB;IAChB,aAAa;AACjB;;AAEA,cAAc;AACd;IACI,aAAa;IACb,gCAAgC;IAChC,mBAAmB;AACvB;;AAEA;IACI,OAAO;IACP,kBAAkB;IAClB,gBAAgB;IAChB,YAAY;IACZ,oCAAoC;IACpC,eAAe;IACf,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,oBAAoB;IACpB,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,QAAQ;AACZ;;AAEA;IACI,cAAc;IACd,4BAA4B;AAChC;;AAEA;IACI,mBAAmB;IACnB,cAAc;AAClB;;AAEA,YAAY;AACZ;IACI,aAAa;AACjB;;AAEA;IACI,cAAc;AAClB;;AAEA,aAAa;AACb;IACI,mBAAmB;AACvB;;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,cAAc;AAClB;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,yBAAyB;IACzB,kBAAkB;IAClB,eAAe;IACf,cAAc;IACd,6BAA6B;IAC7B,sBAAsB;AAC1B;;AAEA;IACI,aAAa;IACb,qBAAqB;IACrB,SAAS;IACT,mCAAmC;AACvC;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,yBAAyB;IACzB,kBAAkB;IAClB,eAAe;IACf,cAAc;IACd,iBAAiB;IACjB,eAAe;IACf,6BAA6B;IAC7B,sBAAsB;AAC1B;;AAEA;IACI,aAAa;IACb,qBAAqB;AACzB;;AAEA,iBAAiB;AACjB;IACI,kBAAkB;AACtB;;AAEA;IACI,kBAAkB;IAClB,WAAW;IACX,QAAQ;IACR,2BAA2B;IAC3B,gBAAgB;IAChB,YAAY;IACZ,cAAc;IACd,eAAe;IACf,eAAe;IACf,YAAY;IACZ,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,cAAc;IACd,mBAAmB;AACvB;;AAEA,eAAe;AACf;IACI,mBAAmB;IACnB,yBAAyB;IACzB,kBAAkB;IAClB,aAAa;IACb,mBAAmB;AACvB;;AAEA;IACI,iBAAiB;IACjB,eAAe;IACf,gBAAgB;IAChB,cAAc;AAClB;;AAEA;IACI,kBAAkB;IAClB,eAAe;IACf,cAAc;IACd,gBAAgB;AACpB;;AAEA;IACI,oBAAoB;IACpB,mBAAmB;IACnB,QAAQ;IACR,cAAc;IACd,qBAAqB;IACrB,eAAe;IACf,gBAAgB;IAChB,sBAAsB;AAC1B;;AAEA;IACI,cAAc;IACd,0BAA0B;AAC9B;;AAEA,YAAY;AACZ;IACI,aAAa;IACb,SAAS;IACT,gBAAgB;AACpB;;AAEA;IACI,kBAAkB;IAClB,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,oBAAoB;IACpB,iBAAiB;IACjB,aAAa;IACb,mBAAmB;IACnB,QAAQ;AACZ;;AAEA;IACI,mBAAmB;IACnB,YAAY;IACZ,qBAAqB;AACzB;;AAEA;IACI,mBAAmB;IACnB,qBAAqB;AACzB;;AAEA;IACI,iBAAiB;IACjB,cAAc;IACd,qBAAqB;AACzB;;AAEA;IACI,mBAAmB;IACnB,qBAAqB;AACzB;;AAEA;IACI,YAAY;IACZ,mBAAmB;AACvB;;AAEA,aAAa;AACb;IACI,WAAW;IACX,gBAAgB;AACpB;;AAEA,aAAa;AACb;IACI,oBAAoB;AACxB;;AAEA;IACI,WAAW;IACX,WAAW;IACX,YAAY;IACZ,6BAA6B;IAC7B,kCAAkC;IAClC,kBAAkB;IAClB,kCAAkC;IAClC,gBAAgB;AACpB;;AAEA;IACI,OAAO,UAAU,EAAE;IACnB,KAAK,UAAU,EAAE;AACrB;;AAEA;IACI;QACI,2BAA2B;QAC3B,UAAU;IACd;IACA;QACI,wBAAwB;QACxB,UAAU;IACd;AACJ;;AAEA;IACI,OAAO,uBAAuB,EAAE;IAChC,KAAK,yBAAyB,EAAE;AACpC;;AAEA,aAAa;AACb;IACI;QACI,UAAU;QACV,gBAAgB;IACpB;;IAEA;QACI,aAAa;IACjB;;IAEA;QACI,aAAa;IACjB;;IAEA;QACI,sBAAsB;IAC1B;;IAEA;QACI,kBAAkB;QAClB,eAAe;IACnB;AACJ;;AAEA,gBAAgB;AAChB;IACI,kBAAkB;IAClB,kBAAkB;IAClB,mBAAmB;IACnB,eAAe;IACf,aAAa;IACb,mBAAmB;IACnB,QAAQ;IACR,kCAAkC;AACtC;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,yBAAyB;AAC7B;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,yBAAyB;AAC7B;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,yBAAyB;AAC7B;;AAEA;IACI;QACI,4BAA4B;QAC5B,UAAU;IACd;IACA;QACI,wBAAwB;QACxB,UAAU;IACd;AACJ",sourcesContent:["/* AI */\r\n\r\n.ai-settings-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 10000;\r\n    animation: fadeIn 0.2s ease-in-out;\r\n}\r\n\r\n.ai-settings-dialog {\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);\r\n    width: 90%;\r\n    max-width: 500px;\r\n    max-height: 80vh;\r\n    display: flex;\r\n    flex-direction: column;\r\n    animation: slideUp 0.3s ease-out;\r\n}\r\n\r\n.ai-settings-header {\r\n    padding: 20px;\r\n    border-bottom: 1px solid #e5e7eb;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n}\r\n\r\n.ai-settings-header h3 {\r\n    margin: 0;\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n    color: #1f2937;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.ai-settings-close {\r\n    background: none;\r\n    border: none;\r\n    font-size: 24px;\r\n    color: #6b7280;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n    line-height: 1;\r\n    border-radius: 6px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.ai-settings-close:hover {\r\n    background: #f3f4f6;\r\n    color: #1f2937;\r\n}\r\n\r\n.ai-settings-body {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 20px;\r\n}\r\n\r\n/*  */\r\n.ai-provider-tabs {\r\n    display: flex;\r\n    border-bottom: 1px solid #e5e7eb;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.ai-provider-tab {\r\n    flex: 1;\r\n    padding: 12px 20px;\r\n    background: none;\r\n    border: none;\r\n    border-bottom: 2px solid transparent;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    color: #6b7280;\r\n    transition: all 0.2s;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    gap: 8px;\r\n}\r\n\r\n.ai-provider-tab.active {\r\n    color: #3b82f6;\r\n    border-bottom-color: #3b82f6;\r\n}\r\n\r\n.ai-provider-tab:hover {\r\n    background: #f9fafb;\r\n    color: #1f2937;\r\n}\r\n\r\n/*  */\r\n.ai-provider-content {\r\n    display: none;\r\n}\r\n\r\n.ai-provider-content.active {\r\n    display: block;\r\n}\r\n\r\n/*  */\r\n.ai-form-group {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.ai-form-label {\r\n    display: block;\r\n    margin-bottom: 6px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    color: #374151;\r\n}\r\n\r\n.ai-form-input {\r\n    width: 100%;\r\n    padding: 10px 12px;\r\n    border: 1px solid #d1d5db;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    color: #1f2937;\r\n    transition: border-color 0.2s;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.ai-form-input:focus {\r\n    outline: none;\r\n    border-color: #3b82f6;\r\n    ring: 2px;\r\n    ring-color: rgba(59, 130, 246, 0.1);\r\n}\r\n\r\n.ai-form-select {\r\n    width: 100%;\r\n    padding: 10px 12px;\r\n    border: 1px solid #d1d5db;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    color: #1f2937;\r\n    background: white;\r\n    cursor: pointer;\r\n    transition: border-color 0.2s;\r\n    box-sizing: border-box;\r\n}\r\n\r\n.ai-form-select:focus {\r\n    outline: none;\r\n    border-color: #3b82f6;\r\n}\r\n\r\n/*  */\r\n.ai-password-group {\r\n    position: relative;\r\n}\r\n\r\n.ai-password-toggle {\r\n    position: absolute;\r\n    right: 12px;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n    background: none;\r\n    border: none;\r\n    color: #6b7280;\r\n    cursor: pointer;\r\n    font-size: 16px;\r\n    padding: 2px;\r\n    border-radius: 4px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.ai-password-toggle:hover {\r\n    color: #374151;\r\n    background: #f3f4f6;\r\n}\r\n\r\n/* API */\r\n.ai-api-info {\r\n    background: #f9fafb;\r\n    border: 1px solid #e5e7eb;\r\n    border-radius: 8px;\r\n    padding: 16px;\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.ai-api-info h4 {\r\n    margin: 0 0 8px 0;\r\n    font-size: 14px;\r\n    font-weight: 600;\r\n    color: #374151;\r\n}\r\n\r\n.ai-api-info p {\r\n    margin: 0 0 12px 0;\r\n    font-size: 13px;\r\n    color: #6b7280;\r\n    line-height: 1.4;\r\n}\r\n\r\n.ai-api-link {\r\n    display: inline-flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n    color: #3b82f6;\r\n    text-decoration: none;\r\n    font-size: 13px;\r\n    font-weight: 500;\r\n    transition: color 0.2s;\r\n}\r\n\r\n.ai-api-link:hover {\r\n    color: #1d4ed8;\r\n    text-decoration: underline;\r\n}\r\n\r\n/*  */\r\n.ai-button-group {\r\n    display: flex;\r\n    gap: 12px;\r\n    margin-top: 24px;\r\n}\r\n\r\n.ai-button {\r\n    padding: 10px 20px;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    border: 1px solid;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n}\r\n\r\n.ai-button-primary {\r\n    background: #3b82f6;\r\n    color: white;\r\n    border-color: #3b82f6;\r\n}\r\n\r\n.ai-button-primary:hover {\r\n    background: #2563eb;\r\n    border-color: #2563eb;\r\n}\r\n\r\n.ai-button-secondary {\r\n    background: white;\r\n    color: #374151;\r\n    border-color: #d1d5db;\r\n}\r\n\r\n.ai-button-secondary:hover {\r\n    background: #f9fafb;\r\n    border-color: #9ca3af;\r\n}\r\n\r\n.ai-button:disabled {\r\n    opacity: 0.5;\r\n    cursor: not-allowed;\r\n}\r\n\r\n/*  */\r\n.ai-test-button {\r\n    width: 100%;\r\n    margin-top: 16px;\r\n}\r\n\r\n/*  */\r\n.ai-button.loading {\r\n    pointer-events: none;\r\n}\r\n\r\n.ai-button.loading::after {\r\n    content: '';\r\n    width: 16px;\r\n    height: 16px;\r\n    border: 2px solid transparent;\r\n    border-top: 2px solid currentColor;\r\n    border-radius: 50%;\r\n    animation: spin 1s linear infinite;\r\n    margin-left: 8px;\r\n}\r\n\r\n@keyframes fadeIn {\r\n    from { opacity: 0; }\r\n    to { opacity: 1; }\r\n}\r\n\r\n@keyframes slideUp {\r\n    from {\r\n        transform: translateY(20px);\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        transform: translateY(0);\r\n        opacity: 1;\r\n    }\r\n}\r\n\r\n@keyframes spin {\r\n    from { transform: rotate(0deg); }\r\n    to { transform: rotate(360deg); }\r\n}\r\n\r\n/*  */\r\n@media (max-width: 640px) {\r\n    .ai-settings-dialog {\r\n        width: 95%;\r\n        max-height: 90vh;\r\n    }\r\n    \r\n    .ai-settings-header {\r\n        padding: 16px;\r\n    }\r\n    \r\n    .ai-settings-body {\r\n        padding: 16px;\r\n    }\r\n    \r\n    .ai-button-group {\r\n        flex-direction: column;\r\n    }\r\n    \r\n    .ai-provider-tab {\r\n        padding: 10px 16px;\r\n        font-size: 13px;\r\n    }\r\n}\r\n\r\n/*  */\r\n.ai-message {\r\n    padding: 12px 16px;\r\n    border-radius: 6px;\r\n    margin-bottom: 16px;\r\n    font-size: 14px;\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    animation: slideDown 0.3s ease-out;\r\n}\r\n\r\n.ai-message.success {\r\n    background: #dcfce7;\r\n    color: #166534;\r\n    border: 1px solid #bbf7d0;\r\n}\r\n\r\n.ai-message.error {\r\n    background: #fef2f2;\r\n    color: #dc2626;\r\n    border: 1px solid #fecaca;\r\n}\r\n\r\n.ai-message.info {\r\n    background: #dbeafe;\r\n    color: #1e40af;\r\n    border: 1px solid #bfdbfe;\r\n}\r\n\r\n@keyframes slideDown {\r\n    from {\r\n        transform: translateY(-10px);\r\n        opacity: 0;\r\n    }\r\n    to {\r\n        transform: translateY(0);\r\n        opacity: 1;\r\n    }\r\n}"],sourceRoot:""}]);const s=a},80144:(t,e,n)=>{"use strict";n.d(e,{C0:()=>A,xA:()=>rt,hH:()=>w,Dl:()=>Ot,IU:()=>Qt,Wt:()=>Ut,Y2:()=>Ft,a$:()=>$t,sb:()=>U,ME:()=>se,UI:()=>q,Ch:()=>b,mW:()=>y,DB:()=>g,_3:()=>kt,EJ:()=>f,m7:()=>te,iN:()=>Zt,zj:()=>et,D7:()=>oe,Gs:()=>pe,J$:()=>C,ab:()=>ne,Q2:()=>J,P$:()=>O,ID:()=>Ct,TM:()=>ct,Wi:()=>Lt,H1:()=>ht,QO:()=>It,Js:()=>de,Xd:()=>x,dj:()=>Pt,cL:()=>it,$i:()=>W,jZ:()=>mt,oB:()=>le,wZ:()=>X,EI:()=>Jt,SV:()=>Xt,Nk:()=>tt,XV:()=>ae,ke:()=>ee,UU:()=>Q,ot:()=>Rt,mj:()=>ce,tM:()=>Kt,H$:()=>j,B6:()=>Z});var r=n(40797),i=n(51931),o=n(8232);const a=(t,e)=>{const n=i.A.parse(t),r={};for(const t in e)e[t]&&(r[t]=n[t]+e[t]);return(0,o.A)(t,r)};var s=n(25582);const l=(t,e=100)=>{const n=i.A.parse(t);return n.r=255-n.r,n.g=255-n.g,n.b=255-n.b,((t,e,n=50)=>{const{r,g:o,b:a,a:l}=i.A.parse(t),{r:c,g:h,b:u,a:d}=i.A.parse(e),p=n/100,f=2*p-1,g=l-d,m=((f*g===-1?f:(f+g)/(1+f*g))+1)/2,A=1-m,y=r*m+c*A,b=o*m+h*A,x=a*m+u*A,v=l*p+d*(1-p);return(0,s.A)(y,b,x,v)})(n,t,e)};var c,h=n(75263),u=n(78041),d=n(5097),p=n(99418),f=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,g=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,m=/\s*%%.*\n/gm,A=class extends Error{static{(0,r.K2)(this,"UnknownDiagramError")}constructor(t){super(t),this.name="UnknownDiagramError"}},y={},b=(0,r.K2)(function(t,e){t=t.replace(f,"").replace(g,"").replace(m,"\n");for(const[n,{detector:r}]of Object.entries(y))if(r(t,e))return n;throw new A(`No diagram type detected matching given configuration for text: ${t}`)},"detectType"),x=(0,r.K2)((...t)=>{for(const{id:e,detector:n,loader:r}of t)v(e,n,r)},"registerLazyLoadedDiagrams"),v=(0,r.K2)((t,e,n)=>{y[t]&&r.Rm.warn(`Detector with key ${t} already exists. Overwriting.`),y[t]={detector:e,loader:n},r.Rm.debug(`Detector with key ${t} added${n?" with loader":""}`)},"addDetector"),C=(0,r.K2)(t=>y[t].loader,"getDiagramLoader"),k=(0,r.K2)((t,e,{depth:n=2,clobber:r=!1}={})=>{const i={depth:n,clobber:r};return Array.isArray(e)&&!Array.isArray(t)?(e.forEach(e=>k(t,e,i)),t):Array.isArray(e)&&Array.isArray(t)?(e.forEach(e=>{t.includes(e)||t.push(e)}),t):void 0===t||n<=0?null!=t&&"object"==typeof t&&"object"==typeof e?Object.assign(t,e):e:(void 0!==e&&"object"==typeof t&&"object"==typeof e&&Object.keys(e).forEach(i=>{"object"!=typeof e[i]||void 0!==t[i]&&"object"!=typeof t[i]?(r||"object"!=typeof t[i]&&"object"!=typeof e[i])&&(t[i]=e[i]):(void 0===t[i]&&(t[i]=Array.isArray(e[i])?[]:{}),t[i]=k(t[i],e[i],{depth:n-1,clobber:r}))}),t)},"assignWithDepth"),w=k,B="#ffffff",I="#f2f2f2",S=(0,r.K2)((t,e)=>a(t,e?{s:-40,l:10}:{s:-40,l:-10}),"mkBorder"),_=class{static{(0,r.K2)(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||a(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||a(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||S(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||S(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||S(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||S(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||l(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||l(this.tertiaryColor),this.lineColor=this.lineColor||l(this.background),this.arrowheadColor=this.arrowheadColor||l(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?(0,h.A)(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||this.actorBorder,this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||(0,h.A)(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||l(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||(0,u.A)(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.vertLineColor=this.vertLineColor||"navy",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.darkMode?(this.rowOdd=this.rowOdd||(0,h.A)(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||(0,h.A)(this.mainBkg,10)):(this.rowOdd=this.rowOdd||(0,u.A)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||(0,u.A)(this.mainBkg,5)),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||a(this.primaryColor,{h:30}),this.cScale4=this.cScale4||a(this.primaryColor,{h:60}),this.cScale5=this.cScale5||a(this.primaryColor,{h:90}),this.cScale6=this.cScale6||a(this.primaryColor,{h:120}),this.cScale7=this.cScale7||a(this.primaryColor,{h:150}),this.cScale8=this.cScale8||a(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||a(this.primaryColor,{h:270}),this.cScale10=this.cScale10||a(this.primaryColor,{h:300}),this.cScale11=this.cScale11||a(this.primaryColor,{h:330}),this.darkMode)for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=(0,h.A)(this["cScale"+t],75);else for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=(0,h.A)(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||l(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||(0,u.A)(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||(0,h.A)(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;const t=this.darkMode?-4:-1;for(let e=0;e<5;e++)this["surface"+e]=this["surface"+e]||a(this.mainBkg,{h:180,s:-15,l:t*(5+3*e)}),this["surfacePeer"+e]=this["surfacePeer"+e]||a(this.mainBkg,{h:180,s:-15,l:t*(8+3*e)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||a(this.primaryColor,{h:64}),this.fillType3=this.fillType3||a(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||a(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||a(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||a(this.primaryColor,{h:128}),this.fillType7=this.fillType7||a(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||a(this.primaryColor,{l:-10}),this.pie5=this.pie5||a(this.secondaryColor,{l:-10}),this.pie6=this.pie6||a(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||a(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||a(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||a(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||a(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||a(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||a(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.archEdgeColor=this.archEdgeColor||"#777",this.archEdgeArrowColor=this.archEdgeArrowColor||"#777",this.archEdgeWidth=this.archEdgeWidth||"3",this.archGroupBorderColor=this.archGroupBorderColor||"#000",this.archGroupBorderWidth=this.archGroupBorderWidth||"2px",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||a(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||a(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||a(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||a(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||a(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||a(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,d.A)(this.quadrant1Fill)?(0,u.A)(this.quadrant1Fill):(0,h.A)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,h.A)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||a(this.primaryColor,{h:-30}),this.git4=this.git4||a(this.primaryColor,{h:-60}),this.git5=this.git5||a(this.primaryColor,{h:-90}),this.git6=this.git6||a(this.primaryColor,{h:60}),this.git7=this.git7||a(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,u.A)(this.git0,25),this.git1=(0,u.A)(this.git1,25),this.git2=(0,u.A)(this.git2,25),this.git3=(0,u.A)(this.git3,25),this.git4=(0,u.A)(this.git4,25),this.git5=(0,u.A)(this.git5,25),this.git6=(0,u.A)(this.git6,25),this.git7=(0,u.A)(this.git7,25)):(this.git0=(0,h.A)(this.git0,25),this.git1=(0,h.A)(this.git1,25),this.git2=(0,h.A)(this.git2,25),this.git3=(0,h.A)(this.git3,25),this.git4=(0,h.A)(this.git4,25),this.git5=(0,h.A)(this.git5,25),this.git6=(0,h.A)(this.git6,25),this.git7=(0,h.A)(this.git7,25)),this.gitInv0=this.gitInv0||l(this.git0),this.gitInv1=this.gitInv1||l(this.git1),this.gitInv2=this.gitInv2||l(this.git2),this.gitInv3=this.gitInv3||l(this.git3),this.gitInv4=this.gitInv4||l(this.git4),this.gitInv5=this.gitInv5||l(this.git5),this.gitInv6=this.gitInv6||l(this.git6),this.gitInv7=this.gitInv7||l(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||B,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||I}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach(e=>{this[e]=t[e]}),this.updateColors(),e.forEach(e=>{this[e]=t[e]})}},E=(0,r.K2)(t=>{const e=new _;return e.calculate(t),e},"getThemeVariables"),T=class{static{(0,r.K2)(this,"Theme")}constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=(0,u.A)(this.primaryColor,16),this.tertiaryColor=a(this.primaryColor,{h:-160}),this.primaryBorderColor=l(this.background),this.secondaryBorderColor=S(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=S(this.tertiaryColor,this.darkMode),this.primaryTextColor=l(this.primaryColor),this.secondaryTextColor=l(this.secondaryColor),this.tertiaryTextColor=l(this.tertiaryColor),this.lineColor=l(this.background),this.textColor=l(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=(0,u.A)(l("#323D47"),10),this.lineColor="calculated",this.border1="#ccc",this.border2=(0,s.A)(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=(0,h.A)("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=(0,h.A)(this.sectionBkgColor,10),this.taskBorderColor=(0,s.A)(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=(0,s.A)(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||(0,u.A)(this.mainBkg,5)||"#ffffff",this.rowEven=this.rowEven||(0,h.A)(this.mainBkg,10),this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){this.secondBkg=(0,u.A)(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=(0,u.A)(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.actorBorder,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=(0,u.A)(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=a(this.primaryColor,{h:64}),this.fillType3=a(this.secondaryColor,{h:64}),this.fillType4=a(this.primaryColor,{h:-64}),this.fillType5=a(this.secondaryColor,{h:-64}),this.fillType6=a(this.primaryColor,{h:128}),this.fillType7=a(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||a(this.primaryColor,{h:30}),this.cScale4=this.cScale4||a(this.primaryColor,{h:60}),this.cScale5=this.cScale5||a(this.primaryColor,{h:90}),this.cScale6=this.cScale6||a(this.primaryColor,{h:120}),this.cScale7=this.cScale7||a(this.primaryColor,{h:150}),this.cScale8=this.cScale8||a(this.primaryColor,{h:210}),this.cScale9=this.cScale9||a(this.primaryColor,{h:270}),this.cScale10=this.cScale10||a(this.primaryColor,{h:300}),this.cScale11=this.cScale11||a(this.primaryColor,{h:330});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||l(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScalePeer"+t]=this["cScalePeer"+t]||(0,u.A)(this["cScale"+t],10);for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||a(this.mainBkg,{h:30,s:-30,l:-(4*t-10)}),this["surfacePeer"+t]=this["surfacePeer"+t]||a(this.mainBkg,{h:30,s:-30,l:-(4*t-7)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||a(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||a(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||a(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||a(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||a(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||a(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,d.A)(this.quadrant1Fill)?(0,u.A)(this.quadrant1Fill):(0,h.A)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.background},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?(0,h.A)(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,u.A)(this.secondaryColor,20),this.git1=(0,u.A)(this.pie2||this.secondaryColor,20),this.git2=(0,u.A)(this.pie3||this.tertiaryColor,20),this.git3=(0,u.A)(this.pie4||a(this.primaryColor,{h:-30}),20),this.git4=(0,u.A)(this.pie5||a(this.primaryColor,{h:-60}),20),this.git5=(0,u.A)(this.pie6||a(this.primaryColor,{h:-90}),10),this.git6=(0,u.A)(this.pie7||a(this.primaryColor,{h:60}),10),this.git7=(0,u.A)(this.pie8||a(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||l(this.git0),this.gitInv1=this.gitInv1||l(this.git1),this.gitInv2=this.gitInv2||l(this.git2),this.gitInv3=this.gitInv3||l(this.git3),this.gitInv4=this.gitInv4||l(this.git4),this.gitInv5=this.gitInv5||l(this.git5),this.gitInv6=this.gitInv6||l(this.git6),this.gitInv7=this.gitInv7||l(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||l(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||l(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||(0,u.A)(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||(0,u.A)(this.background,2),this.nodeBorder=this.nodeBorder||"#999"}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach(e=>{this[e]=t[e]}),this.updateColors(),e.forEach(e=>{this[e]=t[e]})}},M=(0,r.K2)(t=>{const e=new T;return e.calculate(t),e},"getThemeVariables"),L=class{static{(0,r.K2)(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=a(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=a(this.primaryColor,{h:-160}),this.primaryBorderColor=S(this.primaryColor,this.darkMode),this.secondaryBorderColor=S(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=S(this.tertiaryColor,this.darkMode),this.primaryTextColor=l(this.primaryColor),this.secondaryTextColor=l(this.secondaryColor),this.tertiaryTextColor=l(this.tertiaryColor),this.lineColor=l(this.background),this.textColor=l(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="rgba(232,232,232, 0.8)",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.sectionBkgColor=(0,s.A)(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="navy",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd="calculated",this.rowEven="calculated",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||a(this.primaryColor,{h:30}),this.cScale4=this.cScale4||a(this.primaryColor,{h:60}),this.cScale5=this.cScale5||a(this.primaryColor,{h:90}),this.cScale6=this.cScale6||a(this.primaryColor,{h:120}),this.cScale7=this.cScale7||a(this.primaryColor,{h:150}),this.cScale8=this.cScale8||a(this.primaryColor,{h:210}),this.cScale9=this.cScale9||a(this.primaryColor,{h:270}),this.cScale10=this.cScale10||a(this.primaryColor,{h:300}),this.cScale11=this.cScale11||a(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,h.A)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,h.A)(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=(0,h.A)(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||(0,h.A)(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||a(this["cScale"+t],{h:180});for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||a(this.mainBkg,{h:30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||a(this.mainBkg,{h:30,l:-(7+5*t)});if(this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,"calculated"!==this.labelTextColor){this.cScaleLabel0=this.cScaleLabel0||l(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||l(this.labelTextColor);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=(0,u.A)(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||(0,u.A)(this.primaryColor,75)||"#ffffff",this.rowEven=this.rowEven||(0,u.A)(this.primaryColor,1),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=a(this.primaryColor,{h:64}),this.fillType3=a(this.secondaryColor,{h:64}),this.fillType4=a(this.primaryColor,{h:-64}),this.fillType5=a(this.secondaryColor,{h:-64}),this.fillType6=a(this.primaryColor,{h:128}),this.fillType7=a(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||a(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||a(this.primaryColor,{l:-10}),this.pie5=this.pie5||a(this.secondaryColor,{l:-30}),this.pie6=this.pie6||a(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||a(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||a(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||a(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||a(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||a(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||a(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||a(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||a(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||a(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||a(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||a(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||a(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,d.A)(this.quadrant1Fill)?(0,u.A)(this.quadrant1Fill):(0,h.A)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||a(this.primaryColor,{h:-30}),this.git4=this.git4||a(this.primaryColor,{h:-60}),this.git5=this.git5||a(this.primaryColor,{h:-90}),this.git6=this.git6||a(this.primaryColor,{h:60}),this.git7=this.git7||a(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,u.A)(this.git0,25),this.git1=(0,u.A)(this.git1,25),this.git2=(0,u.A)(this.git2,25),this.git3=(0,u.A)(this.git3,25),this.git4=(0,u.A)(this.git4,25),this.git5=(0,u.A)(this.git5,25),this.git6=(0,u.A)(this.git6,25),this.git7=(0,u.A)(this.git7,25)):(this.git0=(0,h.A)(this.git0,25),this.git1=(0,h.A)(this.git1,25),this.git2=(0,h.A)(this.git2,25),this.git3=(0,h.A)(this.git3,25),this.git4=(0,h.A)(this.git4,25),this.git5=(0,h.A)(this.git5,25),this.git6=(0,h.A)(this.git6,25),this.git7=(0,h.A)(this.git7,25)),this.gitInv0=this.gitInv0||(0,h.A)(l(this.git0),25),this.gitInv1=this.gitInv1||l(this.git1),this.gitInv2=this.gitInv2||l(this.git2),this.gitInv3=this.gitInv3||l(this.git3),this.gitInv4=this.gitInv4||l(this.git4),this.gitInv5=this.gitInv5||l(this.git5),this.gitInv6=this.gitInv6||l(this.git6),this.gitInv7=this.gitInv7||l(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||l(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||l(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||B,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||I}calculate(t){if(Object.keys(this).forEach(t=>{"calculated"===this[t]&&(this[t]=void 0)}),"object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach(e=>{this[e]=t[e]}),this.updateColors(),e.forEach(e=>{this[e]=t[e]})}},O=(0,r.K2)(t=>{const e=new L;return e.calculate(t),e},"getThemeVariables"),D=class{static{(0,r.K2)(this,"Theme")}constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=(0,u.A)("#cde498",10),this.primaryBorderColor=S(this.primaryColor,this.darkMode),this.secondaryBorderColor=S(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=S(this.tertiaryColor,this.darkMode),this.primaryTextColor=l(this.primaryColor),this.secondaryTextColor=l(this.secondaryColor),this.tertiaryTextColor=l(this.primaryColor),this.lineColor=l(this.background),this.textColor=l(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="calculated",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.vertLineColor="#00BFFF",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.actorBorder=(0,h.A)(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.actorLineColor=this.actorBorder,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||a(this.primaryColor,{h:30}),this.cScale4=this.cScale4||a(this.primaryColor,{h:60}),this.cScale5=this.cScale5||a(this.primaryColor,{h:90}),this.cScale6=this.cScale6||a(this.primaryColor,{h:120}),this.cScale7=this.cScale7||a(this.primaryColor,{h:150}),this.cScale8=this.cScale8||a(this.primaryColor,{h:210}),this.cScale9=this.cScale9||a(this.primaryColor,{h:270}),this.cScale10=this.cScale10||a(this.primaryColor,{h:300}),this.cScale11=this.cScale11||a(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||(0,h.A)(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||(0,h.A)(this.tertiaryColor,40);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScale"+t]=(0,h.A)(this["cScale"+t],10),this["cScalePeer"+t]=this["cScalePeer"+t]||(0,h.A)(this["cScale"+t],25);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||a(this["cScale"+t],{h:180});this.scaleLabelColor="calculated"!==this.scaleLabelColor&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||a(this.mainBkg,{h:30,s:-30,l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||a(this.mainBkg,{h:30,s:-30,l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.rowOdd=this.rowOdd||(0,u.A)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||(0,u.A)(this.mainBkg,20),this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=a(this.primaryColor,{h:64}),this.fillType3=a(this.secondaryColor,{h:64}),this.fillType4=a(this.primaryColor,{h:-64}),this.fillType5=a(this.secondaryColor,{h:-64}),this.fillType6=a(this.primaryColor,{h:128}),this.fillType7=a(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||a(this.primaryColor,{l:-30}),this.pie5=this.pie5||a(this.secondaryColor,{l:-30}),this.pie6=this.pie6||a(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||a(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||a(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||a(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||a(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||a(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||a(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||a(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||a(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||a(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||a(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||a(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||a(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,d.A)(this.quadrant1Fill)?(0,u.A)(this.quadrant1Fill):(0,h.A)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.packet={startByteColor:this.primaryTextColor,endByteColor:this.primaryTextColor,labelColor:this.primaryTextColor,titleColor:this.primaryTextColor,blockStrokeColor:this.primaryTextColor,blockFillColor:this.mainBkg},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||a(this.primaryColor,{h:-30}),this.git4=this.git4||a(this.primaryColor,{h:-60}),this.git5=this.git5||a(this.primaryColor,{h:-90}),this.git6=this.git6||a(this.primaryColor,{h:60}),this.git7=this.git7||a(this.primaryColor,{h:120}),this.darkMode?(this.git0=(0,u.A)(this.git0,25),this.git1=(0,u.A)(this.git1,25),this.git2=(0,u.A)(this.git2,25),this.git3=(0,u.A)(this.git3,25),this.git4=(0,u.A)(this.git4,25),this.git5=(0,u.A)(this.git5,25),this.git6=(0,u.A)(this.git6,25),this.git7=(0,u.A)(this.git7,25)):(this.git0=(0,h.A)(this.git0,25),this.git1=(0,h.A)(this.git1,25),this.git2=(0,h.A)(this.git2,25),this.git3=(0,h.A)(this.git3,25),this.git4=(0,h.A)(this.git4,25),this.git5=(0,h.A)(this.git5,25),this.git6=(0,h.A)(this.git6,25),this.git7=(0,h.A)(this.git7,25)),this.gitInv0=this.gitInv0||l(this.git0),this.gitInv1=this.gitInv1||l(this.git1),this.gitInv2=this.gitInv2||l(this.git2),this.gitInv3=this.gitInv3||l(this.git3),this.gitInv4=this.gitInv4||l(this.git4),this.gitInv5=this.gitInv5||l(this.git5),this.gitInv6=this.gitInv6||l(this.git6),this.gitInv7=this.gitInv7||l(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||l(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||l(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||B,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||I}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach(e=>{this[e]=t[e]}),this.updateColors(),e.forEach(e=>{this[e]=t[e]})}},P=(0,r.K2)(t=>{const e=new D;return e.calculate(t),e},"getThemeVariables"),F=class{static{(0,r.K2)(this,"Theme")}constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=(0,u.A)(this.contrast,55),this.background="#ffffff",this.tertiaryColor=a(this.primaryColor,{h:-160}),this.primaryBorderColor=S(this.primaryColor,this.darkMode),this.secondaryBorderColor=S(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=S(this.tertiaryColor,this.darkMode),this.primaryTextColor=l(this.primaryColor),this.secondaryTextColor=l(this.secondaryColor),this.tertiaryTextColor=l(this.tertiaryColor),this.lineColor=l(this.background),this.textColor=l(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor=this.actorBorder,this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.vertLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.archEdgeColor="calculated",this.archEdgeArrowColor="calculated",this.archEdgeWidth="3",this.archGroupBorderColor=this.primaryBorderColor,this.archGroupBorderWidth="2px",this.rowOdd=this.rowOdd||(0,u.A)(this.mainBkg,75)||"#ffffff",this.rowEven=this.rowEven||"#f4f4f4",this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){this.secondBkg=(0,u.A)(this.contrast,55),this.border2=this.contrast,this.actorBorder=(0,u.A)(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.actorBorder,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleInv"+t]=this["cScaleInv"+t]||l(this["cScale"+t]);for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this.darkMode?this["cScalePeer"+t]=this["cScalePeer"+t]||(0,u.A)(this["cScale"+t],10):this["cScalePeer"+t]=this["cScalePeer"+t]||(0,h.A)(this["cScale"+t],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["cScaleLabel"+t]=this["cScaleLabel"+t]||this.scaleLabelColor;for(let t=0;t<5;t++)this["surface"+t]=this["surface"+t]||a(this.mainBkg,{l:-(5+5*t)}),this["surfacePeer"+t]=this["surfacePeer"+t]||a(this.mainBkg,{l:-(8+5*t)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=(0,u.A)(this.contrast,30),this.sectionBkgColor2=(0,u.A)(this.contrast,30),this.taskBorderColor=(0,h.A)(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=(0,u.A)(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=(0,h.A)(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.vertLineColor=this.critBkgColor,this.archEdgeColor=this.lineColor,this.archEdgeArrowColor=this.lineColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=a(this.primaryColor,{h:64}),this.fillType3=a(this.secondaryColor,{h:64}),this.fillType4=a(this.primaryColor,{h:-64}),this.fillType5=a(this.secondaryColor,{h:-64}),this.fillType6=a(this.primaryColor,{h:128}),this.fillType7=a(this.secondaryColor,{h:128});for(let t=0;t<this.THEME_COLOR_LIMIT;t++)this["pie"+t]=this["cScale"+t];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||a(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||a(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||a(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||a(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||a(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||a(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||(0,d.A)(this.quadrant1Fill)?(0,u.A)(this.quadrant1Fill):(0,h.A)(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:this.xyChart?.backgroundColor||this.background,titleColor:this.xyChart?.titleColor||this.primaryTextColor,xAxisTitleColor:this.xyChart?.xAxisTitleColor||this.primaryTextColor,xAxisLabelColor:this.xyChart?.xAxisLabelColor||this.primaryTextColor,xAxisTickColor:this.xyChart?.xAxisTickColor||this.primaryTextColor,xAxisLineColor:this.xyChart?.xAxisLineColor||this.primaryTextColor,yAxisTitleColor:this.xyChart?.yAxisTitleColor||this.primaryTextColor,yAxisLabelColor:this.xyChart?.yAxisLabelColor||this.primaryTextColor,yAxisTickColor:this.xyChart?.yAxisTickColor||this.primaryTextColor,yAxisLineColor:this.xyChart?.yAxisLineColor||this.primaryTextColor,plotColorPalette:this.xyChart?.plotColorPalette||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.radar={axisColor:this.radar?.axisColor||this.lineColor,axisStrokeWidth:this.radar?.axisStrokeWidth||2,axisLabelFontSize:this.radar?.axisLabelFontSize||12,curveOpacity:this.radar?.curveOpacity||.5,curveStrokeWidth:this.radar?.curveStrokeWidth||2,graticuleColor:this.radar?.graticuleColor||"#DEDEDE",graticuleStrokeWidth:this.radar?.graticuleStrokeWidth||1,graticuleOpacity:this.radar?.graticuleOpacity||.3,legendBoxSize:this.radar?.legendBoxSize||12,legendFontSize:this.radar?.legendFontSize||12},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=(0,h.A)(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||a(this.primaryColor,{h:-30}),this.git4=this.pie5||a(this.primaryColor,{h:-60}),this.git5=this.pie6||a(this.primaryColor,{h:-90}),this.git6=this.pie7||a(this.primaryColor,{h:60}),this.git7=this.pie8||a(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||l(this.git0),this.gitInv1=this.gitInv1||l(this.git1),this.gitInv2=this.gitInv2||l(this.git2),this.gitInv3=this.gitInv3||l(this.git3),this.gitInv4=this.gitInv4||l(this.git4),this.gitInv5=this.gitInv5||l(this.git5),this.gitInv6=this.gitInv6||l(this.git6),this.gitInv7=this.gitInv7||l(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||B,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||I}calculate(t){if("object"!=typeof t)return void this.updateColors();const e=Object.keys(t);e.forEach(e=>{this[e]=t[e]}),this.updateColors(),e.forEach(e=>{this[e]=t[e]})}},j={base:{getThemeVariables:E},dark:{getThemeVariables:M},default:{getThemeVariables:O},forest:{getThemeVariables:P},neutral:{getThemeVariables:(0,r.K2)(t=>{const e=new F;return e.calculate(t),e},"getThemeVariables")}},z={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200,inheritDir:!1},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,maxLabelWidth:360,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],titleColor:"",titleFontFamily:'"trebuchet ms", verdana, arial, sans-serif',titleFontSize:"4ex"},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1,hideEmptyMembersBox:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,nodeSpacing:140,rankSpacing:80,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showDataLabel:!1,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200,layoutAlgorithm:"cose-bilkent"},kanban:{useMaxWidth:!0,padding:8,sectionWidth:200,ticketBaseUrl:""},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},packet:{useMaxWidth:!0,rowHeight:32,bitWidth:32,bitsPerRow:32,showBits:!0,paddingX:5,paddingY:5},architecture:{useMaxWidth:!0,padding:40,iconSize:80,fontSize:16},radar:{useMaxWidth:!0,width:600,height:600,marginTop:50,marginRight:50,marginBottom:50,marginLeft:50,axisScaleFactor:1,axisLabelFactor:1.05,curveTension:.17},theme:"default",look:"classic",handDrawnSeed:0,layout:"dagre",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","suppressErrorRendering","maxEdges"],legacyMathML:!1,forceLegacyMathML:!1,deterministicIds:!1,fontSize:16,markdownAutoWrap:!0,suppressErrorRendering:!1},$={...z,deterministicIDSeed:void 0,elk:{mergeEdges:!1,nodePlacementStrategy:"BRANDES_KOEPF",forceNodeModelOrder:!1,considerModelOrder:"NODES_AND_EDGES"},themeCSS:void 0,themeVariables:j.default.getThemeVariables(),sequence:{...z.sequence,messageFont:(0,r.K2)(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont"),noteFont:(0,r.K2)(function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},"noteFont"),actorFont:(0,r.K2)(function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}},"actorFont")},class:{hideEmptyMembersBox:!1},gantt:{...z.gantt,tickInterval:void 0,useWidth:void 0},c4:{...z.c4,useWidth:void 0,personFont:(0,r.K2)(function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},"personFont"),flowchart:{...z.flowchart,inheritDir:!1},external_personFont:(0,r.K2)(function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},"external_personFont"),systemFont:(0,r.K2)(function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},"systemFont"),external_systemFont:(0,r.K2)(function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},"external_systemFont"),system_dbFont:(0,r.K2)(function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},"system_dbFont"),external_system_dbFont:(0,r.K2)(function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},"external_system_dbFont"),system_queueFont:(0,r.K2)(function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},"system_queueFont"),external_system_queueFont:(0,r.K2)(function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},"external_system_queueFont"),containerFont:(0,r.K2)(function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},"containerFont"),external_containerFont:(0,r.K2)(function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},"external_containerFont"),container_dbFont:(0,r.K2)(function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},"container_dbFont"),external_container_dbFont:(0,r.K2)(function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},"external_container_dbFont"),container_queueFont:(0,r.K2)(function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},"container_queueFont"),external_container_queueFont:(0,r.K2)(function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},"external_container_queueFont"),componentFont:(0,r.K2)(function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},"componentFont"),external_componentFont:(0,r.K2)(function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},"external_componentFont"),component_dbFont:(0,r.K2)(function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},"component_dbFont"),external_component_dbFont:(0,r.K2)(function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},"external_component_dbFont"),component_queueFont:(0,r.K2)(function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},"component_queueFont"),external_component_queueFont:(0,r.K2)(function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},"external_component_queueFont"),boundaryFont:(0,r.K2)(function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},"boundaryFont"),messageFont:(0,r.K2)(function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},"messageFont")},pie:{...z.pie,useWidth:984},xyChart:{...z.xyChart,useWidth:void 0},requirement:{...z.requirement,useWidth:void 0},packet:{...z.packet},radar:{...z.radar},treemap:{useMaxWidth:!0,padding:10,diagramPadding:8,showValues:!0,nodeWidth:100,nodeHeight:40,borderWidth:1,valueFontSize:12,labelFontSize:14,valueFormat:","}},R=(0,r.K2)((t,e="")=>Object.keys(t).reduce((n,r)=>Array.isArray(t[r])?n:"object"==typeof t[r]&&null!==t[r]?[...n,e+r,...R(t[r],"")]:[...n,e+r],[]),"keyify"),N=new Set(R($,"")),q=$,W=(0,r.K2)(t=>{if(r.Rm.debug("sanitizeDirective called with",t),"object"==typeof t&&null!=t)if(Array.isArray(t))t.forEach(t=>W(t));else{for(const e of Object.keys(t)){if(r.Rm.debug("Checking key",e),e.startsWith("__")||e.includes("proto")||e.includes("constr")||!N.has(e)||null==t[e]){r.Rm.debug("sanitize deleting key: ",e),delete t[e];continue}if("object"==typeof t[e]){r.Rm.debug("sanitizing object",e),W(t[e]);continue}const n=["themeCSS","fontFamily","altFontFamily"];for(const i of n)e.includes(i)&&(r.Rm.debug("sanitizing css option",e),t[e]=K(t[e]))}if(t.themeVariables)for(const e of Object.keys(t.themeVariables)){const n=t.themeVariables[e];n?.match&&!n.match(/^[\d "#%(),.;A-Za-z]+$/)&&(t.themeVariables[e]="")}r.Rm.debug("After sanitization",t)}},"sanitizeDirective"),K=(0,r.K2)(t=>{let e=0,n=0;for(const r of t){if(e<n)return"{ /* ERROR: Unbalanced CSS */ }";"{"===r?e++:"}"===r&&n++}return e!==n?"{ /* ERROR: Unbalanced CSS */ }":t},"sanitizeCss"),U=Object.freeze(q),H=w({},U),G=[],Y=w({},U),V=(0,r.K2)((t,e)=>{let n=w({},t),r={};for(const t of e)nt(t),r=w(r,t);if(n=w(n,r),r.theme&&r.theme in j){const t=w({},c),e=w(t.themeVariables||{},r.themeVariables);n.theme&&n.theme in j&&(n.themeVariables=j[n.theme].getThemeVariables(e))}return lt(Y=n),Y},"updateCurrentConfig"),Q=(0,r.K2)(t=>(H=w({},U),H=w(H,t),t.theme&&j[t.theme]&&(H.themeVariables=j[t.theme].getThemeVariables(t.themeVariables)),V(H,G),H),"setSiteConfig"),X=(0,r.K2)(t=>{c=w({},t)},"saveConfigFromInitialize"),Z=(0,r.K2)(t=>(H=w(H,t),V(H,G),H),"updateSiteConfig"),J=(0,r.K2)(()=>w({},H),"getSiteConfig"),tt=(0,r.K2)(t=>(lt(t),w(Y,t),et()),"setConfig"),et=(0,r.K2)(()=>w({},Y),"getConfig"),nt=(0,r.K2)(t=>{t&&(["secure",...H.secure??[]].forEach(e=>{Object.hasOwn(t,e)&&(r.Rm.debug(`Denied attempt to modify a secure key ${e}`,t[e]),delete t[e])}),Object.keys(t).forEach(e=>{e.startsWith("__")&&delete t[e]}),Object.keys(t).forEach(e=>{"string"==typeof t[e]&&(t[e].includes("<")||t[e].includes(">")||t[e].includes("url(data:"))&&delete t[e],"object"==typeof t[e]&&nt(t[e])}))},"sanitize"),rt=(0,r.K2)(t=>{W(t),t.fontFamily&&!t.themeVariables?.fontFamily&&(t.themeVariables={...t.themeVariables,fontFamily:t.fontFamily}),G.push(t),V(H,G)},"addDirective"),it=(0,r.K2)((t=H)=>{V(t,G=[])},"reset"),ot={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},at={},st=(0,r.K2)(t=>{at[t]||(r.Rm.warn(ot[t]),at[t]=!0)},"issueWarning"),lt=(0,r.K2)(t=>{t&&(t.lazyLoadedDiagrams||t.loadExternalDiagramsAtStartup)&&st("LAZY_LOAD_DEPRECATED")},"checkConfig"),ct=(0,r.K2)(()=>{let t={};c&&(t=w(t,c));for(const e of G)t=w(t,e);return t},"getUserDefinedConfig"),ht=/<br\s*\/?>/gi,ut=(0,r.K2)(t=>t?vt(t).replace(/\\n/g,"#br#").split("#br#"):[""],"getRows"),dt=(()=>{let t=!1;return()=>{t||(pt(),t=!0)}})();function pt(){const t="data-temp-href-target";p.default.addHook("beforeSanitizeAttributes",e=>{"A"===e.tagName&&e.hasAttribute("target")&&e.setAttribute(t,e.getAttribute("target")??"")}),p.default.addHook("afterSanitizeAttributes",e=>{"A"===e.tagName&&e.hasAttribute(t)&&(e.setAttribute("target",e.getAttribute(t)??""),e.removeAttribute(t),"_blank"===e.getAttribute("target")&&e.setAttribute("rel","noopener"))})}(0,r.K2)(pt,"setupDompurifyHooks");var ft=(0,r.K2)(t=>(dt(),p.default.sanitize(t)),"removeScript"),gt=(0,r.K2)((t,e)=>{if(!1!==e.flowchart?.htmlLabels){const n=e.securityLevel;"antiscript"===n||"strict"===n?t=ft(t):"loose"!==n&&(t=(t=(t=vt(t)).replace(/</g,"&lt;").replace(/>/g,"&gt;")).replace(/=/g,"&equals;"),t=xt(t))}return t},"sanitizeMore"),mt=(0,r.K2)((t,e)=>t?t=e.dompurifyConfig?p.default.sanitize(gt(t,e),e.dompurifyConfig).toString():p.default.sanitize(gt(t,e),{FORBID_TAGS:["style"]}).toString():t,"sanitizeText"),At=(0,r.K2)((t,e)=>"string"==typeof t?mt(t,e):t.flat().map(t=>mt(t,e)),"sanitizeTextOrArray"),yt=(0,r.K2)(t=>ht.test(t),"hasBreaks"),bt=(0,r.K2)(t=>t.split(ht),"splitBreaks"),xt=(0,r.K2)(t=>t.replace(/#br#/g,"<br/>"),"placeholderToBreak"),vt=(0,r.K2)(t=>t.replace(ht,"#br#"),"breakToPlaceholder"),Ct=(0,r.K2)(t=>{let e="";return t&&(e=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,e=CSS.escape(e)),e},"getUrl"),kt=(0,r.K2)(t=>!1!==t&&!["false","null","0"].includes(String(t).trim().toLowerCase()),"evaluate"),wt=(0,r.K2)(function(...t){const e=t.filter(t=>!isNaN(t));return Math.max(...e)},"getMax"),Bt=(0,r.K2)(function(...t){const e=t.filter(t=>!isNaN(t));return Math.min(...e)},"getMin"),It=(0,r.K2)(function(t){const e=t.split(/(,)/),n=[];for(let t=0;t<e.length;t++){let r=e[t];if(","===r&&t>0&&t+1<e.length){const i=e[t-1],o=e[t+1];_t(i,o)&&(r=i+","+o,t++,n.pop())}n.push(Et(r))}return n.join("")},"parseGenericTypes"),St=(0,r.K2)((t,e)=>Math.max(0,t.split(e).length-1),"countOccurrence"),_t=(0,r.K2)((t,e)=>{const n=St(t,"~"),r=St(e,"~");return 1===n&&1===r},"shouldCombineSets"),Et=(0,r.K2)(t=>{const e=St(t,"~");let n=!1;if(e<=1)return t;e%2!=0&&t.startsWith("~")&&(t=t.substring(1),n=!0);const r=[...t];let i=r.indexOf("~"),o=r.lastIndexOf("~");for(;-1!==i&&-1!==o&&i!==o;)r[i]="<",r[o]=">",i=r.indexOf("~"),o=r.lastIndexOf("~");return n&&r.unshift("~"),r.join("")},"processSet"),Tt=(0,r.K2)(()=>void 0!==window.MathMLElement,"isMathMLSupported"),Mt=/\$\$(.*)\$\$/g,Lt=(0,r.K2)(t=>(t.match(Mt)?.length??0)>0,"hasKatex"),Ot=(0,r.K2)(async(t,e)=>{const n=document.createElement("div");n.innerHTML=await Pt(t,e),n.id="katex-temp",n.style.visibility="hidden",n.style.position="absolute",n.style.top="0";const r=document.querySelector("body");r?.insertAdjacentElement("beforeend",n);const i={width:n.clientWidth,height:n.clientHeight};return n.remove(),i},"calculateMathMLDimensions"),Dt=(0,r.K2)(async(t,e)=>{if(!Lt(t))return t;if(!(Tt()||e.legacyMathML||e.forceLegacyMathML))return t.replace(Mt,"MathML is unsupported in this environment.");{const{default:r}=await n.e(130).then(n.bind(n,22130)),i=e.forceLegacyMathML||!Tt()&&e.legacyMathML?"htmlAndMathml":"mathml";return t.split(ht).map(t=>Lt(t)?`<div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">${t}</div>`:`<div>${t}</div>`).join("").replace(Mt,(t,e)=>r.renderToString(e,{throwOnError:!0,displayMode:!0,output:i}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))}},"renderKatexUnsanitized"),Pt=(0,r.K2)(async(t,e)=>mt(await Dt(t,e),e),"renderKatexSanitized"),Ft={getRows:ut,sanitizeText:mt,sanitizeTextOrArray:At,hasBreaks:yt,splitBreaks:bt,lineBreakRegex:ht,removeScript:ft,getUrl:Ct,evaluate:kt,getMax:wt,getMin:Bt},jt=(0,r.K2)(function(t,e){for(let n of e)t.attr(n[0],n[1])},"d3Attrs"),zt=(0,r.K2)(function(t,e,n){let r=new Map;return n?(r.set("width","100%"),r.set("style",`max-width: ${e}px;`)):(r.set("height",t),r.set("width",e)),r},"calculateSvgSizeAttrs"),$t=(0,r.K2)(function(t,e,n,r){const i=zt(e,n,r);jt(t,i)},"configureSvgSize"),Rt=(0,r.K2)(function(t,e,n,i){const o=e.node().getBBox(),a=o.width,s=o.height;r.Rm.info(`SVG bounds: ${a}x${s}`,o);let l=0,c=0;r.Rm.info(`Graph bounds: ${l}x${c}`,t),l=a+2*n,c=s+2*n,r.Rm.info(`Calculated bounds: ${l}x${c}`),$t(e,c,l,i);const h=`${o.x-n} ${o.y-n} ${o.width+2*n} ${o.height+2*n}`;e.attr("viewBox",h)},"setupGraphViewbox"),Nt={},qt=(0,r.K2)((t,e,n)=>{let i="";return t in Nt&&Nt[t]?i=Nt[t](n):r.Rm.warn(`No theme found for ${t}`),` & {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n    fill: ${n.textColor}\n  }\n  @keyframes edge-animation-frame {\n    from {\n      stroke-dashoffset: 0;\n    }\n  }\n  @keyframes dash {\n    to {\n      stroke-dashoffset: 0;\n    }\n  }\n  & .edge-animation-slow {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 50s linear infinite;\n    stroke-linecap: round;\n  }\n  & .edge-animation-fast {\n    stroke-dasharray: 9,5 !important;\n    stroke-dashoffset: 900;\n    animation: dash 20s linear infinite;\n    stroke-linecap: round;\n  }\n  /* Classes common for multiple diagrams */\n\n  & .error-icon {\n    fill: ${n.errorBkgColor};\n  }\n  & .error-text {\n    fill: ${n.errorTextColor};\n    stroke: ${n.errorTextColor};\n  }\n\n  & .edge-thickness-normal {\n    stroke-width: 1px;\n  }\n  & .edge-thickness-thick {\n    stroke-width: 3.5px\n  }\n  & .edge-pattern-solid {\n    stroke-dasharray: 0;\n  }\n  & .edge-thickness-invisible {\n    stroke-width: 0;\n    fill: none;\n  }\n  & .edge-pattern-dashed{\n    stroke-dasharray: 3;\n  }\n  .edge-pattern-dotted {\n    stroke-dasharray: 2;\n  }\n\n  & .marker {\n    fill: ${n.lineColor};\n    stroke: ${n.lineColor};\n  }\n  & .marker.cross {\n    stroke: ${n.lineColor};\n  }\n\n  & svg {\n    font-family: ${n.fontFamily};\n    font-size: ${n.fontSize};\n  }\n   & p {\n    margin: 0\n   }\n\n  ${i}\n\n  ${e}\n`},"getStyles"),Wt=(0,r.K2)((t,e)=>{void 0!==e&&(Nt[t]=e)},"addStylesForDiagram"),Kt=qt,Ut={};(0,r.VA)(Ut,{clear:()=>Qt,getAccDescription:()=>te,getAccTitle:()=>Zt,getDiagramTitle:()=>ne,setAccDescription:()=>Jt,setAccTitle:()=>Xt,setDiagramTitle:()=>ee});var Ht="",Gt="",Yt="",Vt=(0,r.K2)(t=>mt(t,et()),"sanitizeText"),Qt=(0,r.K2)(()=>{Ht="",Yt="",Gt=""},"clear"),Xt=(0,r.K2)(t=>{Ht=Vt(t).replace(/^\s+/g,"")},"setAccTitle"),Zt=(0,r.K2)(()=>Ht,"getAccTitle"),Jt=(0,r.K2)(t=>{Yt=Vt(t).replace(/\n\s+/g,"\n")},"setAccDescription"),te=(0,r.K2)(()=>Yt,"getAccDescription"),ee=(0,r.K2)(t=>{Gt=Vt(t)},"setDiagramTitle"),ne=(0,r.K2)(()=>Gt,"getDiagramTitle"),re=r.Rm,ie=r.He,oe=et,ae=tt,se=U,le=(0,r.K2)(t=>mt(t,oe()),"sanitizeText"),ce=Rt,he=(0,r.K2)(()=>Ut,"getCommonDb"),ue={},de=(0,r.K2)((t,e,n)=>{ue[t]&&re.warn(`Diagram with id ${t} already registered. Overwriting.`),ue[t]=e,n&&v(t,n),Wt(t,e.styles),e.injectUtils?.(re,ie,oe,le,ce,he(),()=>{})},"registerDiagram"),pe=(0,r.K2)(t=>{if(t in ue)return ue[t];throw new fe(t)},"getDiagram"),fe=class extends Error{static{(0,r.K2)(this,"DiagramNotFoundError")}constructor(t){super(`Diagram ${t} not found.`)}}},80154:(t,e,n)=>{"use strict";n.d(e,{A:()=>l});var r=n(41917),i="object"==typeof exports&&exports&&!exports.nodeType&&exports,o=i&&"object"==typeof module&&module&&!module.nodeType&&module,a=o&&o.exports===i?r.A.Buffer:void 0,s=a?a.allocUnsafe:void 0;const l=function(t,e){if(e)return t.slice();var n=t.length,r=s?s(n):new t.constructor(n);return t.copy(r),r}},81121:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=Function.prototype.toString;const i=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},84171:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(28562);const i=function(){try{var t=(0,r.A)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}()},85072:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var o={},a=[],s=0;s<t.length;s++){var l=t[s],c=r.base?l[0]+r.base:l[0],h=o[c]||0,u="".concat(c," ").concat(h);o[c]=h+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=i(p,r);r.byIndex=s,e.splice(s,0,{identifier:u,updater:f,references:1})}a.push(u)}return a}function i(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,i){var o=r(t=t||[],i=i||{});return function(t){t=t||[];for(var a=0;a<o.length;a++){var s=n(o[a]);e[s].references--}for(var l=r(t,i),c=0;c<o.length;c++){var h=n(o[c]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}o=l}}},86309:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});const r={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:t=>t>=255?255:t<0?0:t,g:t=>t>=255?255:t<0?0:t,b:t=>t>=255?255:t<0?0:t,h:t=>t%360,s:t=>t>=100?100:t<0?0:t,l:t=>t>=100?100:t<0?0:t,a:t=>t>=1?1:t<0?0:t},toLinear:t=>{const e=t/255;return t>.03928?Math.pow((e+.055)/1.055,2.4):e/12.92},hue2rgb:(t,e,n)=>(n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t),hsl2rgb:({h:t,s:e,l:n},i)=>{if(!e)return 2.55*n;t/=360,e/=100;const o=(n/=100)<.5?n*(1+e):n+e-n*e,a=2*n-o;switch(i){case"r":return 255*r.hue2rgb(a,o,t+1/3);case"g":return 255*r.hue2rgb(a,o,t);case"b":return 255*r.hue2rgb(a,o,t-1/3)}},rgb2hsl:({r:t,g:e,b:n},r)=>{t/=255,e/=255,n/=255;const i=Math.max(t,e,n),o=Math.min(t,e,n),a=(i+o)/2;if("l"===r)return 100*a;if(i===o)return 0;const s=i-o;if("s"===r)return 100*(a>.5?s/(2-i-o):s/(i+o));switch(i){case t:return 60*((e-n)/s+(e<n?6:0));case e:return 60*((n-t)/s+2);case n:return 60*((t-e)/s+4);default:return-1}}},i={channel:r,lang:{clamp:(t,e,n)=>e>n?Math.min(e,Math.max(n,t)):Math.min(n,Math.max(e,t)),round:t=>Math.round(1e10*t)/1e10},unit:{dec2hex:t=>{const e=Math.round(t).toString(16);return e.length>1?e:`0${e}`}}}},89469:(t,e,n)=>{"use strict";n.d(e,{A:()=>s});var r=n(66984);const i=function(t,e){for(var n=t.length;n--;)if((0,r.A)(t[n][0],e))return n;return-1};var o=Array.prototype.splice;function a(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}a.prototype.clear=function(){this.__data__=[],this.size=0},a.prototype.delete=function(t){var e=this.__data__,n=i(e,t);return!(n<0||(n==e.length-1?e.pop():o.call(e,n,1),--this.size,0))},a.prototype.get=function(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]},a.prototype.has=function(t){return i(this.__data__,t)>-1},a.prototype.set=function(t,e){var n=this.__data__,r=i(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const s=a},89610:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(2383),i=n(23149);const o=function(t){if(!(0,i.A)(t))return!1;var e=(0,r.A)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},90565:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=n(43988);const i=function(t){var e=new t.constructor(t.byteLength);return new r.A(e).set(new r.A(t)),e}},92049:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=Array.isArray},93946:(t,e,n)=>{"use strict";n.d(e,{A:()=>d});var r=n(71354),i=n.n(r),o=n(76314),a=n.n(o),s=n(4417),l=n.n(s),c=new URL(n(42949),n.b),h=a()(i()),u=l()(c);h.push([t.id,`/* ========================================\n   Chat Panel - \n   ======================================== */\n\n.chat-panel {\n    position: fixed;\n    display: flex;\n    flex-direction: column;\n    background: #ffffff;\n    border: 1px solid #e0e0e0;\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\n    z-index: 1000;\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;\n    font-size: 14px;\n}\n\n/*  */\n.chat-panel[data-position="right"] {\n    top: 60px;\n    right: 20px;\n    bottom: 20px;\n    width: 400px;\n    max-width: 90vw;\n}\n\n.chat-panel[data-position="bottom"] {\n    left: 20px;\n    right: 20px;\n    bottom: 20px;\n    height: 400px;\n    max-height: 50vh;\n}\n\n.chat-panel[data-position="floating"] {\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 500px;\n    height: 600px;\n    max-width: 90vw;\n    max-height: 90vh;\n}\n\n/* ========================================\n   Header\n   ======================================== */\n\n.chat-panel-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 12px 16px;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2);\n    flex-shrink: 0;\n}\n\n.header-left,\n.header-right {\n    display: flex;\n    gap: 4px;\n}\n\n.header-center {\n    flex: 1;\n    text-align: center;\n    font-weight: 600;\n    font-size: 16px;\n}\n\n.session-title {\n    display: inline-block;\n    max-width: 200px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n}\n\n.btn-icon {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    padding: 6px 10px;\n    background: rgba(255, 255, 255, 0.1);\n    border: 1px solid rgba(255, 255, 255, 0.2);\n    border-radius: 4px;\n    color: white;\n    cursor: pointer;\n    font-size: 12px;\n    transition: all 0.2s;\n}\n\n.btn-icon:hover {\n    background: rgba(255, 255, 255, 0.2);\n    transform: translateY(-1px);\n}\n\n.btn-icon .icon {\n    font-size: 14px;\n}\n\n.btn-icon .label {\n    font-size: 11px;\n}\n\n/* ========================================\n   Context Options\n   ======================================== */\n\n.context-options {\n    display: flex;\n    gap: 8px;\n    padding: 8px 16px;\n    background: #f5f5f5;\n    border-bottom: 1px solid #e0e0e0;\n    flex-shrink: 0;\n}\n\n.context-option {\n    display: flex;\n    align-items: center;\n    gap: 4px;\n    padding: 4px 8px;\n    background: white;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    cursor: pointer;\n    font-size: 12px;\n    transition: all 0.2s;\n}\n\n.context-option:hover {\n    border-color: #667eea;\n    background: #f0f4ff;\n}\n\n.context-option input[type="radio"] {\n    margin: 0;\n}\n\n.context-option input[type="radio"]:checked + span {\n    font-weight: 600;\n    color: #667eea;\n}\n\n/* ========================================\n   Messages Container\n   ======================================== */\n\n.chat-messages {\n    flex: 1;\n    overflow-y: auto;\n    padding: 16px;\n    display: flex;\n    flex-direction: column;\n    gap: 16px;\n}\n\n.chat-messages::-webkit-scrollbar {\n    width: 8px;\n}\n\n.chat-messages::-webkit-scrollbar-track {\n    background: #f1f1f1;\n}\n\n.chat-messages::-webkit-scrollbar-thumb {\n    background: #888;\n    border-radius: 4px;\n}\n\n.chat-messages::-webkit-scrollbar-thumb:hover {\n    background: #555;\n}\n\n/* ========================================\n   Message\n   ======================================== */\n\n.message {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    padding: 12px;\n    border-radius: 8px;\n    animation: messageSlideIn 0.3s ease-out;\n}\n\n@keyframes messageSlideIn {\n    from {\n        opacity: 0;\n        transform: translateY(10px);\n    }\n    to {\n        opacity: 1;\n        transform: translateY(0);\n    }\n}\n\n.message-user {\n    background: #e3f2fd;\n    border-left: 3px solid #2196f3;\n    align-self: flex-end;\n    max-width: 80%;\n}\n\n.message-assistant {\n    background: #f5f5f5;\n    border-left: 3px solid #667eea;\n    align-self: flex-start;\n    max-width: 90%;\n}\n\n.message.streaming {\n    border-left-color: #ff9800;\n}\n\n.message-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-bottom: 4px;\n}\n\n.message-role {\n    font-weight: 600;\n    font-size: 13px;\n    color: #333;\n}\n\n.message-time {\n    font-size: 11px;\n    color: #999;\n}\n\n.message-content {\n    line-height: 1.6;\n    color: #333;\n}\n\n.message-content p {\n    margin: 0 0 8px 0;\n}\n\n.message-content p:last-child {\n    margin-bottom: 0;\n}\n\n.message-content pre {\n    background: #2d2d2d;\n    color: #f8f8f2;\n    padding: 12px;\n    border-radius: 4px;\n    overflow-x: auto;\n    margin: 8px 0;\n}\n\n.message-content code {\n    background: #2d2d2d;\n    color: #f8f8f2;\n    padding: 2px 6px;\n    border-radius: 3px;\n    font-family: 'Consolas', 'Monaco', monospace;\n    font-size: 13px;\n}\n\n.message-content pre code {\n    background: none;\n    padding: 0;\n}\n\n.message-content ul,\n.message-content ol {\n    margin: 8px 0;\n    padding-left: 24px;\n}\n\n.message-content li {\n    margin: 4px 0;\n}\n\n.message-content blockquote {\n    margin: 8px 0;\n    padding-left: 12px;\n    border-left: 3px solid #ddd;\n    color: #666;\n    font-style: italic;\n}\n\n.typing-indicator {\n    display: inline-block;\n    animation: blink 1s infinite;\n    color: #667eea;\n    font-weight: bold;\n}\n\n@keyframes blink {\n    0%, 100% { opacity: 1; }\n    50% { opacity: 0; }\n}\n\n.message-actions {\n    display: flex;\n    gap: 6px;\n    margin-top: 4px;\n}\n\n.message-actions .btn-icon {\n    padding: 4px 8px;\n    font-size: 11px;\n    background: rgba(0, 0, 0, 0.05);\n    color: #666;\n    border-color: rgba(0, 0, 0, 0.1);\n}\n\n.message-actions .btn-icon:hover {\n    background: rgba(0, 0, 0, 0.1);\n    color: #333;\n}\n\n/* ========================================\n   Input Area\n   ======================================== */\n\n.chat-input-area {\n    display: flex;\n    flex-direction: column;\n    gap: 8px;\n    padding: 16px;\n    background: #fafafa;\n    border-top: 1px solid #e0e0e0;\n    flex-shrink: 0;\n}\n\n#chat-input {\n    width: 100%;\n    padding: 10px 12px;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n    font-family: inherit;\n    font-size: 14px;\n    line-height: 1.5;\n    resize: vertical;\n    min-height: 60px;\n    max-height: 200px;\n}\n\n#chat-input:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.input-actions {\n    display: flex;\n    gap: 8px;\n    justify-content: flex-end;\n}\n\n.btn-primary,\n.btn-secondary {\n    padding: 8px 16px;\n    border: none;\n    border-radius: 6px;\n    font-size: 13px;\n    font-weight: 600;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.btn-primary {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n}\n\n.btn-primary:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);\n}\n\n.btn-primary:active {\n    transform: translateY(0);\n}\n\n.btn-secondary {\n    background: #f5f5f5;\n    color: #666;\n    border: 1px solid #ddd;\n}\n\n.btn-secondary:hover {\n    background: #e8e8e8;\n}\n\n/* ========================================\n   Responsive\n   ======================================== */\n\n@media (max-width: 768px) {\n    .chat-panel[data-position="right"] {\n        left: 20px;\n        width: auto;\n    }\n\n    .chat-panel[data-position="bottom"] {\n        height: 300px;\n    }\n\n    .message-user,\n    .message-assistant {\n        max-width: 95%;\n    }\n\n    .btn-icon .label {\n        display: none;\n    }\n\n    .session-title {\n        max-width: 100px;\n    }\n}\n\n/* ========================================\n   Dark Mode Support (optional)\n   ======================================== */\n\n@media (prefers-color-scheme: dark) {\n    .chat-panel {\n        background: #1e1e1e;\n        border-color: #333;\n        color: #e0e0e0;\n    }\n\n    .context-options {\n        background: #2a2a2a;\n        border-bottom-color: #333;\n    }\n\n    .context-option {\n        background: #333;\n        border-color: #444;\n        color: #e0e0e0;\n    }\n\n    .context-option:hover {\n        border-color: #667eea;\n        background: #3a3a4a;\n    }\n\n    .chat-messages::-webkit-scrollbar-track {\n        background: #2a2a2a;\n    }\n\n    .chat-messages::-webkit-scrollbar-thumb {\n        background: #555;\n    }\n\n    .message-user {\n        background: #1a3a5a;\n        border-left-color: #2196f3;\n    }\n\n    .message-assistant {\n        background: #2a2a2a;\n        border-left-color: #667eea;\n    }\n\n    .message-role,\n    .message-content {\n        color: #e0e0e0;\n    }\n\n    .message-time {\n        color: #888;\n    }\n\n    .chat-input-area {\n        background: #2a2a2a;\n        border-top-color: #333;\n    }\n\n    #chat-input {\n        background: #333;\n        border-color: #444;\n        color: #e0e0e0;\n    }\n\n    #chat-input:focus {\n        border-color: #667eea;\n        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);\n    }\n\n    .btn-secondary {\n        background: #333;\n        color: #e0e0e0;\n        border-color: #444;\n    }\n\n    .btn-secondary:hover {\n        background: #3a3a3a;\n    }\n\n    .message-actions .btn-icon {\n        background: rgba(255, 255, 255, 0.05);\n        color: #999;\n        border-color: rgba(255, 255, 255, 0.1);\n    }\n\n    .message-actions .btn-icon:hover {\n        background: rgba(255, 255, 255, 0.1);\n        color: #ccc;\n    }\n}\n\n/* ========================================\n   Session List Modal\n   ======================================== */\n\n.session-list-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 10000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.session-list-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    backdrop-filter: blur(2px);\n}\n\n.session-list-container {\n    position: relative;\n    width: 90%;\n    max-width: 700px;\n    max-height: 80vh;\n    background: white;\n    border-radius: 12px;\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\n    display: flex;\n    flex-direction: column;\n    overflow: hidden;\n    z-index: 1;\n}\n\n.session-list-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 20px 24px;\n    border-bottom: 1px solid #e0e0e0;\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n}\n\n.session-list-header h3 {\n    margin: 0;\n    font-size: 20px;\n    font-weight: 600;\n}\n\n.session-list-header .close-btn {\n    background: rgba(255, 255, 255, 0.2);\n    border: none;\n    color: white;\n    font-size: 24px;\n    width: 32px;\n    height: 32px;\n    border-radius: 6px;\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    transition: background 0.2s;\n}\n\n.session-list-header .close-btn:hover {\n    background: rgba(255, 255, 255, 0.3);\n}\n\n.session-list-controls {\n    display: flex;\n    gap: 12px;\n    padding: 16px 24px;\n    border-bottom: 1px solid #e0e0e0;\n    background: #f8f9fa;\n}\n\n.session-search {\n    flex: 1;\n    padding: 8px 12px;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n    font-size: 14px;\n    outline: none;\n    transition: border-color 0.2s;\n}\n\n.session-search:focus {\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.session-filter {\n    padding: 8px 12px;\n    border: 1px solid #ddd;\n    border-radius: 6px;\n    font-size: 14px;\n    outline: none;\n    cursor: pointer;\n    background: white;\n    transition: border-color 0.2s;\n}\n\n.session-filter:focus {\n    border-color: #667eea;\n}\n\n.session-list-items {\n    flex: 1;\n    overflow-y: auto;\n    padding: 16px 24px;\n}\n\n.session-empty {\n    text-align: center;\n    padding: 40px 20px;\n    color: #999;\n    font-size: 14px;\n}\n\n.session-item {\n    background: white;\n    border: 1px solid #e0e0e0;\n    border-radius: 8px;\n    padding: 16px;\n    margin-bottom: 12px;\n    transition: all 0.2s;\n    cursor: pointer;\n}\n\n.session-item:hover {\n    border-color: #667eea;\n    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);\n    transform: translateY(-1px);\n}\n\n.session-item:last-child {\n    margin-bottom: 0;\n}\n\n.session-item-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 8px;\n}\n\n.session-title {\n    font-weight: 600;\n    font-size: 15px;\n    color: #333;\n    flex: 1;\n}\n\n.session-favorite {\n    background: none;\n    border: none;\n    font-size: 18px;\n    cursor: pointer;\n    padding: 4px;\n    transition: transform 0.2s;\n}\n\n.session-favorite:hover {\n    transform: scale(1.2);\n}\n\n.session-preview {\n    font-size: 13px;\n    color: #666;\n    margin-bottom: 12px;\n    line-height: 1.5;\n    display: -webkit-box;\n    -webkit-line-clamp: 2;\n    -webkit-box-orient: vertical;\n    overflow: hidden;\n    text-overflow: ellipsis;\n}\n\n.session-meta {\n    display: flex;\n    gap: 16px;\n    font-size: 12px;\n    color: #999;\n    margin-bottom: 12px;\n}\n\n.session-actions {\n    display: flex;\n    gap: 8px;\n}\n\n.session-actions button {\n    padding: 6px 12px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    background: white;\n    color: #666;\n    font-size: 13px;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.session-actions button:hover {\n    background: #f8f9fa;\n    border-color: #999;\n    color: #333;\n}\n\n.session-open {\n    background: #667eea !important;\n    color: white !important;\n    border-color: #667eea !important;\n}\n\n.session-open:hover {\n    background: #5568d3 !important;\n    border-color: #5568d3 !important;\n}\n\n.session-delete {\n    color: #f44336 !important;\n    border-color: #f44336 !important;\n}\n\n.session-delete:hover {\n    background: #f44336 !important;\n    color: white !important;\n}\n\n/* Dark Mode for Session List */\n@media (prefers-color-scheme: dark) {\n    .session-list-container {\n        background: #1e1e1e;\n        color: #e0e0e0;\n    }\n\n    .session-list-header {\n        border-bottom-color: #333;\n    }\n\n    .session-list-controls {\n        background: #252525;\n        border-bottom-color: #333;\n    }\n\n    .session-search,\n    .session-filter {\n        background: #2a2a2a;\n        border-color: #444;\n        color: #e0e0e0;\n    }\n\n    .session-search::placeholder {\n        color: #666;\n    }\n\n    .session-item {\n        background: #252525;\n        border-color: #333;\n    }\n\n    .session-item:hover {\n        border-color: #667eea;\n    }\n\n    .session-title {\n        color: #e0e0e0;\n    }\n\n    .session-preview {\n        color: #999;\n    }\n\n    .session-actions button {\n        background: #2a2a2a;\n        border-color: #444;\n        color: #999;\n    }\n\n    .session-actions button:hover {\n        background: #333;\n        border-color: #555;\n        color: #ccc;\n    }\n}\n\n/* ========================================\n   Style Control\n   ======================================== */\n\n.style-control {\n    padding: 12px 16px;\n    background: #f8f9fa;\n    border-bottom: 1px solid #e0e0e0;\n    flex-shrink: 0;\n}\n\n.style-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 8px;\n}\n\n.style-toggle {\n    display: flex;\n    align-items: center;\n    gap: 8px;\n    cursor: pointer;\n    user-select: none;\n}\n\n.style-toggle input[type="checkbox"] {\n    cursor: pointer;\n}\n\n.style-toggle span {\n    font-weight: 500;\n    font-size: 13px;\n}\n\n.btn-link {\n    display: flex;\n    align-items: center;\n    padding: 4px 8px;\n    background: transparent;\n    border: none;\n    color: #667eea;\n    cursor: pointer;\n    font-size: 14px;\n    transition: all 0.2s;\n}\n\n.btn-link:hover {\n    background: rgba(102, 126, 234, 0.1);\n    border-radius: 4px;\n}\n\n.style-summary {\n    font-size: 12px;\n    color: #666;\n    padding-left: 24px;\n}\n\n/* ========================================\n   Style Settings Modal\n   ======================================== */\n\n.style-settings-modal {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    z-index: 10000;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.style-settings-modal .modal-overlay {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background: rgba(0, 0, 0, 0.5);\n    backdrop-filter: blur(4px);\n}\n\n.style-settings-modal .modal-container {\n    position: relative;\n    width: 90%;\n    max-width: 600px;\n    max-height: 80vh;\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n    display: flex;\n    flex-direction: column;\n    z-index: 1;\n}\n\n.style-settings-modal .modal-header {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    padding: 20px 24px;\n    border-bottom: 1px solid #e0e0e0;\n    flex-shrink: 0;\n}\n\n.style-settings-modal .modal-header h3 {\n    margin: 0;\n    font-size: 20px;\n    font-weight: 600;\n}\n\n.style-settings-modal .close-modal {\n    background: transparent;\n    border: none;\n    font-size: 24px;\n    color: #666;\n    cursor: pointer;\n    padding: 0;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    transition: all 0.2s;\n}\n\n.style-settings-modal .close-modal:hover {\n    background: #f0f0f0;\n    color: #333;\n}\n\n.style-settings-modal .modal-content {\n    padding: 24px;\n    overflow-y: auto;\n    flex: 1;\n}\n\n.style-settings-modal .form-section {\n    margin-bottom: 20px;\n}\n\n.style-settings-modal .form-label {\n    display: block;\n    font-weight: 500;\n    font-size: 14px;\n    margin-bottom: 8px;\n    color: #333;\n}\n\n.style-settings-modal .form-control {\n    width: 100%;\n    padding: 10px 12px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    font-size: 14px;\n    font-family: inherit;\n    transition: border-color 0.2s;\n}\n\n.style-settings-modal .form-control:focus {\n    outline: none;\n    border-color: #667eea;\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\n}\n\n.style-settings-modal select.form-control {\n    cursor: pointer;\n    appearance: none;\n    background-image: url(${u});\n    background-repeat: no-repeat;\n    background-position: right 12px center;\n    background-size: 16px;\n    padding-right: 40px;\n}\n\n.style-settings-modal input[type="number"].form-control {\n    -moz-appearance: textfield;\n}\n\n.style-settings-modal input[type="number"]::-webkit-outer-spin-button,\n.style-settings-modal input[type="number"]::-webkit-inner-spin-button {\n    -webkit-appearance: none;\n    margin: 0;\n}\n\n.style-settings-modal .modal-footer {\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    gap: 12px;\n    padding: 16px 24px;\n    border-top: 1px solid #e0e0e0;\n    flex-shrink: 0;\n}\n\n.style-settings-modal .btn-secondary,\n.style-settings-modal .btn-primary {\n    padding: 10px 20px;\n    border: none;\n    border-radius: 4px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s;\n}\n\n.style-settings-modal .btn-secondary {\n    background: #f0f0f0;\n    color: #333;\n}\n\n.style-settings-modal .btn-secondary:hover {\n    background: #e0e0e0;\n}\n\n.style-settings-modal .btn-primary {\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n    color: white;\n}\n\n.style-settings-modal .btn-primary:hover {\n    transform: translateY(-1px);\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\n}\n\n/* Export/Import Dialog Styles */\n.export-dialog-overlay {\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background: rgba(0, 0, 0, 0.5);\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    z-index: 10000;\n}\n\n.export-dialog {\n    background: white;\n    border-radius: 8px;\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\n    max-width: 500px;\n    width: 90%;\n    max-height: 80vh;\n    overflow: hidden;\n    display: flex;\n    flex-direction: column;\n}\n\n.export-dialog-header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    padding: 20px;\n    border-bottom: 1px solid #e0e0e0;\n}\n\n.export-dialog-header h3 {\n    margin: 0;\n    font-size: 18px;\n    font-weight: 600;\n}\n\n.export-dialog .close-btn {\n    background: none;\n    border: none;\n    font-size: 24px;\n    color: #666;\n    cursor: pointer;\n    padding: 0;\n    width: 32px;\n    height: 32px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 4px;\n    transition: all 0.2s;\n}\n\n.export-dialog .close-btn:hover {\n    background: #f0f0f0;\n    color: #333;\n}\n\n.export-dialog-content {\n    padding: 20px;\n    overflow-y: auto;\n}\n\n.export-dialog .session-info {\n    background: #f5f5f5;\n    padding: 12px;\n    border-radius: 6px;\n    margin-bottom: 20px;\n    border: 1px solid #e0e0e0;\n}\n\n.export-dialog .session-info strong {\n    display: block;\n    margin-bottom: 4px;\n    color: #333;\n}\n\n.export-dialog .session-info span {\n    color: #666;\n    font-size: 14px;\n}\n\n.export-dialog .form-group {\n    margin-bottom: 16px;\n}\n\n.export-dialog .form-group label {\n    display: block;\n    margin-bottom: 8px;\n    font-weight: 500;\n    color: #333;\n}\n\n.export-dialog .form-group input[type="checkbox"] {\n    margin-right: 8px;\n}\n\n.export-dialog select,\n.export-dialog input[type="password"] {\n    width: 100%;\n    padding: 8px 12px;\n    border: 1px solid #ddd;\n    border-radius: 4px;\n    font-size: 14px;\n    transition: border-color 0.2s;\n}\n\n.export-dialog select:focus,\n.export-dialog input[type="password"]:focus {\n    border-color: #667eea;\n    outline: none;\n}\n\n.export-dialog-footer {\n    display: flex;\n    justify-content: flex-end;\n    gap: 12px;\n    padding: 20px;\n    border-top: 1px solid #e0e0e0;\n}\n\n.export-dialog .btn-secondary,\n.export-dialog .btn-primary {\n    padding: 8px 16px;\n    border-radius: 6px;\n    font-size: 14px;\n    font-weight: 500;\n    cursor: pointer;\n    transition: all 0.2s;\n    border: none;\n}\n\n.export-dialog .btn-secondary {\n    background: #f0f0f0;\n    color: #333;\n}\n\n.export-dialog .btn-secondary:hover {\n    background: #e0e0e0;\n}\n\n.export-dialog .btn-primary {\n    background: #667eea;\n    color: white;\n}\n\n.export-dialog .btn-primary:hover {\n    background: #5568d3;\n}\n\n/* Dark mode support */\n@media (prefers-color-scheme: dark) {\n    .style-control {\n        background: #2c2c2c;\n        border-bottom-color: #444;\n    }\n\n    .style-toggle span {\n        color: #e0e0e0;\n    }\n\n    .btn-link {\n        color: #8b9dc3;\n    }\n\n    .btn-link:hover {\n        background: rgba(139, 157, 195, 0.2);\n    }\n\n    .style-summary {\n        color: #aaa;\n    }\n\n    .style-settings-modal .modal-container {\n        background: #2c2c2c;\n        color: #e0e0e0;\n    }\n\n    .style-settings-modal .modal-header {\n        border-bottom-color: #444;\n    }\n\n    .style-settings-modal .close-modal {\n        color: #aaa;\n    }\n\n    .style-settings-modal .close-modal:hover {\n        background: #3c3c3c;\n        color: #e0e0e0;\n    }\n\n    .style-settings-modal .form-label {\n        color: #e0e0e0;\n    }\n\n    .style-settings-modal .form-control {\n        background: #1c1c1c;\n        border-color: #444;\n        color: #e0e0e0;\n    }\n\n    .style-settings-modal .form-control:focus {\n        border-color: #8b9dc3;\n        box-shadow: 0 0 0 3px rgba(139, 157, 195, 0.2);\n    }\n\n    .style-settings-modal .modal-footer {\n        border-top-color: #444;\n    }\n\n    .style-settings-modal .btn-secondary {\n        background: #3c3c3c;\n        color: #e0e0e0;\n    }\n\n    .style-settings-modal .btn-secondary:hover {\n        background: #4c4c4c;\n    }\n\n    /* Export/Import dialog */\n    .export-dialog-overlay {\n        background: rgba(0, 0, 0, 0.6);\n    }\n\n    .export-dialog {\n        background: #2c2c2c;\n        color: #e0e0e0;\n    }\n\n    .export-dialog-header {\n        border-bottom-color: #444;\n    }\n\n    .export-dialog .close-btn {\n        color: #aaa;\n    }\n\n    .export-dialog .close-btn:hover {\n        color: #e0e0e0;\n    }\n\n    .export-dialog .session-info {\n        background: #1c1c1c;\n        border-color: #444;\n    }\n\n    .export-dialog .form-group label {\n        color: #e0e0e0;\n    }\n\n    .export-dialog select,\n    .export-dialog input[type="password"] {\n        background: #1c1c1c;\n        border-color: #444;\n        color: #e0e0e0;\n    }\n\n    .export-dialog select:focus,\n    .export-dialog input[type="password"]:focus {\n        border-color: #8b9dc3;\n        outline: none;\n    }\n\n    .export-dialog-footer {\n        border-top-color: #444;\n    }\n\n    .export-dialog .btn-secondary {\n        background: #3c3c3c;\n        color: #e0e0e0;\n    }\n\n    .export-dialog .btn-secondary:hover {\n        background: #4c4c4c;\n    }\n\n    .export-dialog .btn-primary {\n        background: #8b9dc3;\n        color: white;\n    }\n\n    .export-dialog .btn-primary:hover {\n        background: #7a8cb3;\n    }\n}\n`,"",{version:3,sources:["webpack://./src/editor/chat-panel.css"],names:[],mappings:"AAAA;;6CAE6C;;AAE7C;IACI,eAAe;IACf,aAAa;IACb,sBAAsB;IACtB,mBAAmB;IACnB,yBAAyB;IACzB,0CAA0C;IAC1C,aAAa;IACb,gFAAgF;IAChF,eAAe;AACnB;;AAEA,YAAY;AACZ;IACI,SAAS;IACT,WAAW;IACX,YAAY;IACZ,YAAY;IACZ,eAAe;AACnB;;AAEA;IACI,UAAU;IACV,WAAW;IACX,YAAY;IACZ,aAAa;IACb,gBAAgB;AACpB;;AAEA;IACI,QAAQ;IACR,SAAS;IACT,gCAAgC;IAChC,YAAY;IACZ,aAAa;IACb,eAAe;IACf,gBAAgB;AACpB;;AAEA;;6CAE6C;;AAE7C;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,kBAAkB;IAClB,6DAA6D;IAC7D,YAAY;IACZ,iDAAiD;IACjD,cAAc;AAClB;;AAEA;;IAEI,aAAa;IACb,QAAQ;AACZ;;AAEA;IACI,OAAO;IACP,kBAAkB;IAClB,gBAAgB;IAChB,eAAe;AACnB;;AAEA;IACI,qBAAqB;IACrB,gBAAgB;IAChB,gBAAgB;IAChB,uBAAuB;IACvB,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,QAAQ;IACR,iBAAiB;IACjB,oCAAoC;IACpC,0CAA0C;IAC1C,kBAAkB;IAClB,YAAY;IACZ,eAAe;IACf,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,oCAAoC;IACpC,2BAA2B;AAC/B;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,eAAe;AACnB;;AAEA;;6CAE6C;;AAE7C;IACI,aAAa;IACb,QAAQ;IACR,iBAAiB;IACjB,mBAAmB;IACnB,gCAAgC;IAChC,cAAc;AAClB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,QAAQ;IACR,gBAAgB;IAChB,iBAAiB;IACjB,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,qBAAqB;IACrB,mBAAmB;AACvB;;AAEA;IACI,SAAS;AACb;;AAEA;IACI,gBAAgB;IAChB,cAAc;AAClB;;AAEA;;6CAE6C;;AAE7C;IACI,OAAO;IACP,gBAAgB;IAChB,aAAa;IACb,aAAa;IACb,sBAAsB;IACtB,SAAS;AACb;;AAEA;IACI,UAAU;AACd;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,gBAAgB;IAChB,kBAAkB;AACtB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;;6CAE6C;;AAE7C;IACI,aAAa;IACb,sBAAsB;IACtB,QAAQ;IACR,aAAa;IACb,kBAAkB;IAClB,uCAAuC;AAC3C;;AAEA;IACI;QACI,UAAU;QACV,2BAA2B;IAC/B;IACA;QACI,UAAU;QACV,wBAAwB;IAC5B;AACJ;;AAEA;IACI,mBAAmB;IACnB,8BAA8B;IAC9B,oBAAoB;IACpB,cAAc;AAClB;;AAEA;IACI,mBAAmB;IACnB,8BAA8B;IAC9B,sBAAsB;IACtB,cAAc;AAClB;;AAEA;IACI,0BAA0B;AAC9B;;AAEA;IACI,aAAa;IACb,8BAA8B;IAC9B,mBAAmB;IACnB,kBAAkB;AACtB;;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,WAAW;AACf;;AAEA;IACI,eAAe;IACf,WAAW;AACf;;AAEA;IACI,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,iBAAiB;AACrB;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,aAAa;IACb,kBAAkB;IAClB,gBAAgB;IAChB,aAAa;AACjB;;AAEA;IACI,mBAAmB;IACnB,cAAc;IACd,gBAAgB;IAChB,kBAAkB;IAClB,4CAA4C;IAC5C,eAAe;AACnB;;AAEA;IACI,gBAAgB;IAChB,UAAU;AACd;;AAEA;;IAEI,aAAa;IACb,kBAAkB;AACtB;;AAEA;IACI,aAAa;AACjB;;AAEA;IACI,aAAa;IACb,kBAAkB;IAClB,2BAA2B;IAC3B,WAAW;IACX,kBAAkB;AACtB;;AAEA;IACI,qBAAqB;IACrB,4BAA4B;IAC5B,cAAc;IACd,iBAAiB;AACrB;;AAEA;IACI,WAAW,UAAU,EAAE;IACvB,MAAM,UAAU,EAAE;AACtB;;AAEA;IACI,aAAa;IACb,QAAQ;IACR,eAAe;AACnB;;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,+BAA+B;IAC/B,WAAW;IACX,gCAAgC;AACpC;;AAEA;IACI,8BAA8B;IAC9B,WAAW;AACf;;AAEA;;6CAE6C;;AAE7C;IACI,aAAa;IACb,sBAAsB;IACtB,QAAQ;IACR,aAAa;IACb,mBAAmB;IACnB,6BAA6B;IAC7B,cAAc;AAClB;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,sBAAsB;IACtB,kBAAkB;IAClB,oBAAoB;IACpB,eAAe;IACf,gBAAgB;IAChB,gBAAgB;IAChB,gBAAgB;IAChB,iBAAiB;AACrB;;AAEA;IACI,aAAa;IACb,qBAAqB;IACrB,8CAA8C;AAClD;;AAEA;IACI,aAAa;IACb,QAAQ;IACR,yBAAyB;AAC7B;;AAEA;;IAEI,iBAAiB;IACjB,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,6DAA6D;IAC7D,YAAY;AAChB;;AAEA;IACI,2BAA2B;IAC3B,8CAA8C;AAClD;;AAEA;IACI,wBAAwB;AAC5B;;AAEA;IACI,mBAAmB;IACnB,WAAW;IACX,sBAAsB;AAC1B;;AAEA;IACI,mBAAmB;AACvB;;AAEA;;6CAE6C;;AAE7C;IACI;QACI,UAAU;QACV,WAAW;IACf;;IAEA;QACI,aAAa;IACjB;;IAEA;;QAEI,cAAc;IAClB;;IAEA;QACI,aAAa;IACjB;;IAEA;QACI,gBAAgB;IACpB;AACJ;;AAEA;;6CAE6C;;AAE7C;IACI;QACI,mBAAmB;QACnB,kBAAkB;QAClB,cAAc;IAClB;;IAEA;QACI,mBAAmB;QACnB,yBAAyB;IAC7B;;IAEA;QACI,gBAAgB;QAChB,kBAAkB;QAClB,cAAc;IAClB;;IAEA;QACI,qBAAqB;QACrB,mBAAmB;IACvB;;IAEA;QACI,mBAAmB;IACvB;;IAEA;QACI,gBAAgB;IACpB;;IAEA;QACI,mBAAmB;QACnB,0BAA0B;IAC9B;;IAEA;QACI,mBAAmB;QACnB,0BAA0B;IAC9B;;IAEA;;QAEI,cAAc;IAClB;;IAEA;QACI,WAAW;IACf;;IAEA;QACI,mBAAmB;QACnB,sBAAsB;IAC1B;;IAEA;QACI,gBAAgB;QAChB,kBAAkB;QAClB,cAAc;IAClB;;IAEA;QACI,qBAAqB;QACrB,8CAA8C;IAClD;;IAEA;QACI,gBAAgB;QAChB,cAAc;QACd,kBAAkB;IACtB;;IAEA;QACI,mBAAmB;IACvB;;IAEA;QACI,qCAAqC;QACrC,WAAW;QACX,sCAAsC;IAC1C;;IAEA;QACI,oCAAoC;QACpC,WAAW;IACf;AACJ;;AAEA;;6CAE6C;;AAE7C;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,uBAAuB;AAC3B;;AAEA;IACI,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,8BAA8B;IAC9B,0BAA0B;AAC9B;;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,gBAAgB;IAChB,gBAAgB;IAChB,iBAAiB;IACjB,mBAAmB;IACnB,0CAA0C;IAC1C,aAAa;IACb,sBAAsB;IACtB,gBAAgB;IAChB,UAAU;AACd;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,kBAAkB;IAClB,gCAAgC;IAChC,6DAA6D;IAC7D,YAAY;AAChB;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;AACpB;;AAEA;IACI,oCAAoC;IACpC,YAAY;IACZ,YAAY;IACZ,eAAe;IACf,WAAW;IACX,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,2BAA2B;AAC/B;;AAEA;IACI,oCAAoC;AACxC;;AAEA;IACI,aAAa;IACb,SAAS;IACT,kBAAkB;IAClB,gCAAgC;IAChC,mBAAmB;AACvB;;AAEA;IACI,OAAO;IACP,iBAAiB;IACjB,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,aAAa;IACb,6BAA6B;AACjC;;AAEA;IACI,qBAAqB;IACrB,8CAA8C;AAClD;;AAEA;IACI,iBAAiB;IACjB,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,aAAa;IACb,eAAe;IACf,iBAAiB;IACjB,6BAA6B;AACjC;;AAEA;IACI,qBAAqB;AACzB;;AAEA;IACI,OAAO;IACP,gBAAgB;IAChB,kBAAkB;AACtB;;AAEA;IACI,kBAAkB;IAClB,kBAAkB;IAClB,WAAW;IACX,eAAe;AACnB;;AAEA;IACI,iBAAiB;IACjB,yBAAyB;IACzB,kBAAkB;IAClB,aAAa;IACb,mBAAmB;IACnB,oBAAoB;IACpB,eAAe;AACnB;;AAEA;IACI,qBAAqB;IACrB,8CAA8C;IAC9C,2BAA2B;AAC/B;;AAEA;IACI,gBAAgB;AACpB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,kBAAkB;AACtB;;AAEA;IACI,gBAAgB;IAChB,eAAe;IACf,WAAW;IACX,OAAO;AACX;;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,eAAe;IACf,eAAe;IACf,YAAY;IACZ,0BAA0B;AAC9B;;AAEA;IACI,qBAAqB;AACzB;;AAEA;IACI,eAAe;IACf,WAAW;IACX,mBAAmB;IACnB,gBAAgB;IAChB,oBAAoB;IACpB,qBAAqB;IACrB,4BAA4B;IAC5B,gBAAgB;IAChB,uBAAuB;AAC3B;;AAEA;IACI,aAAa;IACb,SAAS;IACT,eAAe;IACf,WAAW;IACX,mBAAmB;AACvB;;AAEA;IACI,aAAa;IACb,QAAQ;AACZ;;AAEA;IACI,iBAAiB;IACjB,sBAAsB;IACtB,kBAAkB;IAClB,iBAAiB;IACjB,WAAW;IACX,eAAe;IACf,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,8BAA8B;IAC9B,uBAAuB;IACvB,gCAAgC;AACpC;;AAEA;IACI,8BAA8B;IAC9B,gCAAgC;AACpC;;AAEA;IACI,yBAAyB;IACzB,gCAAgC;AACpC;;AAEA;IACI,8BAA8B;IAC9B,uBAAuB;AAC3B;;AAEA,+BAA+B;AAC/B;IACI;QACI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;QACI,yBAAyB;IAC7B;;IAEA;QACI,mBAAmB;QACnB,yBAAyB;IAC7B;;IAEA;;QAEI,mBAAmB;QACnB,kBAAkB;QAClB,cAAc;IAClB;;IAEA;QACI,WAAW;IACf;;IAEA;QACI,mBAAmB;QACnB,kBAAkB;IACtB;;IAEA;QACI,qBAAqB;IACzB;;IAEA;QACI,cAAc;IAClB;;IAEA;QACI,WAAW;IACf;;IAEA;QACI,mBAAmB;QACnB,kBAAkB;QAClB,WAAW;IACf;;IAEA;QACI,gBAAgB;QAChB,kBAAkB;QAClB,WAAW;IACf;AACJ;;AAEA;;6CAE6C;;AAE7C;IACI,kBAAkB;IAClB,mBAAmB;IACnB,gCAAgC;IAChC,cAAc;AAClB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,kBAAkB;AACtB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,QAAQ;IACR,eAAe;IACf,iBAAiB;AACrB;;AAEA;IACI,eAAe;AACnB;;AAEA;IACI,gBAAgB;IAChB,eAAe;AACnB;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,gBAAgB;IAChB,uBAAuB;IACvB,YAAY;IACZ,cAAc;IACd,eAAe;IACf,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,oCAAoC;IACpC,kBAAkB;AACtB;;AAEA;IACI,eAAe;IACf,WAAW;IACX,kBAAkB;AACtB;;AAEA;;6CAE6C;;AAE7C;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,cAAc;IACd,aAAa;IACb,mBAAmB;IACnB,uBAAuB;AAC3B;;AAEA;IACI,kBAAkB;IAClB,MAAM;IACN,OAAO;IACP,QAAQ;IACR,SAAS;IACT,8BAA8B;IAC9B,0BAA0B;AAC9B;;AAEA;IACI,kBAAkB;IAClB,UAAU;IACV,gBAAgB;IAChB,gBAAgB;IAChB,iBAAiB;IACjB,kBAAkB;IAClB,yCAAyC;IACzC,aAAa;IACb,sBAAsB;IACtB,UAAU;AACd;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,8BAA8B;IAC9B,kBAAkB;IAClB,gCAAgC;IAChC,cAAc;AAClB;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;AACpB;;AAEA;IACI,uBAAuB;IACvB,YAAY;IACZ,eAAe;IACf,WAAW;IACX,eAAe;IACf,UAAU;IACV,WAAW;IACX,YAAY;IACZ,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,aAAa;IACb,gBAAgB;IAChB,OAAO;AACX;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,cAAc;IACd,gBAAgB;IAChB,eAAe;IACf,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,WAAW;IACX,kBAAkB;IAClB,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,oBAAoB;IACpB,6BAA6B;AACjC;;AAEA;IACI,aAAa;IACb,qBAAqB;IACrB,8CAA8C;AAClD;;AAEA;IACI,eAAe;IACf,gBAAgB;IAChB,yDAAkQ;IAClQ,4BAA4B;IAC5B,sCAAsC;IACtC,qBAAqB;IACrB,mBAAmB;AACvB;;AAEA;IACI,0BAA0B;AAC9B;;AAEA;;IAEI,wBAAwB;IACxB,SAAS;AACb;;AAEA;IACI,aAAa;IACb,mBAAmB;IACnB,yBAAyB;IACzB,SAAS;IACT,kBAAkB;IAClB,6BAA6B;IAC7B,cAAc;AAClB;;AAEA;;IAEI,kBAAkB;IAClB,YAAY;IACZ,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,6DAA6D;IAC7D,YAAY;AAChB;;AAEA;IACI,2BAA2B;IAC3B,+CAA+C;AACnD;;AAEA,gCAAgC;AAChC;IACI,eAAe;IACf,MAAM;IACN,OAAO;IACP,WAAW;IACX,YAAY;IACZ,8BAA8B;IAC9B,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,cAAc;AAClB;;AAEA;IACI,iBAAiB;IACjB,kBAAkB;IAClB,0CAA0C;IAC1C,gBAAgB;IAChB,UAAU;IACV,gBAAgB;IAChB,gBAAgB;IAChB,aAAa;IACb,sBAAsB;AAC1B;;AAEA;IACI,aAAa;IACb,8BAA8B;IAC9B,mBAAmB;IACnB,aAAa;IACb,gCAAgC;AACpC;;AAEA;IACI,SAAS;IACT,eAAe;IACf,gBAAgB;AACpB;;AAEA;IACI,gBAAgB;IAChB,YAAY;IACZ,eAAe;IACf,WAAW;IACX,eAAe;IACf,UAAU;IACV,WAAW;IACX,YAAY;IACZ,aAAa;IACb,mBAAmB;IACnB,uBAAuB;IACvB,kBAAkB;IAClB,oBAAoB;AACxB;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,aAAa;IACb,gBAAgB;AACpB;;AAEA;IACI,mBAAmB;IACnB,aAAa;IACb,kBAAkB;IAClB,mBAAmB;IACnB,yBAAyB;AAC7B;;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,WAAW;AACf;;AAEA;IACI,WAAW;IACX,eAAe;AACnB;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,cAAc;IACd,kBAAkB;IAClB,gBAAgB;IAChB,WAAW;AACf;;AAEA;IACI,iBAAiB;AACrB;;AAEA;;IAEI,WAAW;IACX,iBAAiB;IACjB,sBAAsB;IACtB,kBAAkB;IAClB,eAAe;IACf,6BAA6B;AACjC;;AAEA;;IAEI,qBAAqB;IACrB,aAAa;AACjB;;AAEA;IACI,aAAa;IACb,yBAAyB;IACzB,SAAS;IACT,aAAa;IACb,6BAA6B;AACjC;;AAEA;;IAEI,iBAAiB;IACjB,kBAAkB;IAClB,eAAe;IACf,gBAAgB;IAChB,eAAe;IACf,oBAAoB;IACpB,YAAY;AAChB;;AAEA;IACI,mBAAmB;IACnB,WAAW;AACf;;AAEA;IACI,mBAAmB;AACvB;;AAEA;IACI,mBAAmB;IACnB,YAAY;AAChB;;AAEA;IACI,mBAAmB;AACvB;;AAEA,sBAAsB;AACtB;IACI;QACI,mBAAmB;QACnB,yBAAyB;IAC7B;;IAEA;QACI,cAAc;IAClB;;IAEA;QACI,cAAc;IAClB;;IAEA;QACI,oCAAoC;IACxC;;IAEA;QACI,WAAW;IACf;;IAEA;QACI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;QACI,yBAAyB;IAC7B;;IAEA;QACI,WAAW;IACf;;IAEA;QACI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;QACI,cAAc;IAClB;;IAEA;QACI,mBAAmB;QACnB,kBAAkB;QAClB,cAAc;IAClB;;IAEA;QACI,qBAAqB;QACrB,8CAA8C;IAClD;;IAEA;QACI,sBAAsB;IAC1B;;IAEA;QACI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;QACI,mBAAmB;IACvB;;IAEA,yBAAyB;IACzB;QACI,8BAA8B;IAClC;;IAEA;QACI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;QACI,yBAAyB;IAC7B;;IAEA;QACI,WAAW;IACf;;IAEA;QACI,cAAc;IAClB;;IAEA;QACI,mBAAmB;QACnB,kBAAkB;IACtB;;IAEA;QACI,cAAc;IAClB;;IAEA;;QAEI,mBAAmB;QACnB,kBAAkB;QAClB,cAAc;IAClB;;IAEA;;QAEI,qBAAqB;QACrB,aAAa;IACjB;;IAEA;QACI,sBAAsB;IAC1B;;IAEA;QACI,mBAAmB;QACnB,cAAc;IAClB;;IAEA;QACI,mBAAmB;IACvB;;IAEA;QACI,mBAAmB;QACnB,YAAY;IAChB;;IAEA;QACI,mBAAmB;IACvB;AACJ",sourcesContent:['/* ========================================\r\n   Chat Panel - \r\n   ======================================== */\r\n\r\n.chat-panel {\r\n    position: fixed;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: #ffffff;\r\n    border: 1px solid #e0e0e0;\r\n    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);\r\n    z-index: 1000;\r\n    font-family: -apple-system, BlinkMacSystemFont, \'Segoe UI\', \'Roboto\', sans-serif;\r\n    font-size: 14px;\r\n}\r\n\r\n/*  */\r\n.chat-panel[data-position="right"] {\r\n    top: 60px;\r\n    right: 20px;\r\n    bottom: 20px;\r\n    width: 400px;\r\n    max-width: 90vw;\r\n}\r\n\r\n.chat-panel[data-position="bottom"] {\r\n    left: 20px;\r\n    right: 20px;\r\n    bottom: 20px;\r\n    height: 400px;\r\n    max-height: 50vh;\r\n}\r\n\r\n.chat-panel[data-position="floating"] {\r\n    top: 50%;\r\n    left: 50%;\r\n    transform: translate(-50%, -50%);\r\n    width: 500px;\r\n    height: 600px;\r\n    max-width: 90vw;\r\n    max-height: 90vh;\r\n}\r\n\r\n/* ========================================\r\n   Header\r\n   ======================================== */\r\n\r\n.chat-panel-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 12px 16px;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2);\r\n    flex-shrink: 0;\r\n}\r\n\r\n.header-left,\r\n.header-right {\r\n    display: flex;\r\n    gap: 4px;\r\n}\r\n\r\n.header-center {\r\n    flex: 1;\r\n    text-align: center;\r\n    font-weight: 600;\r\n    font-size: 16px;\r\n}\r\n\r\n.session-title {\r\n    display: inline-block;\r\n    max-width: 200px;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n    white-space: nowrap;\r\n}\r\n\r\n.btn-icon {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n    padding: 6px 10px;\r\n    background: rgba(255, 255, 255, 0.1);\r\n    border: 1px solid rgba(255, 255, 255, 0.2);\r\n    border-radius: 4px;\r\n    color: white;\r\n    cursor: pointer;\r\n    font-size: 12px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.btn-icon:hover {\r\n    background: rgba(255, 255, 255, 0.2);\r\n    transform: translateY(-1px);\r\n}\r\n\r\n.btn-icon .icon {\r\n    font-size: 14px;\r\n}\r\n\r\n.btn-icon .label {\r\n    font-size: 11px;\r\n}\r\n\r\n/* ========================================\r\n   Context Options\r\n   ======================================== */\r\n\r\n.context-options {\r\n    display: flex;\r\n    gap: 8px;\r\n    padding: 8px 16px;\r\n    background: #f5f5f5;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.context-option {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 4px;\r\n    padding: 4px 8px;\r\n    background: white;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n    cursor: pointer;\r\n    font-size: 12px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.context-option:hover {\r\n    border-color: #667eea;\r\n    background: #f0f4ff;\r\n}\r\n\r\n.context-option input[type="radio"] {\r\n    margin: 0;\r\n}\r\n\r\n.context-option input[type="radio"]:checked + span {\r\n    font-weight: 600;\r\n    color: #667eea;\r\n}\r\n\r\n/* ========================================\r\n   Messages Container\r\n   ======================================== */\r\n\r\n.chat-messages {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 16px;\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 16px;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar {\r\n    width: 8px;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar-track {\r\n    background: #f1f1f1;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar-thumb {\r\n    background: #888;\r\n    border-radius: 4px;\r\n}\r\n\r\n.chat-messages::-webkit-scrollbar-thumb:hover {\r\n    background: #555;\r\n}\r\n\r\n/* ========================================\r\n   Message\r\n   ======================================== */\r\n\r\n.message {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n    padding: 12px;\r\n    border-radius: 8px;\r\n    animation: messageSlideIn 0.3s ease-out;\r\n}\r\n\r\n@keyframes messageSlideIn {\r\n    from {\r\n        opacity: 0;\r\n        transform: translateY(10px);\r\n    }\r\n    to {\r\n        opacity: 1;\r\n        transform: translateY(0);\r\n    }\r\n}\r\n\r\n.message-user {\r\n    background: #e3f2fd;\r\n    border-left: 3px solid #2196f3;\r\n    align-self: flex-end;\r\n    max-width: 80%;\r\n}\r\n\r\n.message-assistant {\r\n    background: #f5f5f5;\r\n    border-left: 3px solid #667eea;\r\n    align-self: flex-start;\r\n    max-width: 90%;\r\n}\r\n\r\n.message.streaming {\r\n    border-left-color: #ff9800;\r\n}\r\n\r\n.message-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    margin-bottom: 4px;\r\n}\r\n\r\n.message-role {\r\n    font-weight: 600;\r\n    font-size: 13px;\r\n    color: #333;\r\n}\r\n\r\n.message-time {\r\n    font-size: 11px;\r\n    color: #999;\r\n}\r\n\r\n.message-content {\r\n    line-height: 1.6;\r\n    color: #333;\r\n}\r\n\r\n.message-content p {\r\n    margin: 0 0 8px 0;\r\n}\r\n\r\n.message-content p:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.message-content pre {\r\n    background: #2d2d2d;\r\n    color: #f8f8f2;\r\n    padding: 12px;\r\n    border-radius: 4px;\r\n    overflow-x: auto;\r\n    margin: 8px 0;\r\n}\r\n\r\n.message-content code {\r\n    background: #2d2d2d;\r\n    color: #f8f8f2;\r\n    padding: 2px 6px;\r\n    border-radius: 3px;\r\n    font-family: \'Consolas\', \'Monaco\', monospace;\r\n    font-size: 13px;\r\n}\r\n\r\n.message-content pre code {\r\n    background: none;\r\n    padding: 0;\r\n}\r\n\r\n.message-content ul,\r\n.message-content ol {\r\n    margin: 8px 0;\r\n    padding-left: 24px;\r\n}\r\n\r\n.message-content li {\r\n    margin: 4px 0;\r\n}\r\n\r\n.message-content blockquote {\r\n    margin: 8px 0;\r\n    padding-left: 12px;\r\n    border-left: 3px solid #ddd;\r\n    color: #666;\r\n    font-style: italic;\r\n}\r\n\r\n.typing-indicator {\r\n    display: inline-block;\r\n    animation: blink 1s infinite;\r\n    color: #667eea;\r\n    font-weight: bold;\r\n}\r\n\r\n@keyframes blink {\r\n    0%, 100% { opacity: 1; }\r\n    50% { opacity: 0; }\r\n}\r\n\r\n.message-actions {\r\n    display: flex;\r\n    gap: 6px;\r\n    margin-top: 4px;\r\n}\r\n\r\n.message-actions .btn-icon {\r\n    padding: 4px 8px;\r\n    font-size: 11px;\r\n    background: rgba(0, 0, 0, 0.05);\r\n    color: #666;\r\n    border-color: rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.message-actions .btn-icon:hover {\r\n    background: rgba(0, 0, 0, 0.1);\r\n    color: #333;\r\n}\r\n\r\n/* ========================================\r\n   Input Area\r\n   ======================================== */\r\n\r\n.chat-input-area {\r\n    display: flex;\r\n    flex-direction: column;\r\n    gap: 8px;\r\n    padding: 16px;\r\n    background: #fafafa;\r\n    border-top: 1px solid #e0e0e0;\r\n    flex-shrink: 0;\r\n}\r\n\r\n#chat-input {\r\n    width: 100%;\r\n    padding: 10px 12px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 6px;\r\n    font-family: inherit;\r\n    font-size: 14px;\r\n    line-height: 1.5;\r\n    resize: vertical;\r\n    min-height: 60px;\r\n    max-height: 200px;\r\n}\r\n\r\n#chat-input:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.input-actions {\r\n    display: flex;\r\n    gap: 8px;\r\n    justify-content: flex-end;\r\n}\r\n\r\n.btn-primary,\r\n.btn-secondary {\r\n    padding: 8px 16px;\r\n    border: none;\r\n    border-radius: 6px;\r\n    font-size: 13px;\r\n    font-weight: 600;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.btn-primary {\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n}\r\n\r\n.btn-primary:hover {\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 4px 8px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n.btn-primary:active {\r\n    transform: translateY(0);\r\n}\r\n\r\n.btn-secondary {\r\n    background: #f5f5f5;\r\n    color: #666;\r\n    border: 1px solid #ddd;\r\n}\r\n\r\n.btn-secondary:hover {\r\n    background: #e8e8e8;\r\n}\r\n\r\n/* ========================================\r\n   Responsive\r\n   ======================================== */\r\n\r\n@media (max-width: 768px) {\r\n    .chat-panel[data-position="right"] {\r\n        left: 20px;\r\n        width: auto;\r\n    }\r\n\r\n    .chat-panel[data-position="bottom"] {\r\n        height: 300px;\r\n    }\r\n\r\n    .message-user,\r\n    .message-assistant {\r\n        max-width: 95%;\r\n    }\r\n\r\n    .btn-icon .label {\r\n        display: none;\r\n    }\r\n\r\n    .session-title {\r\n        max-width: 100px;\r\n    }\r\n}\r\n\r\n/* ========================================\r\n   Dark Mode Support (optional)\r\n   ======================================== */\r\n\r\n@media (prefers-color-scheme: dark) {\r\n    .chat-panel {\r\n        background: #1e1e1e;\r\n        border-color: #333;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .context-options {\r\n        background: #2a2a2a;\r\n        border-bottom-color: #333;\r\n    }\r\n\r\n    .context-option {\r\n        background: #333;\r\n        border-color: #444;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .context-option:hover {\r\n        border-color: #667eea;\r\n        background: #3a3a4a;\r\n    }\r\n\r\n    .chat-messages::-webkit-scrollbar-track {\r\n        background: #2a2a2a;\r\n    }\r\n\r\n    .chat-messages::-webkit-scrollbar-thumb {\r\n        background: #555;\r\n    }\r\n\r\n    .message-user {\r\n        background: #1a3a5a;\r\n        border-left-color: #2196f3;\r\n    }\r\n\r\n    .message-assistant {\r\n        background: #2a2a2a;\r\n        border-left-color: #667eea;\r\n    }\r\n\r\n    .message-role,\r\n    .message-content {\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .message-time {\r\n        color: #888;\r\n    }\r\n\r\n    .chat-input-area {\r\n        background: #2a2a2a;\r\n        border-top-color: #333;\r\n    }\r\n\r\n    #chat-input {\r\n        background: #333;\r\n        border-color: #444;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    #chat-input:focus {\r\n        border-color: #667eea;\r\n        box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.2);\r\n    }\r\n\r\n    .btn-secondary {\r\n        background: #333;\r\n        color: #e0e0e0;\r\n        border-color: #444;\r\n    }\r\n\r\n    .btn-secondary:hover {\r\n        background: #3a3a3a;\r\n    }\r\n\r\n    .message-actions .btn-icon {\r\n        background: rgba(255, 255, 255, 0.05);\r\n        color: #999;\r\n        border-color: rgba(255, 255, 255, 0.1);\r\n    }\r\n\r\n    .message-actions .btn-icon:hover {\r\n        background: rgba(255, 255, 255, 0.1);\r\n        color: #ccc;\r\n    }\r\n}\r\n\r\n/* ========================================\r\n   Session List Modal\r\n   ======================================== */\r\n\r\n.session-list-modal {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 10000;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.session-list-overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    backdrop-filter: blur(2px);\r\n}\r\n\r\n.session-list-container {\r\n    position: relative;\r\n    width: 90%;\r\n    max-width: 700px;\r\n    max-height: 80vh;\r\n    background: white;\r\n    border-radius: 12px;\r\n    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);\r\n    display: flex;\r\n    flex-direction: column;\r\n    overflow: hidden;\r\n    z-index: 1;\r\n}\r\n\r\n.session-list-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 20px 24px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n}\r\n\r\n.session-list-header h3 {\r\n    margin: 0;\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n}\r\n\r\n.session-list-header .close-btn {\r\n    background: rgba(255, 255, 255, 0.2);\r\n    border: none;\r\n    color: white;\r\n    font-size: 24px;\r\n    width: 32px;\r\n    height: 32px;\r\n    border-radius: 6px;\r\n    cursor: pointer;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    transition: background 0.2s;\r\n}\r\n\r\n.session-list-header .close-btn:hover {\r\n    background: rgba(255, 255, 255, 0.3);\r\n}\r\n\r\n.session-list-controls {\r\n    display: flex;\r\n    gap: 12px;\r\n    padding: 16px 24px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    background: #f8f9fa;\r\n}\r\n\r\n.session-search {\r\n    flex: 1;\r\n    padding: 8px 12px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    outline: none;\r\n    transition: border-color 0.2s;\r\n}\r\n\r\n.session-search:focus {\r\n    border-color: #667eea;\r\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.session-filter {\r\n    padding: 8px 12px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    outline: none;\r\n    cursor: pointer;\r\n    background: white;\r\n    transition: border-color 0.2s;\r\n}\r\n\r\n.session-filter:focus {\r\n    border-color: #667eea;\r\n}\r\n\r\n.session-list-items {\r\n    flex: 1;\r\n    overflow-y: auto;\r\n    padding: 16px 24px;\r\n}\r\n\r\n.session-empty {\r\n    text-align: center;\r\n    padding: 40px 20px;\r\n    color: #999;\r\n    font-size: 14px;\r\n}\r\n\r\n.session-item {\r\n    background: white;\r\n    border: 1px solid #e0e0e0;\r\n    border-radius: 8px;\r\n    padding: 16px;\r\n    margin-bottom: 12px;\r\n    transition: all 0.2s;\r\n    cursor: pointer;\r\n}\r\n\r\n.session-item:hover {\r\n    border-color: #667eea;\r\n    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.1);\r\n    transform: translateY(-1px);\r\n}\r\n\r\n.session-item:last-child {\r\n    margin-bottom: 0;\r\n}\r\n\r\n.session-item-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.session-title {\r\n    font-weight: 600;\r\n    font-size: 15px;\r\n    color: #333;\r\n    flex: 1;\r\n}\r\n\r\n.session-favorite {\r\n    background: none;\r\n    border: none;\r\n    font-size: 18px;\r\n    cursor: pointer;\r\n    padding: 4px;\r\n    transition: transform 0.2s;\r\n}\r\n\r\n.session-favorite:hover {\r\n    transform: scale(1.2);\r\n}\r\n\r\n.session-preview {\r\n    font-size: 13px;\r\n    color: #666;\r\n    margin-bottom: 12px;\r\n    line-height: 1.5;\r\n    display: -webkit-box;\r\n    -webkit-line-clamp: 2;\r\n    -webkit-box-orient: vertical;\r\n    overflow: hidden;\r\n    text-overflow: ellipsis;\r\n}\r\n\r\n.session-meta {\r\n    display: flex;\r\n    gap: 16px;\r\n    font-size: 12px;\r\n    color: #999;\r\n    margin-bottom: 12px;\r\n}\r\n\r\n.session-actions {\r\n    display: flex;\r\n    gap: 8px;\r\n}\r\n\r\n.session-actions button {\r\n    padding: 6px 12px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n    background: white;\r\n    color: #666;\r\n    font-size: 13px;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.session-actions button:hover {\r\n    background: #f8f9fa;\r\n    border-color: #999;\r\n    color: #333;\r\n}\r\n\r\n.session-open {\r\n    background: #667eea !important;\r\n    color: white !important;\r\n    border-color: #667eea !important;\r\n}\r\n\r\n.session-open:hover {\r\n    background: #5568d3 !important;\r\n    border-color: #5568d3 !important;\r\n}\r\n\r\n.session-delete {\r\n    color: #f44336 !important;\r\n    border-color: #f44336 !important;\r\n}\r\n\r\n.session-delete:hover {\r\n    background: #f44336 !important;\r\n    color: white !important;\r\n}\r\n\r\n/* Dark Mode for Session List */\r\n@media (prefers-color-scheme: dark) {\r\n    .session-list-container {\r\n        background: #1e1e1e;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .session-list-header {\r\n        border-bottom-color: #333;\r\n    }\r\n\r\n    .session-list-controls {\r\n        background: #252525;\r\n        border-bottom-color: #333;\r\n    }\r\n\r\n    .session-search,\r\n    .session-filter {\r\n        background: #2a2a2a;\r\n        border-color: #444;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .session-search::placeholder {\r\n        color: #666;\r\n    }\r\n\r\n    .session-item {\r\n        background: #252525;\r\n        border-color: #333;\r\n    }\r\n\r\n    .session-item:hover {\r\n        border-color: #667eea;\r\n    }\r\n\r\n    .session-title {\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .session-preview {\r\n        color: #999;\r\n    }\r\n\r\n    .session-actions button {\r\n        background: #2a2a2a;\r\n        border-color: #444;\r\n        color: #999;\r\n    }\r\n\r\n    .session-actions button:hover {\r\n        background: #333;\r\n        border-color: #555;\r\n        color: #ccc;\r\n    }\r\n}\r\n\r\n/* ========================================\r\n   Style Control\r\n   ======================================== */\r\n\r\n.style-control {\r\n    padding: 12px 16px;\r\n    background: #f8f9fa;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.style-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    margin-bottom: 8px;\r\n}\r\n\r\n.style-toggle {\r\n    display: flex;\r\n    align-items: center;\r\n    gap: 8px;\r\n    cursor: pointer;\r\n    user-select: none;\r\n}\r\n\r\n.style-toggle input[type="checkbox"] {\r\n    cursor: pointer;\r\n}\r\n\r\n.style-toggle span {\r\n    font-weight: 500;\r\n    font-size: 13px;\r\n}\r\n\r\n.btn-link {\r\n    display: flex;\r\n    align-items: center;\r\n    padding: 4px 8px;\r\n    background: transparent;\r\n    border: none;\r\n    color: #667eea;\r\n    cursor: pointer;\r\n    font-size: 14px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.btn-link:hover {\r\n    background: rgba(102, 126, 234, 0.1);\r\n    border-radius: 4px;\r\n}\r\n\r\n.style-summary {\r\n    font-size: 12px;\r\n    color: #666;\r\n    padding-left: 24px;\r\n}\r\n\r\n/* ========================================\r\n   Style Settings Modal\r\n   ======================================== */\r\n\r\n.style-settings-modal {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    z-index: 10000;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n}\r\n\r\n.style-settings-modal .modal-overlay {\r\n    position: absolute;\r\n    top: 0;\r\n    left: 0;\r\n    right: 0;\r\n    bottom: 0;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    backdrop-filter: blur(4px);\r\n}\r\n\r\n.style-settings-modal .modal-container {\r\n    position: relative;\r\n    width: 90%;\r\n    max-width: 600px;\r\n    max-height: 80vh;\r\n    background: white;\r\n    border-radius: 8px;\r\n    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\r\n    display: flex;\r\n    flex-direction: column;\r\n    z-index: 1;\r\n}\r\n\r\n.style-settings-modal .modal-header {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: space-between;\r\n    padding: 20px 24px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.style-settings-modal .modal-header h3 {\r\n    margin: 0;\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n}\r\n\r\n.style-settings-modal .close-modal {\r\n    background: transparent;\r\n    border: none;\r\n    font-size: 24px;\r\n    color: #666;\r\n    cursor: pointer;\r\n    padding: 0;\r\n    width: 32px;\r\n    height: 32px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 4px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.style-settings-modal .close-modal:hover {\r\n    background: #f0f0f0;\r\n    color: #333;\r\n}\r\n\r\n.style-settings-modal .modal-content {\r\n    padding: 24px;\r\n    overflow-y: auto;\r\n    flex: 1;\r\n}\r\n\r\n.style-settings-modal .form-section {\r\n    margin-bottom: 20px;\r\n}\r\n\r\n.style-settings-modal .form-label {\r\n    display: block;\r\n    font-weight: 500;\r\n    font-size: 14px;\r\n    margin-bottom: 8px;\r\n    color: #333;\r\n}\r\n\r\n.style-settings-modal .form-control {\r\n    width: 100%;\r\n    padding: 10px 12px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    font-family: inherit;\r\n    transition: border-color 0.2s;\r\n}\r\n\r\n.style-settings-modal .form-control:focus {\r\n    outline: none;\r\n    border-color: #667eea;\r\n    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);\r\n}\r\n\r\n.style-settings-modal select.form-control {\r\n    cursor: pointer;\r\n    appearance: none;\r\n    background-image: url(\'data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>\');\r\n    background-repeat: no-repeat;\r\n    background-position: right 12px center;\r\n    background-size: 16px;\r\n    padding-right: 40px;\r\n}\r\n\r\n.style-settings-modal input[type="number"].form-control {\r\n    -moz-appearance: textfield;\r\n}\r\n\r\n.style-settings-modal input[type="number"]::-webkit-outer-spin-button,\r\n.style-settings-modal input[type="number"]::-webkit-inner-spin-button {\r\n    -webkit-appearance: none;\r\n    margin: 0;\r\n}\r\n\r\n.style-settings-modal .modal-footer {\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: flex-end;\r\n    gap: 12px;\r\n    padding: 16px 24px;\r\n    border-top: 1px solid #e0e0e0;\r\n    flex-shrink: 0;\r\n}\r\n\r\n.style-settings-modal .btn-secondary,\r\n.style-settings-modal .btn-primary {\r\n    padding: 10px 20px;\r\n    border: none;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.style-settings-modal .btn-secondary {\r\n    background: #f0f0f0;\r\n    color: #333;\r\n}\r\n\r\n.style-settings-modal .btn-secondary:hover {\r\n    background: #e0e0e0;\r\n}\r\n\r\n.style-settings-modal .btn-primary {\r\n    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\r\n    color: white;\r\n}\r\n\r\n.style-settings-modal .btn-primary:hover {\r\n    transform: translateY(-1px);\r\n    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);\r\n}\r\n\r\n/* Export/Import Dialog Styles */\r\n.export-dialog-overlay {\r\n    position: fixed;\r\n    top: 0;\r\n    left: 0;\r\n    width: 100%;\r\n    height: 100%;\r\n    background: rgba(0, 0, 0, 0.5);\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    z-index: 10000;\r\n}\r\n\r\n.export-dialog {\r\n    background: white;\r\n    border-radius: 8px;\r\n    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);\r\n    max-width: 500px;\r\n    width: 90%;\r\n    max-height: 80vh;\r\n    overflow: hidden;\r\n    display: flex;\r\n    flex-direction: column;\r\n}\r\n\r\n.export-dialog-header {\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 20px;\r\n    border-bottom: 1px solid #e0e0e0;\r\n}\r\n\r\n.export-dialog-header h3 {\r\n    margin: 0;\r\n    font-size: 18px;\r\n    font-weight: 600;\r\n}\r\n\r\n.export-dialog .close-btn {\r\n    background: none;\r\n    border: none;\r\n    font-size: 24px;\r\n    color: #666;\r\n    cursor: pointer;\r\n    padding: 0;\r\n    width: 32px;\r\n    height: 32px;\r\n    display: flex;\r\n    align-items: center;\r\n    justify-content: center;\r\n    border-radius: 4px;\r\n    transition: all 0.2s;\r\n}\r\n\r\n.export-dialog .close-btn:hover {\r\n    background: #f0f0f0;\r\n    color: #333;\r\n}\r\n\r\n.export-dialog-content {\r\n    padding: 20px;\r\n    overflow-y: auto;\r\n}\r\n\r\n.export-dialog .session-info {\r\n    background: #f5f5f5;\r\n    padding: 12px;\r\n    border-radius: 6px;\r\n    margin-bottom: 20px;\r\n    border: 1px solid #e0e0e0;\r\n}\r\n\r\n.export-dialog .session-info strong {\r\n    display: block;\r\n    margin-bottom: 4px;\r\n    color: #333;\r\n}\r\n\r\n.export-dialog .session-info span {\r\n    color: #666;\r\n    font-size: 14px;\r\n}\r\n\r\n.export-dialog .form-group {\r\n    margin-bottom: 16px;\r\n}\r\n\r\n.export-dialog .form-group label {\r\n    display: block;\r\n    margin-bottom: 8px;\r\n    font-weight: 500;\r\n    color: #333;\r\n}\r\n\r\n.export-dialog .form-group input[type="checkbox"] {\r\n    margin-right: 8px;\r\n}\r\n\r\n.export-dialog select,\r\n.export-dialog input[type="password"] {\r\n    width: 100%;\r\n    padding: 8px 12px;\r\n    border: 1px solid #ddd;\r\n    border-radius: 4px;\r\n    font-size: 14px;\r\n    transition: border-color 0.2s;\r\n}\r\n\r\n.export-dialog select:focus,\r\n.export-dialog input[type="password"]:focus {\r\n    border-color: #667eea;\r\n    outline: none;\r\n}\r\n\r\n.export-dialog-footer {\r\n    display: flex;\r\n    justify-content: flex-end;\r\n    gap: 12px;\r\n    padding: 20px;\r\n    border-top: 1px solid #e0e0e0;\r\n}\r\n\r\n.export-dialog .btn-secondary,\r\n.export-dialog .btn-primary {\r\n    padding: 8px 16px;\r\n    border-radius: 6px;\r\n    font-size: 14px;\r\n    font-weight: 500;\r\n    cursor: pointer;\r\n    transition: all 0.2s;\r\n    border: none;\r\n}\r\n\r\n.export-dialog .btn-secondary {\r\n    background: #f0f0f0;\r\n    color: #333;\r\n}\r\n\r\n.export-dialog .btn-secondary:hover {\r\n    background: #e0e0e0;\r\n}\r\n\r\n.export-dialog .btn-primary {\r\n    background: #667eea;\r\n    color: white;\r\n}\r\n\r\n.export-dialog .btn-primary:hover {\r\n    background: #5568d3;\r\n}\r\n\r\n/* Dark mode support */\r\n@media (prefers-color-scheme: dark) {\r\n    .style-control {\r\n        background: #2c2c2c;\r\n        border-bottom-color: #444;\r\n    }\r\n\r\n    .style-toggle span {\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .btn-link {\r\n        color: #8b9dc3;\r\n    }\r\n\r\n    .btn-link:hover {\r\n        background: rgba(139, 157, 195, 0.2);\r\n    }\r\n\r\n    .style-summary {\r\n        color: #aaa;\r\n    }\r\n\r\n    .style-settings-modal .modal-container {\r\n        background: #2c2c2c;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .style-settings-modal .modal-header {\r\n        border-bottom-color: #444;\r\n    }\r\n\r\n    .style-settings-modal .close-modal {\r\n        color: #aaa;\r\n    }\r\n\r\n    .style-settings-modal .close-modal:hover {\r\n        background: #3c3c3c;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .style-settings-modal .form-label {\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .style-settings-modal .form-control {\r\n        background: #1c1c1c;\r\n        border-color: #444;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .style-settings-modal .form-control:focus {\r\n        border-color: #8b9dc3;\r\n        box-shadow: 0 0 0 3px rgba(139, 157, 195, 0.2);\r\n    }\r\n\r\n    .style-settings-modal .modal-footer {\r\n        border-top-color: #444;\r\n    }\r\n\r\n    .style-settings-modal .btn-secondary {\r\n        background: #3c3c3c;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .style-settings-modal .btn-secondary:hover {\r\n        background: #4c4c4c;\r\n    }\r\n\r\n    /* Export/Import dialog */\r\n    .export-dialog-overlay {\r\n        background: rgba(0, 0, 0, 0.6);\r\n    }\r\n\r\n    .export-dialog {\r\n        background: #2c2c2c;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .export-dialog-header {\r\n        border-bottom-color: #444;\r\n    }\r\n\r\n    .export-dialog .close-btn {\r\n        color: #aaa;\r\n    }\r\n\r\n    .export-dialog .close-btn:hover {\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .export-dialog .session-info {\r\n        background: #1c1c1c;\r\n        border-color: #444;\r\n    }\r\n\r\n    .export-dialog .form-group label {\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .export-dialog select,\r\n    .export-dialog input[type="password"] {\r\n        background: #1c1c1c;\r\n        border-color: #444;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .export-dialog select:focus,\r\n    .export-dialog input[type="password"]:focus {\r\n        border-color: #8b9dc3;\r\n        outline: none;\r\n    }\r\n\r\n    .export-dialog-footer {\r\n        border-top-color: #444;\r\n    }\r\n\r\n    .export-dialog .btn-secondary {\r\n        background: #3c3c3c;\r\n        color: #e0e0e0;\r\n    }\r\n\r\n    .export-dialog .btn-secondary:hover {\r\n        background: #4c4c4c;\r\n    }\r\n\r\n    .export-dialog .btn-primary {\r\n        background: #8b9dc3;\r\n        color: white;\r\n    }\r\n\r\n    .export-dialog .btn-primary:hover {\r\n        background: #7a8cb3;\r\n    }\r\n}\r\n'],sourceRoot:""}]);const d=h},95635:(t,e,n)=>{"use strict";n.d(e,{A:()=>o});var r=n(86309),i=n(51931);const o=(t,e,n)=>{const o=i.A.parse(t),a=o[e],s=r.A.channel.clamp[e](a+n);return a!==s&&(o[e]=s),i.A.stringify(o)}},97132:(t,e,n)=>{"use strict";n.d(e,{A:()=>r});const r=function(t,e,n){for(var r=-1,i=Object(t),o=n(t),a=o.length;a--;){var s=o[++r];if(!1===e(i[s],s,i))break}return t}},97271:(t,e,n)=>{"use strict";n.d(e,{A:()=>i});var r=Object.prototype;const i=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},97825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var i=void 0!==n.layer;i&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,i&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},98621:(t,e,n)=>{"use strict";n.d(e,{n:()=>r});var r={name:"mermaid",version:"11.12.1",description:"Markdown-ish syntax for generating flowcharts, mindmaps, sequence diagrams, class diagrams, gantt charts, git graphs and more.",type:"module",module:"./dist/mermaid.core.mjs",types:"./dist/mermaid.d.ts",exports:{".":{types:"./dist/mermaid.d.ts",import:"./dist/mermaid.core.mjs",default:"./dist/mermaid.core.mjs"},"./*":"./*"},keywords:["diagram","markdown","flowchart","sequence diagram","gantt","class diagram","git graph","mindmap","packet diagram","c4 diagram","er diagram","pie chart","pie diagram","quadrant chart","requirement diagram","graph"],scripts:{clean:"rimraf dist",dev:"pnpm -w dev","docs:code":"typedoc src/defaultConfig.ts src/config.ts src/mermaid.ts && prettier --write ./src/docs/config/setup","docs:build":"rimraf ../../docs && pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts","docs:verify":"pnpm docs:code && pnpm docs:spellcheck && tsx scripts/docs.cli.mts --verify","docs:pre:vitepress":"pnpm --filter ./src/docs prefetch && rimraf src/vitepress && pnpm docs:code && tsx scripts/docs.cli.mts --vitepress && pnpm --filter ./src/vitepress install --no-frozen-lockfile --ignore-scripts","docs:build:vitepress":"pnpm docs:pre:vitepress && (cd src/vitepress && pnpm run build) && cpy --flat src/docs/landing/ ./src/vitepress/.vitepress/dist/landing","docs:dev":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:dev:docker":'pnpm docs:pre:vitepress && concurrently "pnpm --filter ./src/vitepress dev:docker" "tsx scripts/docs.cli.mts --watch --vitepress"',"docs:serve":"pnpm docs:build:vitepress && vitepress serve src/vitepress","docs:spellcheck":'cspell "src/docs/**/*.md"',"docs:release-version":"tsx scripts/update-release-version.mts","docs:verify-version":"tsx scripts/update-release-version.mts --verify","types:build-config":"tsx scripts/create-types-from-json-schema.mts","types:verify-config":"tsx scripts/create-types-from-json-schema.mts --verify",checkCircle:"npx madge --circular ./src",prepublishOnly:"pnpm docs:verify-version"},repository:{type:"git",url:"https://github.com/mermaid-js/mermaid"},author:"Knut Sveidqvist",license:"MIT",standard:{ignore:["**/parser/*.js","dist/**/*.js","cypress/**/*.js"],globals:["page"]},dependencies:{"@braintree/sanitize-url":"^7.1.1","@iconify/utils":"^3.0.1","@mermaid-js/parser":"workspace:^","@types/d3":"^7.4.3",cytoscape:"^3.29.3","cytoscape-cose-bilkent":"^4.1.0","cytoscape-fcose":"^2.2.0",d3:"^7.9.0","d3-sankey":"^0.12.3","dagre-d3-es":"7.0.13",dayjs:"^1.11.18",dompurify:"^3.2.5",katex:"^0.16.22",khroma:"^2.1.0","lodash-es":"^4.17.21",marked:"^16.2.1",roughjs:"^4.6.6",stylis:"^4.3.6","ts-dedent":"^2.2.0",uuid:"^11.1.0"},devDependencies:{"@adobe/jsonschema2md":"^8.0.5","@iconify/types":"^2.0.0","@types/cytoscape":"^3.21.9","@types/cytoscape-fcose":"^2.2.4","@types/d3-sankey":"^0.12.4","@types/d3-scale":"^4.0.9","@types/d3-scale-chromatic":"^3.1.0","@types/d3-selection":"^3.0.11","@types/d3-shape":"^3.1.7","@types/jsdom":"^21.1.7","@types/katex":"^0.16.7","@types/lodash-es":"^4.17.12","@types/micromatch":"^4.0.9","@types/stylis":"^4.2.7","@types/uuid":"^10.0.0",ajv:"^8.17.1",canvas:"^3.1.2",chokidar:"3.6.0",concurrently:"^9.1.2","csstree-validator":"^4.0.1",globby:"^14.1.0",jison:"^0.4.18","js-base64":"^3.7.8",jsdom:"^26.1.0","json-schema-to-typescript":"^15.0.4",micromatch:"^4.0.8","path-browserify":"^1.0.1",prettier:"^3.5.3",remark:"^15.0.1","remark-frontmatter":"^5.0.0","remark-gfm":"^4.0.1",rimraf:"^6.0.1","start-server-and-test":"^2.0.13","type-fest":"^4.35.0",typedoc:"^0.28.12","typedoc-plugin-markdown":"^4.8.1",typescript:"~5.7.3","unist-util-flatmap":"^1.0.0","unist-util-visit":"^5.0.0",vitepress:"^1.6.4","vitepress-plugin-search":"1.0.4-alpha.22"},files:["dist/","README.md"],publishConfig:{access:"public"}}},99418:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>nt});const{entries:r,setPrototypeOf:i,isFrozen:o,getPrototypeOf:a,getOwnPropertyDescriptor:s}=Object;let{freeze:l,seal:c,create:h}=Object,{apply:u,construct:d}="undefined"!=typeof Reflect&&Reflect;l||(l=function(t){return t}),c||(c=function(t){return t}),u||(u=function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return t.apply(e,r)}),d||(d=function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return new t(...n)});const p=_(Array.prototype.forEach),f=_(Array.prototype.lastIndexOf),g=_(Array.prototype.pop),m=_(Array.prototype.push),A=_(Array.prototype.splice),y=_(String.prototype.toLowerCase),b=_(String.prototype.toString),x=_(String.prototype.match),v=_(String.prototype.replace),C=_(String.prototype.indexOf),k=_(String.prototype.trim),w=_(Object.prototype.hasOwnProperty),B=_(RegExp.prototype.test),I=(S=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return d(S,e)});var S;function _(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return u(t,e,r)}}function E(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:y;i&&i(t,null);let r=e.length;for(;r--;){let i=e[r];if("string"==typeof i){const t=n(i);t!==i&&(o(e)||(e[r]=t),i=t)}t[i]=!0}return t}function T(t){for(let e=0;e<t.length;e++)w(t,e)||(t[e]=null);return t}function M(t){const e=h(null);for(const[n,i]of r(t))w(t,n)&&(Array.isArray(i)?e[n]=T(i):i&&"object"==typeof i&&i.constructor===Object?e[n]=M(i):e[n]=i);return e}function L(t,e){for(;null!==t;){const n=s(t,e);if(n){if(n.get)return _(n.get);if("function"==typeof n.value)return _(n.value)}t=a(t)}return function(){return null}}const O=l(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),D=l(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),P=l(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),F=l(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),j=l(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),z=l(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),$=l(["#text"]),R=l(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),N=l(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),q=l(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),W=l(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),K=c(/\{\{[\w\W]*|[\w\W]*\}\}/gm),U=c(/<%[\w\W]*|[\w\W]*%>/gm),H=c(/\$\{[\w\W]*/gm),G=c(/^data-[\-\w.\u00B7-\uFFFF]+$/),Y=c(/^aria-[\-\w]+$/),V=c(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Q=c(/^(?:\w+script|data):/i),X=c(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Z=c(/^html$/i),J=c(/^[a-z][.\w]*(-[.\w]+)+$/i);var tt=Object.freeze({__proto__:null,ARIA_ATTR:Y,ATTR_WHITESPACE:X,CUSTOM_ELEMENT:J,DATA_ATTR:G,DOCTYPE_NAME:Z,ERB_EXPR:U,IS_ALLOWED_URI:V,IS_SCRIPT_OR_DATA:Q,MUSTACHE_EXPR:K,TMPLIT_EXPR:H});const et=function(){return"undefined"==typeof window?null:window};var nt=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:et();const n=e=>t(e);if(n.version="3.3.0",n.removed=[],!e||!e.document||9!==e.document.nodeType||!e.Element)return n.isSupported=!1,n;let{document:i}=e;const o=i,a=o.currentScript,{DocumentFragment:s,HTMLTemplateElement:c,Node:u,Element:d,NodeFilter:S,NamedNodeMap:_=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:T,DOMParser:K,trustedTypes:U}=e,H=d.prototype,G=L(H,"cloneNode"),Y=L(H,"remove"),Q=L(H,"nextSibling"),X=L(H,"childNodes"),J=L(H,"parentNode");if("function"==typeof c){const t=i.createElement("template");t.content&&t.content.ownerDocument&&(i=t.content.ownerDocument)}let nt,rt="";const{implementation:it,createNodeIterator:ot,createDocumentFragment:at,getElementsByTagName:st}=i,{importNode:lt}=o;let ct={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]};n.isSupported="function"==typeof r&&"function"==typeof J&&it&&void 0!==it.createHTMLDocument;const{MUSTACHE_EXPR:ht,ERB_EXPR:ut,TMPLIT_EXPR:dt,DATA_ATTR:pt,ARIA_ATTR:ft,IS_SCRIPT_OR_DATA:gt,ATTR_WHITESPACE:mt,CUSTOM_ELEMENT:At}=tt;let{IS_ALLOWED_URI:yt}=tt,bt=null;const xt=E({},[...O,...D,...P,...j,...$]);let vt=null;const Ct=E({},[...R,...N,...q,...W]);let kt=Object.seal(h(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),wt=null,Bt=null;const It=Object.seal(h(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let St=!0,_t=!0,Et=!1,Tt=!0,Mt=!1,Lt=!0,Ot=!1,Dt=!1,Pt=!1,Ft=!1,jt=!1,zt=!1,$t=!0,Rt=!1,Nt=!0,qt=!1,Wt={},Kt=null;const Ut=E({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ht=null;const Gt=E({},["audio","video","img","source","image","track"]);let Yt=null;const Vt=E({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Qt="http://www.w3.org/1998/Math/MathML",Xt="http://www.w3.org/2000/svg",Zt="http://www.w3.org/1999/xhtml";let Jt=Zt,te=!1,ee=null;const ne=E({},[Qt,Xt,Zt],b);let re=E({},["mi","mo","mn","ms","mtext"]),ie=E({},["annotation-xml"]);const oe=E({},["title","style","font","a","script"]);let ae=null;const se=["application/xhtml+xml","text/html"];let le=null,ce=null;const he=i.createElement("form"),ue=function(t){return t instanceof RegExp||t instanceof Function},de=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!ce||ce!==t){if(t&&"object"==typeof t||(t={}),t=M(t),ae=-1===se.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,le="application/xhtml+xml"===ae?b:y,bt=w(t,"ALLOWED_TAGS")?E({},t.ALLOWED_TAGS,le):xt,vt=w(t,"ALLOWED_ATTR")?E({},t.ALLOWED_ATTR,le):Ct,ee=w(t,"ALLOWED_NAMESPACES")?E({},t.ALLOWED_NAMESPACES,b):ne,Yt=w(t,"ADD_URI_SAFE_ATTR")?E(M(Vt),t.ADD_URI_SAFE_ATTR,le):Vt,Ht=w(t,"ADD_DATA_URI_TAGS")?E(M(Gt),t.ADD_DATA_URI_TAGS,le):Gt,Kt=w(t,"FORBID_CONTENTS")?E({},t.FORBID_CONTENTS,le):Ut,wt=w(t,"FORBID_TAGS")?E({},t.FORBID_TAGS,le):M({}),Bt=w(t,"FORBID_ATTR")?E({},t.FORBID_ATTR,le):M({}),Wt=!!w(t,"USE_PROFILES")&&t.USE_PROFILES,St=!1!==t.ALLOW_ARIA_ATTR,_t=!1!==t.ALLOW_DATA_ATTR,Et=t.ALLOW_UNKNOWN_PROTOCOLS||!1,Tt=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Mt=t.SAFE_FOR_TEMPLATES||!1,Lt=!1!==t.SAFE_FOR_XML,Ot=t.WHOLE_DOCUMENT||!1,Ft=t.RETURN_DOM||!1,jt=t.RETURN_DOM_FRAGMENT||!1,zt=t.RETURN_TRUSTED_TYPE||!1,Pt=t.FORCE_BODY||!1,$t=!1!==t.SANITIZE_DOM,Rt=t.SANITIZE_NAMED_PROPS||!1,Nt=!1!==t.KEEP_CONTENT,qt=t.IN_PLACE||!1,yt=t.ALLOWED_URI_REGEXP||V,Jt=t.NAMESPACE||Zt,re=t.MATHML_TEXT_INTEGRATION_POINTS||re,ie=t.HTML_INTEGRATION_POINTS||ie,kt=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&ue(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(kt.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&ue(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(kt.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(kt.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Mt&&(_t=!1),jt&&(Ft=!0),Wt&&(bt=E({},$),vt=[],!0===Wt.html&&(E(bt,O),E(vt,R)),!0===Wt.svg&&(E(bt,D),E(vt,N),E(vt,W)),!0===Wt.svgFilters&&(E(bt,P),E(vt,N),E(vt,W)),!0===Wt.mathMl&&(E(bt,j),E(vt,q),E(vt,W))),t.ADD_TAGS&&("function"==typeof t.ADD_TAGS?It.tagCheck=t.ADD_TAGS:(bt===xt&&(bt=M(bt)),E(bt,t.ADD_TAGS,le))),t.ADD_ATTR&&("function"==typeof t.ADD_ATTR?It.attributeCheck=t.ADD_ATTR:(vt===Ct&&(vt=M(vt)),E(vt,t.ADD_ATTR,le))),t.ADD_URI_SAFE_ATTR&&E(Yt,t.ADD_URI_SAFE_ATTR,le),t.FORBID_CONTENTS&&(Kt===Ut&&(Kt=M(Kt)),E(Kt,t.FORBID_CONTENTS,le)),Nt&&(bt["#text"]=!0),Ot&&E(bt,["html","head","body"]),bt.table&&(E(bt,["tbody"]),delete wt.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw I('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw I('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');nt=t.TRUSTED_TYPES_POLICY,rt=nt.createHTML("")}else void 0===nt&&(nt=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";e&&e.hasAttribute(r)&&(n=e.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return t.createPolicy(i,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(U,a)),null!==nt&&"string"==typeof rt&&(rt=nt.createHTML(""));l&&l(t),ce=t}},pe=E({},[...D,...P,...F]),fe=E({},[...j,...z]),ge=function(t){m(n.removed,{element:t});try{J(t).removeChild(t)}catch(e){Y(t)}},me=function(t,e){try{m(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){m(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t)if(Ft||jt)try{ge(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},Ae=function(t){let e=null,n=null;if(Pt)t="<remove></remove>"+t;else{const e=x(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===ae&&Jt===Zt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const r=nt?nt.createHTML(t):t;if(Jt===Zt)try{e=(new K).parseFromString(r,ae)}catch(t){}if(!e||!e.documentElement){e=it.createDocument(Jt,"template",null);try{e.documentElement.innerHTML=te?rt:r}catch(t){}}const o=e.body||e.documentElement;return t&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),Jt===Zt?st.call(e,Ot?"html":"body")[0]:Ot?e.documentElement:o},ye=function(t){return ot.call(t.ownerDocument||t,t,S.SHOW_ELEMENT|S.SHOW_COMMENT|S.SHOW_TEXT|S.SHOW_PROCESSING_INSTRUCTION|S.SHOW_CDATA_SECTION,null)},be=function(t){return t instanceof T&&("string"!=typeof t.nodeName||"string"!=typeof t.textContent||"function"!=typeof t.removeChild||!(t.attributes instanceof _)||"function"!=typeof t.removeAttribute||"function"!=typeof t.setAttribute||"string"!=typeof t.namespaceURI||"function"!=typeof t.insertBefore||"function"!=typeof t.hasChildNodes)},xe=function(t){return"function"==typeof u&&t instanceof u};function ve(t,e,r){p(t,t=>{t.call(n,e,r,ce)})}const Ce=function(t){let e=null;if(ve(ct.beforeSanitizeElements,t,null),be(t))return ge(t),!0;const r=le(t.nodeName);if(ve(ct.uponSanitizeElement,t,{tagName:r,allowedTags:bt}),Lt&&t.hasChildNodes()&&!xe(t.firstElementChild)&&B(/<[/\w!]/g,t.innerHTML)&&B(/<[/\w!]/g,t.textContent))return ge(t),!0;if(7===t.nodeType)return ge(t),!0;if(Lt&&8===t.nodeType&&B(/<[/\w]/g,t.data))return ge(t),!0;if(!(It.tagCheck instanceof Function&&It.tagCheck(r))&&(!bt[r]||wt[r])){if(!wt[r]&&we(r)){if(kt.tagNameCheck instanceof RegExp&&B(kt.tagNameCheck,r))return!1;if(kt.tagNameCheck instanceof Function&&kt.tagNameCheck(r))return!1}if(Nt&&!Kt[r]){const e=J(t)||t.parentNode,n=X(t)||t.childNodes;if(n&&e)for(let r=n.length-1;r>=0;--r){const i=G(n[r],!0);i.__removalCount=(t.__removalCount||0)+1,e.insertBefore(i,Q(t))}}return ge(t),!0}return t instanceof d&&!function(t){let e=J(t);e&&e.tagName||(e={namespaceURI:Jt,tagName:"template"});const n=y(t.tagName),r=y(e.tagName);return!!ee[t.namespaceURI]&&(t.namespaceURI===Xt?e.namespaceURI===Zt?"svg"===n:e.namespaceURI===Qt?"svg"===n&&("annotation-xml"===r||re[r]):Boolean(pe[n]):t.namespaceURI===Qt?e.namespaceURI===Zt?"math"===n:e.namespaceURI===Xt?"math"===n&&ie[r]:Boolean(fe[n]):t.namespaceURI===Zt?!(e.namespaceURI===Xt&&!ie[r])&&!(e.namespaceURI===Qt&&!re[r])&&!fe[n]&&(oe[n]||!pe[n]):!("application/xhtml+xml"!==ae||!ee[t.namespaceURI]))}(t)?(ge(t),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!B(/<\/no(script|embed|frames)/i,t.innerHTML)?(Mt&&3===t.nodeType&&(e=t.textContent,p([ht,ut,dt],t=>{e=v(e,t," ")}),t.textContent!==e&&(m(n.removed,{element:t.cloneNode()}),t.textContent=e)),ve(ct.afterSanitizeElements,t,null),!1):(ge(t),!0)},ke=function(t,e,n){if($t&&("id"===e||"name"===e)&&(n in i||n in he))return!1;if(_t&&!Bt[e]&&B(pt,e));else if(St&&B(ft,e));else if(It.attributeCheck instanceof Function&&It.attributeCheck(e,t));else if(!vt[e]||Bt[e]){if(!(we(t)&&(kt.tagNameCheck instanceof RegExp&&B(kt.tagNameCheck,t)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(t))&&(kt.attributeNameCheck instanceof RegExp&&B(kt.attributeNameCheck,e)||kt.attributeNameCheck instanceof Function&&kt.attributeNameCheck(e,t))||"is"===e&&kt.allowCustomizedBuiltInElements&&(kt.tagNameCheck instanceof RegExp&&B(kt.tagNameCheck,n)||kt.tagNameCheck instanceof Function&&kt.tagNameCheck(n))))return!1}else if(Yt[e]);else if(B(yt,v(n,mt,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==C(n,"data:")||!Ht[t])if(Et&&!B(gt,v(n,mt,"")));else if(n)return!1;return!0},we=function(t){return"annotation-xml"!==t&&x(t,At)},Be=function(t){ve(ct.beforeSanitizeAttributes,t,null);const{attributes:e}=t;if(!e||be(t))return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:vt,forceKeepAttr:void 0};let i=e.length;for(;i--;){const o=e[i],{name:a,namespaceURI:s,value:l}=o,c=le(a),h=l;let u="value"===a?h:k(h);if(r.attrName=c,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,ve(ct.uponSanitizeAttribute,t,r),u=r.attrValue,!Rt||"id"!==c&&"name"!==c||(me(a,t),u="user-content-"+u),Lt&&B(/((--!?|])>)|<\/(style|title|textarea)/i,u)){me(a,t);continue}if("attributename"===c&&x(u,"href")){me(a,t);continue}if(r.forceKeepAttr)continue;if(!r.keepAttr){me(a,t);continue}if(!Tt&&B(/\/>/i,u)){me(a,t);continue}Mt&&p([ht,ut,dt],t=>{u=v(u,t," ")});const d=le(t.nodeName);if(ke(d,c,u)){if(nt&&"object"==typeof U&&"function"==typeof U.getAttributeType)if(s);else switch(U.getAttributeType(d,c)){case"TrustedHTML":u=nt.createHTML(u);break;case"TrustedScriptURL":u=nt.createScriptURL(u)}if(u!==h)try{s?t.setAttributeNS(s,a,u):t.setAttribute(a,u),be(t)?ge(t):g(n.removed)}catch(e){me(a,t)}}else me(a,t)}ve(ct.afterSanitizeAttributes,t,null)},Ie=function t(e){let n=null;const r=ye(e);for(ve(ct.beforeSanitizeShadowDOM,e,null);n=r.nextNode();)ve(ct.uponSanitizeShadowNode,n,null),Ce(n),Be(n),n.content instanceof s&&t(n.content);ve(ct.afterSanitizeShadowDOM,e,null)};return n.sanitize=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=null,i=null,a=null,l=null;if(te=!t,te&&(t="\x3c!--\x3e"),"string"!=typeof t&&!xe(t)){if("function"!=typeof t.toString)throw I("toString is not a function");if("string"!=typeof(t=t.toString()))throw I("dirty is not a string, aborting")}if(!n.isSupported)return t;if(Dt||de(e),n.removed=[],"string"==typeof t&&(qt=!1),qt){if(t.nodeName){const e=le(t.nodeName);if(!bt[e]||wt[e])throw I("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof u)r=Ae("\x3c!----\x3e"),i=r.ownerDocument.importNode(t,!0),1===i.nodeType&&"BODY"===i.nodeName||"HTML"===i.nodeName?r=i:r.appendChild(i);else{if(!Ft&&!Mt&&!Ot&&-1===t.indexOf("<"))return nt&&zt?nt.createHTML(t):t;if(r=Ae(t),!r)return Ft?null:zt?rt:""}r&&Pt&&ge(r.firstChild);const c=ye(qt?t:r);for(;a=c.nextNode();)Ce(a),Be(a),a.content instanceof s&&Ie(a.content);if(qt)return t;if(Ft){if(jt)for(l=at.call(r.ownerDocument);r.firstChild;)l.appendChild(r.firstChild);else l=r;return(vt.shadowroot||vt.shadowrootmode)&&(l=lt.call(o,l,!0)),l}let h=Ot?r.outerHTML:r.innerHTML;return Ot&&bt["!doctype"]&&r.ownerDocument&&r.ownerDocument.doctype&&r.ownerDocument.doctype.name&&B(Z,r.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+r.ownerDocument.doctype.name+">\n"+h),Mt&&p([ht,ut,dt],t=>{h=v(h,t," ")}),nt&&zt?nt.createHTML(h):h},n.setConfig=function(){de(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),Dt=!0},n.clearConfig=function(){ce=null,Dt=!1},n.isValidAttribute=function(t,e,n){ce||de({});const r=le(t),i=le(e);return ke(r,i,n)},n.addHook=function(t,e){"function"==typeof e&&m(ct[t],e)},n.removeHook=function(t,e){if(void 0!==e){const n=f(ct[t],e);return-1===n?void 0:A(ct[t],n,1)[0]}return g(ct[t])},n.removeHooks=function(t){ct[t]=[]},n.removeAllHooks=function(){ct={afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}},n}()}},o={};function a(t){var e=o[t];if(void 0!==e)return e.exports;var n=o[t]={id:t,exports:{}};return i[t].call(n.exports,n,n.exports,a),n.exports}a.m=i,a.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return a.d(e,{a:e}),e},e=Object.getPrototypeOf?t=>Object.getPrototypeOf(t):t=>t.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var o={};t=t||[null,e({}),e([]),e(e)];for(var s=2&r&&n;("object"==typeof s||"function"==typeof s)&&!~t.indexOf(s);s=e(s))Object.getOwnPropertyNames(s).forEach(t=>o[t]=()=>n[t]);return o.default=()=>n,a.d(i,o),i},a.d=(t,e)=>{for(var n in e)a.o(e,n)&&!a.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},a.f={},a.e=t=>Promise.all(Object.keys(a.f).reduce((e,n)=>(a.f[n](t,e),e),[])),a.u=t=>t+".js",a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),a.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n={},r="sightedit-chrome-extension:",a.l=(t,e,i,o)=>{if(n[t])n[t].push(e);else{var s,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),h=0;h<c.length;h++){var u=c[h];if(u.getAttribute("src")==t||u.getAttribute("data-webpack")==r+i){s=u;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+i),s.src=t),n[t]=[e];var d=(e,r)=>{s.onerror=s.onload=null,clearTimeout(p);var i=n[t];if(delete n[t],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach(t=>t(r)),e)return e(r)},p=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}},a.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;a.g.importScripts&&(t=a.g.location+"");var e=a.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var r=n.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=n[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=t})(),(()=>{a.b="undefined"!=typeof document&&document.baseURI||self.location.href;var t={8:0};a.f.j=(e,n)=>{var r=a.o(t,e)?t[e]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((n,i)=>r=t[e]=[n,i]);n.push(r[2]=i);var o=a.p+a.u(e),s=new Error;a.l(o,n=>{if(a.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;s.message="Loading chunk "+e+" failed.\n("+i+": "+o+")",s.name="ChunkLoadError",s.type=i,s.request=o,r[1](s)}},"chunk-"+e,e)}};var e=(e,n)=>{var r,i,[o,s,l]=n,c=0;if(o.some(e=>0!==t[e])){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);l&&l(a)}for(e&&e(n);c<o.length;c++)i=o[c],a.o(t,i)&&t[i]&&t[i][0](),t[i]=0},n=self.webpackChunksightedit_chrome_extension=self.webpackChunksightedit_chrome_extension||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),a.nc=void 0,(()=>{"use strict";var t=a(85072),e=a.n(t),n=a(97825),r=a.n(n),i=a(77659),o=a.n(i),s=a(55056),l=a.n(s),c=a(10540),h=a.n(c),u=a(41113),d=a.n(u),p=a(72826),f={};f.styleTagTransform=d(),f.setAttributes=l(),f.insert=o().bind(null,"head"),f.domAPI=r(),f.insertStyleElement=h(),e()(p.A,f),p.A&&p.A.locals&&p.A.locals;var g=a(41375),m={};m.styleTagTransform=d(),m.setAttributes=l(),m.insert=o().bind(null,"head"),m.domAPI=r(),m.insertStyleElement=h(),e()(g.A,m),g.A&&g.A.locals&&g.A.locals;var A=a(80005),y={};y.styleTagTransform=d(),y.setAttributes=l(),y.insert=o().bind(null,"head"),y.domAPI=r(),y.insertStyleElement=h(),e()(A.A,y),A.A&&A.A.locals&&A.A.locals;var b=a(76582),x={};x.styleTagTransform=d(),x.setAttributes=l(),x.insert=o().bind(null,"head"),x.domAPI=r(),x.insertStyleElement=h(),e()(b.A,x),b.A&&b.A.locals&&b.A.locals;var v=a(93946),C={};C.styleTagTransform=d(),C.setAttributes=l(),C.insert=o().bind(null,"head"),C.domAPI=r(),C.insertStyleElement=h(),e()(v.A,C),v.A&&v.A.locals&&v.A.locals;var k=a(8453),w={};w.styleTagTransform=d(),w.setAttributes=l(),w.insert=o().bind(null,"head"),w.domAPI=r(),w.insertStyleElement=h(),e()(k.A,w),k.A&&k.A.locals&&k.A.locals;var B=a(1297),I={};function S(t){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},S(t)}function _(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return E(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(E(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,E(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,E(u,"constructor",c),E(c,"constructor",l),l.displayName="GeneratorFunction",E(c,i,"GeneratorFunction"),E(u),E(u,i,"Generator"),E(u,r,function(){return this}),E(u,"toString",function(){return"[object Generator]"}),(_=function(){return{w:o,m:d}})()}function E(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}E=function(t,e,n,r){function o(e,n){E(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},E(t,e,n,r)}function T(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function M(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){T(o,r,i,a,s,"next",t)}function s(t){T(o,r,i,a,s,"throw",t)}a(void 0)})}}function L(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,O(r.key),r)}}function O(t){var e=function(t){if("object"!=S(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=S(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==S(e)?e:e+""}I.styleTagTransform=d(),I.setAttributes=l(),I.insert=o().bind(null,"head"),I.domAPI=r(),I.insertStyleElement=h(),e()(B.A,I),B.A&&B.A.locals&&B.A.locals;var D=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.relayUrl="http://127.0.0.1:8080",this.versions=[],this.currentFilePath=null},e=[{key:"setFilePath",value:function(t){this.currentFilePath=t}},{key:"getVersions",value:(a=M(_().m(function t(){var e,n,r;return _().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(this.relayUrl,"/api/versions"),{method:"GET",headers:{"Content-Type":"application/json"}});case 1:if((e=t.v).ok){t.n=2;break}throw new Error("");case 2:return t.n=3,e.json();case 3:if(!(n=t.v).success){t.n=4;break}return this.versions=n.versions||[],t.a(2,this.versions);case 4:throw new Error(n.error||"");case 5:t.n=7;break;case 6:throw t.p=6,r=t.v,console.error(":",r),r;case 7:return t.a(2)}},t,this,[[0,6]])})),function(){return a.apply(this,arguments)})},{key:"saveVersion",value:(o=M(_().m(function t(e){var n,r,i,o,a=arguments;return _().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"",t.p=1,t.n=2,fetch("".concat(this.relayUrl,"/api/versions"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({file_path:this.currentFilePath,content:e,message:n})});case 2:if((r=t.v).ok){t.n=3;break}throw new Error("");case 3:return t.n=4,r.json();case 4:if(!(i=t.v).success){t.n=6;break}return t.n=5,this.getVersions();case 5:return t.a(2,i);case 6:throw new Error(i.error||"");case 7:t.n=9;break;case 8:throw t.p=8,o=t.v,console.error(":",o),o;case 9:return t.a(2)}},t,this,[[1,8]])})),function(t){return o.apply(this,arguments)})},{key:"getVersionContent",value:(i=M(_().m(function t(e){var n,r,i;return _().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(this.relayUrl,"/api/versions/").concat(e,"/content"),{method:"GET",headers:{"Content-Type":"application/json"}});case 1:if((n=t.v).ok){t.n=2;break}throw new Error("");case 2:return t.n=3,n.json();case 3:if(!(r=t.v).success){t.n=4;break}return t.a(2,r.content);case 4:throw new Error(r.error||"");case 5:t.n=7;break;case 6:throw t.p=6,i=t.v,console.error(":",i),i;case 7:return t.a(2)}},t,this,[[0,6]])})),function(t){return i.apply(this,arguments)})},{key:"restoreVersion",value:(r=M(_().m(function t(e){var n,r,i;return _().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(this.relayUrl,"/api/versions/").concat(e,"/restore"),{method:"POST",headers:{"Content-Type":"application/json"}});case 1:if((n=t.v).ok){t.n=2;break}throw new Error("");case 2:return t.n=3,n.json();case 3:if(!(r=t.v).success){t.n=4;break}return t.a(2,r);case 4:throw new Error(r.error||"");case 5:t.n=7;break;case 6:throw t.p=6,i=t.v,console.error(":",i),i;case 7:return t.a(2)}},t,this,[[0,6]])})),function(t){return r.apply(this,arguments)})},{key:"checkAvailability",value:(n=M(_().m(function t(){var e;return _().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,fetch("".concat(this.relayUrl,"/api/versions"),{method:"GET",headers:{"Content-Type":"application/json"}});case 1:return e=t.v,t.a(2,e.ok);case 2:return t.p=2,t.v,t.a(2,!1)}},t,this,[[0,2]])})),function(){return n.apply(this,arguments)})},{key:"formatTimestamp",value:function(t){var e=new Date(t),n=e.getFullYear(),r=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return"".concat(n,"/").concat(r,"/").concat(i," ").concat(o,":").concat(a)}},{key:"formatFileSize",value:function(t){if(0===t)return"0 B";var e=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,e)*100)/100+" "+["B","KB","MB","GB"][e]}}],e&&L(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a}(),P=null;function F(){return P||(P=new D),P}function j(t){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},j(t)}function z(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return $(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):($(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,$(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,$(u,"constructor",c),$(c,"constructor",l),l.displayName="GeneratorFunction",$(c,i,"GeneratorFunction"),$(u),$(u,i,"Generator"),$(u,r,function(){return this}),$(u,"toString",function(){return"[object Generator]"}),(z=function(){return{w:o,m:d}})()}function $(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}$=function(t,e,n,r){function o(e,n){$(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},$(t,e,n,r)}function R(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function N(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){R(o,r,i,a,s,"next",t)}function s(t){R(o,r,i,a,s,"throw",t)}a(void 0)})}}function q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,W(r.key),r)}}function W(t){var e=function(t){if("object"!=j(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=j(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==j(e)?e:e+""}var K=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.versionManager=F(),this.isOpen=!1,this.panel=null,this.onRestoreCallback=null},e=[{key:"initialize",value:function(){this.createPanel(),this.attachEventListeners()}},{key:"createPanel",value:function(){this.panel=document.createElement("div"),this.panel.id="version-history-panel",this.panel.className="version-panel hidden",this.panel.innerHTML='\n            <div class="version-panel-header">\n                <h3> </h3>\n                <button class="panel-close-btn" title=""></button>\n            </div>\n            <div class="version-panel-content">\n                <div class="version-sync-status">\n                    <span id="sync-status-icon"></span>\n                    <span id="sync-status-text">...</span>\n                </div>\n                <div class="version-list" id="version-list">\n                    \x3c!--  --\x3e\n                </div>\n            </div>\n        ',this.container.appendChild(this.panel),this.injectStyles()}},{key:"injectStyles",value:function(){if(!document.getElementById("version-panel-styles")){var t=document.createElement("style");t.id="version-panel-styles",t.textContent="\n            .version-panel {\n                position: fixed;\n                right: 0;\n                top: 0;\n                width: 350px;\n                height: 100vh;\n                background: #ffffff;\n                border-left: 1px solid #e0e0e0;\n                box-shadow: -2px 0 8px rgba(0,0,0,0.1);\n                display: flex;\n                flex-direction: column;\n                z-index: 1000;\n                transition: transform 0.3s ease;\n            }\n\n            .version-panel.hidden {\n                transform: translateX(100%);\n            }\n\n            .version-panel-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 16px;\n                border-bottom: 1px solid #e0e0e0;\n                background: #f8f9fa;\n            }\n\n            .version-panel-header h3 {\n                margin: 0;\n                font-size: 18px;\n                font-weight: 600;\n                color: #333;\n            }\n\n            .panel-close-btn {\n                background: none;\n                border: none;\n                font-size: 24px;\n                cursor: pointer;\n                color: #666;\n                padding: 0;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 4px;\n                transition: background 0.2s;\n            }\n\n            .panel-close-btn:hover {\n                background: #e0e0e0;\n            }\n\n            .version-panel-content {\n                flex: 1;\n                overflow-y: auto;\n                padding: 16px;\n            }\n\n            .version-sync-status {\n                display: flex;\n                align-items: center;\n                gap: 8px;\n                padding: 12px;\n                background: #e3f2fd;\n                border-radius: 8px;\n                margin-bottom: 16px;\n                font-size: 14px;\n                color: #1976d2;\n            }\n\n            .version-sync-status.success {\n                background: #e8f5e9;\n                color: #388e3c;\n            }\n\n            .version-sync-status.error {\n                background: #ffebee;\n                color: #d32f2f;\n            }\n\n            .version-list {\n                display: flex;\n                flex-direction: column;\n                gap: 12px;\n            }\n\n            .version-item {\n                border: 1px solid #e0e0e0;\n                border-radius: 8px;\n                padding: 12px;\n                background: #ffffff;\n                transition: box-shadow 0.2s, border-color 0.2s;\n            }\n\n            .version-item:hover {\n                box-shadow: 0 2px 8px rgba(0,0,0,0.1);\n                border-color: #2196f3;\n            }\n\n            .version-item.current {\n                background: #e3f2fd;\n                border-color: #2196f3;\n            }\n\n            .version-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 8px;\n            }\n\n            .version-icon {\n                font-size: 18px;\n            }\n\n            .version-timestamp {\n                font-size: 14px;\n                font-weight: 600;\n                color: #333;\n            }\n\n            .version-message {\n                font-size: 13px;\n                color: #666;\n                margin-bottom: 8px;\n                line-height: 1.4;\n            }\n\n            .version-meta {\n                display: flex;\n                gap: 12px;\n                font-size: 12px;\n                color: #999;\n                margin-bottom: 8px;\n            }\n\n            .version-actions {\n                display: flex;\n                gap: 8px;\n            }\n\n            .version-btn {\n                flex: 1;\n                padding: 6px 12px;\n                border: 1px solid #e0e0e0;\n                border-radius: 4px;\n                background: #ffffff;\n                color: #333;\n                font-size: 13px;\n                cursor: pointer;\n                transition: all 0.2s;\n            }\n\n            .version-btn:hover {\n                background: #f5f5f5;\n                border-color: #2196f3;\n                color: #2196f3;\n            }\n\n            .version-btn.primary {\n                background: #2196f3;\n                color: #ffffff;\n                border-color: #2196f3;\n            }\n\n            .version-btn.primary:hover {\n                background: #1976d2;\n                border-color: #1976d2;\n            }\n\n            .version-btn.danger {\n                color: #d32f2f;\n            }\n\n            .version-btn.danger:hover {\n                background: #ffebee;\n                border-color: #d32f2f;\n            }\n\n            .empty-state {\n                text-align: center;\n                padding: 32px 16px;\n                color: #999;\n            }\n\n            .empty-state-icon {\n                font-size: 48px;\n                margin-bottom: 16px;\n            }\n\n            .empty-state-text {\n                font-size: 14px;\n                line-height: 1.6;\n            }\n        ",document.head.appendChild(t)}}},{key:"attachEventListeners",value:function(){var t=this;this.panel.querySelector(".panel-close-btn").addEventListener("click",function(){return t.close()})}},{key:"open",value:(o=N(z().m(function t(){return z().w(function(t){for(;;)switch(t.n){case 0:return this.isOpen=!0,this.panel.classList.remove("hidden"),t.n=1,this.loadVersions();case 1:return t.a(2)}},t,this)})),function(){return o.apply(this,arguments)})},{key:"close",value:function(){this.isOpen=!1,this.panel.classList.add("hidden")}},{key:"toggle",value:function(){this.isOpen?this.close():this.open()}},{key:"loadVersions",value:(i=N(z().m(function t(){var e,n,r,i,o;return z().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=document.getElementById("sync-status-icon"),n=document.getElementById("sync-status-text"),r=document.getElementById("version-list"),t.p=1,e.textContent="",n.textContent="...",t.n=2,this.versionManager.getVersions();case 2:0===(i=t.v).length?this.renderEmptyState(r):this.renderVersionList(r,i),e.textContent="",n.textContent="",document.querySelector(".version-sync-status").className="version-sync-status success",t.n=4;break;case 3:t.p=3,o=t.v,console.error(":",o),e.textContent="",n.textContent=": ",document.querySelector(".version-sync-status").className="version-sync-status error",this.renderEmptyState(r,!0);case 4:return t.a(2)}},t,this,[[1,3]])})),function(){return i.apply(this,arguments)})},{key:"renderEmptyState",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.innerHTML=e?'\n                <div class="empty-state">\n                    <div class="empty-state-icon"></div>\n                    <div class="empty-state-text">\n                        <br>\n                        Google Drive\n                    </div>\n                </div>\n            ':'\n                <div class="empty-state">\n                    <div class="empty-state-icon"></div>\n                    <div class="empty-state-text">\n                        <br>\n                        \n                    </div>\n                </div>\n            '}},{key:"renderVersionList",value:function(t,e){var n=this;t.innerHTML="",e.forEach(function(e,r){var i=n.createVersionItem(e,0===r);t.appendChild(i)})}},{key:"createVersionItem",value:function(t,e){var n=this,r=document.createElement("div");r.className="version-item ".concat(e?"current":""),r.innerHTML='\n            <div class="version-header">\n                <span class="version-icon">'.concat(e?"":"",'</span>\n                <span class="version-timestamp">').concat(this.versionManager.formatTimestamp(t.timestamp),"</span>\n            </div>\n            ").concat(t.message?'<div class="version-message">'.concat(this.escapeHtml(t.message),"</div>"):"",'\n            <div class="version-meta">\n                <span>: ').concat(this.versionManager.formatFileSize(t.file_size),"</span>\n                <span>: ").concat(t.created_by,'</span>\n            </div>\n            <div class="version-actions">\n                <button class="version-btn" data-action="view" data-version-id="').concat(t.version_id,'">\n                    \n                </button>\n                ').concat(e?"":'\n                    <button class="version-btn primary" data-action="restore" data-version-id="'.concat(t.version_id,'">\n                        \n                    </button>\n                '),"\n            </div>\n        ");var i=r.querySelector('[data-action="view"]'),o=r.querySelector('[data-action="restore"]');return i&&i.addEventListener("click",function(){return n.handleView(t.version_id)}),o&&o.addEventListener("click",function(){return n.handleRestore(t.version_id)}),r}},{key:"handleView",value:(r=N(z().m(function t(e){var n,r;return z().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.versionManager.getVersionContent(e);case 1:n=t.v,console.log(":",n),alert(" ".concat(e," :\n\n").concat(n.substring(0,200),"...")),t.n=3;break;case 2:t.p=2,r=t.v,alert(": ".concat(r.message));case 3:return t.a(2)}},t,this,[[0,2]])})),function(t){return r.apply(this,arguments)})},{key:"handleRestore",value:(n=N(z().m(function t(e){var n,r;return z().w(function(t){for(;;)switch(t.p=t.n){case 0:if(confirm("\n")){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,this.versionManager.restoreVersion(e);case 2:if(!this.onRestoreCallback){t.n=4;break}return t.n=3,this.versionManager.getVersionContent(e);case 3:n=t.v,this.onRestoreCallback(n);case 4:return t.n=5,this.loadVersions();case 5:alert(""),t.n=7;break;case 6:t.p=6,r=t.v,alert(": ".concat(r.message));case 7:return t.a(2)}},t,this,[[1,6]])})),function(t){return n.apply(this,arguments)})},{key:"onRestore",value:function(t){this.onRestoreCallback=t}},{key:"escapeHtml",value:function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}}],e&&q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o}();function U(t){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},U(t)}function H(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return G(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(G(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,G(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,G(u,"constructor",c),G(c,"constructor",l),l.displayName="GeneratorFunction",G(c,i,"GeneratorFunction"),G(u),G(u,i,"Generator"),G(u,r,function(){return this}),G(u,"toString",function(){return"[object Generator]"}),(H=function(){return{w:o,m:d}})()}function G(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}G=function(t,e,n,r){function o(e,n){G(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},G(t,e,n,r)}function Y(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function V(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Y(o,r,i,a,s,"next",t)}function s(t){Y(o,r,i,a,s,"throw",t)}a(void 0)})}}function Q(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X(r.key),r)}}function X(t){var e=function(t){if("object"!=U(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=U(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==U(e)?e:e+""}var Z=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e,this.versionManager=F(),this.versionPanel=null,this.autoSaveInterval=null,this.autoSaveEnabled=!1,this.autoSaveIntervalSeconds=300,this.lastSavedContent=""},e=[{key:"init",value:(o=V(H().m(function t(){var e,n,r=this;return H().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.versionManager.checkAvailability();case 1:if(t.v){t.n=2;break}return console.log(""),t.a(2);case 2:e=document.body,this.versionPanel=new K(e),this.versionPanel.initialize(),this.versionPanel.onRestore(function(t){r.restoreContent(t)}),this.addVersionButton(),this.setupAutoSave(),console.log(""),t.n=4;break;case 3:t.p=3,n=t.v,console.error(":",n);case 4:return t.a(2)}},t,this,[[0,3]])})),function(){return o.apply(this,arguments)})},{key:"addVersionButton",value:function(){var t=this,e=document.querySelector(".toolbar");if(e){var n=document.createElement("button");n.className="toolbar-btn",n.title="",n.innerHTML="",n.addEventListener("click",function(){t.toggleVersionPanel()}),(e.querySelector(".toolbar-right")||e).appendChild(n)}}},{key:"toggleVersionPanel",value:function(){this.versionPanel&&this.versionPanel.toggle()}},{key:"saveVersion",value:(i=V(H().m(function t(){var e,n,r,i,o=arguments;return H().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"",t.p=1,n=this.editor.getMarkdownContent(),this.editor.currentFileName&&this.versionManager.setFilePath(this.editor.currentFileName),t.n=2,this.versionManager.saveVersion(n,e);case 2:if(r=t.v,!this.versionPanel||!this.versionPanel.isOpen){t.n=3;break}return t.n=3,this.versionPanel.loadVersions();case 3:return this.lastSavedContent=n,console.log(":",r.version_id),t.a(2,r);case 4:throw t.p=4,i=t.v,console.error(":",i),i;case 5:return t.a(2)}},t,this,[[1,4]])})),function(){return i.apply(this,arguments)})},{key:"restoreContent",value:function(t){var e=document.getElementById("wysiwyg-content");if(e){var n=this.editor.markdownToHtml(t);e.innerHTML=n,this.editor.updateWordCount(),console.log("")}}},{key:"setupAutoSave",value:function(){var t=this;chrome.storage.local.get(["autoSaveEnabled","autoSaveInterval"],function(e){t.autoSaveEnabled=!1!==e.autoSaveEnabled,t.autoSaveIntervalSeconds=e.autoSaveInterval||300,t.autoSaveEnabled&&t.startAutoSave()})}},{key:"startAutoSave",value:function(){var t=this;this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.autoSaveInterval=setInterval(function(){t.performAutoSave()},1e3*this.autoSaveIntervalSeconds),console.log("".concat(this.autoSaveIntervalSeconds,""))}},{key:"stopAutoSave",value:function(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null,console.log(""))}},{key:"performAutoSave",value:(r=V(H().m(function t(){var e,n;return H().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,(e=this.editor.getMarkdownContent())!==this.lastSavedContent){t.n=1;break}return console.log(""),t.a(2);case 1:if(e&&0!==e.trim().length){t.n=2;break}return console.log(""),t.a(2);case 2:return t.n=3,this.saveVersion("");case 3:console.log(""),this.showSaveNotification(""),t.n=5;break;case 4:t.p=4,n=t.v,console.error(":",n);case 5:return t.a(2)}},t,this,[[0,4]])})),function(){return r.apply(this,arguments)})},{key:"showSaveNotification",value:function(t){var e=document.querySelector(".save-notification");e&&e.remove();var n=document.createElement("div");n.className="save-notification",n.textContent=t,n.style.cssText="\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            background: #4caf50;\n            color: white;\n            padding: 12px 20px;\n            border-radius: 4px;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n            z-index: 10000;\n            animation: slideIn 0.3s ease;\n        ",document.body.appendChild(n),setTimeout(function(){n.style.animation="slideOut 0.3s ease",setTimeout(function(){return n.remove()},300)},3e3)}},{key:"showSaveDialog",value:(n=V(H().m(function t(){var e=this;return H().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t){var n=document.createElement("div");n.className="version-save-dialog",n.innerHTML='\n                <div class="dialog-overlay"></div>\n                <div class="dialog-content">\n                    <h3></h3>\n                    <p></p>\n                    <textarea\n                        id="version-message"\n                        placeholder=": "\n                        rows="3"\n                        style="width: 100%; padding: 8px; margin: 12px 0; border: 1px solid #ddd; border-radius: 4px;"\n                    ></textarea>\n                    <div class="dialog-buttons">\n                        <button id="save-cancel-btn" class="btn btn-secondary"></button>\n                        <button id="save-confirm-btn" class="btn btn-primary"></button>\n                    </div>\n                </div>\n            ';var r=document.createElement("style");r.textContent="\n                .version-save-dialog .dialog-overlay {\n                    position: fixed;\n                    top: 0;\n                    left: 0;\n                    right: 0;\n                    bottom: 0;\n                    background: rgba(0,0,0,0.5);\n                    z-index: 9998;\n                }\n                .version-save-dialog .dialog-content {\n                    position: fixed;\n                    top: 50%;\n                    left: 50%;\n                    transform: translate(-50%, -50%);\n                    background: white;\n                    padding: 24px;\n                    border-radius: 8px;\n                    box-shadow: 0 4px 16px rgba(0,0,0,0.2);\n                    z-index: 9999;\n                    min-width: 400px;\n                }\n                .version-save-dialog h3 {\n                    margin: 0 0 16px 0;\n                    font-size: 20px;\n                    color: #333;\n                }\n                .version-save-dialog p {\n                    margin: 0 0 8px 0;\n                    color: #666;\n                }\n                .version-save-dialog .dialog-buttons {\n                    display: flex;\n                    justify-content: flex-end;\n                    gap: 8px;\n                    margin-top: 16px;\n                }\n                .version-save-dialog .btn {\n                    padding: 8px 16px;\n                    border: none;\n                    border-radius: 4px;\n                    cursor: pointer;\n                    font-size: 14px;\n                }\n                .version-save-dialog .btn-primary {\n                    background: #2196f3;\n                    color: white;\n                }\n                .version-save-dialog .btn-secondary {\n                    background: #e0e0e0;\n                    color: #333;\n                }\n                @keyframes slideIn {\n                    from { transform: translateY(20px); opacity: 0; }\n                    to { transform: translateY(0); opacity: 1; }\n                }\n                @keyframes slideOut {\n                    from { transform: translateY(0); opacity: 1; }\n                    to { transform: translateY(20px); opacity: 0; }\n                }\n            ",document.head.appendChild(r),document.body.appendChild(n);var i=document.getElementById("version-message"),o=document.getElementById("save-cancel-btn"),a=document.getElementById("save-confirm-btn");i.focus(),o.addEventListener("click",function(){n.remove(),r.remove(),t(null)}),a.addEventListener("click",V(H().m(function o(){var a,s,l;return H().w(function(o){for(;;)switch(o.p=o.n){case 0:return a=i.value.trim(),n.remove(),r.remove(),o.p=1,o.n=2,e.saveVersion(a);case 2:s=o.v,e.showSaveNotification(""),t(s),o.n=4;break;case 3:o.p=3,l=o.v,alert(": ".concat(l.message)),t(null);case 4:return o.a(2)}},o,null,[[1,3]])}))),n.querySelector(".dialog-overlay").addEventListener("click",function(){n.remove(),r.remove(),t(null)})}))},t)})),function(){return n.apply(this,arguments)})},{key:"cleanup",value:function(){this.stopAutoSave()}}],e&&Q(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o}();function J(t){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},J(t)}function tt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return et(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(et(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,et(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,et(u,"constructor",c),et(c,"constructor",l),l.displayName="GeneratorFunction",et(c,i,"GeneratorFunction"),et(u),et(u,i,"Generator"),et(u,r,function(){return this}),et(u,"toString",function(){return"[object Generator]"}),(tt=function(){return{w:o,m:d}})()}function et(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}et=function(t,e,n,r){function o(e,n){et(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},et(t,e,n,r)}function nt(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function rt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){nt(o,r,i,a,s,"next",t)}function s(t){nt(o,r,i,a,s,"throw",t)}a(void 0)})}}function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ot(r.key),r)}}function ot(t){var e=function(t){if("object"!=J(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=J(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==J(e)?e:e+""}var at=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxHistoryItems=50,this.storageKey="sightedit_history"},e=[{key:"saveHistory",value:(h=rt(tt().m(function t(e){var n,r,i,o,a=arguments;return tt().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:"Untitled",t.p=1,r={id:this.generateId(),fileName:n,content:e,timestamp:(new Date).toISOString(),contentLength:e.length,preview:this.generatePreview(e)},t.n=2,this.getHistory();case 2:return(i=t.v).unshift(r),i.length>this.maxHistoryItems&&i.splice(this.maxHistoryItems),t.n=3,this.saveToStorage(i);case 3:return console.log(":",r.id),t.a(2,r);case 4:throw t.p=4,o=t.v,console.error(":",o),o;case 5:return t.a(2)}},t,this,[[1,4]])})),function(t){return h.apply(this,arguments)})},{key:"getHistory",value:(c=rt(tt().m(function t(){var e,n=this;return tt().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.a(2,new Promise(function(t){chrome.storage.local.get([n.storageKey],function(e){var r=e[n.storageKey]||[];t(r)})}));case 1:return t.p=1,e=t.v,console.error(":",e),t.a(2,[])}},t,null,[[0,1]])})),function(){return c.apply(this,arguments)})},{key:"getHistoryItem",value:(l=rt(tt().m(function t(e){var n,r;return tt().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.getHistory();case 1:return n=t.v,t.a(2,n.find(function(t){return t.id===e}));case 2:return t.p=2,r=t.v,console.error(":",r),t.a(2,null)}},t,this,[[0,2]])})),function(t){return l.apply(this,arguments)})},{key:"deleteHistoryItem",value:(s=rt(tt().m(function t(e){var n,r,i;return tt().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.getHistory();case 1:return n=t.v,r=n.filter(function(t){return t.id!==e}),t.n=2,this.saveToStorage(r);case 2:return console.log(":",e),t.a(2,!0);case 3:return t.p=3,i=t.v,console.error(":",i),t.a(2,!1)}},t,this,[[0,3]])})),function(t){return s.apply(this,arguments)})},{key:"clearHistory",value:(a=rt(tt().m(function t(){var e;return tt().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.saveToStorage([]);case 1:return console.log(""),t.a(2,!0);case 2:return t.p=2,e=t.v,console.error(":",e),t.a(2,!1)}},t,this,[[0,2]])})),function(){return a.apply(this,arguments)})},{key:"saveToStorage",value:(o=rt(tt().m(function t(e){var n=this;return tt().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t,r){try{var i={};i[n.storageKey]=e,chrome.storage.local.set(i,function(){chrome.runtime.lastError?r(new Error(chrome.runtime.lastError.message)):t()})}catch(t){r(t)}}))},t)})),function(t){return o.apply(this,arguments)})},{key:"generateId",value:function(){return"history_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9))}},{key:"generatePreview",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(!t)return"";var n=t.replace(/\n/g," ").trim();return n.length>e?n.substring(0,e)+"...":n}},{key:"formatTimestamp",value:function(t){var e=new Date(t),n=new Date-e;if(n<6e4)return"";if(n<36e5){var r=Math.floor(n/6e4);return"".concat(r,"")}if(n<864e5){var i=Math.floor(n/36e5);return"".concat(i,"")}var o=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),s=String(e.getDate()).padStart(2,"0"),l=String(e.getHours()).padStart(2,"0"),c=String(e.getMinutes()).padStart(2,"0");return"".concat(o,"/").concat(a,"/").concat(s," ").concat(l,":").concat(c)}},{key:"formatFileSize",value:function(t){if(0===t)return"0 B";var e=Math.floor(Math.log(t)/Math.log(1024));return Math.round(t/Math.pow(1024,e)*100)/100+" "+["B","KB","MB"][e]}},{key:"getStorageInfo",value:(i=rt(tt().m(function t(){var e=this;return tt().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t){chrome.storage.local.getBytesInUse([e.storageKey],function(n){t({bytesInUse:n,formatted:e.formatFileSize(n)})})}))},t)})),function(){return i.apply(this,arguments)})},{key:"setAutoSaveEnabled",value:(r=rt(tt().m(function t(e){return tt().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t){chrome.storage.local.set({autoSaveEnabled:e},function(){t()})}))},t)})),function(t){return r.apply(this,arguments)})},{key:"getAutoSaveSettings",value:(n=rt(tt().m(function t(){return tt().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t){chrome.storage.local.get(["autoSaveEnabled","autoSaveInterval"],function(e){t({enabled:!1!==e.autoSaveEnabled,interval:e.autoSaveInterval||300})})}))},t)})),function(){return n.apply(this,arguments)})}],e&&it(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,s,l,c,h}(),st=null;function lt(){return st||(st=new at),st}function ct(t){return ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ct(t)}function ht(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return ut(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(ut(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,ut(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,ut(u,"constructor",c),ut(c,"constructor",l),l.displayName="GeneratorFunction",ut(c,i,"GeneratorFunction"),ut(u),ut(u,i,"Generator"),ut(u,r,function(){return this}),ut(u,"toString",function(){return"[object Generator]"}),(ht=function(){return{w:o,m:d}})()}function ut(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}ut=function(t,e,n,r){function o(e,n){ut(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},ut(t,e,n,r)}function dt(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function pt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){dt(o,r,i,a,s,"next",t)}function s(t){dt(o,r,i,a,s,"throw",t)}a(void 0)})}}function ft(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gt(r.key),r)}}function gt(t){var e=function(t){if("object"!=ct(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ct(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ct(e)?e:e+""}var mt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.container=e,this.historyManager=lt(),this.panel=null,this.isOpen=!1,this.onRestoreCallback=null},e=[{key:"initialize",value:function(){this.createPanel(),this.attachEventListeners()}},{key:"createPanel",value:function(){this.panel=document.createElement("div"),this.panel.className="local-history-panel",this.panel.innerHTML='\n            <div class="history-panel-header">\n                <h3> </h3>\n                <div class="history-panel-actions">\n                    <button class="btn-icon" id="refresh-history" title="">\n                        \n                    </button>\n                    <button class="btn-icon" id="clear-history" title="">\n                        \n                    </button>\n                    <button class="btn-icon" id="close-history-panel" title="">\n                        \n                    </button>\n                </div>\n            </div>\n            <div class="history-panel-content">\n                <div class="history-info">\n                    <p class="storage-info">...</p>\n                </div>\n                <div class="history-list" id="history-list">\n                    <div class="loading">...</div>\n                </div>\n            </div>\n        ',this.addStyles(),this.container.appendChild(this.panel),this.panel.style.display="none"}},{key:"addStyles",value:function(){if(!document.getElementById("local-history-panel-styles")){var t=document.createElement("style");t.id="local-history-panel-styles",t.textContent="\n            .local-history-panel {\n                position: fixed;\n                right: 0;\n                top: 0;\n                bottom: 0;\n                width: 350px;\n                background: #ffffff;\n                border-left: 1px solid #e0e0e0;\n                box-shadow: -2px 0 10px rgba(0, 0, 0, 0.1);\n                display: flex;\n                flex-direction: column;\n                z-index: 1000;\n            }\n\n            .history-panel-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 16px;\n                border-bottom: 1px solid #e0e0e0;\n                background: #f8f9fa;\n            }\n\n            .history-panel-header h3 {\n                margin: 0;\n                font-size: 16px;\n                font-weight: 600;\n                color: #333;\n            }\n\n            .history-panel-actions {\n                display: flex;\n                gap: 8px;\n            }\n\n            .btn-icon {\n                background: none;\n                border: none;\n                font-size: 18px;\n                cursor: pointer;\n                padding: 4px 8px;\n                border-radius: 4px;\n                transition: background 0.2s;\n            }\n\n            .btn-icon:hover {\n                background: #e0e0e0;\n            }\n\n            .history-panel-content {\n                flex: 1;\n                overflow-y: auto;\n                padding: 16px;\n            }\n\n            .history-info {\n                margin-bottom: 16px;\n                padding: 12px;\n                background: #f0f4ff;\n                border-radius: 6px;\n                font-size: 13px;\n                color: #555;\n            }\n\n            .storage-info {\n                margin: 0;\n            }\n\n            .history-list {\n                display: flex;\n                flex-direction: column;\n                gap: 12px;\n            }\n\n            .loading {\n                text-align: center;\n                padding: 20px;\n                color: #999;\n            }\n\n            .history-item {\n                background: #f8f9fa;\n                border: 1px solid #e0e0e0;\n                border-radius: 8px;\n                padding: 12px;\n                cursor: pointer;\n                transition: all 0.2s;\n            }\n\n            .history-item:hover {\n                background: #e9ecef;\n                border-color: #667eea;\n                transform: translateX(-2px);\n            }\n\n            .history-item-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                margin-bottom: 8px;\n            }\n\n            .history-item-title {\n                font-weight: 600;\n                font-size: 14px;\n                color: #333;\n                display: flex;\n                align-items: center;\n                gap: 6px;\n            }\n\n            .history-item-actions {\n                display: flex;\n                gap: 4px;\n            }\n\n            .history-item-actions button {\n                background: none;\n                border: none;\n                font-size: 16px;\n                cursor: pointer;\n                padding: 2px 6px;\n                border-radius: 4px;\n                transition: background 0.2s;\n            }\n\n            .history-item-actions button:hover {\n                background: #dee2e6;\n            }\n\n            .history-item-meta {\n                display: flex;\n                justify-content: space-between;\n                font-size: 12px;\n                color: #666;\n                margin-bottom: 8px;\n            }\n\n            .history-item-preview {\n                font-size: 13px;\n                color: #555;\n                line-height: 1.4;\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n            }\n\n            .empty-history {\n                text-align: center;\n                padding: 40px 20px;\n                color: #999;\n            }\n\n            .empty-history-icon {\n                font-size: 48px;\n                margin-bottom: 16px;\n            }\n\n            .empty-history p {\n                margin: 0;\n                font-size: 14px;\n            }\n        ",document.head.appendChild(t)}}},{key:"attachEventListeners",value:function(){var t=this;this.panel.querySelector("#close-history-panel").addEventListener("click",function(){t.close()}),this.panel.querySelector("#refresh-history").addEventListener("click",function(){t.loadHistory()}),this.panel.querySelector("#clear-history").addEventListener("click",pt(ht().m(function e(){return ht().w(function(e){for(;;)switch(e.n){case 0:if(!confirm("\n")){e.n=2;break}return e.n=1,t.historyManager.clearHistory();case 1:return e.n=2,t.loadHistory();case 2:return e.a(2)}},e)})))}},{key:"loadHistory",value:(o=pt(ht().m(function t(){var e,n,r,i,o=this;return ht().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=this.panel.querySelector("#history-list"),t.p=1,t.n=2,this.historyManager.getStorageInfo();case 2:return n=t.v,t.n=3,this.historyManager.getHistory();case 3:if(r=t.v,this.panel.querySelector(".storage-info").textContent=": ".concat(r.length," / : ").concat(n.formatted),0!==r.length){t.n=4;break}return e.innerHTML='\n                    <div class="empty-history">\n                        <div class="empty-history-icon"></div>\n                        <p></p>\n                        <p style="font-size: 12px; margin-top: 8px; color: #999;">\n                            \n                        </p>\n                    </div>\n                ',t.a(2);case 4:e.innerHTML=r.map(function(t){return o.createHistoryItemHTML(t)}).join(""),r.forEach(function(t){var e=o.panel.querySelector("#restore-".concat(t.id));e&&e.addEventListener("click",function(e){e.stopPropagation(),o.restoreHistoryItem(t)});var n=o.panel.querySelector("#delete-".concat(t.id));n&&n.addEventListener("click",function(){var e=pt(ht().m(function e(n){return ht().w(function(e){for(;;)switch(e.n){case 0:if(n.stopPropagation(),!confirm("")){e.n=2;break}return e.n=1,o.historyManager.deleteHistoryItem(t.id);case 1:return e.n=2,o.loadHistory();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}());var r=o.panel.querySelector("#item-".concat(t.id));r&&r.addEventListener("click",function(){o.restoreHistoryItem(t)})}),t.n=6;break;case 5:t.p=5,i=t.v,console.error(":",i),e.innerHTML='\n                <div class="empty-history">\n                    <p></p>\n                </div>\n            ';case 6:return t.a(2)}},t,this,[[1,5]])})),function(){return o.apply(this,arguments)})},{key:"createHistoryItemHTML",value:function(t){var e=this.historyManager.formatTimestamp(t.timestamp),n=this.historyManager.formatFileSize(t.contentLength);return'\n            <div class="history-item" id="item-'.concat(t.id,'">\n                <div class="history-item-header">\n                    <div class="history-item-title">\n                         ').concat(this.escapeHtml(t.fileName),'\n                    </div>\n                    <div class="history-item-actions">\n                        <button id="restore-').concat(t.id,'" title=""></button>\n                        <button id="delete-').concat(t.id,'" title=""></button>\n                    </div>\n                </div>\n                <div class="history-item-meta">\n                    <span>').concat(e,"</span>\n                    <span>").concat(n,'</span>\n                </div>\n                <div class="history-item-preview">\n                    ').concat(this.escapeHtml(t.preview),"\n                </div>\n            </div>\n        ")}},{key:"restoreHistoryItem",value:(i=pt(ht().m(function t(e){return ht().w(function(t){for(;;)switch(t.n){case 0:this.onRestoreCallback&&(this.onRestoreCallback(e.content),this.showNotification(""));case 1:return t.a(2)}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"onRestore",value:function(t){this.onRestoreCallback=t}},{key:"showNotification",value:function(t){var e=document.createElement("div");e.textContent=t,e.style.cssText="\n            position: fixed;\n            bottom: 20px;\n            right: 380px;\n            background: #4caf50;\n            color: white;\n            padding: 12px 20px;\n            border-radius: 4px;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n            z-index: 10000;\n            animation: slideIn 0.3s ease;\n        ",document.body.appendChild(e),setTimeout(function(){e.style.animation="slideOut 0.3s ease",setTimeout(function(){return e.remove()},300)},3e3)}},{key:"escapeHtml",value:function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}},{key:"open",value:(r=pt(ht().m(function t(){return ht().w(function(t){for(;;)switch(t.n){case 0:return this.panel.style.display="flex",this.isOpen=!0,t.n=1,this.loadHistory();case 1:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"close",value:function(){this.panel.style.display="none",this.isOpen=!1}},{key:"toggle",value:(n=pt(ht().m(function t(){return ht().w(function(t){for(;;)switch(t.n){case 0:if(!this.isOpen){t.n=1;break}this.close(),t.n=2;break;case 1:return t.n=2,this.open();case 2:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"cleanup",value:function(){this.panel&&this.panel.remove()}}],e&&ft(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o}();function At(t){return At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},At(t)}function yt(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return bt(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(bt(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,bt(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,bt(u,"constructor",c),bt(c,"constructor",l),l.displayName="GeneratorFunction",bt(c,i,"GeneratorFunction"),bt(u),bt(u,i,"Generator"),bt(u,r,function(){return this}),bt(u,"toString",function(){return"[object Generator]"}),(yt=function(){return{w:o,m:d}})()}function bt(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}bt=function(t,e,n,r){function o(e,n){bt(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},bt(t,e,n,r)}function xt(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function vt(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){xt(o,r,i,a,s,"next",t)}function s(t){xt(o,r,i,a,s,"throw",t)}a(void 0)})}}function Ct(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,kt(r.key),r)}}function kt(t){var e=function(t){if("object"!=At(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=At(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==At(e)?e:e+""}var wt=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.editor=e,this.historyManager=lt(),this.historyPanel=null,this.autoSaveInterval=null,this.autoSaveEnabled=!1,this.autoSaveIntervalSeconds=300,this.lastSavedContent=""},e=[{key:"init",value:(o=vt(yt().m(function t(){var e,n,r=this;return yt().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,e=document.body,this.historyPanel=new mt(e),this.historyPanel.initialize(),this.historyPanel.onRestore(function(t){r.restoreContent(t)}),this.addHistoryButton(),t.n=1,this.setupAutoSave();case 1:console.log(""),t.n=3;break;case 2:t.p=2,n=t.v,console.error(":",n);case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return o.apply(this,arguments)})},{key:"addHistoryButton",value:function(){var t=this,e=document.querySelector(".toolbar");if(e){var n=document.createElement("button");n.className="toolbar-btn",n.title="",n.innerHTML="",n.addEventListener("click",function(){t.toggleHistoryPanel()}),(e.querySelector(".toolbar-right")||e).appendChild(n)}}},{key:"toggleHistoryPanel",value:function(){this.historyPanel&&this.historyPanel.toggle()}},{key:"saveHistory",value:(i=vt(yt().m(function t(){var e,n,r,i,o,a=arguments;return yt().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=a.length>0&&void 0!==a[0]&&a[0],t.p=1,(n=this.getEditorContent())!==this.lastSavedContent){t.n=2;break}return console.log(""),t.a(2,null);case 2:if(n&&0!==n.trim().length){t.n=3;break}return console.log(""),t.a(2,null);case 3:return r=this.getFileName(),t.n=4,this.historyManager.saveHistory(n,r);case 4:return i=t.v,this.lastSavedContent=n,e||this.showNotification(""),console.log(":",i.id),t.a(2,i);case 5:throw t.p=5,o=t.v,console.error(":",o),o;case 6:return t.a(2)}},t,this,[[1,5]])})),function(){return i.apply(this,arguments)})},{key:"getEditorContent",value:function(){if(this.editor&&"function"==typeof this.editor.getMarkdownContent)return this.editor.getMarkdownContent();var t=document.getElementById("wysiwyg-content");return t&&(t.textContent||t.innerText)||""}},{key:"getFileName",value:function(){return this.editor&&this.editor.currentFileName?this.editor.currentFileName:"Untitled"}},{key:"restoreContent",value:function(t){try{var e=document.getElementById("wysiwyg-content");if(e&&this.editor){if("function"==typeof this.editor.markdownToHtml){var n=this.editor.markdownToHtml(t);e.innerHTML=n}else e.textContent=t;"function"==typeof this.editor.updateWordCount&&this.editor.updateWordCount(),console.log("")}}catch(t){console.error(":",t),alert("")}}},{key:"setupAutoSave",value:(r=vt(yt().m(function t(){var e,n;return yt().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.historyManager.getAutoSaveSettings();case 1:e=t.v,this.autoSaveEnabled=e.enabled,this.autoSaveIntervalSeconds=e.interval,this.autoSaveEnabled&&this.startAutoSave(),t.n=3;break;case 2:t.p=2,n=t.v,console.error(":",n);case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"startAutoSave",value:function(){var t=this;this.autoSaveInterval&&clearInterval(this.autoSaveInterval),this.autoSaveInterval=setInterval(function(){t.performAutoSave()},1e3*this.autoSaveIntervalSeconds),console.log("".concat(this.autoSaveIntervalSeconds,""))}},{key:"stopAutoSave",value:function(){this.autoSaveInterval&&(clearInterval(this.autoSaveInterval),this.autoSaveInterval=null,console.log(""))}},{key:"performAutoSave",value:(n=vt(yt().m(function t(){var e;return yt().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.saveHistory(!0);case 1:t.v&&(console.log(""),this.showNotification("",2e3)),t.n=3;break;case 2:t.p=2,e=t.v,console.error(":",e);case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return n.apply(this,arguments)})},{key:"showNotification",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3,n=document.querySelector(".save-notification");n&&n.remove();var r=document.createElement("div");r.className="save-notification",r.textContent=t,r.style.cssText="\n            position: fixed;\n            bottom: 20px;\n            right: 20px;\n            background: #4caf50;\n            color: white;\n            padding: 12px 20px;\n            border-radius: 4px;\n            box-shadow: 0 2px 8px rgba(0,0,0,0.2);\n            z-index: 10000;\n            animation: slideIn 0.3s ease;\n        ",document.body.appendChild(r),setTimeout(function(){r.style.animation="slideOut 0.3s ease",setTimeout(function(){return r.remove()},300)},e)}},{key:"cleanup",value:function(){this.stopAutoSave(),this.historyPanel&&this.historyPanel.cleanup()}}],e&&Ct(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o}(),Bt=a(60023),It=a(18431);function St(t){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},St(t)}function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach(function(e){Tt(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Tt(t,e,n){return(e=qt(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mt(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(St(t)+" is not iterable")}function Lt(t){return function(t){if(Array.isArray(t))return Rt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||$t(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Dt(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(Dt(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Dt(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,Dt(u,"constructor",c),Dt(c,"constructor",l),l.displayName="GeneratorFunction",Dt(c,i,"GeneratorFunction"),Dt(u),Dt(u,i,"Generator"),Dt(u,r,function(){return this}),Dt(u,"toString",function(){return"[object Generator]"}),(Ot=function(){return{w:o,m:d}})()}function Dt(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Dt=function(t,e,n,r){function o(e,n){Dt(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},Dt(t,e,n,r)}function Pt(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ft(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Pt(o,r,i,a,s,"next",t)}function s(t){Pt(o,r,i,a,s,"throw",t)}a(void 0)})}}function jt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||$t(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=$t(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function $t(t,e){if(t){if("string"==typeof t)return Rt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(t,e):void 0}}function Rt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qt(r.key),r)}}function qt(t){var e=function(t){if("object"!=St(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=St(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==St(e)?e:e+""}var Wt=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config={virtualScroll:{enabled:!0,itemHeight:100,bufferSize:5,viewportHeight:600},streaming:{bufferSize:100,flushInterval:16,minFlushSize:10},memory:{maxMessagesInMemory:100,archiveThreshold:200,autoArchive:!0}},this.streamingBuffers=new Map,this.virtualScrollState=null},e=[{key:"initVirtualScroll",value:function(t,e,n){var r=this,i={container:t,items:e,renderItem:n,scrollTop:0,visibleRange:{start:0,end:0},renderedItems:new Map,itemHeights:new Map,totalHeight:0};return this.virtualScrollState=i,t.addEventListener("scroll",function(){r.updateVirtualScroll(i)}),this.updateVirtualScroll(i),i}},{key:"updateVirtualScroll",value:function(t){if(this.config.virtualScroll.enabled&&0!==t.items.length){var e=t.container,n=t.items,r=this.config.virtualScroll,i=r.itemHeight,o=r.bufferSize,a=e.scrollTop,s=e.clientHeight,l=Math.max(0,Math.floor(a/i)-o),c=Math.min(n.length,Math.ceil((a+s)/i)+o);t.visibleRange={start:l,end:c};var h,u=zt(t.renderedItems.entries());try{for(u.s();!(h=u.n()).done;){var d=jt(h.value,2),p=d[0],f=d[1];(p<l||p>=c)&&(f.remove(),t.renderedItems.delete(p))}}catch(t){u.e(t)}finally{u.f()}for(var g=l;g<c;g++)if(!t.renderedItems.has(g)){var m=n[g],A=t.renderItem(m,g);A.style.position="absolute",A.style.top="".concat(g*i,"px"),A.style.width="100%",e.appendChild(A),t.renderedItems.set(g,A);var y=A.offsetHeight;y>0&&t.itemHeights.set(g,y)}t.totalHeight=n.length*i,e.style.height="".concat(t.totalHeight,"px")}}},{key:"addItemToVirtualScroll",value:function(t,e){t&&(t.items.push(e),this.updateVirtualScroll(t))}},{key:"initStreamingBuffer",value:function(t){var e={id:t,content:"",lastFlushTime:Date.now(),flushTimer:null};return this.streamingBuffers.set(t,e),e}},{key:"addToStreamingBuffer",value:function(t,e,n){var r=this,i=this.streamingBuffers.get(t);i||(i=this.initStreamingBuffer(t)),i.content+=e,i.content.length>=this.config.streaming.bufferSize||Date.now()-i.lastFlushTime>=this.config.streaming.flushInterval?this.flushStreamingBuffer(t,n):(i.flushTimer&&clearTimeout(i.flushTimer),i.flushTimer=setTimeout(function(){r.flushStreamingBuffer(t,n)},this.config.streaming.flushInterval))}},{key:"flushStreamingBuffer",value:function(t,e){var n=this.streamingBuffers.get(t);n&&0!==n.content.length&&(e&&e(n.content),n.content="",n.lastFlushTime=Date.now(),n.flushTimer&&(clearTimeout(n.flushTimer),n.flushTimer=null))}},{key:"completeStreamingBuffer",value:function(t,e){var n=this.streamingBuffers.get(t);n&&(n.content.length>0&&e&&e(n.content),n.flushTimer&&clearTimeout(n.flushTimer),this.streamingBuffers.delete(t))}},{key:"checkMemoryAndArchive",value:(i=Ft(Ot().m(function t(e,n){var r,i,o,a,s;return Ot().w(function(t){for(;;)switch(t.n){case 0:if(this.config.memory.autoArchive){t.n=1;break}return t.a(2,{archived:0,remaining:e.length});case 1:if(r=this.config.memory,i=r.maxMessagesInMemory,o=r.archiveThreshold,!(e.length<=o)){t.n=2;break}return t.a(2,{archived:0,remaining:e.length});case 2:if(a=e.length-i,s=e.slice(0,a),!n){t.n=3;break}return t.n=3,n(s);case 3:return t.a(2,{archived:a,remaining:e.length-a})}},t,this)})),function(t,e){return i.apply(this,arguments)})},{key:"estimateMemoryUsage",value:function(t){var e,n=0,r=zt(t);try{for(r.s();!(e=r.n()).done;){var i=e.value;n+=i.content?2*i.content.length:0,n+=100}}catch(t){r.e(t)}finally{r.f()}return n}},{key:"batchOperation",value:(r=Ft(Ot().m(function t(e,n){var r,i,o,a,s,l=arguments;return Ot().w(function(t){for(;;)switch(t.n){case 0:r=l.length>2&&void 0!==l[2]?l[2]:10,i=[],o=0;case 1:if(!(o<e.length)){t.n=4;break}return a=e.slice(o,o+r),t.n=2,Promise.all(a.map(function(t){return n(t)}));case 2:if(s=t.v,i.push.apply(i,Lt(s)),!(o+r<e.length)){t.n=3;break}return t.n=3,new Promise(function(t){return setTimeout(t,0)});case 3:o+=r,t.n=1;break;case 4:return t.a(2,i)}},t)})),function(t,e){return r.apply(this,arguments)})},{key:"batchWriteIndexedDB",value:(n=Ft(Ot().m(function t(e,n){var r,i,o,a=arguments;return Ot().w(function(t){for(;;)switch(t.n){case 0:r=a.length>2&&void 0!==a[2]?a[2]:50,i=Ot().m(function t(){var i;return Ot().w(function(t){for(;;)switch(t.n){case 0:return i=n.slice(o,o+r),t.n=1,new Promise(function(t,n){var r=i.map(function(t){return e.put(t)}),o=0;r.forEach(function(e){e.onsuccess=function(){++o===i.length&&t()},e.onerror=function(){return n(e.error)}})});case 1:return t.n=2,new Promise(function(t){return setTimeout(t,0)});case 2:return t.a(2)}},t)}),o=0;case 1:if(!(o<n.length)){t.n=3;break}return t.d(Mt(i()),2);case 2:o+=r,t.n=1;break;case 3:return t.a(2)}},t)})),function(t,e){return n.apply(this,arguments)})},{key:"updateConfig",value:function(t){this.config=Et(Et({},this.config),t)}},{key:"getStats",value:function(){var t;return{streamingBuffers:this.streamingBuffers.size,virtualScrollEnabled:this.config.virtualScroll.enabled,virtualScrollItems:(null===(t=this.virtualScrollState)||void 0===t?void 0:t.items.length)||0,memoryConfig:this.config.memory}}},{key:"cleanup",value:function(){var t,e=zt(this.streamingBuffers.entries());try{for(e.s();!(t=e.n()).done;){var n=jt(t.value,2),r=(n[0],n[1]);r.flushTimer&&clearTimeout(r.flushTimer)}}catch(t){e.e(t)}finally{e.f()}this.streamingBuffers.clear(),this.virtualScrollState&&(this.virtualScrollState.renderedItems.clear(),this.virtualScrollState=null)}}],e&&Nt(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i}(),Kt=null;function Ut(){return Kt||(Kt=new Wt),Kt}function Ht(t){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ht(t)}function Gt(t){if(null!=t){var e=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],n=0;if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}throw new TypeError(Ht(t)+" is not iterable")}function Yt(t){return function(t){if(Array.isArray(t))return Xt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Qt(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Qt(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Qt(t,e){if(t){if("string"==typeof t)return Xt(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Xt(t,e):void 0}}function Xt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Zt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Zt(Object(n),!0).forEach(function(e){te(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Zt(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function te(t,e,n){return(e=ae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function ee(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return ne(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(ne(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,ne(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,ne(u,"constructor",c),ne(c,"constructor",l),l.displayName="GeneratorFunction",ne(c,i,"GeneratorFunction"),ne(u),ne(u,i,"Generator"),ne(u,r,function(){return this}),ne(u,"toString",function(){return"[object Generator]"}),(ee=function(){return{w:o,m:d}})()}function ne(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}ne=function(t,e,n,r){function o(e,n){ne(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},ne(t,e,n,r)}function re(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function ie(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){re(o,r,i,a,s,"next",t)}function s(t){re(o,r,i,a,s,"throw",t)}a(void 0)})}}function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ae(r.key),r)}}function ae(t){var e=function(t){if("object"!=Ht(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ht(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ht(e)?e:e+""}var se=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dbName="SightEditChatDB",this.dbVersion=1,this.db=null,this.performanceOptimizer=Ut()},e=[{key:"initDB",value:(x=ie(ee().m(function t(){var e=this;return ee().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t,n){var r=indexedDB.open(e.dbName,e.dbVersion);r.onerror=function(){console.error("IndexedDB :",r.error),n(r.error)},r.onsuccess=function(){e.db=r.result,console.log("IndexedDB "),t(e.db)},r.onupgradeneeded=function(t){var e=t.target.result;if(!e.objectStoreNames.contains("sessions")){var n=e.createObjectStore("sessions",{keyPath:"id"});n.createIndex("createdAt","createdAt",{unique:!1}),n.createIndex("updatedAt","updatedAt",{unique:!1}),n.createIndex("title","title",{unique:!1}),n.createIndex("tags","tags",{unique:!1,multiEntry:!0}),n.createIndex("isFavorite","isFavorite",{unique:!1})}if(!e.objectStoreNames.contains("messages")){var r=e.createObjectStore("messages",{keyPath:"id"});r.createIndex("sessionId","sessionId",{unique:!1}),r.createIndex("timestamp","timestamp",{unique:!1})}if(!e.objectStoreNames.contains("promptTemplates")){var i=e.createObjectStore("promptTemplates",{keyPath:"id"});i.createIndex("category","category",{unique:!1}),i.createIndex("lastUsed","lastUsed",{unique:!1}),i.createIndex("usageCount","usageCount",{unique:!1}),i.createIndex("isFavorite","isFavorite",{unique:!1})}console.log("IndexedDB ")}}))},t)})),function(){return x.apply(this,arguments)})},{key:"ensureDB",value:(b=ie(ee().m(function t(){return ee().w(function(t){for(;;)switch(t.n){case 0:if(this.db){t.n=1;break}return t.n=1,this.initDB();case 1:return t.a(2)}},t,this)})),function(){return b.apply(this,arguments)})},{key:"saveSession",value:(y=ie(ee().m(function t(e){var n=this;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.ensureDB();case 1:return t.a(2,new Promise(function(t,r){var i=n.db.transaction(["sessions"],"readwrite").objectStore("sessions"),o={id:e.id||n.generateId(),title:e.title||"",createdAt:e.createdAt||Date.now(),updatedAt:Date.now(),messages:e.messages||[],model:e.model||"",provider:e.provider||"",tags:e.tags||[],isFavorite:e.isFavorite||!1,contextType:e.contextType||"none"},a=i.put(o);a.onsuccess=function(){t(o.id)},a.onerror=function(){console.error(":",a.error),r(a.error)}}))}},t,this)})),function(t){return y.apply(this,arguments)})},{key:"getSession",value:(A=ie(ee().m(function t(e){var n=this;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.ensureDB();case 1:return t.a(2,new Promise(function(t,r){var i=n.db.transaction(["sessions"],"readonly").objectStore("sessions").get(e);i.onsuccess=function(){t(i.result||null)},i.onerror=function(){console.error(":",i.error),r(i.error)}}))}},t,this)})),function(t){return A.apply(this,arguments)})},{key:"getAllSessions",value:(m=ie(ee().m(function t(){var e,n,r,i,o,a,s,l,c,h=this,u=arguments;return ee().w(function(t){for(;;)switch(t.n){case 0:return e=u.length>0&&void 0!==u[0]?u[0]:{},t.n=1,this.ensureDB();case 1:return n=e.limit,r=void 0===n?100:n,i=e.offset,o=void 0===i?0:i,a=e.sortBy,s=void 0===a?"updatedAt":a,l=e.order,c=void 0===l?"desc":l,t.a(2,new Promise(function(t,e){var n,i=h.db.transaction(["sessions"],"readonly").objectStore("sessions");if(i.indexNames.contains(s)){var a=i.index(s);n=a.openCursor(null,"desc"===c?"prev":"next")}else n=i.openCursor();var l=[],u=0;n.onsuccess=function(e){var n=e.target.result;n?(u>=o&&l.length<r&&l.push(n.value),u++,n.continue()):t(l)},n.onerror=function(){console.error(":",n.error),e(n.error)}}))}},t,this)})),function(){return m.apply(this,arguments)})},{key:"updateSession",value:(g=ie(ee().m(function t(e,n){var r,i;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.ensureDB();case 1:return t.n=2,this.getSession(e);case 2:if(r=t.v){t.n=3;break}throw new Error(": ".concat(e));case 3:return i=Jt(Jt(Jt({},r),n),{},{updatedAt:Date.now()}),t.a(2,this.saveSession(i))}},t,this)})),function(t,e){return g.apply(this,arguments)})},{key:"deleteSession",value:(f=ie(ee().m(function t(e){var n=this;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.ensureDB();case 1:return t.a(2,new Promise(function(t,r){var i=n.db.transaction(["sessions","messages"],"readwrite"),o=i.objectStore("sessions").delete(e);o.onerror=function(){console.error(":",o.error),r(o.error)},i.objectStore("messages").index("sessionId").openCursor(IDBKeyRange.only(e)).onsuccess=function(t){var e=t.target.result;e&&(e.delete(),e.continue())},i.oncomplete=function(){t()},i.onerror=function(){console.error(":",i.error),r(i.error)}}))}},t,this)})),function(t){return f.apply(this,arguments)})},{key:"addMessage",value:(p=ie(ee().m(function t(e,n){var r=this;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.ensureDB();case 1:return t.a(2,new Promise(function(t,i){var o=r.db.transaction(["messages","sessions"],"readwrite"),a=o.objectStore("messages"),s={id:n.id||r.generateId(),sessionId:e,role:n.role,content:n.content,timestamp:n.timestamp||Date.now(),metadata:n.metadata||{}},l=a.add(s);l.onerror=function(){console.error(":",l.error),i(l.error)};var c=o.objectStore("sessions"),h=c.get(e);h.onsuccess=function(){var t=h.result;t&&(t.updatedAt=Date.now(),c.put(t))},o.oncomplete=function(){t(s.id)},o.onerror=function(){console.error(":",o.error),i(o.error)}}))}},t,this)})),function(t,e){return p.apply(this,arguments)})},{key:"getMessages",value:(d=ie(ee().m(function t(e){var n=this;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.ensureDB();case 1:return t.a(2,new Promise(function(t,r){var i=n.db.transaction(["messages"],"readonly").objectStore("messages").index("sessionId").getAll(IDBKeyRange.only(e));i.onsuccess=function(){var e=i.result.sort(function(t,e){return t.timestamp-e.timestamp});t(e)},i.onerror=function(){console.error(":",i.error),r(i.error)}}))}},t,this)})),function(t){return d.apply(this,arguments)})},{key:"searchSessions",value:(u=ie(ee().m(function t(e){var n,r;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.ensureDB();case 1:return t.n=2,this.getAllSessions({limit:1e3});case 2:return n=t.v,r=e.toLowerCase(),t.a(2,n.filter(function(t){var e=t.title.toLowerCase().includes(r),n=t.tags.some(function(t){return t.toLowerCase().includes(r)});return e||n}))}},t,this)})),function(t){return u.apply(this,arguments)})},{key:"getFavoriteSessions",value:(h=ie(ee().m(function t(){var e=this;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.ensureDB();case 1:return t.a(2,new Promise(function(t,n){var r=e.db.transaction(["sessions"],"readonly").objectStore("sessions").index("isFavorite").getAll(IDBKeyRange.only(!0));r.onsuccess=function(){var e=r.result.sort(function(t,e){return e.updatedAt-t.updatedAt});t(e)},r.onerror=function(){console.error(":",r.error),n(r.error)}}))}},t,this)})),function(){return h.apply(this,arguments)})},{key:"getStorageSize",value:(c=ie(ee().m(function t(){var e,n;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.ensureDB();case 1:return t.n=2,this.getAllSessions({limit:1e4});case 2:return e=t.v,n=JSON.stringify(e),t.a(2,new Blob([n]).size)}},t,this)})),function(){return c.apply(this,arguments)})},{key:"cleanup",value:(l=ie(ee().m(function t(){var e,n,r,i,o,a,s,l=arguments;return ee().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=l.length>0&&void 0!==l[0]?l[0]:100,t.n=1,this.ensureDB();case 1:return t.n=2,this.getAllSessions({limit:1e4,sortBy:"updatedAt",order:"desc"});case 2:if(!((n=t.v).length<=e)){t.n=3;break}return t.a(2,0);case 3:r=n.slice(e).filter(function(t){return!t.isFavorite}),i=Vt(r),t.p=4,i.s();case 5:if((o=i.n()).done){t.n=7;break}return a=o.value,t.n=6,this.deleteSession(a.id);case 6:t.n=5;break;case 7:t.n=9;break;case 8:t.p=8,s=t.v,i.e(s);case 9:return t.p=9,i.f(),t.f(9);case 10:return t.a(2,r.length)}},t,this,[[4,8,9,10]])})),function(){return l.apply(this,arguments)})},{key:"exportSession",value:(s=ie(ee().m(function t(e){var n,r,i,o=arguments;return ee().w(function(t){for(;;)switch(t.n){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:"json",t.n=1,this.ensureDB();case 1:return t.n=2,this.getSession(e);case 2:if(r=t.v){t.n=3;break}throw new Error(": ".concat(e));case 3:return t.n=4,this.getMessages(e);case 4:if(i=t.v,r.messages=i,"json"!==n){t.n=5;break}return t.a(2,JSON.stringify(r,null,2));case 5:if("markdown"!==n){t.n=6;break}return t.a(2,this.sessionToMarkdown(r));case 6:throw new Error(": ".concat(n));case 7:return t.a(2)}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"sessionToMarkdown",value:function(t){var e="# ".concat(t.title,"\n\n");e+="****: ".concat(new Date(t.createdAt).toLocaleString(),"\n"),e+="****: ".concat(new Date(t.updatedAt).toLocaleString(),"\n"),e+="****: ".concat(t.model,"\n"),e+="****: ".concat(t.provider,"\n\n"),t.tags.length>0&&(e+="****: ".concat(t.tags.join(", "),"\n\n")),e+="---\n\n";var n,r=Vt(t.messages);try{for(r.s();!(n=r.n()).done;){var i=n.value,o="user"===i.role?" ":" AI",a=new Date(i.timestamp).toLocaleString();e+="## ".concat(o," (").concat(a,")\n\n"),e+="".concat(i.content,"\n\n"),e+="---\n\n"}}catch(t){r.e(t)}finally{r.f()}return e}},{key:"generateId",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},{key:"close",value:function(){this.db&&(this.db.close(),this.db=null)}},{key:"deleteDatabase",value:(a=ie(ee().m(function t(){var e=this;return ee().w(function(t){for(;;)if(0===t.n)return this.close(),t.a(2,new Promise(function(t,n){var r=indexedDB.deleteDatabase(e.dbName);r.onsuccess=function(){console.log(""),t()},r.onerror=function(){console.error(":",r.error),n(r.error)},r.onblocked=function(){console.warn("")}}))},t,this)})),function(){return a.apply(this,arguments)})},{key:"batchSaveSessions",value:(o=ie(ee().m(function t(e){var n,r,i,o,a=this,s=arguments;return ee().w(function(t){for(;;)switch(t.n){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:50,t.n=1,this.ensureDB();case 1:r=[],i=ee().m(function t(){var i,s,l,c,h;return ee().w(function(t){for(;;)switch(t.n){case 0:return i=e.slice(o,o+n),s=a.db.transaction(["sessions"],"readwrite"),l=s.objectStore("sessions"),c=i.map(function(t){return new Promise(function(e,n){var r=l.put(t);r.onsuccess=function(){return e(r.result)},r.onerror=function(){return n(r.error)}})}),t.n=1,Promise.all(c);case 1:if(h=t.v,r.push.apply(r,Yt(h)),!(o+n<e.length)){t.n=2;break}return t.n=2,new Promise(function(t){return setTimeout(t,0)});case 2:return t.a(2)}},t)}),o=0;case 2:if(!(o<e.length)){t.n=4;break}return t.d(Gt(i()),3);case 3:o+=n,t.n=2;break;case 4:return t.a(2,r)}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"batchDeleteSessions",value:(i=ie(ee().m(function t(e){var n,r,i,o=this,a=arguments;return ee().w(function(t){for(;;)switch(t.n){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:50,t.n=1,this.ensureDB();case 1:r=ee().m(function t(){var r,a,s,l,c;return ee().w(function(t){for(;;)switch(t.n){case 0:return r=e.slice(i,i+n),a=o.db.transaction(["sessions","messages"],"readwrite"),s=a.objectStore("sessions"),l=a.objectStore("messages"),c=r.map(function(){var t=ie(ee().m(function t(e){var n,r;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,new Promise(function(t,n){var r=s.delete(e);r.onsuccess=function(){return t()},r.onerror=function(){return n(r.error)}});case 1:return n=l.index("sessionId"),r=n.openCursor(IDBKeyRange.only(e)),t.n=2,new Promise(function(t,e){r.onsuccess=function(e){var n=e.target.result;n?(n.delete(),n.continue()):t()},r.onerror=function(){return e(r.error)}});case 2:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),t.n=1,Promise.all(c);case 1:if(!(i+n<e.length)){t.n=2;break}return t.n=2,new Promise(function(t){return setTimeout(t,0)});case 2:return t.a(2)}},t)}),i=0;case 2:if(!(i<e.length)){t.n=4;break}return t.d(Gt(r()),3);case 3:i+=n,t.n=2;break;case 4:return t.a(2)}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"archiveOldSessions",value:(r=ie(ee().m(function t(){var e,n,r,i,o=arguments;return ee().w(function(t){for(;;)switch(t.n){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:100,t.n=1,this.ensureDB();case 1:return t.n=2,this.getSessions({sortBy:"updatedAt",order:"desc"});case 2:if(!((n=t.v).length<=e)){t.n=3;break}return t.a(2,{archived:0,remaining:n.length});case 3:if(r=n.slice(e),!((i=r.filter(function(t){return!t.isFavorite}).map(function(t){return t.id})).length>0)){t.n=4;break}return t.n=4,this.batchDeleteSessions(i);case 4:return t.a(2,{archived:i.length,remaining:n.length-i.length})}},t,this)})),function(){return r.apply(this,arguments)})},{key:"optimizeMemory",value:(n=ie(ee().m(function t(){var e,n,r=this;return ee().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getSessions({sortBy:"updatedAt",order:"desc"});case 1:return e=t.v,t.n=2,this.performanceOptimizer.checkMemoryAndArchive(e,function(){var t=ie(ee().m(function t(e){var n;return ee().w(function(t){for(;;)switch(t.n){case 0:return n=e.map(function(t){return t.id}),t.n=1,r.batchDeleteSessions(n);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}());case 2:return n=t.v,t.a(2,n)}},t,this)})),function(){return n.apply(this,arguments)})}],e&&oe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,s,l,c,h,u,d,p,f,g,m,A,y,b,x}();function le(t){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},le(t)}function ce(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function he(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return ue(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(ue(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,ue(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,ue(u,"constructor",c),ue(c,"constructor",l),l.displayName="GeneratorFunction",ue(c,i,"GeneratorFunction"),ue(u),ue(u,i,"Generator"),ue(u,r,function(){return this}),ue(u,"toString",function(){return"[object Generator]"}),(he=function(){return{w:o,m:d}})()}function ue(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}ue=function(t,e,n,r){function o(e,n){ue(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},ue(t,e,n,r)}function de(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function pe(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){de(o,r,i,a,s,"next",t)}function s(t){de(o,r,i,a,s,"throw",t)}a(void 0)})}}function fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ge(r.key),r)}}function ge(t){var e=function(t){if("object"!=le(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=le(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==le(e)?e:e+""}var me=function(){return t=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.aiManager=e,this.promptManager=n,this.chatStorage=r,this.currentSession=null,this.isStreaming=!1},e=[{key:"createNewSession",value:(b=pe(he().m(function t(){var e,n,r,i=arguments;return he().w(function(t){for(;;)switch(t.n){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:null,n=i.length>1&&void 0!==i[1]?i[1]:{},r={id:this.generateId(),title:e||"",createdAt:Date.now(),updatedAt:Date.now(),messages:[],model:this.aiManager.settings.selectedModel,provider:this.aiManager.settings.aiProvider,tags:n.tags||[],isFavorite:!1,contextType:n.contextType||"none"},t.n=1,this.chatStorage.saveSession(r);case 1:return this.currentSession=r,console.log(":",r.id),t.a(2,r)}},t,this)})),function(){return b.apply(this,arguments)})},{key:"loadSession",value:(y=pe(he().m(function t(e){var n,r;return he().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.chatStorage.getSession(e);case 1:if(n=t.v){t.n=2;break}throw new Error(": ".concat(e));case 2:return t.n=3,this.chatStorage.getMessages(e);case 3:return r=t.v,n.messages=r,this.currentSession=n,console.log(":",e,"(".concat(r.length," messages)")),t.a(2,n)}},t,this)})),function(t){return y.apply(this,arguments)})},{key:"saveSession",value:(A=pe(he().m(function t(){return he().w(function(t){for(;;)switch(t.n){case 0:if(this.currentSession){t.n=1;break}throw new Error("");case 1:return t.n=2,this.chatStorage.saveSession(this.currentSession);case 2:console.log(":",this.currentSession.id);case 3:return t.a(2)}},t,this)})),function(){return A.apply(this,arguments)})},{key:"deleteSession",value:(m=pe(he().m(function t(e){return he().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.chatStorage.deleteSession(e);case 1:this.currentSession&&this.currentSession.id===e&&(this.currentSession=null),console.log(":",e);case 2:return t.a(2)}},t,this)})),function(t){return m.apply(this,arguments)})},{key:"updateSessionTitle",value:(g=pe(he().m(function t(e,n){return he().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.chatStorage.updateSession(e,{title:n});case 1:this.currentSession&&this.currentSession.id===e&&(this.currentSession.title=n),console.log(":",e,n);case 2:return t.a(2)}},t,this)})),function(t,e){return g.apply(this,arguments)})},{key:"toggleFavorite",value:(f=pe(he().m(function t(e,n){return he().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.chatStorage.updateSession(e,{isFavorite:n});case 1:this.currentSession&&this.currentSession.id===e&&(this.currentSession.isFavorite=n),console.log(":",e,n);case 2:return t.a(2)}},t,this)})),function(t,e){return f.apply(this,arguments)})},{key:"sendMessageWithStreaming",value:(p=pe(he().m(function t(e,n,r,i,o){var a,s,l,c,h,u,d,p=this;return he().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.currentSession){t.n=1;break}return t.n=1,this.createNewSession();case 1:return this.isStreaming=!0,t.p=2,a=this.aiManager.createMessage("user",e),t.n=3,this.chatStorage.addMessage(this.currentSession.id,a);case 3:if(this.currentSession.messages.push(a),""!==this.currentSession.title||1!==this.currentSession.messages.length){t.n=4;break}return s=this.generateTitleFromMessage(e),t.n=4,this.updateSessionTitle(this.currentSession.id,s);case 4:return l="",n.includeContext&&(l=this.getEditorContext(n.contextType||"full")),c=this.buildMessagesForAPI(e,l),h=this.aiManager.manageTokenLimit(c),u="",t.n=5,this.aiManager.callAIWithStreaming(h,function(t){u+=t,r(t)},function(){var t=pe(he().m(function t(e){var n;return he().w(function(t){for(;;)switch(t.n){case 0:return u=e||u,n=p.aiManager.createMessage("assistant",u),t.n=1,p.chatStorage.addMessage(p.currentSession.id,n);case 1:return p.currentSession.messages.push(n),t.n=2,p.saveSession();case 2:p.isStreaming=!1,i(u);case 3:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}(),function(t){p.isStreaming=!1,o(t)});case 5:t.n=7;break;case 6:t.p=6,d=t.v,this.isStreaming=!1,console.error(":",d),o(d);case 7:return t.a(2)}},t,this,[[2,6]])})),function(t,e,n,r,i){return p.apply(this,arguments)})},{key:"sendMessage",value:(d=pe(he().m(function t(e){var n,r=this,i=arguments;return he().w(function(t){for(;;)if(0===t.n)return n=i.length>1&&void 0!==i[1]?i[1]:{},t.a(2,new Promise(function(t,i){r.sendMessageWithStreaming(e,n,function(t){},function(e){t(e)},function(t){i(t)})}))},t)})),function(t){return d.apply(this,arguments)})},{key:"getEditorContext",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"full";if("none"===t)return"";if("undefined"==typeof window||!window.editorManager)return console.warn(""),"";var e=window.editorManager.editor;if(!e)return"";try{if("selection"===t){var n=e.state.selection,r=n.from,i=n.to;return e.state.doc.textBetween(r,i," ")||""}if("full"===t)return e.state.doc.textContent||""}catch(t){return console.error(":",t),""}return""}},{key:"buildMessagesForAPI",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=[];if(this.currentSession&&this.currentSession.messages.length>0){var r,i=function(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return ce(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}(this.currentSession.messages.slice(-10));try{for(i.s();!(r=i.n()).done;){var o=r.value;n.push({role:o.role,content:o.content})}}catch(t){i.e(t)}finally{i.f()}}var a=t;return e&&(a="[]\n".concat(e,"\n\n[]\n").concat(t)),n.push({role:"user",content:a}),n}},{key:"generateTitleFromMessage",value:function(t){var e=t.substring(0,30),n=t.split("\n")[0];return n.length<e.length&&(e=n),t.length>30&&(e+="..."),e}},{key:"getSessions",value:(u=pe(he().m(function t(){var e,n=arguments;return he().w(function(t){for(;;)switch(t.n){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:{},t.n=1,this.chatStorage.getAllSessions(e);case 1:return t.a(2,t.v)}},t,this)})),function(){return u.apply(this,arguments)})},{key:"searchSessions",value:(h=pe(he().m(function t(e){return he().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.chatStorage.searchSessions(e);case 1:return t.a(2,t.v)}},t,this)})),function(t){return h.apply(this,arguments)})},{key:"getFavoriteSessions",value:(c=pe(he().m(function t(){return he().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.chatStorage.getFavoriteSessions();case 1:return t.a(2,t.v)}},t,this)})),function(){return c.apply(this,arguments)})},{key:"getTodaySessions",value:(l=pe(he().m(function t(){var e,n,r;return he().w(function(t){for(;;)switch(t.n){case 0:return(e=new Date).setHours(0,0,0,0),n=e.getTime(),t.n=1,this.getSessions({limit:1e3});case 1:return r=t.v,t.a(2,r.filter(function(t){return t.createdAt>=n}))}},t,this)})),function(){return l.apply(this,arguments)})},{key:"getThisWeekSessions",value:(s=pe(he().m(function t(){var e,n;return he().w(function(t){for(;;)switch(t.n){case 0:return e=Date.now()-6048e5,t.n=1,this.getSessions({limit:1e3});case 1:return n=t.v,t.a(2,n.filter(function(t){return t.createdAt>=e}))}},t,this)})),function(){return s.apply(this,arguments)})},{key:"exportSession",value:(a=pe(he().m(function t(e){var n,r=arguments;return he().w(function(t){for(;;)switch(t.n){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:"json",t.n=1,this.chatStorage.exportSession(e,n);case 1:return t.a(2,t.v)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"getCurrentSession",value:function(){return this.currentSession}},{key:"getIsStreaming",value:function(){return this.isStreaming}},{key:"clearCurrentSession",value:function(){this.currentSession=null,console.log("")}},{key:"getStatistics",value:(o=pe(he().m(function t(){var e,n,r,i,o,a,s,l,c,h;return he().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.getSessions({limit:1e4});case 1:return e=t.v,n=e.length,r=e.reduce(function(t,e){return t+(e.messages?e.messages.length:0)},0),i=e.filter(function(t){return t.isFavorite}).length,o={},e.forEach(function(t){o[t.provider]=(o[t.provider]||0)+1}),a=n,s=r,l=i,c=o,t.n=2,this.chatStorage.getStorageSize();case 2:return h=t.v,t.a(2,{totalSessions:a,totalMessages:s,favoriteSessions:l,byProvider:c,storageSize:h})}},t,this)})),function(){return o.apply(this,arguments)})},{key:"generateId",value:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)})}},{key:"cleanup",value:(i=pe(he().m(function t(){var e,n=arguments;return he().w(function(t){for(;;)switch(t.n){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:100,t.n=1,this.chatStorage.cleanup(e);case 1:return t.a(2,t.v)}},t,this)})),function(){return i.apply(this,arguments)})},{key:"optimizeMemory",value:(r=pe(he().m(function t(){var e,n;return he().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.chatStorage.optimizeMemory();case 1:return e=t.v,console.log(":",e),t.a(2,e);case 2:throw t.p=2,n=t.v,console.error(":",n),n;case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"archiveOldSessions",value:(n=pe(he().m(function t(){var e,n,r,i=arguments;return he().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=i.length>0&&void 0!==i[0]?i[0]:100,t.p=1,t.n=2,this.chatStorage.archiveOldSessions(e);case 2:return n=t.v,console.log(":",n),t.a(2,n);case 3:throw t.p=3,r=t.v,console.error(":",r),r;case 4:return t.a(2)}},t,this,[[1,3]])})),function(){return n.apply(this,arguments)})},{key:"getPerformanceStats",value:function(){var t;return{currentSession:(null===(t=this.currentSession)||void 0===t?void 0:t.id)||null,isStreaming:this.isStreaming,storageStats:this.chatStorage.performanceOptimizer.getStats()}}}],e&&fe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,s,l,c,h,u,d,p,f,g,m,A,y,b}(),Ae=a(99418);function ye(t){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ye(t)}function be(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(t){if("string"==typeof t)return xe(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xe(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function xe(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function ve(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Ce(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(Ce(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Ce(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,Ce(u,"constructor",c),Ce(c,"constructor",l),l.displayName="GeneratorFunction",Ce(c,i,"GeneratorFunction"),Ce(u),Ce(u,i,"Generator"),Ce(u,r,function(){return this}),Ce(u,"toString",function(){return"[object Generator]"}),(ve=function(){return{w:o,m:d}})()}function Ce(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Ce=function(t,e,n,r){function o(e,n){Ce(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},Ce(t,e,n,r)}function ke(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function we(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){ke(o,r,i,a,s,"next",t)}function s(t){ke(o,r,i,a,s,"throw",t)}a(void 0)})}}function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ie(r.key),r)}}function Ie(t){var e=function(t){if("object"!=ye(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ye(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ye(e)?e:e+""}var Se=function(){return t=function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.chatManager=e,this.promptManager=n,this.promptLibrary=r,this.styleController=i,this.structuredGenerator=o,this.structuredGenerationModal=a,this.exportImportManager=s,this.performanceOptimizer=Ut(),this.element=null,this.isVisible=!1,this.position="right",this.currentStreamingMessageId=null},e=[{key:"setPromptLibrary",value:function(t){if(this.promptLibrary=t,this.element){var e=this.element.querySelector("#chat-prompts");e&&(e.style.display="flex")}}},{key:"render",value:function(){this.element||(this.element=document.createElement("div"),this.element.className="chat-panel",this.element.setAttribute("data-position",this.position),this.element.style.display="none",this.element.innerHTML='\n            <div class="chat-panel-header">\n                <div class="header-left">\n                    <button class="btn-icon" id="chat-sessions" title="">\n                        <span class="icon"></span>\n                        <span class="label"></span>\n                    </button>\n                    <button class="btn-icon" id="chat-prompts" title=" (Ctrl+P)">\n                        <span class="icon"></span>\n                        <span class="label"></span>\n                    </button>\n                    <button class="btn-icon" id="chat-structured" title="">\n                        <span class="icon"></span>\n                        <span class="label"></span>\n                    </button>\n                </div>\n                <div class="header-center">\n                    <span class="session-title">AI Chat</span>\n                </div>\n                <div class="header-right">\n                    <button class="btn-icon" id="chat-new" title="">\n                        <span class="icon"></span>\n                    </button>\n                    <button class="btn-icon" id="chat-settings" title="AI">\n                        <span class="icon"></span>\n                    </button>\n                    <button class="btn-icon" id="chat-minimize" title="">\n                        <span class="icon"></span>\n                    </button>\n                    <button class="btn-icon" id="chat-close" title="">\n                        <span class="icon"></span>\n                    </button>\n                </div>\n            </div>\n\n            <div class="context-options">\n                <label class="context-option">\n                    <input type="radio" name="context" value="none" checked>\n                    <span></span>\n                </label>\n                <label class="context-option">\n                    <input type="radio" name="context" value="selection">\n                    <span></span>\n                </label>\n                <label class="context-option">\n                    <input type="radio" name="context" value="full">\n                    <span></span>\n                </label>\n            </div>\n\n            <div class="style-control">\n                <div class="style-header">\n                    <label class="style-toggle">\n                        <input type="checkbox" id="style-enabled">\n                        <span></span>\n                    </label>\n                    <button class="btn-link" id="style-settings" title="">\n                        <span class="icon"></span>\n                    </button>\n                </div>\n                <div class="style-summary" id="style-summary">: </div>\n            </div>\n\n            <div class="chat-messages" id="chat-messages"></div>\n\n            <div class="chat-input-area">\n                <textarea\n                    id="chat-input"\n                    placeholder="... (Ctrl+Enter )"\n                    rows="3"\n                ></textarea>\n                <div class="input-actions">\n                    <button class="btn-secondary" id="chat-clear"></button>\n                    <button class="btn-primary" id="chat-send"></button>\n                </div>\n            </div>\n        ',document.body.appendChild(this.element),this.loadCSS(),this.setupEventListeners(),console.log("ChatPanel "))}},{key:"loadCSS",value:function(){if(!document.getElementById("chat-panel-styles")){var t=document.createElement("link");t.id="chat-panel-styles",t.rel="stylesheet",t.href="chat-panel.css",document.head.appendChild(t)}}},{key:"show",value:function(){this.element||this.render(),this.element.style.display="flex",this.isVisible=!0;var t=this.element.querySelector("#chat-input");t&&t.focus(),console.log("ChatPanel ")}},{key:"hide",value:function(){this.element&&(this.element.style.display="none",this.isVisible=!1),console.log("ChatPanel ")}},{key:"toggle",value:function(){this.isVisible?this.hide():this.show()}},{key:"setPosition",value:function(t){this.position=t,this.element&&this.element.setAttribute("data-position",t)}},{key:"addMessage",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.element.querySelector("#chat-messages"),i=document.createElement("div");i.className="message message-".concat(t),n.messageId&&i.setAttribute("data-message-id",n.messageId),n.streaming&&i.classList.add("streaming");var o=(new Date).toLocaleTimeString("ja-JP",{hour:"2-digit",minute:"2-digit"}),a="user"===t?" ":" AI";i.innerHTML='\n            <div class="message-header">\n                <span class="message-role">'.concat(a,'</span>\n                <span class="message-time">').concat(o,'</span>\n            </div>\n            <div class="message-content markdown-content"></div>\n            <div class="message-actions"></div>\n        ');var s=i.querySelector(".message-content");return this.renderMessageContent(e,s,n.streaming),"assistant"!==t||n.streaming||this.addMessageActions(i),n.streaming&&(i.querySelector(".message-actions").innerHTML='\n                <button class="btn-icon" data-action="stop">\n                    <span class="icon"></span>\n                    <span></span>\n                </button>\n            '),r.appendChild(i),this.scrollToBottom(),i}},{key:"renderMessageContent",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];try{var r=Bt.xI.parse(t),i=Ae.default.sanitize(r,{ALLOWED_TAGS:["p","br","strong","em","code","pre","ul","ol","li","h1","h2","h3","h4","h5","h6","a","blockquote","table","tr","td","th","thead","tbody","img","hr","del","span","div"],ALLOWED_ATTR:["href","class","src","alt","title","target"],ALLOW_DATA_ATTR:!1});if(e.innerHTML=i,n){var o=document.createElement("span");o.className="typing-indicator",o.textContent="",e.appendChild(o)}}catch(n){console.error("Markdown :",n),e.textContent=t}}},{key:"updateStreamingMessage",value:function(t){if(this.currentStreamingMessageId){var e=this.element.querySelector('.message[data-message-id="'.concat(this.currentStreamingMessageId,'"]'));if(e){var n=e.querySelector(".message-content");this.renderMessageContent(t,n,!0),this.scrollToBottom()}}}},{key:"finalizeStreamingMessage",value:function(t){if(this.currentStreamingMessageId){var e=this.element.querySelector('.message[data-message-id="'.concat(this.currentStreamingMessageId,'"]'));if(e){e.classList.remove("streaming");var n=e.querySelector(".message-content");this.renderMessageContent(t,n,!1),this.addMessageActions(e)}this.currentStreamingMessageId=null}}},{key:"addMessageActions",value:function(t){var e=this,n=t.querySelector(".message-actions");n.innerHTML='\n            <button class="btn-icon" data-action="copy">\n                <span class="icon"></span>\n                <span></span>\n            </button>\n            <button class="btn-icon" data-action="insert">\n                <span class="icon"></span>\n                <span></span>\n            </button>\n            <button class="btn-icon" data-action="regenerate">\n                <span class="icon"></span>\n                <span></span>\n            </button>\n        ',n.querySelectorAll("[data-action]").forEach(function(n){n.addEventListener("click",function(r){var i=n.getAttribute("data-action");e.handleMessageAction(i,t)})})}},{key:"handleMessageAction",value:(p=we(ve().m(function t(e,n){var r,i,o,a;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:r=n.querySelector(".message-content"),i=r.textContent,o=e,t.n="copy"===o?1:"insert"===o?5:"regenerate"===o?6:"stop"===o?7:8;break;case 1:return t.p=1,t.n=2,navigator.clipboard.writeText(i);case 2:this.showNotification(""),t.n=4;break;case 3:t.p=3,a=t.v,console.error(":",a),this.showNotification("","error");case 4:return t.a(3,8);case 5:try{window.aiManager&&(window.aiManager.insertToEditor(i),this.showNotification(""))}catch(t){console.error(":",t),this.showNotification("","error")}return t.a(3,8);case 6:return this.showNotification(""),t.a(3,8);case 7:return this.showNotification(""),t.a(3,8);case 8:return t.a(2)}},t,this,[[1,3]])})),function(t,e){return p.apply(this,arguments)})},{key:"scrollToBottom",value:function(){var t=this.element.querySelector("#chat-messages");t&&(t.scrollTop=t.scrollHeight)}},{key:"clearMessages",value:function(){var t=this.element.querySelector("#chat-messages");t&&(t.innerHTML="")}},{key:"setupEventListeners",value:function(){var t=this;this.element.querySelector("#chat-send").addEventListener("click",function(){return t.onSendMessage()}),this.element.querySelector("#chat-clear").addEventListener("click",function(){return t.onClearChat()}),this.element.querySelector("#chat-close").addEventListener("click",function(){return t.hide()}),this.element.querySelector("#chat-minimize").addEventListener("click",function(){return t.hide()}),this.element.querySelector("#chat-new").addEventListener("click",function(){return t.onNewChat()}),this.element.querySelector("#chat-sessions").addEventListener("click",function(){return t.showSessionList()}),this.element.querySelector("#chat-settings").addEventListener("click",function(){window.aiManager&&window.aiManager.showSettings()}),this.element.querySelector("#chat-prompts").addEventListener("click",function(){return t.showPromptLibrary()});var e=this.element.querySelector("#chat-structured");e&&e.addEventListener("click",function(){return t.showStructuredGeneration()});var n=this.element.querySelector("#style-enabled");n&&this.styleController&&(n.checked=this.styleController.isEnabled(),n.addEventListener("change",function(){var e=we(ve().m(function e(n){return ve().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,t.styleController.setEnabled(n.target.checked);case 1:t.updateStyleSummary();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}()));var r=this.element.querySelector("#style-settings");r&&r.addEventListener("click",function(){return t.showStyleSettings()}),this.element.querySelector("#chat-input").addEventListener("keydown",function(e){e.ctrlKey&&"Enter"===e.key&&(e.preventDefault(),t.onSendMessage())}),this.updateStyleSummary()}},{key:"onSendMessage",value:(d=we(ve().m(function t(){var e,n,r,i,o,a,s=this;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=this.element.querySelector("#chat-input"),n=e.value.trim()){t.n=1;break}return t.a(2);case 1:return e.value="",this.addMessage("user",n),r=n,this.styleController&&this.styleController.isEnabled()&&(r=this.styleController.applyStyleToPrompt(n)),i=this.element.querySelector('input[name="context"]:checked').value,this.currentStreamingMessageId=this.generateId(),this.addMessage("assistant","",{streaming:!0,messageId:this.currentStreamingMessageId}),o="",this.performanceOptimizer.initStreamingBuffer(this.currentStreamingMessageId),t.p=2,t.n=3,this.chatManager.sendMessageWithStreaming(r,{includeContext:"none"!==i,contextType:i},function(t){o+=t,s.performanceOptimizer.addToStreamingBuffer(s.currentStreamingMessageId,t,function(t){s.updateStreamingMessage(o)})},function(t){s.performanceOptimizer.completeStreamingBuffer(s.currentStreamingMessageId,function(){s.finalizeStreamingMessage(t)}),s.updateSessionTitle()},function(t){s.performanceOptimizer.completeStreamingBuffer(s.currentStreamingMessageId),s.finalizeStreamingMessage(": ".concat(t.message)),s.showNotification("","error")});case 3:t.n=5;break;case 4:t.p=4,a=t.v,console.error(":",a),this.showNotification("","error");case 5:return t.a(2)}},t,this,[[2,4]])})),function(){return d.apply(this,arguments)})},{key:"onClearChat",value:(u=we(ve().m(function t(){return ve().w(function(t){for(;;)switch(t.n){case 0:confirm("")&&(this.clearMessages(),this.chatManager.clearCurrentSession(),this.updateSessionTitle());case 1:return t.a(2)}},t,this)})),function(){return u.apply(this,arguments)})},{key:"onNewChat",value:(h=we(ve().m(function t(){return ve().w(function(t){for(;;)switch(t.n){case 0:if(!confirm("")){t.n=2;break}return this.clearMessages(),t.n=1,this.chatManager.createNewSession();case 1:this.updateSessionTitle();case 2:return t.a(2)}},t,this)})),function(){return h.apply(this,arguments)})},{key:"updateSessionTitle",value:function(){var t=this.element.querySelector(".session-title"),e=this.chatManager.getCurrentSession();t.textContent=e?e.title:"AI Chat"}},{key:"showPromptLibrary",value:function(){var t=this;this.promptLibrary?this.promptLibrary.show(function(e,n){console.log("Executing prompt:",n.name),console.log("Generated prompt:",e);var r=t.element.querySelector("#chat-input");r&&(r.value=e,r.focus()),t.showNotification("".concat(n.name,""),"success")}):this.showNotification("","error")}},{key:"showStructuredGeneration",value:function(){this.structuredGenerator&&this.structuredGenerationModal?this.structuredGenerationModal.show():this.showNotification("","error")}},{key:"showSessionList",value:(c=we(ve().m(function t(){var e,n,r;return ve().w(function(t){for(;;)switch(t.n){case 0:return(e=document.getElementById("session-list-modal"))&&e.remove(),t.n=1,this.chatManager.getSessions({sortBy:"updatedAt",order:"desc"});case 1:n=t.v,r=this.createSessionListModal(n),document.body.appendChild(r),this.setupSessionListEventListeners(r,n);case 2:return t.a(2)}},t,this)})),function(){return c.apply(this,arguments)})},{key:"createSessionListModal",value:function(t){var e=document.createElement("div");return e.id="session-list-modal",e.className="session-list-modal",e.innerHTML='\n            <div class="session-list-overlay"></div>\n            <div class="session-list-container">\n                <div class="session-list-header">\n                    <h3></h3>\n                    <div class="header-actions">\n                        <button class="btn-icon" id="import-session-btn" title="">\n                            <span class="icon"></span>\n                            <span class="label"></span>\n                        </button>\n                        <button class="btn-icon" id="export-all-btn" title="">\n                            <span class="icon"></span>\n                            <span class="label"></span>\n                        </button>\n                    </div>\n                    <button class="close-btn" id="session-list-close"></button>\n                </div>\n\n                <div class="session-list-controls">\n                    <input\n                        type="search"\n                        id="session-search"\n                        placeholder="..."\n                        class="session-search"\n                    >\n                    <select id="session-filter" class="session-filter">\n                        <option value="all"></option>\n                        <option value="favorites"></option>\n                        <option value="today"></option>\n                        <option value="week"></option>\n                    </select>\n                </div>\n\n                <div class="session-list-items" id="session-list-items">\n                    '.concat(this.renderSessionItems(t),"\n                </div>\n            </div>\n        "),e}},{key:"renderSessionItems",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(!t||0===t.length)return'<div class="session-empty"></div>';var i=this.filterSessions(t,n,r);return 0===i.length?'<div class="session-empty"></div>':i.map(function(t){var n=new Date(t.updatedAt),r=e.formatDate(n),i=e.getSessionPreview(t),o=t.isFavorite?"":"";return'\n                <div class="session-item" data-session-id="'.concat(t.id,'">\n                    <div class="session-item-header">\n                        <span class="session-title">').concat(e.escapeHtml(t.title),'</span>\n                        <button class="session-favorite" data-session-id="').concat(t.id,'" title="">\n                            ').concat(o,'\n                        </button>\n                    </div>\n                    <div class="session-preview">').concat(e.escapeHtml(i),'</div>\n                    <div class="session-meta">\n                        <span class="session-date">').concat(r,'</span>\n                        <span class="session-count">').concat(t.messages.length,' </span>\n                    </div>\n                    <div class="session-actions">\n                        <button class="session-open" data-session-id="').concat(t.id,'"></button>\n                        <button class="session-export" data-session-id="').concat(t.id,'" title=""></button>\n                        <button class="session-delete" data-session-id="').concat(t.id,'"></button>\n                    </div>\n                </div>\n            ')}).join("")}},{key:"filterSessions",value:function(t,e,n){var r=t,i=new Date,o=new Date(i.getFullYear(),i.getMonth(),i.getDate()),a=new Date(i.getTime()-6048e5);switch(e){case"favorites":r=r.filter(function(t){return t.isFavorite});break;case"today":r=r.filter(function(t){return new Date(t.updatedAt)>=o});break;case"week":r=r.filter(function(t){return new Date(t.updatedAt)>=a})}if(n&&n.trim()){var s=n.toLowerCase();r=r.filter(function(t){var e=t.title.toLowerCase().includes(s),n=t.messages.some(function(t){return t.content.toLowerCase().includes(s)});return e||n})}return r}},{key:"setupSessionListEventListeners",value:function(t,e){var n=this,r=t.querySelector("#session-list-close"),i=t.querySelector(".session-list-overlay");r.addEventListener("click",function(){return t.remove()}),i.addEventListener("click",function(){return t.remove()});var o=t.querySelector("#session-search"),a=t.querySelector("#session-filter"),s=t.querySelector("#session-list-items"),l=function(){var r=a.value,i=o.value;s.innerHTML=n.renderSessionItems(e,r,i),n.setupSessionItemListeners(t,e)};o.addEventListener("input",l),a.addEventListener("change",l);var c=t.querySelector("#import-session-btn");c&&this.exportImportManager&&c.addEventListener("click",function(){return n.showImportDialog()});var h=t.querySelector("#export-all-btn");h&&this.exportImportManager&&h.addEventListener("click",we(ve().m(function t(){return ve().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,n.exportAllSessions();case 1:return t.a(2)}},t)}))),this.setupSessionItemListeners(t,e)}},{key:"setupSessionItemListeners",value:function(t,e){var n=this;t.querySelectorAll(".session-open").forEach(function(e){e.addEventListener("click",function(){var e=we(ve().m(function e(r){var i;return ve().w(function(e){for(;;)switch(e.n){case 0:return i=r.target.dataset.sessionId,e.n=1,n.loadSession(i);case 1:t.remove();case 2:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())}),t.querySelectorAll(".session-favorite").forEach(function(r){r.addEventListener("click",function(){var r=we(ve().m(function r(i){var o,a,s,l;return ve().w(function(r){for(;;)switch(r.n){case 0:return i.stopPropagation(),o=i.target.dataset.sessionId,r.n=1,n.toggleSessionFavorite(o,e);case 1:return a=t.querySelector("#session-filter").value,s=t.querySelector("#session-search").value,r.n=2,n.chatManager.getSessions({sortBy:"updatedAt",order:"desc"});case 2:l=r.v,t.querySelector("#session-list-items").innerHTML=n.renderSessionItems(l,a,s),n.setupSessionItemListeners(t,l);case 3:return r.a(2)}},r)}));return function(t){return r.apply(this,arguments)}}())}),t.querySelectorAll(".session-delete").forEach(function(e){e.addEventListener("click",function(){var e=we(ve().m(function e(r){var i,o,a,s;return ve().w(function(e){for(;;)switch(e.n){case 0:if(i=r.target.dataset.sessionId,!confirm("")){e.n=3;break}return e.n=1,n.deleteSession(i);case 1:return o=t.querySelector("#session-filter").value,a=t.querySelector("#session-search").value,e.n=2,n.chatManager.getSessions({sortBy:"updatedAt",order:"desc"});case 2:s=e.v,t.querySelector("#session-list-items").innerHTML=n.renderSessionItems(s,o,a),n.setupSessionItemListeners(t,s);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}())}),t.querySelectorAll(".session-export").forEach(function(t){t.addEventListener("click",function(){var t=we(ve().m(function t(e){var r;return ve().w(function(t){for(;;)switch(t.n){case 0:return e.stopPropagation(),r=e.target.dataset.sessionId,t.n=1,n.showExportDialog(r);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}())})}},{key:"loadSession",value:(l=we(ve().m(function t(e){var n,r,i=this;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.chatManager.chatStorage.getSession(e);case 1:if(n=t.v){t.n=2;break}return this.showNotification("","error"),t.a(2);case 2:this.chatManager.currentSession=n,this.clearMessages(),n.messages.forEach(function(t){i.addMessage(t.role,t.content)}),this.updateSessionTitle(n.title),this.showNotification("","success"),t.n=4;break;case 3:t.p=3,r=t.v,console.error("Failed to load session:",r),this.showNotification("","error");case 4:return t.a(2)}},t,this,[[0,3]])})),function(t){return l.apply(this,arguments)})},{key:"deleteSession",value:(s=we(ve().m(function t(e){var n,r;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.chatManager.chatStorage.deleteSession(e);case 1:(null===(n=this.chatManager.currentSession)||void 0===n?void 0:n.id)===e&&(this.chatManager.currentSession=null,this.clearMessages()),this.showNotification("","success"),t.n=3;break;case 2:t.p=2,r=t.v,console.error("Failed to delete session:",r),this.showNotification("","error");case 3:return t.a(2)}},t,this,[[0,2]])})),function(t){return s.apply(this,arguments)})},{key:"toggleSessionFavorite",value:(a=we(ve().m(function t(e,n){var r,i;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:if(t.p=0,r=n.find(function(t){return t.id===e})){t.n=1;break}return t.a(2);case 1:return r.isFavorite=!r.isFavorite,t.n=2,this.chatManager.chatStorage.saveSession(r);case 2:this.showNotification(r.isFavorite?"":"","success"),t.n=4;break;case 3:t.p=3,i=t.v,console.error("Failed to toggle favorite:",i),this.showNotification("","error");case 4:return t.a(2)}},t,this,[[0,3]])})),function(t,e){return a.apply(this,arguments)})},{key:"showExportDialog",value:(o=we(ve().m(function t(e){var n,r,i,o,a=this;return ve().w(function(t){for(;;)switch(t.n){case 0:if(this.exportImportManager){t.n=1;break}return this.showNotification("","error"),t.a(2);case 1:return t.n=2,this.chatManager.chatStorage.getSession(e);case 2:if(n=t.v){t.n=3;break}return this.showNotification("","error"),t.a(2);case 3:(r=document.createElement("div")).className="export-dialog-overlay",r.innerHTML='\n            <div class="export-dialog">\n                <div class="export-dialog-header">\n                    <h3></h3>\n                    <button class="close-btn" id="export-dialog-close"></button>\n                </div>\n                <div class="export-dialog-content">\n                    <div class="session-info">\n                        <strong>'.concat(n.title,"</strong>\n                        <span>").concat(n.messages.length,' </span>\n                    </div>\n\n                    <div class="form-group">\n                        <label>:</label>\n                        <select id="export-format">\n                            <option value="json">JSON</option>\n                            <option value="markdown">Markdown</option>\n                        </select>\n                    </div>\n\n                    <div class="form-group">\n                        <label>\n                            <input type="checkbox" id="export-encrypt">\n                            \n                        </label>\n                    </div>\n\n                    <div class="form-group password-group" id="password-group" style="display: none;">\n                        <label>:</label>\n                        <input type="password" id="export-password" placeholder="">\n                    </div>\n                </div>\n                <div class="export-dialog-footer">\n                    <button class="btn-secondary" id="export-cancel"></button>\n                    <button class="btn-primary" id="export-confirm"></button>\n                </div>\n            </div>\n        '),document.body.appendChild(r),i=r.querySelector("#export-encrypt"),o=r.querySelector("#password-group"),i.addEventListener("change",function(){o.style.display=i.checked?"block":"none"}),r.querySelector("#export-dialog-close").addEventListener("click",function(){return r.remove()}),r.querySelector("#export-cancel").addEventListener("click",function(){return r.remove()}),r.querySelector(".export-dialog-overlay").addEventListener("click",function(t){t.target.classList.contains("export-dialog-overlay")&&r.remove()}),r.querySelector("#export-confirm").addEventListener("click",we(ve().m(function t(){var e,o,s,l;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=r.querySelector("#export-format").value,o=i.checked,s=r.querySelector("#export-password").value,!o||s){t.n=1;break}return a.showNotification("","error"),t.a(2);case 1:return t.p=1,t.n=2,a.exportImportManager.downloadSession(n,e,{encrypt:o,password:o?s:void 0});case 2:a.showNotification("","success"),r.remove(),t.n=4;break;case 3:t.p=3,l=t.v,console.error("Export failed:",l),a.showNotification("","error");case 4:return t.a(2)}},t,null,[[1,3]])})));case 4:return t.a(2)}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"showImportDialog",value:(i=we(ve().m(function t(){var e,n=this;return ve().w(function(t){for(;;)switch(t.n){case 0:if(this.exportImportManager){t.n=1;break}return this.showNotification("","error"),t.a(2);case 1:(e=document.createElement("input")).type="file",e.accept=".json,.md,.markdown",e.addEventListener("change",function(){var t=we(ve().m(function t(e){var r,i,o,a,s;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:if(r=e.target.files[0]){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,r.text();case 2:i=t.v,t.p=3,o=JSON.parse(i),t.n=5;break;case 4:return t.p=4,t.v,n.showNotification("JSON","error"),t.a(2);case 5:if(!o.encrypted){t.n=6;break}n.showPasswordDialog(function(){var t=we(ve().m(function t(e){var r,o;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,n.exportImportManager.importFromJSON(i,e);case 1:return r=t.v,t.n=2,n.handleImportedData(r);case 2:t.n=4;break;case 3:t.p=3,o=t.v,console.error("Import failed:",o),n.showNotification("","error");case 4:return t.a(2)}},t,null,[[0,3]])}));return function(e){return t.apply(this,arguments)}}()),t.n=8;break;case 6:return t.n=7,n.exportImportManager.importFromJSON(i);case 7:return a=t.v,t.n=8,n.handleImportedData(a);case 8:t.n=10;break;case 9:t.p=9,s=t.v,console.error("Import failed:",s),n.showNotification("","error");case 10:return t.a(2)}},t,null,[[3,4],[1,9]])}));return function(e){return t.apply(this,arguments)}}()),e.click();case 2:return t.a(2)}},t,this)})),function(){return i.apply(this,arguments)})},{key:"showPasswordDialog",value:function(t){var e=this,n=document.createElement("div");n.className="export-dialog-overlay",n.innerHTML='\n            <div class="export-dialog">\n                <div class="export-dialog-header">\n                    <h3></h3>\n                    <button class="close-btn" id="password-dialog-close"></button>\n                </div>\n                <div class="export-dialog-content">\n                    <p></p>\n                    <div class="form-group">\n                        <label>:</label>\n                        <input type="password" id="import-password" placeholder="">\n                    </div>\n                </div>\n                <div class="export-dialog-footer">\n                    <button class="btn-secondary" id="password-cancel"></button>\n                    <button class="btn-primary" id="password-confirm">OK</button>\n                </div>\n            </div>\n        ',document.body.appendChild(n),n.querySelector("#password-dialog-close").addEventListener("click",function(){return n.remove()}),n.querySelector("#password-cancel").addEventListener("click",function(){return n.remove()}),n.querySelector("#password-confirm").addEventListener("click",function(){var r=n.querySelector("#import-password").value;r?(n.remove(),t(r)):e.showNotification("","error")})}},{key:"handleImportedData",value:(r=we(ve().m(function t(e){var n,r,i,o;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:if("chat-session"!==e.type){t.n=2;break}return t.n=1,this.chatManager.chatStorage.saveSession(e.session);case 1:this.showNotification("","success"),t.n=10;break;case 2:if("batch-export"!==e.type){t.n=10;break}n=be(e.sessions),t.p=3,n.s();case 4:if((r=n.n()).done){t.n=6;break}return i=r.value,t.n=5,this.chatManager.chatStorage.saveSession(i);case 5:t.n=4;break;case 6:t.n=8;break;case 7:t.p=7,o=t.v,n.e(o);case 8:return t.p=8,n.f(),t.f(8);case 9:this.showNotification("".concat(e.sessions.length,""),"success");case 10:return t.a(2)}},t,this,[[3,7,8,9]])})),function(t){return r.apply(this,arguments)})},{key:"exportAllSessions",value:(n=we(ve().m(function t(){var e,n,r,i,o,a=this;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.exportImportManager){t.n=1;break}return this.showNotification("","error"),t.a(2);case 1:return t.p=1,t.n=2,this.chatManager.getSessions({sortBy:"updatedAt",order:"desc"});case 2:if(0!==(e=t.v).length){t.n=3;break}return this.showNotification("","info"),t.a(2);case 3:(n=document.createElement("div")).className="export-dialog-overlay",n.innerHTML='\n                <div class="export-dialog">\n                    <div class="export-dialog-header">\n                        <h3></h3>\n                        <button class="close-btn" id="export-all-dialog-close"></button>\n                    </div>\n                    <div class="export-dialog-content">\n                        <p>'.concat(e.length,'</p>\n\n                        <div class="form-group">\n                            <label>\n                                <input type="checkbox" id="export-all-encrypt">\n                                \n                            </label>\n                        </div>\n\n                        <div class="form-group password-group" id="password-all-group" style="display: none;">\n                            <label>:</label>\n                            <input type="password" id="export-all-password" placeholder="">\n                        </div>\n                    </div>\n                    <div class="export-dialog-footer">\n                        <button class="btn-secondary" id="export-all-cancel"></button>\n                        <button class="btn-primary" id="export-all-confirm"></button>\n                    </div>\n                </div>\n            '),document.body.appendChild(n),r=n.querySelector("#export-all-encrypt"),i=n.querySelector("#password-all-group"),r.addEventListener("change",function(){i.style.display=r.checked?"block":"none"}),n.querySelector("#export-all-dialog-close").addEventListener("click",function(){return n.remove()}),n.querySelector("#export-all-cancel").addEventListener("click",function(){return n.remove()}),n.querySelector("#export-all-confirm").addEventListener("click",we(ve().m(function t(){var i,o,s;return ve().w(function(t){for(;;)switch(t.p=t.n){case 0:if(i=r.checked,o=n.querySelector("#export-all-password").value,!i||o){t.n=1;break}return a.showNotification("","error"),t.a(2);case 1:return t.p=1,t.n=2,a.exportImportManager.downloadBatchSessions(e,{encrypt:i,password:i?o:void 0});case 2:a.showNotification("","success"),n.remove(),t.n=4;break;case 3:t.p=3,s=t.v,console.error("Batch export failed:",s),a.showNotification("","error");case 4:return t.a(2)}},t,null,[[1,3]])}))),t.n=5;break;case 4:t.p=4,o=t.v,console.error("Failed to get sessions:",o),this.showNotification("","error");case 5:return t.a(2)}},t,this,[[1,4]])})),function(){return n.apply(this,arguments)})},{key:"getSessionPreview",value:function(t){if(!t.messages||0===t.messages.length)return"";var e=t.messages.find(function(t){return"user"===t.role});return e?e.content.substring(0,100):t.messages[0].content.substring(0,100)}},{key:"formatDate",value:function(t){var e=new Date-t,n=Math.floor(e/6e4),r=Math.floor(e/36e5),i=Math.floor(e/864e5);return n<1?"":n<60?"".concat(n,""):r<24?"".concat(r,""):i<7?"".concat(i,""):t.toLocaleDateString("ja-JP",{year:"numeric",month:"short",day:"numeric"})}},{key:"escapeHtml",value:function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}},{key:"showNotification",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.createElement("div");n.className="notification notification-".concat(e),n.textContent=t,n.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 12px 20px;\n            background: ".concat("error"===e?"#f44336":"success"===e?"#4caf50":"#2196f3",";\n            color: white;\n            border-radius: 4px;\n            z-index: 10000;\n            box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n        "),document.body.appendChild(n),setTimeout(function(){n.remove()},3e3)}},{key:"showStyleSettings",value:function(){var t=this;if(this.styleController){var e=document.createElement("div");e.className="style-settings-modal";var n=this.styleController.getStyleDefinitions(),r=this.styleController.getStyle(),i=this.styleController.getPresets();e.innerHTML='\n            <div class="modal-overlay"></div>\n            <div class="modal-container">\n                <div class="modal-header">\n                    <h3></h3>\n                    <button class="btn-icon close-modal" title=""></button>\n                </div>\n                <div class="modal-content">\n                    \x3c!--  --\x3e\n                    <div class="form-section">\n                        <label class="form-label"></label>\n                        <select id="style-preset" class="form-control">\n                            <option value=""></option>\n                            '.concat(i.map(function(t){return'\n                                <option value="'.concat(t.id,'">').concat(t.name," - ").concat(t.description,"</option>\n                            ")}).join(""),'\n                        </select>\n                    </div>\n\n                    \x3c!--  --\x3e\n                    <div class="form-section">\n                        <label class="form-label">').concat(n.tone.label,'</label>\n                        <select id="style-tone" class="form-control">\n                            ').concat(n.tone.options.map(function(t){return'\n                                <option value="'.concat(t.value,'" ').concat(r.tone===t.value?"selected":"",">\n                                    ").concat(t.label," - ").concat(t.description,"\n                                </option>\n                            ")}).join(""),'\n                        </select>\n                    </div>\n\n                    \x3c!--  --\x3e\n                    <div class="form-section">\n                        <label class="form-label">').concat(n.length.label,'</label>\n                        <select id="style-length" class="form-control">\n                            ').concat(n.length.options.map(function(t){return'\n                                <option value="'.concat(t.value,'" ').concat(r.length===t.value?"selected":"",">\n                                    ").concat(t.label," - ").concat(t.description,"\n                                </option>\n                            ")}).join(""),'\n                        </select>\n                        <input type="number"\n                               id="style-custom-length"\n                               class="form-control"\n                               placeholder=""\n                               value="').concat(r.customLength||"",'"\n                               style="margin-top: 8px; display: ').concat("custom"===r.length?"block":"none",';">\n                    </div>\n\n                    \x3c!--  --\x3e\n                    <div class="form-section">\n                        <label class="form-label">').concat(n.audience.label,'</label>\n                        <select id="style-audience" class="form-control">\n                            ').concat(n.audience.options.map(function(t){return'\n                                <option value="'.concat(t.value,'" ').concat(r.audience===t.value?"selected":"",">\n                                    ").concat(t.label," - ").concat(t.description,"\n                                </option>\n                            ")}).join(""),'\n                        </select>\n                    </div>\n\n                    \x3c!--  --\x3e\n                    <div class="form-section">\n                        <label class="form-label">').concat(n.language.label,'</label>\n                        <select id="style-language" class="form-control">\n                            ').concat(n.language.options.map(function(t){return'\n                                <option value="'.concat(t.value,'" ').concat(r.language===t.value?"selected":"",">\n                                    ").concat(t.label," - ").concat(t.description,"\n                                </option>\n                            ")}).join(""),'\n                        </select>\n                    </div>\n                </div>\n                <div class="modal-footer">\n                    <button class="btn-secondary cancel-modal"></button>\n                    <button class="btn-primary save-style"></button>\n                </div>\n            </div>\n        '),document.body.appendChild(e);var o=e.querySelector("#style-preset"),a=e.querySelector("#style-length"),s=e.querySelector("#style-custom-length"),l=e.querySelector(".close-modal"),c=e.querySelector(".cancel-modal"),h=e.querySelector(".save-style"),u=e.querySelector(".modal-overlay");o.addEventListener("change",function(){var t=we(ve().m(function t(n){var r;return ve().w(function(t){for(;;)switch(t.n){case 0:n.target.value&&(r=i.find(function(t){return t.id===n.target.value}))&&(e.querySelector("#style-tone").value=r.style.tone,e.querySelector("#style-length").value=r.style.length,e.querySelector("#style-audience").value=r.style.audience,e.querySelector("#style-language").value=r.style.language);case 1:return t.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()),a.addEventListener("change",function(t){s.style.display="custom"===t.target.value?"block":"none"});var d=function(){return e.remove()};l.addEventListener("click",d),c.addEventListener("click",d),u.addEventListener("click",d),h.addEventListener("click",we(ve().m(function n(){var r;return ve().w(function(n){for(;;)switch(n.n){case 0:return r={tone:e.querySelector("#style-tone").value,length:e.querySelector("#style-length").value,audience:e.querySelector("#style-audience").value,language:e.querySelector("#style-language").value,customLength:e.querySelector("#style-custom-length").value||null},n.n=1,t.styleController.setStyle(r);case 1:t.updateStyleSummary(),t.showNotification("","success"),d();case 2:return n.a(2)}},n)})))}else this.showNotification("","error")}},{key:"updateStyleSummary",value:function(){var t;if(this.styleController){var e=null===(t=this.element)||void 0===t?void 0:t.querySelector("#style-summary");e&&(e.textContent=this.styleController.getStyleSummary())}}},{key:"generateId",value:function(){return"msg-"+Math.random().toString(36).substr(2,9)}}],e&&Be(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,s,l,c,h,u,d,p}();function _e(t){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_e(t)}function Ee(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=Oe(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0,i=function(){};return{s:i,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,o=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||Oe(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Me(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Le(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Me(Object(n),!0).forEach(function(e){Pe(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Oe(t,e){if(t){if("string"==typeof t)return De(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?De(t,e):void 0}}function De(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function Pe(t,e,n){return(e=Ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fe(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return je(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(je(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,je(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,je(u,"constructor",c),je(c,"constructor",l),l.displayName="GeneratorFunction",je(c,i,"GeneratorFunction"),je(u),je(u,i,"Generator"),je(u,r,function(){return this}),je(u,"toString",function(){return"[object Generator]"}),(Fe=function(){return{w:o,m:d}})()}function je(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}je=function(t,e,n,r){function o(e,n){je(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},je(t,e,n,r)}function ze(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function $e(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){ze(o,r,i,a,s,"next",t)}function s(t){ze(o,r,i,a,s,"throw",t)}a(void 0)})}}function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ne(r.key),r)}}function Ne(t){var e=function(t){if("object"!=_e(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==_e(e)?e:e+""}var qe=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageKey="sightedit_prompt_templates",this.templates=[],this.initialized=!1},e=[{key:"init",value:(c=$e(Fe().m(function t(){var e;return Fe().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!this.initialized){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,this.loadTemplates();case 2:this.initialized=!0,console.log("PromptManager initialized"),t.n=4;break;case 3:throw t.p=3,e=t.v,console.error("Failed to initialize PromptManager:",e),e;case 4:return t.a(2)}},t,this,[[1,3]])})),function(){return c.apply(this,arguments)})},{key:"loadTemplates",value:(l=$e(Fe().m(function t(){var e,n,r;return Fe().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,chrome.storage.local.get(this.storageKey);case 1:if(e=t.v,!(n=e[this.storageKey])||!Array.isArray(n)){t.n=2;break}this.templates=n,t.n=3;break;case 2:return this.templates=this.getDefaultTemplates(),t.n=3,this.saveAllTemplates();case 3:console.log("Loaded ".concat(this.templates.length," prompt templates")),t.n=5;break;case 4:t.p=4,r=t.v,console.error("Failed to load templates:",r),this.templates=this.getDefaultTemplates();case 5:return t.a(2)}},t,this,[[0,4]])})),function(){return l.apply(this,arguments)})},{key:"saveAllTemplates",value:(s=$e(Fe().m(function t(){var e;return Fe().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,chrome.storage.local.set(Pe({},this.storageKey,this.templates));case 1:t.n=3;break;case 2:throw t.p=2,e=t.v,console.error("Failed to save templates:",e),e;case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return s.apply(this,arguments)})},{key:"createTemplate",value:(a=$e(Fe().m(function t(e){var n;return Fe().w(function(t){for(;;)switch(t.n){case 0:return n={id:this.generateId(),name:e.name||"",description:e.description||"",category:e.category||"",prompt:e.prompt||"",variables:e.variables||[],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:e.isFavorite||!1},this.templates.push(n),t.n=1,this.saveAllTemplates();case 1:return t.a(2,n)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"getTemplate",value:function(t){return this.templates.find(function(e){return e.id===t})||null}},{key:"getAllTemplates",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=function(t){return function(t){if(Array.isArray(t))return De(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||Oe(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(this.templates);if(t.category&&(e=e.filter(function(e){return e.category===t.category})),t.favoritesOnly&&(e=e.filter(function(t){return t.isFavorite})),t.query){var n=t.query.toLowerCase();e=e.filter(function(t){return t.name.toLowerCase().includes(n)||t.description.toLowerCase().includes(n)||t.prompt.toLowerCase().includes(n)})}return"name"===t.sortBy?e.sort(function(t,e){return t.name.localeCompare(e.name)}):"usageCount"===t.sortBy?e.sort(function(t,e){return e.usageCount-t.usageCount}):"lastUsed"===t.sortBy?e.sort(function(t,e){return e.lastUsed-t.lastUsed}):e.sort(function(t,e){return e.updatedAt-t.updatedAt}),e}},{key:"updateTemplate",value:(o=$e(Fe().m(function t(e,n){var r;return Fe().w(function(t){for(;;)switch(t.n){case 0:if(-1!==(r=this.templates.findIndex(function(t){return t.id===e}))){t.n=1;break}return t.a(2,null);case 1:return this.templates[r]=Le(Le(Le({},this.templates[r]),n),{},{id:e,updatedAt:Date.now()}),t.n=2,this.saveAllTemplates();case 2:return t.a(2,this.templates[r])}},t,this)})),function(t,e){return o.apply(this,arguments)})},{key:"deleteTemplate",value:(i=$e(Fe().m(function t(e){var n;return Fe().w(function(t){for(;;)switch(t.n){case 0:if(-1!==(n=this.templates.findIndex(function(t){return t.id===e}))){t.n=1;break}return t.a(2,!1);case 1:return this.templates.splice(n,1),t.n=2,this.saveAllTemplates();case 2:return t.a(2,!0)}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"getCategories",value:function(){var t=new Set(this.templates.map(function(t){return t.category}));return Array.from(t).sort()}},{key:"getTemplatesByCategory",value:function(t){return this.templates.filter(function(e){return e.category===t})}},{key:"getFavorites",value:function(){return this.templates.filter(function(t){return t.isFavorite})}},{key:"parseVariables",value:function(t){for(var e,n=/\{\{([^}]+)\}\}/g,r=[];null!==(e=n.exec(t));){var i=e[1].trim();r.includes(i)||r.push(i)}return r}},{key:"applyTemplate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getTemplate(t);if(!n)throw new Error("Template not found: ".concat(t));for(var r=n.prompt,i=0,o=Object.entries(e);i<o.length;i++){var a=Te(o[i],2),s=a[0],l=a[1],c=new RegExp("\\{\\{\\s*".concat(s,"\\s*\\}\\}"),"g");r=r.replace(c,l)}return this.updateUsageStats(t),r}},{key:"updateUsageStats",value:(r=$e(Fe().m(function t(e){var n;return Fe().w(function(t){for(;;)switch(t.n){case 0:if(n=this.getTemplate(e)){t.n=1;break}return t.a(2);case 1:return n.usageCount=(n.usageCount||0)+1,n.lastUsed=Date.now(),t.n=2,this.saveAllTemplates();case 2:return t.a(2)}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"getTemplateVariables",value:function(t){var e=this.getTemplate(t);return e&&e.variables||[]}},{key:"exportTemplates",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=e&&e.length>0?this.templates.filter(function(t){return e.includes(t.id)}):this.templates;var n={version:"1.0",exportedAt:Date.now(),templates:t};return JSON.stringify(n,null,2)}},{key:"importTemplates",value:(n=$e(Fe().m(function t(e){var n,r,i,o,a,s,l,c,h,u,d,p=arguments;return Fe().w(function(t){for(;;)switch(t.p=t.n){case 0:if(n=!(p.length>1&&void 0!==p[1])||p[1],t.p=1,(r=JSON.parse(e)).templates&&Array.isArray(r.templates)){t.n=2;break}throw new Error("Invalid format: templates array not found");case 2:i=0,o=0,a=Ee(r.templates),t.p=3,a.s();case 4:if((s=a.n()).done){t.n=8;break}if(l=s.value,!(c=this.getTemplate(l.id))||!n){t.n=5;break}return o++,t.a(3,7);case 5:if(n||!c){t.n=6;break}return t.n=6,this.deleteTemplate(l.id);case 6:h=Le(Le({},l),{},{id:this.generateId(),createdAt:Date.now(),updatedAt:Date.now()}),this.templates.push(h),i++;case 7:t.n=4;break;case 8:t.n=10;break;case 9:t.p=9,u=t.v,a.e(u);case 10:return t.p=10,a.f(),t.f(10);case 11:return t.n=12,this.saveAllTemplates();case 12:return t.a(2,{imported:i,skipped:o});case 13:throw t.p=13,d=t.v,console.error("Failed to import templates:",d),d;case 14:return t.a(2)}},t,this,[[3,9,10,11],[1,13]])})),function(t){return n.apply(this,arguments)})},{key:"getDefaultTemplates",value:function(){return[{id:"default-blog-post",name:"",description:"",category:"",prompt:"{{topic}}:\n\n1. \n2. \n3. \n\n: {{audience}}\n: {{length}}\n: {{tone}}",variables:[{name:"topic",type:"text",description:"",required:!0},{name:"audience",type:"select",description:"",options:["","",""],defaultValue:""},{name:"length",type:"number",description:"",defaultValue:"1000"},{name:"tone",type:"select",description:"",options:["","",""],defaultValue:""}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-seo-optimize",name:"SEO",description:"SEO",category:"",prompt:"SEO:\n\n{{text}}\n\n: {{keywords}}\n120-160",variables:[{name:"text",type:"textarea",description:"",required:!0},{name:"keywords",type:"text",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-outline",name:"",description:"",category:"",prompt:"{{topic}}{{sections}}\n\n:\n- \n- 3\n- \n\n",variables:[{name:"topic",type:"text",description:"",required:!0},{name:"sections",type:"number",description:"",defaultValue:"5"}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-rewrite",name:"",description:"",category:"",prompt:"{{style}}:\n\n{{text}}\n\n: {{length}}",variables:[{name:"text",type:"textarea",description:"",required:!0},{name:"style",type:"select",description:"",options:["","","","",""],defaultValue:""},{name:"length",type:"select",description:"",options:["","",""],defaultValue:""}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-expand",name:"",description:"",category:"",prompt:"{{length}}:\n\n{{idea}}\n\n",variables:[{name:"idea",type:"textarea",description:"",required:!0},{name:"length",type:"number",description:"",defaultValue:"500"}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-summarize",name:"",description:"",category:"",prompt:"{{length}}:\n\n{{text}}\n\n",variables:[{name:"text",type:"textarea",description:"",required:!0},{name:"length",type:"select",description:"",options:["1","3","1",""],defaultValue:"3"}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-email",name:"",description:"",category:"",prompt:"{{tone}}:\n\n: {{recipient}}\n: {{subject}}\n: {{points}}\n\n",variables:[{name:"recipient",type:"text",description:"",required:!0},{name:"subject",type:"text",description:"",required:!0},{name:"points",type:"textarea",description:"",required:!0},{name:"tone",type:"select",description:"",options:["","",""],defaultValue:""}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-social-post",name:"SNS",description:"SNS",category:"",prompt:"{{platform}}:\n\n: {{topic}}\n: {{goal}}\n: {{limit}}\n\n",variables:[{name:"platform",type:"select",description:"",options:["Twitter/X","Facebook","Instagram","LinkedIn"],defaultValue:"Twitter/X"},{name:"topic",type:"text",description:"",required:!0},{name:"goal",type:"select",description:"",options:["","","",""],defaultValue:""},{name:"limit",type:"number",description:"",defaultValue:"280"}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-improve",name:"",description:"",category:"",prompt:":\n\n{{text}}\n\n:\n- \n- \n- \n- \n\n",variables:[{name:"text",type:"textarea",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-brainstorm",name:"",description:"",category:"",prompt:"{{topic}}{{count}}\n\n:\n- \n- 2-3\n- \n\n",variables:[{name:"topic",type:"text",description:"",required:!0},{name:"count",type:"number",description:"",defaultValue:"10"}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-continue-writing",name:"",description:"",category:"",prompt:":\n\n{{text}}\n\n",variables:[{name:"text",type:"textarea",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-paraphrase",name:"",description:"",category:"",prompt:":\n\n{{text}}\n\n",variables:[{name:"text",type:"textarea",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-code-review",name:"",description:"",category:"",prompt:"{{language}}:\n\n```{{language}}\n{{code}}\n```\n\n:\n- \n- \n- \n- \n- ",variables:[{name:"language",type:"text",description:"",defaultValue:"javascript"},{name:"code",type:"textarea",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-bug-fix",name:"",description:"",category:"",prompt:":\n\n```{{language}}\n{{code}}\n```\n\n: {{error}}\n\n: {{expected}}\n\n",variables:[{name:"language",type:"text",description:"",defaultValue:"javascript"},{name:"code",type:"textarea",description:"",required:!0},{name:"error",type:"text",description:"",required:!0},{name:"expected",type:"text",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-refactor",name:"",description:"",category:"",prompt:"{{language}}:\n\n```{{language}}\n{{code}}\n```\n\n:\n- \n- \n- \n- \n\n",variables:[{name:"language",type:"text",description:"",defaultValue:"javascript"},{name:"code",type:"textarea",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-test-generate",name:"",description:"",category:"",prompt:"{{language}}{{framework}}:\n\n```{{language}}\n{{code}}\n```\n\n:\n- \n- \n- ",variables:[{name:"language",type:"text",description:"",defaultValue:"javascript"},{name:"framework",type:"text",description:"",defaultValue:"Jest"},{name:"code",type:"textarea",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-document-code",name:"",description:"",category:"",prompt:"{{language}}:\n\n```{{language}}\n{{code}}\n```\n\n:\n- /\n- \n- \n- \n- ",variables:[{name:"language",type:"text",description:"",defaultValue:"javascript"},{name:"code",type:"textarea",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-translate-ja-en",name:"",description:"",category:"",prompt:":\n\n{{text}}\n\n: {{style}}",variables:[{name:"text",type:"textarea",description:"",required:!0},{name:"style",type:"select",description:"",options:["","",""],defaultValue:""}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-translate-en-ja",name:"",description:"",category:"",prompt:":\n\n{{text}}\n\n: {{style}}",variables:[{name:"text",type:"textarea",description:"",required:!0},{name:"style",type:"select",description:"",options:["","",""],defaultValue:""}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-localize",name:"",description:"",category:"",prompt:"{{target}}:\n\n{{text}}\n\n",variables:[{name:"text",type:"textarea",description:"",required:!0},{name:"target",type:"text",description:"/",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-multilingual",name:"",description:"",category:"",prompt:"{{languages}}:\n\n{{text}}\n\n",variables:[{name:"text",type:"textarea",description:"",required:!0},{name:"languages",type:"text",description:"",defaultValue:", , "}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-simplify-language",name:"",description:"",category:"",prompt:"{{level}}:\n\n{{text}}\n\n",variables:[{name:"text",type:"textarea",description:"",required:!0},{name:"level",type:"select",description:"",options:["","",""],defaultValue:""}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-analyze",name:"",description:"",category:"",prompt:":\n\n{{text}}\n\n:\n- \n- \n- \n- \n- ",variables:[{name:"text",type:"textarea",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-qa",name:"Q&A",description:"Q&A",category:"",prompt:"{{count}}:\n\n{{text}}\n\nFAQ",variables:[{name:"text",type:"textarea",description:"",required:!0},{name:"count",type:"number",description:"Q&A",defaultValue:"5"}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-meeting-notes",name:"",description:"",category:"",prompt:":\n\n{{notes}}\n\n:\n- \n- \n- \n- \n- ",variables:[{name:"notes",type:"textarea",description:"",required:!0}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-presentation",name:"",description:"",category:"",prompt:"{{topic}}:\n\n: {{duration}}\n: {{audience}}\n\n:\n- \n- \n- ",variables:[{name:"topic",type:"text",description:"",required:!0},{name:"duration",type:"number",description:"",defaultValue:"10"},{name:"audience",type:"text",description:"",defaultValue:""}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1},{id:"default-comparison",name:"",description:"",category:"",prompt:"{{items}}:\n\n: {{criteria}}\n\n:\n- \n- \n- \n- \n\nMarkdown",variables:[{name:"items",type:"text",description:"",required:!0},{name:"criteria",type:"text",description:"",defaultValue:", , "}],createdAt:Date.now(),updatedAt:Date.now(),lastUsed:0,usageCount:0,isFavorite:!1}]}},{key:"generateId",value:function(){return"prompt-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}}],e&&Re(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,s,l,c}(),We=null;function Ke(){return We||(We=new qe),We}function Ue(t){return Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ue(t)}function He(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Ge(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(Ge(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Ge(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,Ge(u,"constructor",c),Ge(c,"constructor",l),l.displayName="GeneratorFunction",Ge(c,i,"GeneratorFunction"),Ge(u),Ge(u,i,"Generator"),Ge(u,r,function(){return this}),Ge(u,"toString",function(){return"[object Generator]"}),(He=function(){return{w:o,m:d}})()}function Ge(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Ge=function(t,e,n,r){function o(e,n){Ge(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},Ge(t,e,n,r)}function Ye(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Ve(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Ye(o,r,i,a,s,"next",t)}function s(t){Ye(o,r,i,a,s,"throw",t)}a(void 0)})}}function Qe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xe(r.key),r)}}function Xe(t){var e=function(t){if("object"!=Ue(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Ue(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Ue(e)?e:e+""}var Ze=function(){return t=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.promptManager=e,this.modalElement=null,this.currentCategory="all",this.searchQuery="",this.onExecuteCallback=null},e=[{key:"show",value:(c=Ve(He().m(function t(){var e,n=arguments;return He().w(function(t){for(;;)switch(t.n){case 0:return e=n.length>0&&void 0!==n[0]?n[0]:null,this.onExecuteCallback=e,this.modalElement&&this.modalElement.remove(),this.modalElement=this.createModal(),document.body.appendChild(this.modalElement),this.setupEventListeners(),t.n=1,this.renderPrompts();case 1:return t.a(2)}},t,this)})),function(){return c.apply(this,arguments)})},{key:"hide",value:function(){this.modalElement&&(this.modalElement.remove(),this.modalElement=null)}},{key:"createModal",value:function(){var t=document.createElement("div");return t.className="prompt-library-modal",t.id="prompt-library-modal",t.innerHTML='\n            <div class="prompt-library-overlay"></div>\n            <div class="prompt-library-container">\n                <div class="prompt-library-header">\n                    <h3> </h3>\n                    <div class="header-actions">\n                        <button class="btn-primary" id="new-prompt-btn">\n                            <span class="icon">+</span>\n                            <span></span>\n                        </button>\n                        <button class="btn-icon" id="import-prompt-btn" title="">\n                            <span class="icon"></span>\n                        </button>\n                        <button class="btn-icon" id="export-prompt-btn" title="">\n                            <span class="icon"></span>\n                        </button>\n                        <button class="btn-close" id="close-prompt-library"></button>\n                    </div>\n                </div>\n\n                <div class="prompt-library-content">\n                    <div class="prompt-sidebar">\n                        <div class="sidebar-header"></div>\n                        <ul class="category-list" id="category-list">\n                            <li class="category-item active" data-category="all">\n                                <span class="icon"></span>\n                                <span></span>\n                            </li>\n                            <li class="category-item" data-category="favorites">\n                                <span class="icon"></span>\n                                <span></span>\n                            </li>\n                            <li class="category-divider"></li>\n                            \x3c!--  --\x3e\n                        </ul>\n                    </div>\n\n                    <div class="prompt-main">\n                        <div class="prompt-search-bar">\n                            <input\n                                type="search"\n                                id="prompt-search"\n                                placeholder="..."\n                                class="prompt-search-input"\n                            >\n                            <select id="sort-by" class="sort-select">\n                                <option value="updated"></option>\n                                <option value="name"></option>\n                                <option value="usage"></option>\n                            </select>\n                        </div>\n\n                        <div class="prompt-grid" id="prompt-grid">\n                            \x3c!--  --\x3e\n                        </div>\n\n                        <div class="prompt-empty" id="prompt-empty" style="display: none;">\n                            <div class="empty-icon"></div>\n                            <div class="empty-text"></div>\n                            <button class="btn-secondary" id="empty-new-prompt"></button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        ',t}},{key:"setupEventListeners",value:function(){var t=this,e=this.modalElement.querySelector("#close-prompt-library"),n=this.modalElement.querySelector(".prompt-library-overlay");e.addEventListener("click",function(){return t.hide()}),n.addEventListener("click",function(){return t.hide()});var r=this.modalElement.querySelector("#new-prompt-btn"),i=this.modalElement.querySelector("#empty-new-prompt");r.addEventListener("click",function(){return t.showEditDialog(null)}),i&&i.addEventListener("click",function(){return t.showEditDialog(null)});var o=this.modalElement.querySelector("#import-prompt-btn"),a=this.modalElement.querySelector("#export-prompt-btn");o.addEventListener("click",function(){return t.importPrompts()}),a.addEventListener("click",function(){return t.exportPrompts()}),this.modalElement.querySelector("#prompt-search").addEventListener("input",function(e){t.searchQuery=e.target.value,t.renderPrompts()}),this.modalElement.querySelector("#sort-by").addEventListener("change",function(){return t.renderPrompts()});var s=this.modalElement.querySelector("#category-list");s.addEventListener("click",function(e){var n=e.target.closest(".category-item");n&&(s.querySelectorAll(".category-item").forEach(function(t){t.classList.remove("active")}),n.classList.add("active"),t.currentCategory=n.dataset.category,t.renderPrompts())})}},{key:"renderPrompts",value:(l=Ve(He().m(function t(){var e,n,r,i,o=this;return He().w(function(t){for(;;)switch(t.n){case 0:this.renderCategories(),e=this.modalElement.querySelector("#sort-by").value,n=this.promptManager.getAllTemplates({category:"all"===this.currentCategory||"favorites"===this.currentCategory?null:this.currentCategory,favoritesOnly:"favorites"===this.currentCategory,query:this.searchQuery,sortBy:"updated"===e?"updatedAt":"name"===e?"name":"usageCount"}),r=this.modalElement.querySelector("#prompt-grid"),i=this.modalElement.querySelector("#prompt-empty"),0===n.length?(r.style.display="none",i.style.display="flex"):(r.style.display="grid",i.style.display="none",r.innerHTML=n.map(function(t){return o.createPromptCard(t)}).join(""),this.setupCardEventListeners());case 1:return t.a(2)}},t,this)})),function(){return l.apply(this,arguments)})},{key:"renderCategories",value:function(){var t=this,e=this.promptManager.getCategories(),n=this.modalElement.querySelector("#category-list");n.querySelectorAll('.category-item[data-category]:not([data-category="all"]):not([data-category="favorites"])').forEach(function(t){return t.remove()});var r=n.querySelector(".category-divider");e.forEach(function(e){var i=document.createElement("li");i.className="category-item",i.dataset.category=e,i.innerHTML='\n                <span class="icon">'.concat(t.getCategoryIcon(e),"</span>\n                <span>").concat(e,"</span>\n            "),n.insertBefore(i,r.nextSibling)})}},{key:"getCategoryIcon",value:function(t){return{:"",:"",:"",:""}[t]||""}},{key:"createPromptCard",value:function(t){var e=t.lastUsed?this.formatDate(new Date(t.lastUsed)):"",n=t.isFavorite?"favorite-active":"";return'\n            <div class="prompt-card" data-id="'.concat(t.id,'">\n                <div class="prompt-card-header">\n                    <div class="prompt-category">').concat(t.category,'</div>\n                    <button class="btn-favorite ').concat(n,'" data-id="').concat(t.id,'">\n                        ').concat(t.isFavorite?"":"",'\n                    </button>\n                </div>\n\n                <div class="prompt-card-body">\n                    <h4 class="prompt-title">').concat(this.escapeHtml(t.name),'</h4>\n                    <p class="prompt-description">').concat(this.escapeHtml(t.description),'</p>\n\n                    <div class="prompt-variables">\n                        ').concat(t.variables&&t.variables.length>0?'<span class="variable-badge">: '.concat(t.variables.length,"</span>"):"",'\n                    </div>\n                </div>\n\n                <div class="prompt-card-footer">\n                    <div class="prompt-stats">\n                        <span class="stat">: ').concat(t.usageCount||0,'</span>\n                        <span class="stat">: ').concat(e,'</span>\n                    </div>\n                    <div class="prompt-actions">\n                        <button class="btn-icon btn-execute" data-id="').concat(t.id,'" title="">\n                            <span></span>\n                        </button>\n                        <button class="btn-icon btn-edit" data-id="').concat(t.id,'" title="">\n                            <span></span>\n                        </button>\n                        <button class="btn-icon btn-delete" data-id="').concat(t.id,'" title="">\n                            <span></span>\n                        </button>\n                    </div>\n                </div>\n            </div>\n        ')}},{key:"setupCardEventListeners",value:function(){var t=this,e=this.modalElement.querySelector("#prompt-grid");e.querySelectorAll(".btn-execute").forEach(function(e){e.addEventListener("click",function(n){n.stopPropagation();var r=e.dataset.id;t.executePrompt(r)})}),e.querySelectorAll(".btn-edit").forEach(function(e){e.addEventListener("click",function(n){n.stopPropagation();var r=e.dataset.id;t.showEditDialog(r)})}),e.querySelectorAll(".btn-delete").forEach(function(e){e.addEventListener("click",function(n){n.stopPropagation();var r=e.dataset.id;t.deletePrompt(r)})}),e.querySelectorAll(".btn-favorite").forEach(function(e){e.addEventListener("click",function(n){n.stopPropagation();var r=e.dataset.id;t.toggleFavorite(r)})})}},{key:"executePrompt",value:(s=Ve(He().m(function t(e){var n,r,i;return He().w(function(t){for(;;)switch(t.n){case 0:if(n=this.promptManager.getTemplate(e)){t.n=1;break}return this.showNotification("","error"),t.a(2);case 1:if(r={},!(n.variables&&n.variables.length>0)){t.n=3;break}return t.n=2,this.showVariableInputDialog(n);case 2:if(null!==(r=t.v)){t.n=3;break}return t.a(2);case 3:i=this.promptManager.applyTemplate(e,r),this.onExecuteCallback&&this.onExecuteCallback(i,n),this.hide();case 4:return t.a(2)}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"deletePrompt",value:(a=Ve(He().m(function t(e){var n;return He().w(function(t){for(;;)switch(t.n){case 0:if(n=this.promptManager.getTemplate(e)){t.n=1;break}return t.a(2);case 1:if(!confirm("".concat(n.name,""))){t.n=3;break}return t.n=2,this.promptManager.deleteTemplate(e);case 2:return this.showNotification("","success"),t.n=3,this.renderPrompts();case 3:return t.a(2)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"toggleFavorite",value:(o=Ve(He().m(function t(e){var n;return He().w(function(t){for(;;)switch(t.n){case 0:if(n=this.promptManager.getTemplate(e)){t.n=1;break}return t.a(2);case 1:return t.n=2,this.promptManager.updateTemplate(e,{isFavorite:!n.isFavorite});case 2:return t.n=3,this.renderPrompts();case 3:return t.a(2)}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"showEditDialog",value:function(t){var e=this,n=t?this.promptManager.getTemplate(t):null,r=!n,i=document.createElement("div");i.className="prompt-edit-dialog",i.innerHTML='\n            <div class="dialog-overlay"></div>\n            <div class="dialog-container">\n                <div class="dialog-header">\n                    <h3>'.concat(r?"":"",'</h3>\n                    <button class="btn-close" id="close-edit-dialog"></button>\n                </div>\n\n                <div class="dialog-content">\n                    <div class="form-group">\n                        <label> *</label>\n                        <input type="text" id="edit-name" class="form-input"\n                            value="').concat(n?this.escapeHtml(n.name):"",'"\n                            placeholder=": ">\n                    </div>\n\n                    <div class="form-group">\n                        <label></label>\n                        <input type="text" id="edit-description" class="form-input"\n                            value="').concat(n?this.escapeHtml(n.description):"",'"\n                            placeholder="">\n                    </div>\n\n                    <div class="form-group">\n                        <label> *</label>\n                        <select id="edit-category" class="form-select">\n                            <option value="" ').concat(""===(null==n?void 0:n.category)?"selected":"",'></option>\n                            <option value="" ').concat(""===(null==n?void 0:n.category)?"selected":"",'></option>\n                            <option value="" ').concat(""===(null==n?void 0:n.category)?"selected":"",'></option>\n                            <option value="" ').concat(""===(null==n?void 0:n.category)?"selected":"",'></option>\n                        </select>\n                    </div>\n\n                    <div class="form-group">\n                        <label> *</label>\n                        <textarea id="edit-prompt" class="form-textarea" rows="8"\n                            placeholder="...  {{variable}} ">').concat(n?this.escapeHtml(n.prompt):"",'</textarea>\n                        <div class="form-hint"> {{}} </div>\n                    </div>\n\n                    <div class="form-group">\n                        <label></label>\n                        <div id="variables-list" class="variables-list">\n                            \x3c!--  --\x3e\n                        </div>\n                        <button class="btn-secondary" id="add-variable-btn">+ </button>\n                    </div>\n                </div>\n\n                <div class="dialog-footer">\n                    <button class="btn-secondary" id="cancel-edit"></button>\n                    <button class="btn-primary" id="save-prompt">').concat(r?"":"","</button>\n                </div>\n            </div>\n        "),document.body.appendChild(i);var o=i.querySelector(".dialog-overlay"),a=i.querySelector("#close-edit-dialog"),s=i.querySelector("#cancel-edit"),l=i.querySelector("#save-prompt"),c=function(){return i.remove()};o.addEventListener("click",c),a.addEventListener("click",c),s.addEventListener("click",c),l.addEventListener("click",Ve(He().m(function n(){var o,a,s,l,h,u;return He().w(function(n){for(;;)switch(n.p=n.n){case 0:if(o=i.querySelector("#edit-name").value.trim(),a=i.querySelector("#edit-description").value.trim(),s=i.querySelector("#edit-category").value,l=i.querySelector("#edit-prompt").value.trim(),o&&l){n.n=1;break}return e.showNotification("","error"),n.a(2);case 1:if(h={name:o,description:a,category:s,prompt:l,variables:[]},n.p=2,!r){n.n=4;break}return n.n=3,e.promptManager.createTemplate(h);case 3:e.showNotification("","success"),n.n=6;break;case 4:return n.n=5,e.promptManager.updateTemplate(t,h);case 5:e.showNotification("","success");case 6:return c(),n.n=7,e.renderPrompts();case 7:n.n=9;break;case 8:n.p=8,u=n.v,console.error("Failed to save prompt:",u),e.showNotification("","error");case 9:return n.a(2)}},n,null,[[2,8]])})))}},{key:"showVariableInputDialog",value:(i=Ve(He().m(function t(e){var n=this;return He().w(function(t){for(;;)if(0===t.n)return t.a(2,new Promise(function(t){var r=document.createElement("div");r.className="variable-input-dialog",r.innerHTML='\n                <div class="dialog-overlay"></div>\n                <div class="dialog-container">\n                    <div class="dialog-header">\n                        <h3></h3>\n                        <div class="dialog-subtitle">'.concat(n.escapeHtml(e.name),'</div>\n                    </div>\n\n                    <div class="dialog-content">\n                        <form id="variable-form">\n                            ').concat(e.variables.map(function(t){return n.createVariableInput(t)}).join(""),'\n                        </form>\n                    </div>\n\n                    <div class="dialog-footer">\n                        <button class="btn-secondary" id="cancel-variables"></button>\n                        <button class="btn-primary" id="confirm-variables"></button>\n                    </div>\n                </div>\n            '),document.body.appendChild(r);var i=r.querySelector("#cancel-variables"),o=r.querySelector("#confirm-variables"),a=r.querySelector("#variable-form");i.addEventListener("click",function(){r.remove(),t(null)}),o.addEventListener("click",function(){var n={};e.variables.forEach(function(t){var e=a.querySelector('[name="'.concat(t.name,'"]'));n[t.name]=e.value||t.defaultValue||""}),r.remove(),t(n)}),a.addEventListener("submit",function(t){t.preventDefault(),o.click()})}))},t)})),function(t){return i.apply(this,arguments)})},{key:"createVariableInput",value:function(t){var e=t.required?"*":"",n=t.defaultValue||"",r="";switch(t.type){case"textarea":r='<textarea name="'.concat(t.name,'" class="form-textarea" rows="4"\n                    ').concat(t.required?"required":"",">").concat(n,"</textarea>");break;case"number":r='<input type="number" name="'.concat(t.name,'" class="form-input"\n                    value="').concat(n,'" ').concat(t.required?"required":"",">");break;case"select":var i=t.options||[];r='<select name="'.concat(t.name,'" class="form-select"\n                    ').concat(t.required?"required":"",">\n                    ").concat(i.map(function(t){return'<option value="'.concat(t,'" ').concat(t===n?"selected":"",">").concat(t,"</option>")}).join(""),"\n                </select>");break;default:r='<input type="text" name="'.concat(t.name,'" class="form-input"\n                    value="').concat(n,'" ').concat(t.required?"required":"",">")}return'\n            <div class="form-group">\n                <label>'.concat(this.escapeHtml(t.description||t.name)," ").concat(e,"</label>\n                ").concat(r,"\n            </div>\n        ")}},{key:"exportPrompts",value:(r=Ve(He().m(function t(){var e,n,r,i;return He().w(function(t){for(;;)switch(t.n){case 0:try{e=this.promptManager.exportTemplates(),n=new Blob([e],{type:"application/json"}),r=URL.createObjectURL(n),(i=document.createElement("a")).href=r,i.download="sightedit-prompts-".concat(Date.now(),".json"),i.click(),URL.revokeObjectURL(r),this.showNotification("","success")}catch(t){console.error("Failed to export prompts:",t),this.showNotification("","error")}case 1:return t.a(2)}},t,this)})),function(){return r.apply(this,arguments)})},{key:"importPrompts",value:(n=Ve(He().m(function t(){var e,n=this;return He().w(function(t){for(;;)switch(t.n){case 0:(e=document.createElement("input")).type="file",e.accept=".json",e.addEventListener("change",function(){var t=Ve(He().m(function t(e){var r,i,o,a;return He().w(function(t){for(;;)switch(t.p=t.n){case 0:if(r=e.target.files[0]){t.n=1;break}return t.a(2);case 1:return t.p=1,t.n=2,r.text();case 2:return i=t.v,t.n=3,n.promptManager.importTemplates(i,!0);case 3:return o=t.v,n.showNotification("".concat(o.imported,"").concat(o.skipped,""),"success"),t.n=4,n.renderPrompts();case 4:t.n=6;break;case 5:t.p=5,a=t.v,console.error("Failed to import prompts:",a),n.showNotification("","error");case 6:return t.a(2)}},t,null,[[1,5]])}));return function(e){return t.apply(this,arguments)}}()),e.click();case 1:return t.a(2)}},t)})),function(){return n.apply(this,arguments)})},{key:"formatDate",value:function(t){var e=new Date-t,n=Math.floor(e/6e4),r=Math.floor(e/36e5),i=Math.floor(e/864e5);return n<1?"":n<60?"".concat(n,""):r<24?"".concat(r,""):i<7?"".concat(i,""):t.toLocaleDateString("ja-JP",{month:"short",day:"numeric"})}},{key:"escapeHtml",value:function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}},{key:"showNotification",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.createElement("div");n.className="notification notification-".concat(e),n.textContent=t,n.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 12px 20px;\n            background: ".concat("error"===e?"#f44336":"success"===e?"#4caf50":"#2196f3",";\n            color: white;\n            border-radius: 4px;\n            z-index: 100000;\n            box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n        "),document.body.appendChild(n),setTimeout(function(){n.remove()},3e3)}}],e&&Qe(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,s,l,c}();function Je(t){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Je(t)}function tn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function en(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tn(Object(n),!0).forEach(function(e){nn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function nn(t,e,n){return(e=cn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return on(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(on(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,on(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,on(u,"constructor",c),on(c,"constructor",l),l.displayName="GeneratorFunction",on(c,i,"GeneratorFunction"),on(u),on(u,i,"Generator"),on(u,r,function(){return this}),on(u,"toString",function(){return"[object Generator]"}),(rn=function(){return{w:o,m:d}})()}function on(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}on=function(t,e,n,r){function o(e,n){on(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},on(t,e,n,r)}function an(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function sn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){an(o,r,i,a,s,"next",t)}function s(t){an(o,r,i,a,s,"throw",t)}a(void 0)})}}function ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cn(r.key),r)}}function cn(t){var e=function(t){if("object"!=Je(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Je(e)?e:e+""}var hn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.storageKey="sightedit_style_settings",this.currentStyle=this.getDefaultStyle(),this.initialized=!1},e=[{key:"init",value:(l=sn(rn().m(function t(){return rn().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.loadSettings();case 1:this.initialized=!0;case 2:return t.a(2)}},t,this)})),function(){return l.apply(this,arguments)})},{key:"getDefaultStyle",value:function(){return{tone:"casual",length:"standard",audience:"general",language:"ja",customLength:null,enabled:!1}}},{key:"getStyleDefinitions",value:function(){return{tone:{label:"",options:[{value:"formal",label:"",description:""},{value:"casual",label:"",description:""},{value:"technical",label:"",description:""},{value:"creative",label:"",description:""}]},length:{label:"",options:[{value:"short",label:"",description:""},{value:"standard",label:"",description:""},{value:"long",label:"",description:""},{value:"custom",label:"",description:""}]},audience:{label:"",options:[{value:"general",label:"",description:""},{value:"expert",label:"",description:""},{value:"beginner",label:"",description:""},{value:"child",label:"",description:""}]},language:{label:"",options:[{value:"ja",label:"",description:""},{value:"en",label:"",description:""},{value:"bilingual",label:"",description:""}]}}}},{key:"getStyle",value:function(){return en({},this.currentStyle)}},{key:"setStyle",value:(s=sn(rn().m(function t(e){return rn().w(function(t){for(;;)switch(t.n){case 0:return this.currentStyle=en(en({},this.currentStyle),e),t.n=1,this.saveSettings();case 1:return t.a(2)}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"setEnabled",value:(a=sn(rn().m(function t(e){return rn().w(function(t){for(;;)switch(t.n){case 0:return this.currentStyle.enabled=e,t.n=1,this.saveSettings();case 1:return t.a(2)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"isEnabled",value:function(){return this.currentStyle.enabled}},{key:"applyStyleToPrompt",value:function(t){if(!this.currentStyle.enabled)return t;var e=this.buildStyleInstructions();return e?"".concat(t,"\n\n---\n\n").concat(e):t}},{key:"buildStyleInstructions",value:function(){var t=[],e=this.currentStyle,n={formal:"",casual:"",technical:"",creative:""};e.tone&&n[e.tone]&&t.push(n[e.tone]);var r={short:"",standard:"",long:"",custom:e.customLength?"".concat(e.customLength,""):null};e.length&&r[e.length]&&t.push(r[e.length]);var i={general:"",expert:"",beginner:"",child:""};e.audience&&i[e.audience]&&t.push(i[e.audience]);var o={ja:"",en:"Please respond in English.",bilingual:""};return e.language&&o[e.language]&&t.push(o[e.language]),t.join("\n")}},{key:"getPresets",value:function(){return[{id:"blog-post",name:"",description:"",style:{tone:"casual",length:"long",audience:"general",language:"ja",enabled:!0}},{id:"technical-doc",name:"",description:"",style:{tone:"technical",length:"long",audience:"expert",language:"ja",enabled:!0}},{id:"business-email",name:"",description:"",style:{tone:"formal",length:"short",audience:"general",language:"ja",enabled:!0}},{id:"tutorial",name:"",description:"",style:{tone:"casual",length:"standard",audience:"beginner",language:"ja",enabled:!0}},{id:"creative-writing",name:"",description:"",style:{tone:"creative",length:"long",audience:"general",language:"ja",enabled:!0}}]}},{key:"applyPreset",value:(o=sn(rn().m(function t(e){var n;return rn().w(function(t){for(;;)switch(t.n){case 0:if(!(n=this.getPresets().find(function(t){return t.id===e}))){t.n=1;break}return t.n=1,this.setStyle(n.style);case 1:return t.a(2)}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"saveSettings",value:(i=sn(rn().m(function t(){var e;return rn().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,chrome.storage.local.set(nn({},this.storageKey,this.currentStyle));case 1:t.n=3;break;case 2:t.p=2,e=t.v,console.error("Failed to save style settings:",e);case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return i.apply(this,arguments)})},{key:"loadSettings",value:(r=sn(rn().m(function t(){var e,n;return rn().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,chrome.storage.local.get(this.storageKey);case 1:(e=t.v)[this.storageKey]&&(this.currentStyle=en(en({},this.getDefaultStyle()),e[this.storageKey])),t.n=3;break;case 2:t.p=2,n=t.v,console.error("Failed to load style settings:",n),this.currentStyle=this.getDefaultStyle();case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return r.apply(this,arguments)})},{key:"resetSettings",value:(n=sn(rn().m(function t(){return rn().w(function(t){for(;;)switch(t.n){case 0:return this.currentStyle=this.getDefaultStyle(),t.n=1,this.saveSettings();case 1:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"getStyleSummary",value:function(){var t=this;if(!this.currentStyle.enabled)return": ";var e=this.getStyleDefinitions(),n=[],r=e.tone.options.find(function(e){return e.value===t.currentStyle.tone});r&&n.push(r.label);var i=e.length.options.find(function(e){return e.value===t.currentStyle.length});i&&("custom"===this.currentStyle.length&&this.currentStyle.customLength?n.push("".concat(this.currentStyle.customLength,"")):n.push(i.label));var o=e.audience.options.find(function(e){return e.value===t.currentStyle.audience});o&&n.push(o.label);var a=e.language.options.find(function(e){return e.value===t.currentStyle.language});return a&&n.push(a.label),": ".concat(n.join(" / "))}}],e&&ln(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,s,l}(),un=null;function dn(){return un||(un=new hn),un}function pn(t){return pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pn(t)}function fn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||function(t,e){if(t){if("string"==typeof t)return gn(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?gn(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gn(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function mn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function An(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?mn(Object(n),!0).forEach(function(e){yn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function yn(t,e,n){return(e=xn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xn(r.key),r)}}function xn(t){var e=function(t){if("object"!=pn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==pn(e)?e:e+""}var vn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.templates=this.getTemplateDefinitions()},e=[{key:"getTemplateDefinitions",value:function(){return{"blog-post":{id:"blog-post",name:"",description:"SEO",icon:"",sections:[{id:"title",name:"",description:"",prompt:"SEO5:\n\n: {{topic}}\n: {{audience}}\n: {{keywords}}",variables:["topic","audience","keywords"]},{id:"intro",name:"",description:"",prompt:"200-300:\n\n: {{title}}\n: {{topic}}\n: {{audience}}\n\n",variables:["title","topic","audience"],dependsOn:["title"]},{id:"main-sections",name:"",description:"",prompt:"{{sections}}:\n\n: {{title}}\n: {{topic}}\n: {{intro}}\n\n##{{word_count}}",variables:["title","topic","intro","sections","word_count"],dependsOn:["title","intro"]},{id:"conclusion",name:"",description:"CTA",prompt:":\n\n: {{title}}\n: {{main_content_summary}}\n\nCTACall to Action200",variables:["title","main_content_summary"],dependsOn:["main-sections"]}],defaultVariables:{audience:"",sections:"3",word_count:"2000",keywords:""}},"technical-doc":{id:"technical-doc",name:"",description:"API",icon:"",sections:[{id:"overview",name:"",description:"",prompt:":\n\n: {{tech_name}}\n: {{purpose}}\n: {{audience}}\n\n:\n- \n- \n- \n- ",variables:["tech_name","purpose","audience"]},{id:"requirements",name:"",description:"",prompt:":\n\n: {{tech_name}}\n\n:\n- OS\n- /\n- \n- ",variables:["tech_name"],dependsOn:["overview"]},{id:"installation",name:"",description:"",prompt:":\n\n: {{tech_name}}\n: {{environment}}\n\n",variables:["tech_name","environment"],dependsOn:["requirements"]},{id:"usage",name:"",description:"",prompt:":\n\n: {{tech_name}}\n\n:\n- \n- 3\n- \n- ",variables:["tech_name"],dependsOn:["installation"]},{id:"api-reference",name:"API",description:"API",prompt:"API:\n\n: {{tech_name}}\n: {{main_features}}\n\nAPI/:\n- /\n- \n- \n- \n- ",variables:["tech_name","main_features"],dependsOn:["usage"]},{id:"troubleshooting",name:"",description:"",prompt:":\n\n: {{tech_name}}\n\n",variables:["tech_name"],dependsOn:["api-reference"]}],defaultVariables:{audience:"",environment:"Linux/macOS",main_features:""}},presentation:{id:"presentation",name:"",description:"",icon:"",sections:[{id:"title-slide",name:"",description:"",prompt:":\n\n: {{theme}}\n: {{audience}}\n: {{purpose}}\n\n:\n- \n- \n- ",variables:["theme","audience","purpose"]},{id:"agenda",name:"",description:"",prompt:":\n\n: {{title}}\n: {{theme}}\n: {{duration}}\n\n{{sections}}",variables:["title","theme","duration","sections"],dependsOn:["title-slide"]},{id:"content-slides",name:"",description:"",prompt:"{{sections}}:\n\n: {{theme}}\n: {{agenda}}\n: {{audience}}\n\n:\n\n# []: []\n\n- 1\n- 2\n- 3\n\n[]\n\n[: ]",variables:["theme","agenda","audience","sections"],dependsOn:["agenda"]},{id:"conclusion",name:"",description:"",prompt:":\n\n: {{title}}\n: {{theme}}\n\n:\n- 3-5\n- \n- ",variables:["title","theme"],dependsOn:["content-slides"]},{id:"qa",name:"Q&A",description:"",prompt:"Q&A:\n\n: {{theme}}\n\n{{qa_count}}",variables:["theme","qa_count"],dependsOn:["conclusion"]}],defaultVariables:{duration:"30",sections:"5",qa_count:"5"}},"academic-paper":{id:"academic-paper",name:"",description:"",icon:"",sections:[{id:"abstract",name:"",description:"",prompt:"200-250:\n\n: {{topic}}\n: {{purpose}}\n: {{methodology}}\n: {{findings}}\n\n:\n- \n- \n- \n- \n- ",variables:["topic","purpose","methodology","findings"]},{id:"introduction",name:"",description:"",prompt:":\n\n: {{topic}}\n: {{purpose}}\n: {{significance}}\n\n:\n- \n- \n- \n- ",variables:["topic","purpose","significance"],dependsOn:["abstract"]},{id:"methodology",name:"",description:"",prompt:":\n\n: {{topic}}\n: {{methodology}}\n: {{data_description}}\n\n:\n- \n- \n- \n- /",variables:["topic","methodology","data_description"],dependsOn:["introduction"]},{id:"results",name:"",description:"",prompt:":\n\n: {{topic}}\n: {{findings}}\n\n:\n- /\n- \n- ",variables:["topic","findings"],dependsOn:["methodology"]},{id:"discussion",name:"",description:"",prompt:":\n\n: {{topic}}\n: {{results_summary}}\n\n:\n- \n- \n- \n- ",variables:["topic","results_summary"],dependsOn:["results"]},{id:"conclusion",name:"",description:"",prompt:":\n\n: {{topic}}\n: {{findings}}\n: {{significance}}\n\n:\n- \n- \n- \n- ",variables:["topic","findings","significance"],dependsOn:["discussion"]}],defaultVariables:{significance:"",data_description:"",results_summary:""}}}}},{key:"getAvailableTemplates",value:function(){return Object.values(this.templates).map(function(t){return{id:t.id,name:t.name,description:t.description,icon:t.icon,sectionCount:t.sections.length}})}},{key:"getTemplate",value:function(t){return this.templates[t]||null}},{key:"getTemplateSections",value:function(t){var e=this.getTemplate(t);return e?e.sections:[]}},{key:"generateSectionPrompt",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=this.getTemplate(t);if(!r)throw new Error("Template not found: ".concat(t));var i=r.sections.find(function(t){return t.id===e});if(!i)throw new Error("Section not found: ".concat(e));for(var o=An(An({},r.defaultVariables),n),a=i.prompt,s=0,l=Object.entries(o);s<l.length;s++){var c=fn(l[s],2),h=c[0],u=c[1],d=new RegExp("\\{\\{\\s*".concat(h,"\\s*\\}\\}"),"g");a=a.replace(d,u||"[".concat(h,"]"))}return a}},{key:"generateFullDocumentPrompt",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.getTemplate(t);if(!n)throw new Error("Template not found: ".concat(t));var r=An(An({},n.defaultVariables),e),i=[];i.push("".concat(n.name,":\n")),n.sections.forEach(function(t,e){i.push("\n## ".concat(e+1,". ").concat(t.name)),i.push(t.description)}),i.push("\n\n---\n\n:");for(var o=0,a=Object.entries(r);o<a.length;o++){var s=fn(a[o],2),l=s[0],c=s[1];c&&i.push("- ".concat(l,": ").concat(c))}return i.push("\n\n"),i.join("\n")}},{key:"checkSectionDependencies",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=this.getTemplate(t);if(!r)return{satisfied:!1,missing:[]};var i=r.sections.find(function(t){return t.id===e});if(!i)return{satisfied:!1,missing:[]};if(!i.dependsOn||0===i.dependsOn.length)return{satisfied:!0,missing:[]};var o=i.dependsOn.filter(function(t){return!n.includes(t)});return{satisfied:0===o.length,missing:o}}},{key:"getNextAvailableSections",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.getTemplate(t);return r?r.sections.filter(function(r){return!n.includes(r.id)&&e.checkSectionDependencies(t,r.id,n).satisfied}):[]}}],e&&bn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e}(),Cn=null;function kn(){return Cn||(Cn=new vn),Cn}function wn(t){return wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wn(t)}function Bn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return In(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(In(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,In(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,In(u,"constructor",c),In(c,"constructor",l),l.displayName="GeneratorFunction",In(c,i,"GeneratorFunction"),In(u),In(u,i,"Generator"),In(u,r,function(){return this}),In(u,"toString",function(){return"[object Generator]"}),(Bn=function(){return{w:o,m:d}})()}function In(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}In=function(t,e,n,r){function o(e,n){In(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},In(t,e,n,r)}function Sn(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function _n(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Sn(o,r,i,a,s,"next",t)}function s(t){Sn(o,r,i,a,s,"throw",t)}a(void 0)})}}function En(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Tn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?En(Object(n),!0).forEach(function(e){Mn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):En(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Mn(t,e,n){return(e=On(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,On(r.key),r)}}function On(t){var e=function(t){if("object"!=wn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=wn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==wn(e)?e:e+""}var Dn=function(){return t=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.structuredGenerator=e,this.chatManager=n,this.modal=null,this.currentTemplate=null,this.variables={},this.generatedSections=[],this.sectionContents={}},e=[{key:"show",value:function(){this.modal&&this.modal.remove(),this.modal=this.createModal(),document.body.appendChild(this.modal),this.showTemplateSelection()}},{key:"hide",value:function(){this.modal&&(this.modal.remove(),this.modal=null),this.currentTemplate=null,this.variables={},this.generatedSections=[],this.sectionContents={}}},{key:"createModal",value:function(){var t=this,e=document.createElement("div");e.className="structured-gen-modal",e.innerHTML='\n            <div class="modal-overlay"></div>\n            <div class="modal-container">\n                <div class="modal-header">\n                    <h3> </h3>\n                    <button class="btn-icon close-modal" title=""></button>\n                </div>\n                <div class="modal-content" id="structured-gen-content">\n                    \x3c!-- JS --\x3e\n                </div>\n            </div>\n        ';var n=e.querySelector(".close-modal"),r=e.querySelector(".modal-overlay");return n.addEventListener("click",function(){return t.hide()}),r.addEventListener("click",function(){return t.hide()}),e}},{key:"showTemplateSelection",value:function(){var t=this,e=this.structuredGenerator.getAvailableTemplates(),n=this.modal.querySelector("#structured-gen-content");n.innerHTML='\n            <div class="template-selection">\n                <h4></h4>\n                <div class="template-grid">\n                    '.concat(e.map(function(t){return'\n                        <div class="template-card" data-template-id="'.concat(t.id,'">\n                            <div class="template-icon">').concat(t.icon,"</div>\n                            <h5>").concat(t.name,"</h5>\n                            <p>").concat(t.description,'</p>\n                            <div class="template-meta">\n                                <span>').concat(t.sectionCount,"</span>\n                            </div>\n                        </div>\n                    ")}).join(""),"\n                </div>\n            </div>\n        "),n.querySelectorAll(".template-card").forEach(function(e){e.addEventListener("click",function(){var n=e.getAttribute("data-template-id");t.selectTemplate(n)})})}},{key:"selectTemplate",value:function(t){this.currentTemplate=this.structuredGenerator.getTemplate(t),this.currentTemplate?(this.variables=Tn({},this.currentTemplate.defaultVariables),this.showVariableInput()):alert("")}},{key:"showVariableInput",value:function(){var t=this,e=this.modal.querySelector("#structured-gen-content"),n=new Set;this.currentTemplate.sections.forEach(function(t){t.variables.forEach(function(t){return n.add(t)})});var r=Array.from(n);e.innerHTML='\n            <div class="variable-input-step">\n                <div class="step-header">\n                    <button class="btn-secondary back-btn"> </button>\n                    <h4>'.concat(this.currentTemplate.icon," ").concat(this.currentTemplate.name,' - </h4>\n                </div>\n                <div class="variable-form">\n                    ').concat(r.map(function(e){return t.createVariableInput(e)}).join(""),'\n                </div>\n                <div class="step-footer">\n                    <button class="btn-secondary" id="cancel-btn"></button>\n                    <button class="btn-primary" id="next-btn"> </button>\n                </div>\n            </div>\n        ');var i=e.querySelector(".back-btn"),o=e.querySelector("#cancel-btn"),a=e.querySelector("#next-btn");i.addEventListener("click",function(){return t.showTemplateSelection()}),o.addEventListener("click",function(){return t.hide()}),a.addEventListener("click",function(){t.collectVariables(),t.showGenerationMode()})}},{key:"createVariableInput",value:function(t){var e=this.variables[t]||"",n=this.getVariableLabel(t);return'\n            <div class="form-group">\n                <label class="form-label">'.concat(n,'</label>\n                <input type="text"\n                       class="form-control"\n                       name="').concat(t,'"\n                       value="').concat(this.escapeHtml(e),'"\n                       placeholder="').concat(n,'">\n            </div>\n        ')}},{key:"getVariableLabel",value:function(t){return{topic:"/",title:"",audience:"",keywords:"",sections:"",word_count:"",intro:"",main_content_summary:"",tech_name:"",purpose:"",environment:"",main_features:"",theme:"",duration:"",qa_count:"Q&A",agenda:"",methodology:"",findings:"",significance:"",data_description:"",results_summary:""}[t]||t}},{key:"collectVariables",value:function(){var t=this;this.modal.querySelector(".variable-form").querySelectorAll("input, textarea, select").forEach(function(e){t.variables[e.name]=e.value})}},{key:"showGenerationMode",value:function(){var t=this,e=this.modal.querySelector("#structured-gen-content");e.innerHTML='\n            <div class="generation-mode-step">\n                <div class="step-header">\n                    <button class="btn-secondary back-btn"> </button>\n                    <h4></h4>\n                </div>\n                <div class="mode-selection">\n                    <div class="mode-card" data-mode="section-by-section">\n                        <div class="mode-icon"></div>\n                        <h5></h5>\n                        <p></p>\n                        <button class="btn-primary select-mode-btn"></button>\n                    </div>\n                    <div class="mode-card" data-mode="full-document">\n                        <div class="mode-icon"></div>\n                        <h5></h5>\n                        <p></p>\n                        <button class="btn-primary select-mode-btn"></button>\n                    </div>\n                </div>\n            </div>\n        ';var n=e.querySelector(".back-btn"),r=e.querySelectorAll(".mode-card");n.addEventListener("click",function(){return t.showVariableInput()}),r.forEach(function(e){var n=e.querySelector(".select-mode-btn"),r=e.getAttribute("data-mode");n.addEventListener("click",function(){"section-by-section"===r?t.startSectionBySection():t.startFullDocument()})})}},{key:"startSectionBySection",value:function(){this.showSectionGeneration()}},{key:"showSectionGeneration",value:function(){var t=this,e=this.structuredGenerator.getNextAvailableSections(this.currentTemplate.id,this.generatedSections);if(0!==e.length){var n=this.modal.querySelector("#structured-gen-content");n.innerHTML='\n            <div class="section-generation-step">\n                <div class="step-header">\n                    <h4>'.concat(this.currentTemplate.icon," ").concat(this.currentTemplate.name,'</h4>\n                    <div class="progress">\n                        <span>').concat(this.generatedSections.length," / ").concat(this.currentTemplate.sections.length,' </span>\n                        <div class="progress-bar">\n                            <div class="progress-fill" style="width: ').concat(this.generatedSections.length/this.currentTemplate.sections.length*100,'%"></div>\n                        </div>\n                    </div>\n                </div>\n                <div class="section-list">\n                    <h5>:</h5>\n                    ').concat(e.map(function(t){return'\n                        <div class="section-item" data-section-id="'.concat(t.id,'">\n                            <div class="section-info">\n                                <h6>').concat(t.name,"</h6>\n                                <p>").concat(t.description,'</p>\n                            </div>\n                            <button class="btn-primary generate-section-btn"> </button>\n                        </div>\n                    ')}).join(""),'\n                </div>\n                <div class="generated-sections">\n                    <h5>:</h5>\n                    ').concat(0===this.generatedSections.length?'<p class="empty-message"></p>':"","\n                    ").concat(this.generatedSections.map(function(e){var n=t.currentTemplate.sections.find(function(t){return t.id===e});return'\n                            <div class="completed-section">\n                                <div class="section-header">\n                                    <span> '.concat(n.name,'</span>\n                                    <button class="btn-link view-section-btn" data-section-id="').concat(e,'"></button>\n                                </div>\n                            </div>\n                        ')}).join(""),'\n                </div>\n                <div class="step-footer">\n                    <button class="btn-secondary" id="cancel-btn"></button>\n                    ').concat(this.generatedSections.length>0?'<button class="btn-primary" id="finish-btn"></button>':"","\n                </div>\n            </div>\n        ");var r=n.querySelectorAll(".generate-section-btn"),i=n.querySelectorAll(".view-section-btn"),o=n.querySelector("#cancel-btn"),a=n.querySelector("#finish-btn");r.forEach(function(e){e.addEventListener("click",function(e){var n=e.target.closest(".section-item").getAttribute("data-section-id");t.generateSection(n)})}),i.forEach(function(e){e.addEventListener("click",function(e){var n=e.target.getAttribute("data-section-id");t.viewSection(n)})}),o.addEventListener("click",function(){return t.hide()}),a&&a.addEventListener("click",function(){return t.showCompletionScreen()})}else this.showCompletionScreen()}},{key:"generateSection",value:(r=_n(Bn().m(function t(e){var n,r,i,o=this;return Bn().w(function(t){for(;;)switch(t.n){case 0:if(n=this.currentTemplate.sections.find(function(t){return t.id===e})){t.n=1;break}return t.a(2);case 1:if(r=Tn(Tn({},this.variables),this.sectionContents),i=this.structuredGenerator.generateSectionPrompt(this.currentTemplate.id,e,r),this.hide(),!this.chatManager||!this.chatManager.sendMessageWithStreaming){t.n=2;break}return t.n=2,this.chatManager.sendMessageWithStreaming(i,{includeContext:!1,contextType:"none"},function(t){},function(t){o.sectionContents[e]=t,o.generatedSections.push(e),o.variables[e]=t,o.showNotification("".concat(n.name,""),"success"),setTimeout(function(){confirm("")&&(o.show(),o.showSectionGeneration())},1e3)},function(t){console.error("Section generation error:",t),alert(": ".concat(t.message))});case 2:return t.a(2)}},t,this)})),function(t){return r.apply(this,arguments)})},{key:"viewSection",value:function(t){var e=this.currentTemplate.sections.find(function(e){return e.id===t}),n=this.sectionContents[t]||"";if(n){var r=document.createElement("div");r.className="section-view-modal",r.innerHTML='\n            <div class="modal-overlay"></div>\n            <div class="modal-container">\n                <div class="modal-header">\n                    <h3>'.concat(e.name,'</h3>\n                    <button class="btn-icon close-modal"></button>\n                </div>\n                <div class="modal-content">\n                    <div class="section-content">').concat(this.escapeHtml(n),'</div>\n                </div>\n                <div class="modal-footer">\n                    <button class="btn-secondary close-btn"></button>\n                </div>\n            </div>\n        '),document.body.appendChild(r);var i=r.querySelector(".close-modal"),o=r.querySelector(".close-btn"),a=r.querySelector(".modal-overlay"),s=function(){return r.remove()};i.addEventListener("click",s),o.addEventListener("click",s),a.addEventListener("click",s)}else alert("")}},{key:"startFullDocument",value:(n=_n(Bn().m(function t(){var e,n=this;return Bn().w(function(t){for(;;)switch(t.n){case 0:if(e=this.structuredGenerator.generateFullDocumentPrompt(this.currentTemplate.id,this.variables),this.hide(),!this.chatManager||!this.chatManager.sendMessageWithStreaming){t.n=1;break}return t.n=1,this.chatManager.sendMessageWithStreaming(e,{includeContext:!1,contextType:"none"},function(t){},function(t){n.showNotification("","success")},function(t){console.error("Full document generation error:",t),alert(": ".concat(t.message))});case 1:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})},{key:"showCompletionScreen",value:function(){var t=this,e=this.modal.querySelector("#structured-gen-content");e.innerHTML='\n            <div class="completion-screen">\n                <div class="completion-icon"></div>\n                <h4></h4>\n                <p>'.concat(this.currentTemplate.name,'</p>\n                <div class="completion-stats">\n                    <div class="stat">\n                        <span class="stat-value">').concat(this.generatedSections.length,'</span>\n                        <span class="stat-label"></span>\n                    </div>\n                </div>\n                <div class="completion-actions">\n                    <button class="btn-secondary" id="close-btn"></button>\n                    <button class="btn-primary" id="new-doc-btn"></button>\n                </div>\n            </div>\n        ');var n=e.querySelector("#close-btn"),r=e.querySelector("#new-doc-btn");n.addEventListener("click",function(){return t.hide()}),r.addEventListener("click",function(){t.generatedSections=[],t.sectionContents={},t.variables={},t.currentTemplate=null,t.showTemplateSelection()})}},{key:"showNotification",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.createElement("div");n.className="notification notification-".concat(e),n.textContent=t,n.style.cssText="\n            position: fixed;\n            top: 20px;\n            right: 20px;\n            padding: 12px 20px;\n            background: ".concat("error"===e?"#f44336":"success"===e?"#4caf50":"#2196f3",";\n            color: white;\n            border-radius: 4px;\n            z-index: 10001;\n            box-shadow: 0 2px 5px rgba(0,0,0,0.2);\n        "),document.body.appendChild(n),setTimeout(function(){n.remove()},3e3)}},{key:"escapeHtml",value:function(t){var e=document.createElement("div");return e.textContent=t,e.innerHTML}}],e&&Ln(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r}();function Pn(t){return Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pn(t)}function Fn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function jn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fn(Object(n),!0).forEach(function(e){zn(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fn(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function zn(t,e,n){return(e=Kn(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function $n(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Rn(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(Rn(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Rn(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,Rn(u,"constructor",c),Rn(c,"constructor",l),l.displayName="GeneratorFunction",Rn(c,i,"GeneratorFunction"),Rn(u),Rn(u,i,"Generator"),Rn(u,r,function(){return this}),Rn(u,"toString",function(){return"[object Generator]"}),($n=function(){return{w:o,m:d}})()}function Rn(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Rn=function(t,e,n,r){function o(e,n){Rn(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},Rn(t,e,n,r)}function Nn(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function qn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Nn(o,r,i,a,s,"next",t)}function s(t){Nn(o,r,i,a,s,"throw",t)}a(void 0)})}}function Wn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Kn(r.key),r)}}function Kn(t){var e=function(t){if("object"!=Pn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Pn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Pn(e)?e:e+""}var Un=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.version="1.0.0"},e=[{key:"exportSessionToJSON",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={version:this.version,exportedAt:(new Date).toISOString(),type:"chat-session",session:{id:t.id,title:t.title||"Untitled Session",createdAt:t.createdAt,updatedAt:t.updatedAt,messages:t.messages.map(function(t){return{role:t.role,content:t.content,timestamp:t.timestamp}}),metadata:{messageCount:t.messages.length,tags:t.tags||[],isFavorite:t.isFavorite||!1}}};return e.includeStats&&(n.stats=this.calculateSessionStats(t)),n}},{key:"exportMultipleSessionsToJSON",value:function(t){var e=this;return{version:this.version,exportedAt:(new Date).toISOString(),type:"chat-sessions-batch",count:t.length,sessions:t.map(function(t){return e.exportSessionToJSON(t,{includeStats:!1}).session})}}},{key:"exportSessionToMarkdown",value:function(t){var e="";return e+="# ".concat(t.title||"Untitled Session","\n\n"),e+="****: ".concat(new Date(t.createdAt).toLocaleString("ja-JP"),"\n"),e+="****: ".concat(new Date(t.updatedAt).toLocaleString("ja-JP"),"\n"),e+="****: ".concat(t.messages.length,"\n\n"),t.tags&&t.tags.length>0&&(e+="****: ".concat(t.tags.join(", "),"\n\n")),e+="---\n\n",t.messages.forEach(function(n,r){var i="user"===n.role?" ":" AI",o=new Date(n.timestamp).toLocaleTimeString("ja-JP");e+="## ".concat(i," (").concat(o,")\n\n"),e+="".concat(n.content,"\n\n"),r<t.messages.length-1&&(e+="---\n\n")}),e+="\n---\n\n",e+="*Exported from SightEdit on ".concat((new Date).toLocaleString("ja-JP"),"*\n")}},{key:"downloadSession",value:(o=qn($n().m(function t(e){var n,r,i,o,a,s,l,c=arguments;return $n().w(function(t){for(;;)switch(t.n){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:{},"json"!==(n=c.length>1&&void 0!==c[1]?c[1]:"json")){t.n=4;break}if(s=this.exportSessionToJSON(e,r),!r.encrypt||!r.password){t.n=2;break}return t.n=1,this.encryptData(JSON.stringify(s),r.password);case 1:l=t.v,i=JSON.stringify(l,null,2),o="".concat(this.sanitizeFilename(e.title),"_encrypted.json"),t.n=3;break;case 2:i=JSON.stringify(s,null,2),o="".concat(this.sanitizeFilename(e.title),".json");case 3:a="application/json",t.n=6;break;case 4:if("markdown"!==n){t.n=5;break}i=this.exportSessionToMarkdown(e),o="".concat(this.sanitizeFilename(e.title),".md"),a="text/markdown",t.n=6;break;case 5:throw new Error("Unsupported format: ".concat(n));case 6:this.triggerDownload(i,o,a);case 7:return t.a(2)}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"downloadMultipleSessions",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"json";if("json"===n){var r=this.exportMultipleSessionsToJSON(t),i=JSON.stringify(r,null,2),o="sightedit_sessions_".concat(Date.now(),".json");this.triggerDownload(i,o,"application/json")}else if("markdown"===n){var a="# SightEdit Chat Sessions Export\n\n";a+="Exported: ".concat((new Date).toLocaleString("ja-JP"),"\n"),a+="Total Sessions: ".concat(t.length,"\n\n"),a+="---\n\n",t.forEach(function(n,r){a+=e.exportSessionToMarkdown(n),r<t.length-1&&(a+="\n\n===\n\n")});var s="sightedit_sessions_".concat(Date.now(),".md");this.triggerDownload(a,s,"text/markdown")}}},{key:"importSessionFromJSON",value:(i=qn($n().m(function t(e){var n,r,i,o,a,s=this,l=arguments;return $n().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=l.length>1&&void 0!==l[1]?l[1]:{},t.p=1,t.n=2,e.text();case 2:if(r=t.v,!(i=JSON.parse(r)).encrypted||!n.password){t.n=4;break}return t.n=3,this.decryptData(i,n.password);case 3:o=t.v,i=JSON.parse(o);case 4:if(i.version){t.n=5;break}throw new Error("Invalid export file: missing version");case 5:if("chat-session"!==i.type){t.n=6;break}return t.a(2,{success:!0,type:"single",session:this.processImportedSession(i.session)});case 6:if("chat-sessions-batch"!==i.type){t.n=7;break}return t.a(2,{success:!0,type:"batch",sessions:i.sessions.map(function(t){return s.processImportedSession(t)}),count:i.count});case 7:throw new Error("Unsupported export type: ".concat(i.type));case 8:t.n=10;break;case 9:return t.p=9,a=t.v,console.error("Import error:",a),t.a(2,{success:!1,error:a.message});case 10:return t.a(2)}},t,this,[[1,9]])})),function(t){return i.apply(this,arguments)})},{key:"processImportedSession",value:function(t){return jn(jn({},t),{},{id:this.generateId(),importedAt:Date.now(),originalId:t.id})}},{key:"encryptData",value:(r=qn($n().m(function t(e,n){var r,i,o,a,s,l,c,h,u;return $n().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,r=new TextEncoder,i=r.encode(n),t.n=1,crypto.subtle.importKey("raw",i,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 1:return o=t.v,a=crypto.getRandomValues(new Uint8Array(16)),t.n=2,crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:1e5,hash:"SHA-256"},o,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);case 2:return s=t.v,l=crypto.getRandomValues(new Uint8Array(12)),c=r.encode(e),t.n=3,crypto.subtle.encrypt({name:"AES-GCM",iv:l},s,c);case 3:return h=t.v,t.a(2,{encrypted:!0,algorithm:"AES-GCM",salt:Array.from(a),iv:Array.from(l),data:Array.from(new Uint8Array(h))});case 4:throw t.p=4,u=t.v,console.error("Encryption error:",u),new Error("");case 5:return t.a(2)}},t,null,[[0,4]])})),function(t,e){return r.apply(this,arguments)})},{key:"decryptData",value:(n=qn($n().m(function t(e,n){var r,i,o,a,s,l,c,h,u,d;return $n().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,r=new TextEncoder,i=new TextDecoder,o=r.encode(n),t.n=1,crypto.subtle.importKey("raw",o,{name:"PBKDF2"},!1,["deriveBits","deriveKey"]);case 1:return a=t.v,s=new Uint8Array(e.salt),t.n=2,crypto.subtle.deriveKey({name:"PBKDF2",salt:s,iterations:1e5,hash:"SHA-256"},a,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);case 2:return l=t.v,c=new Uint8Array(e.iv),h=new Uint8Array(e.data),t.n=3,crypto.subtle.decrypt({name:"AES-GCM",iv:c},l,h);case 3:return u=t.v,t.a(2,i.decode(u));case 4:throw t.p=4,d=t.v,console.error("Decryption error:",d),new Error("");case 5:return t.a(2)}},t,null,[[0,4]])})),function(t,e){return n.apply(this,arguments)})},{key:"calculateSessionStats",value:function(t){var e=t.messages.filter(function(t){return"user"===t.role}),n=t.messages.filter(function(t){return"assistant"===t.role}),r=t.messages.reduce(function(t,e){return t+e.content.length},0),i=t.messages.length>0?Math.round(r/t.messages.length):0;return{totalMessages:t.messages.length,userMessages:e.length,aiMessages:n.length,totalCharacters:r,averageMessageLength:i,duration:t.updatedAt-t.createdAt}}},{key:"sanitizeFilename",value:function(t){return t?t.replace(/[<>:"/\\|?*]/g,"_").replace(/\s+/g,"_").substring(0,100):"untitled"}},{key:"triggerDownload",value:function(t,e,n){var r=new Blob([t],{type:n}),i=URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download=e,o.style.display="none",document.body.appendChild(o),o.click(),setTimeout(function(){document.body.removeChild(o),URL.revokeObjectURL(i)},100)}},{key:"generateId",value:function(){return"session-"+Date.now()+"-"+Math.random().toString(36).substr(2,9)}}],e&&Wn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o}();function Hn(t){return Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hn(t)}function Gn(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Yn(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(Yn(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Yn(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,Yn(u,"constructor",c),Yn(c,"constructor",l),l.displayName="GeneratorFunction",Yn(c,i,"GeneratorFunction"),Yn(u),Yn(u,i,"Generator"),Yn(u,r,function(){return this}),Yn(u,"toString",function(){return"[object Generator]"}),(Gn=function(){return{w:o,m:d}})()}function Yn(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Yn=function(t,e,n,r){function o(e,n){Yn(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},Yn(t,e,n,r)}function Vn(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Qn(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Vn(o,r,i,a,s,"next",t)}function s(t){Vn(o,r,i,a,s,"throw",t)}a(void 0)})}}function Xn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zn(r.key),r)}}function Zn(t){var e=function(t){if("object"!=Hn(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Hn(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Hn(e)?e:e+""}var Jn=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.token=null},e=[{key:"getToken",value:(i=Qn(Gn().m(function t(){var e,n,r,i=this,o=arguments;return Gn().w(function(t){for(;;)if(0===t.n)return n=!(o.length>0&&void 0!==o[0])||o[0],r=chrome.runtime.getManifest(),console.log("[DEBUG] Manifest oauth2 config:",r.oauth2),console.log("[DEBUG] Client ID being used:",null===(e=r.oauth2)||void 0===e?void 0:e.client_id),console.log("[DEBUG] Interactive mode:",n),t.a(2,new Promise(function(t,e){chrome.identity.getAuthToken({interactive:n},function(n){return chrome.runtime.lastError?(console.error("[DEBUG] Auth error details:",chrome.runtime.lastError),console.error("Auth error:",chrome.runtime.lastError),void e(new Error(chrome.runtime.lastError.message))):n?(i.token=n,console.log("[ChromeIdentityAuth] Token obtained"),console.log("[DEBUG] Token length:",n.length),void t(n)):(console.error("[DEBUG] No token received from chrome.identity.getAuthToken"),void e(new Error("No token received")))})}))},t)})),function(){return i.apply(this,arguments)})},{key:"removeToken",value:(r=Qn(Gn().m(function t(){var e=this;return Gn().w(function(t){for(;;)switch(t.n){case 0:if(this.token){t.n=1;break}return t.a(2);case 1:return t.a(2,new Promise(function(t,n){chrome.identity.removeCachedAuthToken({token:e.token},function(){chrome.runtime.lastError?n(new Error(chrome.runtime.lastError.message)):(e.token=null,console.log("[ChromeIdentityAuth] Token removed"),t())})}))}},t,this)})),function(){return r.apply(this,arguments)})},{key:"clearAllCachedTokens",value:(n=Qn(Gn().m(function t(){var e=this;return Gn().w(function(t){for(;;)if(0===t.n)return console.log("[ChromeIdentityAuth] Clearing all cached tokens..."),t.a(2,new Promise(function(t,n){chrome.identity.clearAllCachedAuthTokens(function(){if(chrome.runtime.lastError)return console.error("[ChromeIdentityAuth] Failed to clear tokens:",chrome.runtime.lastError),void n(new Error(chrome.runtime.lastError.message));e.token=null,console.log("[ChromeIdentityAuth] All cached tokens cleared successfully"),t()})}))},t)})),function(){return n.apply(this,arguments)})},{key:"isAuthenticated",value:function(){return null!==this.token}}],e&&Xn(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i}(),tr=null;function er(t){return er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},er(t)}function nr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return rr(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(rr(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,rr(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,rr(u,"constructor",c),rr(c,"constructor",l),l.displayName="GeneratorFunction",rr(c,i,"GeneratorFunction"),rr(u),rr(u,i,"Generator"),rr(u,r,function(){return this}),rr(u,"toString",function(){return"[object Generator]"}),(nr=function(){return{w:o,m:d}})()}function rr(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}rr=function(t,e,n,r){function o(e,n){rr(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},rr(t,e,n,r)}function ir(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function or(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){ir(o,r,i,a,s,"next",t)}function s(t){ir(o,r,i,a,s,"throw",t)}a(void 0)})}}function ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,sr(r.key),r)}}function sr(t){var e=function(t){if("object"!=er(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=er(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==er(e)?e:e+""}var lr="https://www.googleapis.com/drive/v3",cr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.auth=(tr||(tr=new Jn),tr)},e=[{key:"getUserInfo",value:(u=or(nr().m(function t(){var e,n,r,i;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,console.log("[GoogleDriveAPI] Getting user info with interactive=true..."),t.n=1,this.auth.getToken(!0);case 1:return e=t.v,console.log("[GoogleDriveAPI] Token received:",e?"YES":"NO"),t.n=2,fetch("".concat(lr,"/about?fields=user"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});case 2:if((n=t.v).ok){t.n=3;break}throw new Error("API error: ".concat(n.status," ").concat(n.statusText));case 3:return t.n=4,n.json();case 4:return r=t.v,console.log("[GoogleDriveAPI] Retrieved user info:",r.user.emailAddress),t.a(2,r.user);case 5:throw t.p=5,i=t.v,console.error("[GoogleDriveAPI] Failed to get user info:",i),i;case 6:return t.a(2)}},t,this,[[0,5]])})),function(){return u.apply(this,arguments)})},{key:"getFolders",value:(h=or(nr().m(function t(){var e,n,r,i,o,a;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.auth.getToken(!1);case 1:return e=t.v,n=new URLSearchParams({q:"mimeType='application/vnd.google-apps.folder' and trashed=false",fields:"files(id, name)",orderBy:"name",pageSize:"100"}),t.n=2,fetch("".concat(lr,"/files?").concat(n),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"}});case 2:if((r=t.v).ok){t.n=3;break}throw new Error("API error: ".concat(r.status," ").concat(r.statusText));case 3:return t.n=4,r.json();case 4:return i=t.v,o=i.files.map(function(t){return{id:t.id,name:t.name}}),console.log("[GoogleDriveAPI] Retrieved ".concat(o.length," folders")),t.a(2,o);case 5:throw t.p=5,a=t.v,console.error("[GoogleDriveAPI] Failed to get folders:",a),a;case 6:return t.a(2)}},t,this,[[0,5]])})),function(){return h.apply(this,arguments)})},{key:"getFolderContents",value:(c=or(nr().m(function t(){var e,n,r,i,o,a,s,l,c=arguments;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=c.length>0&&void 0!==c[0]?c[0]:null,t.p=1,t.n=2,this.auth.getToken(!1);case 2:return n=t.v,r="trashed=false and (mimeType='application/vnd.google-apps.folder' or mimeType='image/png' or mimeType='image/jpeg' or mimeType='image/jpg' or mimeType='image/gif' or mimeType='image/webp')",r+=e?" and '".concat(e,"' in parents"):" and 'root' in parents",i=new URLSearchParams({q:r,fields:"files(id, name, mimeType, thumbnailLink, webContentLink, size, createdTime, modifiedTime)",orderBy:"folder,name",pageSize:"1000"}),t.n=3,fetch("".concat(lr,"/files?").concat(i),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 3:if((o=t.v).ok){t.n=4;break}throw new Error("API error: ".concat(o.status," ").concat(o.statusText));case 4:return t.n=5,o.json();case 5:return a=t.v,s=a.files.map(function(t){return"application/vnd.google-apps.folder"===t.mimeType?{type:"folder",id:t.id,name:t.name}:{type:"image",file_id:t.id,file_name:t.name,mime_type:t.mimeType,thumbnail_link:t.thumbnailLink,download_link:t.webContentLink,file_size:parseInt(t.size)||0,created_time:t.createdTime,modified_time:t.modifiedTime}}),console.log("[GoogleDriveAPI] Retrieved ".concat(s.length," items from folder ").concat(e||"root")),t.a(2,s);case 6:throw t.p=6,l=t.v,console.error("[GoogleDriveAPI] Failed to get folder contents:",l),l;case 7:return t.a(2)}},t,this,[[1,6]])})),function(){return c.apply(this,arguments)})},{key:"getImages",value:(l=or(nr().m(function t(){var e,n,r,i,o,a,s,l,c,h=arguments;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=h.length>0&&void 0!==h[0]?h[0]:50,n=h.length>1&&void 0!==h[1]?h[1]:null,t.p=1,t.n=2,this.auth.getToken(!0);case 2:return r=t.v,i="(mimeType='image/png' or mimeType='image/jpeg' or mimeType='image/jpg' or mimeType='image/gif' or mimeType='image/webp') and trashed=false",n&&(i+=" and '".concat(n,"' in parents")),o=new URLSearchParams({q:i,fields:"files(id, name, mimeType, thumbnailLink, webContentLink, size, createdTime, modifiedTime)",orderBy:"modifiedTime desc",pageSize:e.toString()}),t.n=3,fetch("".concat(lr,"/files?").concat(o),{headers:{Authorization:"Bearer ".concat(r),"Content-Type":"application/json"}});case 3:if((a=t.v).ok){t.n=4;break}throw new Error("API error: ".concat(a.status," ").concat(a.statusText));case 4:return t.n=5,a.json();case 5:return s=t.v,l=s.files.map(function(t){return{file_id:t.id,file_name:t.name,mime_type:t.mimeType,thumbnail_link:t.thumbnailLink,download_link:t.webContentLink,file_size:parseInt(t.size)||0,created_time:t.createdTime,modified_time:t.modifiedTime}}),console.log("[GoogleDriveAPI] Retrieved ".concat(l.length," images").concat(n?" from folder "+n:"")),t.a(2,l);case 6:throw t.p=6,c=t.v,console.error("[GoogleDriveAPI] Failed to get images:",c),c;case 7:return t.a(2)}},t,this,[[1,6]])})),function(){return l.apply(this,arguments)})},{key:"getImageUrl",value:(s=or(nr().m(function t(e){var n,r,i,o,a;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.auth.getToken(!1);case 1:return n=t.v,r=new URLSearchParams({fields:"webContentLink, webViewLink"}),t.n=2,fetch("".concat(lr,"/files/").concat(e,"?").concat(r),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 2:if((i=t.v).ok){t.n=3;break}throw new Error("API error: ".concat(i.status," ").concat(i.statusText));case 3:return t.n=4,i.json();case 4:return o=t.v,console.log("[GoogleDriveAPI] Got URL for file: ".concat(e)),t.a(2,o.webContentLink);case 5:throw t.p=5,a=t.v,console.error("[GoogleDriveAPI] Failed to get image URL:",a),a;case 6:return t.a(2)}},t,this,[[0,5]])})),function(t){return s.apply(this,arguments)})},{key:"getFileMetadata",value:(a=or(nr().m(function t(e){var n,r,i,o,a;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.auth.getToken(!1);case 1:return n=t.v,r=new URLSearchParams({fields:"id, name, mimeType, webContentLink"}),t.n=2,fetch("".concat(lr,"/files/").concat(e,"?").concat(r),{headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});case 2:if((i=t.v).ok){t.n=3;break}throw new Error("API error: ".concat(i.status," ").concat(i.statusText));case 3:return t.n=4,i.json();case 4:return o=t.v,console.log("[GoogleDriveAPI] Got metadata for file: ".concat(e)),t.a(2,o);case 5:throw t.p=5,a=t.v,console.error("[GoogleDriveAPI] Failed to get file metadata:",a),a;case 6:return t.a(2)}},t,this,[[0,5]])})),function(t){return a.apply(this,arguments)})},{key:"getImageBlob",value:(o=or(nr().m(function t(e){var n,r,i,o;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.auth.getToken(!1);case 1:return n=t.v,t.n=2,fetch("".concat(lr,"/files/").concat(e,"?alt=media"),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((r=t.v).ok){t.n=3;break}throw new Error("API error: ".concat(r.status," ").concat(r.statusText));case 3:return t.n=4,r.blob();case 4:return i=t.v,console.log("[GoogleDriveAPI] Downloaded image blob: ".concat(e,", size: ").concat(i.size," bytes")),t.a(2,i);case 5:throw t.p=5,o=t.v,console.error("[GoogleDriveAPI] Failed to get image blob:",o),o;case 6:return t.a(2)}},t,this,[[0,5]])})),function(t){return o.apply(this,arguments)})},{key:"getFileContent",value:(i=or(nr().m(function t(e){var n,r,i,o;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.auth.getToken(!1);case 1:return n=t.v,t.n=2,fetch("".concat(lr,"/files/").concat(e,"?alt=media"),{headers:{Authorization:"Bearer ".concat(n)}});case 2:if((r=t.v).ok){t.n=3;break}throw new Error("API error: ".concat(r.status," ").concat(r.statusText));case 3:return t.n=4,r.blob();case 4:return i=t.v,console.log("[GoogleDriveAPI] Downloaded file: ".concat(e)),t.a(2,i);case 5:throw t.p=5,o=t.v,console.error("[GoogleDriveAPI] Failed to get file content:",o),o;case 6:return t.a(2)}},t,this,[[0,5]])})),function(t){return i.apply(this,arguments)})},{key:"updateFilePermissions",value:(r=or(nr().m(function t(e){var n,r,i;return nr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.auth.getToken(!1);case 1:return n=t.v,t.n=2,fetch("".concat(lr,"/files/").concat(e,"/permissions"),{method:"POST",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"},body:JSON.stringify({role:"reader",type:"anyone"})});case 2:if((r=t.v).ok){t.n=3;break}throw new Error("API error: ".concat(r.status," ").concat(r.statusText));case 3:return console.log("[GoogleDriveAPI] Updated permissions for file: ".concat(e)),t.a(2,!0);case 4:return t.p=4,i=t.v,console.error("[GoogleDriveAPI] Failed to update permissions:",i),t.a(2,!1)}},t,this,[[0,4]])})),function(t){return r.apply(this,arguments)})},{key:"logout",value:(n=or(nr().m(function t(){return nr().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.auth.clearAllCachedTokens();case 1:return t.a(2)}},t,this)})),function(){return n.apply(this,arguments)})}],e&&ar(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,s,l,c,h,u}(),hr=null;function ur(t){return ur="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ur(t)}function dr(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return pr(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(pr(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,pr(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,pr(u,"constructor",c),pr(c,"constructor",l),l.displayName="GeneratorFunction",pr(c,i,"GeneratorFunction"),pr(u),pr(u,i,"Generator"),pr(u,r,function(){return this}),pr(u,"toString",function(){return"[object Generator]"}),(dr=function(){return{w:o,m:d}})()}function pr(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}pr=function(t,e,n,r){function o(e,n){pr(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},pr(t,e,n,r)}function fr(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function gr(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){fr(o,r,i,a,s,"next",t)}function s(t){fr(o,r,i,a,s,"throw",t)}a(void 0)})}}function mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ar(r.key),r)}}function Ar(t){var e=function(t){if("object"!=ur(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=ur(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==ur(e)?e:e+""}var yr=function(){return t=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isOpen=!1,this.modal=null,this.items=[],this.onSelectCallback=null,this.selectedImage=null,this.driveAPI=(hr||(hr=new cr),hr),this.currentFolderId=null,this.folderPath=[],this.currentUserEmail=null},e=[{key:"initialize",value:function(){this.createModal(),this.attachEventListeners()}},{key:"createModal",value:function(){this.modal=document.createElement("div"),this.modal.id="drive-image-picker-modal",this.modal.className="drive-picker-modal hidden",this.modal.innerHTML='\n            <div class="drive-picker-overlay"></div>\n            <div class="drive-picker-content">\n                <div class="drive-picker-header">\n                    <div class="header-left">\n                        <h3> Google Drive</h3>\n                        <div class="account-info" id="account-info">\n                            <span class="account-email" id="account-email"></span>\n                        </div>\n                    </div>\n                    <button class="drive-picker-close-btn" title=""></button>\n                </div>\n                <div class="url-input-section">\n                    <input\n                        type="text"\n                        id="drive-url-input"\n                        class="drive-url-input"\n                        placeholder="Google DriveURL / Enter Google Drive URL directly"\n                    />\n                    <button id="load-from-url-btn" class="load-from-url-btn" title="URL / Load from URL">\n                         \n                    </button>\n                </div>\n                <div class="drive-picker-toolbar">\n                    <div class="breadcrumb" id="breadcrumb">\n                        <span class="breadcrumb-item"> </span>\n                    </div>\n                </div>\n                <div class="drive-picker-body">\n                    <div class="drive-picker-error hidden" id="drive-picker-error">\n                        <p class="error-message"></p>\n                        <button class="retry-btn"></button>\n                    </div>\n                    <div class="drive-picker-grid" id="drive-picker-grid">\n                        \x3c!--  --\x3e\n                    </div>\n                </div>\n                <div class="drive-picker-footer">\n                    <div class="drive-picker-info">\n                        <span id="selected-image-name"></span>\n                    </div>\n                    <div class="drive-picker-actions">\n                        <button class="btn-cancel"></button>\n                        <button class="btn-select" id="btn-select" disabled></button>\n                    </div>\n                </div>\n            </div>\n        ',document.body.appendChild(this.modal),this.injectStyles()}},{key:"injectStyles",value:function(){if(!document.getElementById("drive-picker-styles")){var t=document.createElement("style");t.id="drive-picker-styles",t.textContent="\n            .drive-picker-modal {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                z-index: 10000;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n\n            .drive-picker-modal.hidden {\n                display: none;\n            }\n\n            .drive-picker-overlay {\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.5);\n                backdrop-filter: blur(2px);\n            }\n\n            .drive-picker-content {\n                position: relative;\n                width: 90%;\n                max-width: 800px;\n                height: 80vh;\n                max-height: 700px;\n                background: #ffffff;\n                border-radius: 12px;\n                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n                display: flex;\n                flex-direction: column;\n                overflow: hidden;\n                animation: modalFadeIn 0.2s ease;\n            }\n\n            @keyframes modalFadeIn {\n                from {\n                    opacity: 0;\n                    transform: scale(0.95);\n                }\n                to {\n                    opacity: 1;\n                    transform: scale(1);\n                }\n            }\n\n            .drive-picker-header {\n                display: flex;\n                justify-content: space-between;\n                align-items: flex-start;\n                padding: 20px 24px;\n                border-bottom: 1px solid #e0e0e0;\n                background: #f8f9fa;\n            }\n\n            .header-left {\n                display: flex;\n                flex-direction: column;\n                gap: 8px;\n            }\n\n            .drive-picker-header h3 {\n                margin: 0;\n                font-size: 20px;\n                font-weight: 600;\n                color: #333;\n            }\n\n            .account-info {\n                display: flex;\n                align-items: center;\n                gap: 8px;\n                font-size: 13px;\n                color: #666;\n            }\n\n            .account-email {\n                padding: 4px 8px;\n                background: #fff;\n                border: 1px solid #e0e0e0;\n                border-radius: 4px;\n            }\n\n            .url-input-section {\n                display: flex;\n                gap: 8px;\n                padding: 12px 16px;\n                background: #f8f9fa;\n                border-bottom: 1px solid #e0e0e0;\n            }\n\n            .drive-url-input {\n                flex: 1;\n                padding: 8px 12px;\n                border: 1px solid #d0d0d0;\n                border-radius: 4px;\n                font-size: 13px;\n                outline: none;\n                transition: border-color 0.2s;\n            }\n\n            .drive-url-input:focus {\n                border-color: #4285f4;\n                box-shadow: 0 0 0 2px rgba(66, 133, 244, 0.1);\n            }\n\n            .load-from-url-btn {\n                padding: 8px 16px;\n                background: #4285f4;\n                color: white;\n                border: none;\n                border-radius: 4px;\n                cursor: pointer;\n                font-size: 13px;\n                font-weight: 500;\n                transition: background-color 0.2s;\n                white-space: nowrap;\n            }\n\n            .load-from-url-btn:hover {\n                background: #3367d6;\n            }\n\n            .load-from-url-btn:active {\n                background: #2b56c4;\n            }\n\n            .drive-picker-toolbar {\n                display: flex;\n                align-items: center;\n                padding: 12px 24px;\n                background: #fff;\n                border-bottom: 1px solid #e0e0e0;\n                min-height: 48px;\n            }\n\n            .breadcrumb {\n                display: flex;\n                align-items: center;\n                gap: 8px;\n                flex-wrap: wrap;\n                font-size: 14px;\n            }\n\n            .breadcrumb-item {\n                display: flex;\n                align-items: center;\n                color: #666;\n                cursor: default;\n            }\n\n            .breadcrumb-item.clickable {\n                color: #4285f4;\n                cursor: pointer;\n                transition: all 0.2s;\n            }\n\n            .breadcrumb-item.clickable:hover {\n                color: #3367d6;\n                text-decoration: underline;\n            }\n\n            .breadcrumb-separator {\n                color: #999;\n                margin: 0 4px;\n            }\n\n            .drive-picker-close-btn {\n                background: none;\n                border: none;\n                font-size: 28px;\n                color: #666;\n                cursor: pointer;\n                padding: 0;\n                width: 32px;\n                height: 32px;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                border-radius: 4px;\n                transition: all 0.2s;\n            }\n\n            .drive-picker-close-btn:hover {\n                background: #e0e0e0;\n                color: #333;\n            }\n\n            .drive-picker-body {\n                flex: 1;\n                overflow-y: auto;\n                padding: 24px;\n                position: relative;\n            }\n\n            .drive-picker-error {\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n                height: 100%;\n                text-align: center;\n                color: #d32f2f;\n            }\n\n            .drive-picker-error.hidden {\n                display: none;\n            }\n\n            .error-message {\n                margin-bottom: 16px;\n                font-size: 16px;\n            }\n\n            .retry-btn {\n                padding: 10px 24px;\n                background: #4285f4;\n                color: white;\n                border: none;\n                border-radius: 6px;\n                font-size: 14px;\n                cursor: pointer;\n                transition: background 0.2s;\n            }\n\n            .retry-btn:hover {\n                background: #3367d6;\n            }\n\n            .drive-picker-grid {\n                display: grid;\n                grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));\n                gap: 16px;\n            }\n\n            .drive-picker-grid.hidden {\n                display: none;\n            }\n\n            .drive-item {\n                position: relative;\n                aspect-ratio: 1;\n                border: 2px solid transparent;\n                border-radius: 8px;\n                overflow: hidden;\n                cursor: pointer;\n                transition: all 0.2s;\n                background: #f5f5f5;\n                display: flex;\n                flex-direction: column;\n                align-items: center;\n                justify-content: center;\n            }\n\n            .drive-item:hover {\n                border-color: #4285f4;\n                transform: translateY(-2px);\n                box-shadow: 0 4px 12px rgba(66, 133, 244, 0.2);\n            }\n\n            .drive-item.selected {\n                border-color: #4285f4;\n                box-shadow: 0 4px 16px rgba(66, 133, 244, 0.3);\n            }\n\n            .drive-item.folder {\n                background: #fff;\n            }\n\n            .drive-item.folder .folder-icon {\n                font-size: 48px;\n                margin-bottom: 8px;\n            }\n\n            .drive-item.image img {\n                width: 100%;\n                height: 100%;\n                object-fit: cover;\n                position: absolute;\n                top: 0;\n                left: 0;\n            }\n\n            .drive-item .item-name {\n                position: absolute;\n                bottom: 0;\n                left: 0;\n                right: 0;\n                padding: 8px;\n                background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);\n                color: white;\n                font-size: 12px;\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n                z-index: 1;\n            }\n\n            .drive-item.folder .item-name {\n                position: static;\n                background: none;\n                color: #333;\n                padding: 0;\n                margin-top: 8px;\n                text-align: center;\n            }\n\n            .drive-item .selected-check {\n                position: absolute;\n                top: 8px;\n                right: 8px;\n                width: 24px;\n                height: 24px;\n                background: #4285f4;\n                border-radius: 50%;\n                display: none;\n                align-items: center;\n                justify-content: center;\n                color: white;\n                font-size: 14px;\n                z-index: 2;\n            }\n\n            .drive-item.selected .selected-check {\n                display: flex;\n            }\n\n            .drive-picker-footer {\n                display: flex;\n                justify-content: space-between;\n                align-items: center;\n                padding: 16px 24px;\n                border-top: 1px solid #e0e0e0;\n                background: #f8f9fa;\n            }\n\n            .drive-picker-info {\n                font-size: 14px;\n                color: #666;\n            }\n\n            .drive-picker-actions {\n                display: flex;\n                gap: 12px;\n            }\n\n            .drive-picker-actions button {\n                padding: 10px 20px;\n                border: none;\n                border-radius: 6px;\n                font-size: 14px;\n                cursor: pointer;\n                transition: all 0.2s;\n            }\n\n            .btn-cancel {\n                background: #f5f5f5;\n                color: #333;\n            }\n\n            .btn-cancel:hover {\n                background: #e0e0e0;\n            }\n\n            .btn-select {\n                background: #4285f4;\n                color: white;\n            }\n\n            .btn-select:hover:not(:disabled) {\n                background: #3367d6;\n            }\n\n            .btn-select:disabled {\n                background: #ccc;\n                cursor: not-allowed;\n                opacity: 0.6;\n            }\n\n            /*  */\n            .custom-confirm-dialog {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                z-index: 10001;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n            }\n\n            .custom-confirm-dialog .dialog-overlay {\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                background: rgba(0, 0, 0, 0.5);\n            }\n\n            .custom-confirm-dialog .dialog-content {\n                position: relative;\n                background: white;\n                border-radius: 12px;\n                padding: 24px;\n                max-width: 480px;\n                width: 90%;\n                box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);\n                z-index: 1;\n            }\n\n            .custom-confirm-dialog .dialog-title {\n                margin: 0 0 16px 0;\n                font-size: 20px;\n                font-weight: 600;\n                color: #202124;\n            }\n\n            .custom-confirm-dialog .dialog-message {\n                margin: 0 0 24px 0;\n                font-size: 14px;\n                line-height: 1.6;\n                color: #5f6368;\n                white-space: pre-wrap;\n            }\n\n            .custom-confirm-dialog .dialog-buttons {\n                display: flex;\n                gap: 12px;\n                justify-content: flex-end;\n            }\n\n            .custom-confirm-dialog .dialog-btn {\n                padding: 10px 24px;\n                border: none;\n                border-radius: 6px;\n                font-size: 14px;\n                font-weight: 500;\n                cursor: pointer;\n                transition: all 0.2s;\n            }\n\n            .custom-confirm-dialog .dialog-btn-cancel {\n                background: #f1f3f4;\n                color: #202124;\n            }\n\n            .custom-confirm-dialog .dialog-btn-cancel:hover {\n                background: #e8eaed;\n            }\n\n            .custom-confirm-dialog .dialog-btn-confirm {\n                background: #4285f4;\n                color: white;\n            }\n\n            .custom-confirm-dialog .dialog-btn-confirm:hover {\n                background: #3367d6;\n            }\n        ",document.head.appendChild(t)}}},{key:"attachEventListeners",value:function(){var t=this;this.modal.querySelector(".drive-picker-close-btn").addEventListener("click",function(){return t.close()}),this.modal.querySelector(".drive-picker-overlay").addEventListener("click",function(){return t.close()}),this.modal.querySelector(".btn-cancel").addEventListener("click",function(){return t.close()}),this.modal.querySelector(".btn-select").addEventListener("click",function(){return t.selectImage()}),this.modal.querySelector(".retry-btn").addEventListener("click",function(){return t.loadInitialData()}),this.modal.querySelector("#load-from-url-btn").addEventListener("click",function(){return t.loadFromUrl()}),document.addEventListener("keydown",function(e){"Escape"===e.key&&t.isOpen&&t.close()})}},{key:"open",value:(c=gr(dr().m(function t(){var e;return dr().w(function(t){for(;;)switch(t.p=t.n){case 0:if(console.log("[DEBUG] DriveImagePicker.open() called"),console.log("[DEBUG] this.isOpen:",this.isOpen),console.log("[DEBUG] this.modal:",this.modal),!this.isOpen){t.n=1;break}return t.a(2);case 1:if(this.isOpen=!0,this.modal.classList.remove("hidden"),this.selectedImage=null,console.log("[DEBUG] Modal should be visible now"),this._tokensClearedOnce){t.n=5;break}return console.log("[DEBUG] Clearing all cached tokens (first time only)..."),t.p=2,t.n=3,this.driveAPI.logout();case 3:this._tokensClearedOnce=!0,console.log("[DEBUG] All tokens cleared successfully"),t.n=5;break;case 4:t.p=4,e=t.v,console.error("[DEBUG] Failed to clear tokens:",e);case 5:return t.n=6,this.loadInitialData();case 6:return t.a(2)}},t,this,[[2,4]])})),function(){return c.apply(this,arguments)})},{key:"close",value:function(){this.isOpen=!1,this.modal.classList.add("hidden"),this.selectedImage=null}},{key:"loadInitialData",value:(l=gr(dr().m(function t(){var e,n,r;return dr().w(function(t){for(;;)switch(t.p=t.n){case 0:return e=this.modal.querySelector("#drive-picker-error"),n=this.modal.querySelector("#drive-picker-grid"),e.classList.add("hidden"),n.classList.remove("hidden"),t.p=1,t.n=2,this.loadUserInfo();case 2:return this.currentFolderId=null,this.folderPath=[{id:null,name:""}],this.updateBreadcrumb(),t.n=3,this.loadFolderContents(this.currentFolderId);case 3:t.n=5;break;case 4:t.p=4,r=t.v,console.error("Failed to load initial data:",r),n.classList.add("hidden"),e.classList.remove("hidden"),e.querySelector(".error-message").textContent=": ".concat(r.message);case 5:return t.a(2)}},t,this,[[1,4]])})),function(){return l.apply(this,arguments)})},{key:"loadUserInfo",value:(s=gr(dr().m(function t(){var e,n;return dr().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,this.driveAPI.getUserInfo();case 1:e=t.v,this.currentUserEmail=e.emailAddress,this.modal.querySelector("#account-email").textContent=this.currentUserEmail,console.log("[DEBUG] User email:",this.currentUserEmail),t.n=3;break;case 2:t.p=2,n=t.v,console.error("Failed to load user info:",n),this.modal.querySelector("#account-email").textContent="";case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return s.apply(this,arguments)})},{key:"loadFolderContents",value:(a=gr(dr().m(function t(e){var n;return dr().w(function(t){for(;;)switch(t.p=t.n){case 0:return console.log("[DEBUG] loadFolderContents() called, folderId:",e),t.p=1,t.n=2,this.driveAPI.getFolderContents(e);case 2:this.items=t.v,console.log("[DEBUG] Retrieved items:",this.items.length),this.renderGrid(),t.n=4;break;case 3:throw t.p=3,n=t.v,console.error("Failed to load folder contents:",n),n;case 4:return t.a(2)}},t,this,[[1,3]])})),function(t){return a.apply(this,arguments)})},{key:"updateBreadcrumb",value:function(){var t=this,e=this.modal.querySelector("#breadcrumb");e.innerHTML="",this.folderPath.forEach(function(n,r){var i=document.createElement("span");if(i.className="breadcrumb-item",r<t.folderPath.length-1&&(i.classList.add("clickable"),i.addEventListener("click",function(){return t.navigateToFolder(n.id,r)})),i.textContent=0===r?" ".concat(n.name):n.name,e.appendChild(i),r<t.folderPath.length-1){var o=document.createElement("span");o.className="breadcrumb-separator",o.textContent="",e.appendChild(o)}})}},{key:"navigateToFolder",value:(o=gr(dr().m(function t(e){var n,r,i=arguments;return dr().w(function(t){for(;;)switch(t.p=t.n){case 0:return n=i.length>1&&void 0!==i[1]?i[1]:null,console.log("[DEBUG] Navigating to folder:",e),t.p=1,null!==n&&(this.folderPath=this.folderPath.slice(0,n+1)),this.currentFolderId=e,this.updateBreadcrumb(),t.n=2,this.loadFolderContents(e);case 2:t.n=4;break;case 3:t.p=3,r=t.v,console.error("Failed to navigate to folder:",r),this.showConfirmDialog("Error / "," / Failed to load folder: ".concat(r.message),"OK",null);case 4:return t.a(2)}},t,this,[[1,3]])})),function(t){return o.apply(this,arguments)})},{key:"openFolder",value:(i=gr(dr().m(function t(e){return dr().w(function(t){for(;;)switch(t.n){case 0:return console.log("[DEBUG] Opening folder:",e.name),this.folderPath.push({id:e.id,name:e.name}),t.n=1,this.navigateToFolder(e.id);case 1:return t.a(2)}},t,this)})),function(t){return i.apply(this,arguments)})},{key:"showConfirmDialog",value:function(t,e,n,r){return new Promise(function(i){var o=document.createElement("div");o.className="custom-confirm-dialog",o.innerHTML='\n                <div class="dialog-overlay"></div>\n                <div class="dialog-content">\n                    <h3 class="dialog-title">'.concat(t,'</h3>\n                    <p class="dialog-message">').concat(e,'</p>\n                    <div class="dialog-buttons">\n                        ').concat(r?'<button class="dialog-btn dialog-btn-cancel">'.concat(r,"</button>"):"",'\n                        <button class="dialog-btn dialog-btn-confirm">').concat(n,"</button>\n                    </div>\n                </div>\n            "),document.body.appendChild(o);var a=o.querySelector(".dialog-btn-confirm"),s=o.querySelector(".dialog-btn-cancel"),l=function(){o.remove()};a.addEventListener("click",function(){l(),i(!0)}),s&&s.addEventListener("click",function(){l(),i(!1)}),o.querySelector(".dialog-overlay").addEventListener("click",function(){l(),i(!1)})})}},{key:"loadFromUrl",value:(r=gr(dr().m(function t(){var e,n,r,i,o;return dr().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=this.modal.querySelector("#drive-url-input"),n=e.value.trim()){t.n=2;break}return t.n=1,this.showConfirmDialog("Error / ","URL / Please enter a URL","OK",null);case 1:case 3:case 6:case 9:return t.a(2);case 2:if(t.p=2,r=this.extractFileIdFromUrl(n)){t.n=4;break}return t.n=3,this.showConfirmDialog("Error / ","Google Drive URL / Invalid Google Drive URL","OK",null);case 4:return console.log("[DEBUG] Extracted file ID:",r),t.n=5,this.driveAPI.getFileMetadata(r);case 5:if(i=t.v,console.log("[DEBUG] File info:",i),i.mimeType.startsWith("image/")){t.n=7;break}return t.n=6,this.showConfirmDialog("Error / "," / This file is not an image","OK",null);case 7:this.selectedImage={file_id:r,file_name:i.name,type:"image",thumbnail_link:i.thumbnailLink,mime_type:i.mimeType},this.modal.querySelector("#selected-image-name").textContent=i.name,this.modal.querySelector(".btn-select").disabled=!1,e.value="",console.log("[DEBUG] Image selected from URL:",i.name),t.n=9;break;case 8:return t.p=8,o=t.v,console.error("Failed to load from URL:",o),t.n=9,this.showConfirmDialog("Error / ","URL / Failed to load from URL: ".concat(o.message),"OK",null)}},t,this,[[2,8]])})),function(){return r.apply(this,arguments)})},{key:"extractFileIdFromUrl",value:function(t){var e=t.match(/\/file\/d\/([^\/]+)/);return e||(e=t.match(/[?&]id=([^&]+)/))||(e=t.match(/\/uc\?id=([^&]+)/))?e[1]:/^[a-zA-Z0-9_-]{25,}$/.test(t)?t:null}},{key:"renderGrid",value:function(){var t=this,e=this.modal.querySelector("#drive-picker-grid");if(e.innerHTML="",0!==this.items.length){var n=this.items.filter(function(t){return"folder"===t.type}),r=this.items.filter(function(t){return"image"===t.type});n.forEach(function(n){var r=document.createElement("div");r.className="drive-item folder",r.dataset.folderId=n.id,r.innerHTML='\n                <div class="folder-icon"></div>\n                <div class="item-name">'.concat(n.name,"</div>\n            "),r.addEventListener("dblclick",function(){return t.openFolder(n)}),e.appendChild(r)}),r.forEach(function(n){var r=document.createElement("div");r.className="drive-item image",r.dataset.fileId=n.file_id;var i=n.thumbnail_link||t.getFileIcon(n.mime_type);r.innerHTML='\n                <img src="'.concat(i,'" alt="').concat(n.file_name,'" loading="lazy">\n                <div class="item-name">').concat(n.file_name,'</div>\n                <div class="selected-check"></div>\n            '),r.addEventListener("click",function(){return t.selectImageItem(n,r)}),e.appendChild(r)})}else e.innerHTML='<p style="text-align: center; color: #666;"></p>'}},{key:"getFileIcon",value:function(t){return"data:image/svg+xml,"+encodeURIComponent('\n            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n                <rect fill="#4285f4" width="100" height="100"/>\n                <text x="50" y="55" font-size="14" fill="white" text-anchor="middle" font-family="sans-serif">IMAGE</text>\n            </svg>\n        ')}},{key:"selectImageItem",value:function(t,e){this.modal.querySelectorAll(".drive-item").forEach(function(t){return t.classList.remove("selected")}),e.classList.add("selected"),this.selectedImage=t,this.modal.querySelector("#selected-image-name").textContent=t.file_name,this.modal.querySelector("#btn-select").disabled=!1}},{key:"selectImage",value:(n=gr(dr().m(function t(){var e,n,r,i,o,a,s;return dr().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.selectedImage){t.n=1;break}return t.a(2);case 1:return t.p=1,console.log("[DEBUG] Getting file metadata..."),t.n=2,this.driveAPI.getFileMetadata(this.selectedImage.file_id);case 2:if(e=t.v,n="",r=!1,i=this.selectedImage.file_id,o="https://lh3.googleusercontent.com/d/".concat(i),!e.webContentLink){t.n=6;break}return console.log("[DEBUG] File has webContentLink:",e.webContentLink),console.log("[DEBUG] Display URL (googleusercontent):",o),t.p=3,t.n=4,this.testImageLoad(o);case 4:t.v?(console.log("[DEBUG] File is publicly accessible via googleusercontent"),r=!0,n=" \n\nMarkdown\n\n"+"URL: ".concat(o)):console.log("[DEBUG] File is not publicly accessible via googleusercontent"),t.n=6;break;case 5:t.p=5,a=t.v,console.log("[DEBUG] Image load test failed:",a);case 6:return r||(n=" \n\nMarkdown\n\n"),t.n=7,this.showConfirmDialog(" / Image Load Test Result",n,r?" / Insert":" / Make Public & Insert"," / Cancel");case 7:if(t.v){t.n=8;break}return console.log("[DEBUG] User cancelled"),t.a(2);case 8:if(!r){t.n=9;break}return this.returnImageUrl(o),t.a(2);case 9:return console.log("[DEBUG] Updating file permissions to public..."),t.n=10,this.driveAPI.updateFilePermissions(this.selectedImage.file_id);case 10:if(t.v){t.n=12;break}return t.n=11,this.showConfirmDialog("Error / "," / Failed to make file public","OK",null);case 11:return t.a(2);case 12:return console.log("[DEBUG] Getting updated metadata..."),t.n=13,this.driveAPI.getFileMetadata(this.selectedImage.file_id);case 13:if(!t.v.webContentLink){t.n=15;break}return console.log("[DEBUG] File is now public, using googleusercontent URL"),t.n=14,this.showConfirmDialog("Success / "," \n\nURL: ".concat(o),"OK",null);case 14:this.returnImageUrl(o),t.n=16;break;case 15:throw new Error("webContentLink");case 16:t.n=18;break;case 17:return t.p=17,s=t.v,console.error("Failed to get image:",s),t.n=18,this.showConfirmDialog("Error / "," / Failed to get image: ".concat(s.message),"OK",null);case 18:return t.a(2)}},t,this,[[3,5],[1,17]])})),function(){return n.apply(this,arguments)})},{key:"testImageLoad",value:function(t){return new Promise(function(e){var n=new Image,r=setTimeout(function(){console.log("[DEBUG] Image load test timed out"),n.src="",e(!1)},5e3);n.onload=function(){clearTimeout(r),console.log("[DEBUG] Image loaded successfully"),e(!0)},n.onerror=function(){clearTimeout(r),console.log("[DEBUG] Image failed to load"),e(!1)},n.src=t})}},{key:"returnImageUrl",value:function(t){if(this.onSelectCallback){var e=this.selectedImage.file_id,n="https://lh3.googleusercontent.com/d/".concat(e);console.log("[DEBUG] Original URL:",t),console.log("[DEBUG] Display URL (googleusercontent):",n),this.onSelectCallback({url:n,fileName:this.selectedImage.file_name,fileId:this.selectedImage.file_id,isBlob:!1})}this.close()}},{key:"onSelect",value:function(t){this.onSelectCallback=t}}],e&&mr(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t;var t,e,n,r,i,o,a,s,l,c}(),br=null,xr=a(98621),vr=a(73590),Cr=a(73981),kr=a(10045),wr=(a(5164),a(28698),a(5894),a(63245),a(32387),a(70607)),Br=a(13226),Ir=a(80144),Sr=a(40797),_r=a(60513),Er=a(51444),Tr="comm",Mr="rule",Lr="decl",Or=Math.abs,Dr=String.fromCharCode;function Pr(t){return t.trim()}function Fr(t,e,n){return t.replace(e,n)}function jr(t,e,n){return t.indexOf(e,n)}function zr(t,e){return 0|t.charCodeAt(e)}function $r(t,e,n){return t.slice(e,n)}function Rr(t){return t.length}function Nr(t,e){return e.push(t),t}function qr(t,e){for(var n="",r=0;r<t.length;r++)n+=e(t[r],r,t,e)||"";return n}function Wr(t,e,n,r){switch(t.type){case"@layer":if(t.children.length)break;case"@import":case"@namespace":case Lr:return t.return=t.return||t.value;case Tr:return"";case"@keyframes":return t.return=t.value+"{"+qr(t.children,r)+"}";case Mr:if(!Rr(t.value=t.props.join(",")))return""}return Rr(n=qr(t.children,r))?t.return=t.value+"{"+n+"}":""}Object.assign;var Kr=1,Ur=1,Hr=0,Gr=0,Yr=0,Vr="";function Qr(t,e,n,r,i,o,a,s){return{value:t,root:e,parent:n,type:r,props:i,children:o,line:Kr,column:Ur,length:a,return:"",siblings:s}}function Xr(){return Yr=Gr>0?zr(Vr,--Gr):0,Ur--,10===Yr&&(Ur=1,Kr--),Yr}function Zr(){return Yr=Gr<Hr?zr(Vr,Gr++):0,Ur++,10===Yr&&(Ur=1,Kr++),Yr}function Jr(){return zr(Vr,Gr)}function ti(){return Gr}function ei(t,e){return $r(Vr,t,e)}function ni(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function ri(t){return Pr(ei(Gr-1,ai(91===t?t+2:40===t?t+1:t)))}function ii(t){for(;(Yr=Jr())&&Yr<33;)Zr();return ni(t)>2||ni(Yr)>3?"":" "}function oi(t,e){for(;--e&&Zr()&&!(Yr<48||Yr>102||Yr>57&&Yr<65||Yr>70&&Yr<97););return ei(t,ti()+(e<6&&32==Jr()&&32==Zr()))}function ai(t){for(;Zr();)switch(Yr){case t:return Gr;case 34:case 39:34!==t&&39!==t&&ai(Yr);break;case 40:41===t&&ai(t);break;case 92:Zr()}return Gr}function si(t,e){for(;Zr()&&t+Yr!==57&&(t+Yr!==84||47!==Jr()););return"/*"+ei(e,Gr-1)+"*"+Dr(47===t?t:Zr())}function li(t){for(;!ni(Jr());)Zr();return ei(t,Gr)}function ci(t){return function(t){return Vr="",t}(hi("",null,null,null,[""],t=function(t){return Kr=Ur=1,Hr=Rr(Vr=t),Gr=0,[]}(t),0,[0],t))}function hi(t,e,n,r,i,o,a,s,l){for(var c=0,h=0,u=a,d=0,p=0,f=0,g=1,m=1,A=1,y=0,b="",x=i,v=o,C=r,k=b;m;)switch(f=y,y=Zr()){case 40:if(108!=f&&58==zr(k,u-1)){-1!=jr(k+=Fr(ri(y),"&","&\f"),"&\f",Or(c?s[c-1]:0))&&(A=-1);break}case 34:case 39:case 91:k+=ri(y);break;case 9:case 10:case 13:case 32:k+=ii(f);break;case 92:k+=oi(ti()-1,7);continue;case 47:switch(Jr()){case 42:case 47:Nr(di(si(Zr(),ti()),e,n,l),l),5!=ni(f||1)&&5!=ni(Jr()||1)||!Rr(k)||" "===$r(k,-1,void 0)||(k+=" ");break;default:k+="/"}break;case 123*g:s[c++]=Rr(k)*A;case 125*g:case 59:case 0:switch(y){case 0:case 125:m=0;case 59+h:-1==A&&(k=Fr(k,/\f/g,"")),p>0&&(Rr(k)-u||0===g&&47===f)&&Nr(p>32?pi(k+";",r,n,u-1,l):pi(Fr(k," ","")+";",r,n,u-2,l),l);break;case 59:k+=";";default:if(Nr(C=ui(k,e,n,c,h,i,s,b,x=[],v=[],u,o),o),123===y)if(0===h)hi(k,e,C,C,x,o,u,s,v);else{switch(d){case 99:if(110===zr(k,3))break;case 108:if(97===zr(k,2))break;default:h=0;case 100:case 109:case 115:}h?hi(t,C,C,r&&Nr(ui(t,C,C,0,0,i,s,b,i,x=[],u,v),v),i,v,u,s,r?x:v):hi(k,C,C,C,[""],v,0,s,v)}}c=h=p=0,g=A=1,b=k="",u=a;break;case 58:u=1+Rr(k),p=f;default:if(g<1)if(123==y)--g;else if(125==y&&0==g++&&125==Xr())continue;switch(k+=Dr(y),y*g){case 38:A=h>0?1:(k+="\f",-1);break;case 44:s[c++]=(Rr(k)-1)*A,A=1;break;case 64:45===Jr()&&(k+=ri(Zr())),d=Jr(),h=u=Rr(b=k+=li(ti())),y++;break;case 45:45===f&&2==Rr(k)&&(g=0)}}return o}function ui(t,e,n,r,i,o,a,s,l,c,h,u){for(var d=i-1,p=0===i?o:[""],f=function(t){return t.length}(p),g=0,m=0,A=0;g<r;++g)for(var y=0,b=$r(t,d+1,d=Or(m=a[g])),x=t;y<f;++y)(x=Pr(m>0?p[y]+" "+b:Fr(b,/&\f/g,p[y])))&&(l[A++]=x);return Qr(t,e,n,0===i?Mr:s,l,c,h,u)}function di(t,e,n,r){return Qr(t,e,n,Tr,Dr(Yr),$r(t,2,-2),0,r)}function pi(t,e,n,r,i){return Qr(t,e,n,Lr,$r(t,0,r),$r(t,r+1,-1),r,i)}var fi=a(66401),gi={id:"c4",detector:(0,Sr.K2)(t=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(981).then(a.bind(a,54981));return{id:"c4",diagram:t}},"loader")},mi="flowchart",Ai={id:mi,detector:(0,Sr.K2)((t,e)=>"dagre-wrapper"!==e?.flowchart?.defaultRenderer&&"elk"!==e?.flowchart?.defaultRenderer&&/^\s*graph/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(291).then(a.bind(a,22291));return{id:mi,diagram:t}},"loader")},yi="flowchart-v2",bi={id:yi,detector:(0,Sr.K2)((t,e)=>"dagre-d3"!==e?.flowchart?.defaultRenderer&&("elk"===e?.flowchart?.defaultRenderer&&(e.layout="elk"),!(!/^\s*graph/.test(t)||"dagre-wrapper"!==e?.flowchart?.defaultRenderer)||/^\s*flowchart/.test(t)),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(291).then(a.bind(a,22291));return{id:yi,diagram:t}},"loader")},xi={id:"er",detector:(0,Sr.K2)(t=>/^\s*erDiagram/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(756).then(a.bind(a,8756));return{id:"er",diagram:t}},"loader")},vi="gitGraph",Ci={id:vi,detector:(0,Sr.K2)(t=>/^\s*gitGraph/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(164),a.e(731),a.e(319)]).then(a.bind(a,66319));return{id:vi,diagram:t}},"loader")},ki="gantt",wi={id:ki,detector:(0,Sr.K2)(t=>/^\s*gantt/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(379).then(a.bind(a,64379));return{id:ki,diagram:t}},"loader")},Bi="info",Ii={id:Bi,detector:(0,Sr.K2)(t=>/^\s*info/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(164),a.e(731),a.e(246)]).then(a.bind(a,8246));return{id:Bi,diagram:t}},"loader")},Si={id:"pie",detector:(0,Sr.K2)(t=>/^\s*pie/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(164),a.e(731),a.e(412)]).then(a.bind(a,69412));return{id:"pie",diagram:t}},"loader")},_i="quadrantChart",Ei={id:_i,detector:(0,Sr.K2)(t=>/^\s*quadrantChart/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(203).then(a.bind(a,51203));return{id:_i,diagram:t}},"loader")},Ti="xychart",Mi={id:Ti,detector:(0,Sr.K2)(t=>/^\s*xychart(-beta)?/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(955).then(a.bind(a,45955));return{id:Ti,diagram:t}},"loader")},Li="requirement",Oi={id:Li,detector:(0,Sr.K2)(t=>/^\s*requirement(Diagram)?/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(32).then(a.bind(a,29032));return{id:Li,diagram:t}},"loader")},Di="sequence",Pi={id:Di,detector:(0,Sr.K2)(t=>/^\s*sequenceDiagram/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(592).then(a.bind(a,17592));return{id:Di,diagram:t}},"loader")},Fi="class",ji={id:Fi,detector:(0,Sr.K2)((t,e)=>"dagre-wrapper"!==e?.class?.defaultRenderer&&/^\s*classDiagram/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(746),a.e(510)]).then(a.bind(a,29510));return{id:Fi,diagram:t}},"loader")},zi="classDiagram",$i={id:zi,detector:(0,Sr.K2)((t,e)=>!(!/^\s*classDiagram/.test(t)||"dagre-wrapper"!==e?.class?.defaultRenderer)||/^\s*classDiagram-v2/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(746),a.e(815)]).then(a.bind(a,53815));return{id:zi,diagram:t}},"loader")},Ri="state",Ni={id:Ri,detector:(0,Sr.K2)((t,e)=>"dagre-wrapper"!==e?.state?.defaultRenderer&&/^\s*stateDiagram/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(164),a.e(567),a.e(616),a.e(142)]).then(a.bind(a,88142));return{id:Ri,diagram:t}},"loader")},qi="stateDiagram",Wi={id:qi,detector:(0,Sr.K2)((t,e)=>!!/^\s*stateDiagram-v2/.test(t)||!(!/^\s*stateDiagram/.test(t)||"dagre-wrapper"!==e?.state?.defaultRenderer),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(616),a.e(802)]).then(a.bind(a,84802));return{id:qi,diagram:t}},"loader")},Ki="journey",Ui={id:Ki,detector:(0,Sr.K2)(t=>/^\s*journey/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(480).then(a.bind(a,45480));return{id:Ki,diagram:t}},"loader")},Hi={draw:(0,Sr.K2)((t,e,n)=>{Sr.Rm.debug("rendering svg for syntax error\n");const r=(0,vr.D)(e),i=r.append("g");r.attr("viewBox","0 0 2412 512"),(0,Ir.a$)(r,100,512,!0),i.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),i.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),i.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),i.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),i.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),i.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),i.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),i.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${n}`)},"draw")},Gi=Hi,Yi={db:{},renderer:Hi,parser:{parse:(0,Sr.K2)(()=>{},"parse")}},Vi="flowchart-elk",Qi={id:Vi,detector:(0,Sr.K2)((t,e={})=>!!(/^\s*flowchart-elk/.test(t)||/^\s*(flowchart|graph)/.test(t)&&"elk"===e?.flowchart?.defaultRenderer)&&(e.layout="elk",!0),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(291).then(a.bind(a,22291));return{id:Vi,diagram:t}},"loader")},Xi="timeline",Zi={id:Xi,detector:(0,Sr.K2)(t=>/^\s*timeline/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(672).then(a.bind(a,50291));return{id:Xi,diagram:t}},"loader")},Ji="mindmap",to={id:Ji,detector:(0,Sr.K2)(t=>/^\s*mindmap/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(822).then(a.bind(a,35822));return{id:Ji,diagram:t}},"loader")},eo="kanban",no={id:eo,detector:(0,Sr.K2)(t=>/^\s*kanban/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(241).then(a.bind(a,16241));return{id:eo,diagram:t}},"loader")},ro="sankey",io={id:ro,detector:(0,Sr.K2)(t=>/^\s*sankey(-beta)?/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await a.e(9).then(a.bind(a,32009));return{id:ro,diagram:t}},"loader")},oo="packet",ao={id:oo,detector:(0,Sr.K2)(t=>/^\s*packet(-beta)?/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(164),a.e(731),a.e(948)]).then(a.bind(a,16567));return{id:oo,diagram:t}},"loader")},so="radar",lo={id:so,detector:(0,Sr.K2)(t=>/^\s*radar-beta/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(164),a.e(731),a.e(992)]).then(a.bind(a,16992));return{id:so,diagram:t}},"loader")},co="block",ho={id:co,detector:(0,Sr.K2)(t=>/^\s*block(-beta)?/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(164),a.e(996)]).then(a.bind(a,65996));return{id:co,diagram:t}},"loader")},uo="architecture",po={id:uo,detector:(0,Sr.K2)(t=>/^\s*architecture/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(164),a.e(731),a.e(165),a.e(249)]).then(a.bind(a,8249));return{id:uo,diagram:t}},"loader")},fo="treemap",go={id:fo,detector:(0,Sr.K2)(t=>/^\s*treemap/.test(t),"detector"),loader:(0,Sr.K2)(async()=>{const{diagram:t}=await Promise.all([a.e(164),a.e(731),a.e(821)]).then(a.bind(a,82821));return{id:fo,diagram:t}},"loader")},mo=!1,Ao=(0,Sr.K2)(()=>{mo||(mo=!0,(0,Ir.Js)("error",Yi,t=>"error"===t.toLowerCase().trim()),(0,Ir.Js)("---",{db:{clear:(0,Sr.K2)(()=>{},"clear")},styles:{},renderer:{draw:(0,Sr.K2)(()=>{},"draw")},parser:{parse:(0,Sr.K2)(()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")},"parse")},init:(0,Sr.K2)(()=>null,"init")},t=>t.toLowerCase().trimStart().startsWith("---")),(0,Ir.Xd)(Qi,to,po),(0,Ir.Xd)(gi,no,$i,ji,xi,wi,Ii,Si,Oi,Pi,bi,Ai,Zi,Ci,Wi,Ni,Ui,Ei,io,ao,Mi,ho,lo,go))},"addDiagrams"),yo=(0,Sr.K2)(async()=>{Sr.Rm.debug("Loading registered diagrams");const t=(await Promise.allSettled(Object.entries(Ir.mW).map(async([t,{detector:e,loader:n}])=>{if(n)try{(0,Ir.Gs)(t)}catch{try{const{diagram:t,id:r}=await n();(0,Ir.Js)(r,t,e)}catch(e){throw Sr.Rm.error(`Failed to load external diagram with key ${t}. Removing from detectors.`),delete Ir.mW[t],e}}}))).filter(t=>"rejected"===t.status);if(t.length>0){Sr.Rm.error(`Failed to load ${t.length} external diagrams`);for(const e of t)Sr.Rm.error(e);throw new Error(`Failed to load ${t.length} external diagrams`)}},"loadRegisteredDiagrams");function bo(t,e){t.attr("role","graphics-document document"),""!==e&&t.attr("aria-roledescription",e)}function xo(t,e,n,r){if(void 0!==t.insert){if(n){const e=`chart-desc-${r}`;t.attr("aria-describedby",e),t.insert("desc",":first-child").attr("id",e).text(n)}if(e){const n=`chart-title-${r}`;t.attr("aria-labelledby",n),t.insert("title",":first-child").attr("id",n).text(e)}}}(0,Sr.K2)(bo,"setA11yDiagramInfo"),(0,Sr.K2)(xo,"addSVGa11yTitleDescription");var vo=class t{constructor(t,e,n,r,i){this.type=t,this.text=e,this.db=n,this.parser=r,this.renderer=i}static{(0,Sr.K2)(this,"Diagram")}static async fromText(e,n={}){const r=(0,Ir.zj)(),i=(0,Ir.Ch)(e,r);e=(0,Br.C4)(e)+"\n";try{(0,Ir.Gs)(i)}catch{const t=(0,Ir.J$)(i);if(!t)throw new Ir.C0(`Diagram ${i} not found.`);const{id:e,diagram:n}=await t();(0,Ir.Js)(e,n)}const{db:o,parser:a,renderer:s,init:l}=(0,Ir.Gs)(i);return a.parser&&(a.parser.yy=o),o.clear?.(),l?.(r),n.title&&o.setDiagramTitle?.(n.title),await a.parse(e),new t(i,e,o,a,s)}async render(t,e){await this.renderer.draw(this.text,t,e,this)}getParser(){return this.parser}getType(){return this.type}},Co=[],ko=(0,Sr.K2)(()=>{Co.forEach(t=>{t()}),Co=[]},"attachFunctions"),wo=(0,Sr.K2)(t=>t.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart(),"cleanupComments");function Bo(t){const e=t.match(Ir.EJ);if(!e)return{text:t,metadata:{}};let n=(0,Cr.H)(e[1],{schema:Cr.r})??{};n="object"!=typeof n||Array.isArray(n)?{}:n;const r={};return n.displayMode&&(r.displayMode=n.displayMode.toString()),n.title&&(r.title=n.title.toString()),n.config&&(r.config=n.config),{text:t.slice(e[0].length),metadata:r}}(0,Sr.K2)(Bo,"extractFrontMatter");var Io=(0,Sr.K2)(t=>t.replace(/\r\n?/g,"\n").replace(/<(\w+)([^>]*)>/g,(t,e,n)=>"<"+e+n.replace(/="([^"]*)"/g,"='$1'")+">"),"cleanupText"),So=(0,Sr.K2)(t=>{const{text:e,metadata:n}=Bo(t),{displayMode:r,title:i,config:o={}}=n;return r&&(o.gantt||(o.gantt={}),o.gantt.displayMode=r),{title:i,config:o,text:e}},"processFrontmatter"),_o=(0,Sr.K2)(t=>{const e=Br._K.detectInit(t)??{},n=Br._K.detectDirective(t,"wrap");return Array.isArray(n)?e.wrap=n.some(({type:t})=>"wrap"===t):"wrap"===n?.type&&(e.wrap=!0),{text:(0,Br.vU)(t),directive:e}},"processDirectives");function Eo(t){const e=Io(t),n=So(e),r=_o(n.text),i=(0,Br.$t)(n.config,r.directive);return{code:t=wo(r.text),title:n.title,config:i}}function To(t){const e=(new TextEncoder).encode(t),n=Array.from(e,t=>String.fromCodePoint(t)).join("");return btoa(n)}(0,Sr.K2)(Eo,"preprocessDiagram"),(0,Sr.K2)(To,"toBase64");var Mo=["foreignobject"],Lo=["dominant-baseline"];function Oo(t){const e=Eo(t);return(0,Ir.cL)(),(0,Ir.xA)(e.config??{}),e}async function Do(t,e){Ao();try{const{code:e,config:n}=Oo(t);return{diagramType:(await Uo(e)).type,config:n}}catch(t){if(e?.suppressErrors)return!1;throw t}}(0,Sr.K2)(Oo,"processAndSetConfigs"),(0,Sr.K2)(Do,"parse");var Po=(0,Sr.K2)((t,e,n=[])=>`\n.${t} ${e} { ${n.join(" !important; ")} !important; }`,"cssImportantStyles"),Fo=(0,Sr.K2)((t,e=new Map)=>{let n="";if(void 0!==t.themeCSS&&(n+=`\n${t.themeCSS}`),void 0!==t.fontFamily&&(n+=`\n:root { --mermaid-font-family: ${t.fontFamily}}`),void 0!==t.altFontFamily&&(n+=`\n:root { --mermaid-alt-font-family: ${t.altFontFamily}}`),e instanceof Map){const r=t.htmlLabels??t.flowchart?.htmlLabels?["> *","span"]:["rect","polygon","ellipse","circle","path"];e.forEach(t=>{(0,fi.A)(t.styles)||r.forEach(e=>{n+=Po(t.id,e,t.styles)}),(0,fi.A)(t.textStyles)||(n+=Po(t.id,"tspan",(t?.textStyles||[]).map(t=>t.replace("color","fill"))))})}return n},"createCssStyles"),jo=(0,Sr.K2)((t,e,n,r)=>{const i=Fo(t,n);return qr(ci(`${r}{${(0,Ir.tM)(e,i,t.themeVariables)}}`),Wr)},"createUserStyles"),zo=(0,Sr.K2)((t="",e,n)=>{let r=t;return n||e||(r=r.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),r=(0,Br.Sm)(r),r=r.replace(/<br>/g,"<br/>"),r},"cleanUpSvgCode"),$o=(0,Sr.K2)((t="",e)=>`<iframe style="width:100%;height:${e?.viewBox?.baseVal?.height?e.viewBox.baseVal.height+"px":"100%"};border:0;margin:0;" src="data:text/html;charset=UTF-8;base64,${To(`<body style="margin:0">${t}</body>`)}" sandbox="allow-top-navigation-by-user-activation allow-popups">\n  The "iframe" tag is not supported by your browser.\n</iframe>`,"putIntoIFrame"),Ro=(0,Sr.K2)((t,e,n,r,i)=>{const o=t.append("div");o.attr("id",n),r&&o.attr("style",r);const a=o.append("svg").attr("id",e).attr("width","100%").attr("xmlns","http://www.w3.org/2000/svg");return i&&a.attr("xmlns:xlink",i),a.append("g"),t},"appendDivSvgG");function No(t,e){return t.append("iframe").attr("id",e).attr("style","width: 100%; height: 100%;").attr("sandbox","")}(0,Sr.K2)(No,"sandboxedIframe");var qo=(0,Sr.K2)((t,e,n,r)=>{t.getElementById(e)?.remove(),t.getElementById(n)?.remove(),t.getElementById(r)?.remove()},"removeExistingElements"),Wo=(0,Sr.K2)(async function(t,e,n){Ao();const r=Oo(e);e=r.code;const i=(0,Ir.zj)();Sr.Rm.debug(i),e.length>(i?.maxTextSize??5e4)&&(e="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa");const o="#"+t,a="i"+t,s="#"+a,l="d"+t,c="#"+l,h=(0,Sr.K2)(()=>{const t=d?s:c,e=(0,Er.Ltv)(t).node();e&&"remove"in e&&e.remove()},"removeTempElements");let u=(0,Er.Ltv)("body");const d="sandbox"===i.securityLevel,p="loose"===i.securityLevel,f=i.fontFamily;if(void 0!==n){if(n&&(n.innerHTML=""),d){const t=No((0,Er.Ltv)(n),a);u=(0,Er.Ltv)(t.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=(0,Er.Ltv)(n);Ro(u,t,l,`font-family: ${f}`,"http://www.w3.org/1999/xlink")}else{if(qo(document,t,l,a),d){const t=No((0,Er.Ltv)("body"),a);u=(0,Er.Ltv)(t.nodes()[0].contentDocument.body),u.node().style.margin=0}else u=(0,Er.Ltv)("body");Ro(u,t,l)}let g,m;try{g=await vo.fromText(e,{title:r.title})}catch(t){if(i.suppressErrorRendering)throw h(),t;g=await vo.fromText("error"),m=t}const A=u.select(c).node(),y=g.type,b=A.firstChild,x=b.firstChild,v=g.renderer.getClasses?.(e,g),C=jo(i,y,v,o),k=document.createElement("style");k.innerHTML=C,b.insertBefore(k,x);try{await g.renderer.draw(e,t,xr.n.version,g)}catch(n){throw i.suppressErrorRendering?h():Gi.draw(e,t,xr.n.version),n}const w=u.select(`${c} svg`),B=g.db.getAccTitle?.(),I=g.db.getAccDescription?.();Ho(y,w,B,I),u.select(`[id="${t}"]`).selectAll("foreignobject > *").attr("xmlns","http://www.w3.org/1999/xhtml");let S=u.select(c).node().innerHTML;if(Sr.Rm.debug("config.arrowMarkerAbsolute",i.arrowMarkerAbsolute),S=zo(S,d,(0,Ir._3)(i.arrowMarkerAbsolute)),d){const t=u.select(c+" svg").node();S=$o(S,t)}else p||(S=Ae.default.sanitize(S,{ADD_TAGS:Mo,ADD_ATTR:Lo,HTML_INTEGRATION_POINTS:{foreignobject:!0}}));if(ko(),m)throw m;return h(),{diagramType:y,svg:S,bindFunctions:g.db.bindFunctions}},"render");function Ko(t={}){const e=(0,Ir.hH)({},t);e?.fontFamily&&!e.themeVariables?.fontFamily&&(e.themeVariables||(e.themeVariables={}),e.themeVariables.fontFamily=e.fontFamily),(0,Ir.wZ)(e),e?.theme&&e.theme in Ir.H$?e.themeVariables=Ir.H$[e.theme].getThemeVariables(e.themeVariables):e&&(e.themeVariables=Ir.H$.default.getThemeVariables(e.themeVariables));const n="object"==typeof e?(0,Ir.UU)(e):(0,Ir.Q2)();(0,Sr.He)(n.logLevel),Ao()}(0,Sr.K2)(Ko,"initialize");var Uo=(0,Sr.K2)((t,e={})=>{const{code:n}=Eo(t);return vo.fromText(n,e)},"getDiagramFromText");function Ho(t,e,n,r){bo(e,t),xo(e,n,r,e.attr("id"))}(0,Sr.K2)(Ho,"addA11yInfo");var Go=Object.freeze({render:Wo,parse:Do,getDiagramFromText:Uo,initialize:Ko,getConfig:Ir.zj,setConfig:Ir.Nk,getSiteConfig:Ir.Q2,updateSiteConfig:Ir.B6,reset:(0,Sr.K2)(()=>{(0,Ir.cL)()},"reset"),globalReset:(0,Sr.K2)(()=>{(0,Ir.cL)(Ir.sb)},"globalReset"),defaultConfig:Ir.sb});(0,Sr.He)((0,Ir.zj)().logLevel),(0,Ir.cL)((0,Ir.zj)());var Yo=(0,Sr.K2)((t,e,n)=>{Sr.Rm.warn(t),(0,Br.dq)(t)?(n&&n(t.str,t.hash),e.push({...t,message:t.str,error:t})):(n&&n(t),t instanceof Error&&e.push({str:t.message,message:t.message,hash:t.name,error:t}))},"handleError"),Vo=(0,Sr.K2)(async function(t={querySelector:".mermaid"}){try{await Qo(t)}catch(e){if((0,Br.dq)(e)&&Sr.Rm.error(e.str),la.parseError&&la.parseError(e),!t.suppressErrors)throw Sr.Rm.error("Use the suppressErrors option to suppress these errors"),e}},"run"),Qo=(0,Sr.K2)(async function({postRenderCallback:t,querySelector:e,nodes:n}={querySelector:".mermaid"}){const r=Go.getConfig();let i;if(Sr.Rm.debug((t?"":"No ")+"Callback function found"),n)i=n;else{if(!e)throw new Error("Nodes and querySelector are both undefined");i=document.querySelectorAll(e)}Sr.Rm.debug(`Found ${i.length} diagrams`),void 0!==r?.startOnLoad&&(Sr.Rm.debug("Start On Load: "+r?.startOnLoad),Go.updateSiteConfig({startOnLoad:r?.startOnLoad}));const o=new Br._K.InitIDGenerator(r.deterministicIds,r.deterministicIDSeed);let a;const s=[];for(const e of Array.from(i)){if(Sr.Rm.info("Rendering diagram: "+e.id),e.getAttribute("data-processed"))continue;e.setAttribute("data-processed","true");const n=`mermaid-${o.next()}`;a=e.innerHTML,a=(0,_r.T)(Br._K.entityDecode(a)).trim().replace(/<br\s*\/?>/gi,"<br/>");const r=Br._K.detectInit(a);r&&Sr.Rm.debug("Detected early reinit: ",r);try{const{svg:r,bindFunctions:i}=await aa(n,a,e);e.innerHTML=r,t&&await t(n),i&&i(e)}catch(t){Yo(t,s,la.parseError)}}if(s.length>0)throw s[0]},"runThrowsErrors"),Xo=(0,Sr.K2)(function(t){Go.initialize(t)},"initialize"),Zo=(0,Sr.K2)(async function(t,e,n){Sr.Rm.warn("mermaid.init is deprecated. Please use run instead."),t&&Xo(t);const r={postRenderCallback:n,querySelector:".mermaid"};"string"==typeof e?r.querySelector=e:e&&(e instanceof HTMLElement?r.nodes=[e]:r.nodes=e),await Vo(r)},"init"),Jo=(0,Sr.K2)(async(t,{lazyLoad:e=!0}={})=>{Ao(),(0,Ir.Xd)(...t),!1===e&&await yo()},"registerExternalDiagrams"),ta=(0,Sr.K2)(function(){if(la.startOnLoad){const{startOnLoad:t}=Go.getConfig();t&&la.run().catch(t=>Sr.Rm.error("Mermaid failed to initialize",t))}},"contentLoaded");"undefined"!=typeof document&&window.addEventListener("load",ta,!1);var ea=(0,Sr.K2)(function(t){la.parseError=t},"setParseErrorHandler"),na=[],ra=!1,ia=(0,Sr.K2)(async()=>{if(!ra){for(ra=!0;na.length>0;){const t=na.shift();if(t)try{await t()}catch(t){Sr.Rm.error("Error executing queue",t)}}ra=!1}},"executeQueue"),oa=(0,Sr.K2)(async(t,e)=>new Promise((n,r)=>{const i=(0,Sr.K2)(()=>new Promise((i,o)=>{Go.parse(t,e).then(t=>{i(t),n(t)},t=>{Sr.Rm.error("Error parsing",t),la.parseError?.(t),o(t),r(t)})}),"performCall");na.push(i),ia().catch(r)}),"parse"),aa=(0,Sr.K2)((t,e,n)=>new Promise((r,i)=>{const o=(0,Sr.K2)(()=>new Promise((o,a)=>{Go.render(t,e,n).then(t=>{o(t),r(t)},t=>{Sr.Rm.error("Error parsing",t),la.parseError?.(t),a(t),i(t)})}),"performCall");na.push(o),ia().catch(i)}),"render"),sa=(0,Sr.K2)(()=>Object.keys(Ir.mW).map(t=>({id:t})),"getRegisteredDiagramsMetadata"),la={startOnLoad:!0,mermaidAPI:Go,parse:oa,render:aa,init:Zo,run:Vo,registerExternalDiagrams:Jo,registerLayoutLoaders:kr.sO,initialize:Xo,parseError:void 0,contentLoaded:ta,setParseErrorHandler:ea,detectType:Ir.Ch,registerIconPacks:wr.pC,getRegisteredDiagramsMetadata:sa},ca=la;function ha(t){return t+.5|0}const ua=(t,e,n)=>Math.max(Math.min(t,n),e);function da(t){return ua(ha(2.55*t),0,255)}function pa(t){return ua(ha(255*t),0,255)}function fa(t){return ua(ha(t/2.55)/100,0,1)}function ga(t){return ua(ha(100*t),0,100)}const ma={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Aa=[..."0123456789ABCDEF"],ya=t=>Aa[15&t],ba=t=>Aa[(240&t)>>4]+Aa[15&t],xa=t=>(240&t)>>4==(15&t);const va=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Ca(t,e,n){const r=e*Math.min(n,1-n),i=(e,i=(e+t/30)%12)=>n-r*Math.max(Math.min(i-3,9-i,1),-1);return[i(0),i(8),i(4)]}function ka(t,e,n){const r=(r,i=(r+t/60)%6)=>n-n*e*Math.max(Math.min(i,4-i,1),0);return[r(5),r(3),r(1)]}function wa(t,e,n){const r=Ca(t,1,.5);let i;for(e+n>1&&(i=1/(e+n),e*=i,n*=i),i=0;i<3;i++)r[i]*=1-e-n,r[i]+=e;return r}function Ba(t){const e=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(e,n,r),o=Math.min(e,n,r),a=(i+o)/2;let s,l,c;return i!==o&&(c=i-o,l=a>.5?c/(2-i-o):c/(i+o),s=function(t,e,n,r,i){return t===i?(e-n)/r+(e<n?6:0):e===i?(n-t)/r+2:(t-e)/r+4}(e,n,r,c,i),s=60*s+.5),[0|s,l||0,a]}function Ia(t,e,n,r){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,r)).map(pa)}function Sa(t,e,n){return Ia(Ca,t,e,n)}function _a(t){return(t%360+360)%360}const Ea={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Ta={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ma;const La=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Oa=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Da=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Pa(t,e,n){if(t){let r=Ba(t);r[e]=Math.max(0,Math.min(r[e]+r[e]*n,0===e?360:1)),r=Sa(r),t.r=r[0],t.g=r[1],t.b=r[2]}}function Fa(t,e){return t?Object.assign(e||{},t):t}function ja(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=pa(t[3]))):(e=Fa(t,{r:0,g:0,b:0,a:1})).a=pa(e.a),e}function za(t){return"r"===t.charAt(0)?function(t){const e=La.exec(t);let n,r,i,o=255;if(e){if(e[7]!==n){const t=+e[7];o=e[8]?da(t):ua(255*t,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?da(n):ua(n,0,255)),r=255&(e[4]?da(r):ua(r,0,255)),i=255&(e[6]?da(i):ua(i,0,255)),{r:n,g:r,b:i,a:o}}}(t):function(t){const e=va.exec(t);let n,r=255;if(!e)return;e[5]!==n&&(r=e[6]?da(+e[5]):pa(+e[5]));const i=_a(+e[2]),o=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return Ia(wa,t,e,n)}(i,o,a):"hsv"===e[1]?function(t,e,n){return Ia(ka,t,e,n)}(i,o,a):Sa(i,o,a),{r:n[0],g:n[1],b:n[2],a:r}}(t)}class $a{constructor(t){if(t instanceof $a)return t;const e=typeof t;let n;var r,i,o;"object"===e?n=ja(t):"string"===e&&(o=(r=t).length,"#"===r[0]&&(4===o||5===o?i={r:255&17*ma[r[1]],g:255&17*ma[r[2]],b:255&17*ma[r[3]],a:5===o?17*ma[r[4]]:255}:7!==o&&9!==o||(i={r:ma[r[1]]<<4|ma[r[2]],g:ma[r[3]]<<4|ma[r[4]],b:ma[r[5]]<<4|ma[r[6]],a:9===o?ma[r[7]]<<4|ma[r[8]]:255})),n=i||function(t){Ma||(Ma=function(){const t={},e=Object.keys(Ta),n=Object.keys(Ea);let r,i,o,a,s;for(r=0;r<e.length;r++){for(a=s=e[r],i=0;i<n.length;i++)o=n[i],s=s.replace(o,Ea[o]);o=parseInt(Ta[a],16),t[s]=[o>>16&255,o>>8&255,255&o]}return t}(),Ma.transparent=[0,0,0,0]);const e=Ma[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||za(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Fa(this._rgb);return t&&(t.a=fa(t.a)),t}set rgb(t){this._rgb=ja(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fa(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?(t=this._rgb,e=(t=>xa(t.r)&&xa(t.g)&&xa(t.b)&&xa(t.a))(t)?ya:ba,t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0):void 0;var t,e}hslString(){return this._valid?function(t){if(!t)return;const e=Ba(t),n=e[0],r=ga(e[1]),i=ga(e[2]);return t.a<255?`hsla(${n}, ${r}%, ${i}%, ${fa(t.a)})`:`hsl(${n}, ${r}%, ${i}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,r=t.rgb;let i;const o=e===i?.5:e,a=2*o-1,s=n.a-r.a,l=((a*s===-1?a:(a+s)/(1+a*s))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const r=Da(fa(t.r)),i=Da(fa(t.g)),o=Da(fa(t.b));return{r:pa(Oa(r+n*(Da(fa(e.r))-r))),g:pa(Oa(i+n*(Da(fa(e.g))-i))),b:pa(Oa(o+n*(Da(fa(e.b))-o))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new $a(this.rgb)}alpha(t){return this._rgb.a=pa(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=ha(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Pa(this._rgb,2,t),this}darken(t){return Pa(this._rgb,2,-t),this}saturate(t){return Pa(this._rgb,1,t),this}desaturate(t){return Pa(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=Ba(t);n[0]=_a(n[0]+e),n=Sa(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function Ra(){}const Na=(()=>{let t=0;return()=>t++})();function qa(t){return null==t}function Wa(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function Ka(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function Ua(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function Ha(t,e){return Ua(t)?t:e}function Ga(t,e){return void 0===t?e:t}const Ya=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Va(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function Qa(t,e,n,r){let i,o,a;if(Wa(t))if(o=t.length,r)for(i=o-1;i>=0;i--)e.call(n,t[i],i);else for(i=0;i<o;i++)e.call(n,t[i],i);else if(Ka(t))for(a=Object.keys(t),o=a.length,i=0;i<o;i++)e.call(n,t[a[i]],a[i])}function Xa(t,e){let n,r,i,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,r=t.length;n<r;++n)if(i=t[n],o=e[n],i.datasetIndex!==o.datasetIndex||i.index!==o.index)return!1;return!0}function Za(t){if(Wa(t))return t.map(Za);if(Ka(t)){const e=Object.create(null),n=Object.keys(t),r=n.length;let i=0;for(;i<r;++i)e[n[i]]=Za(t[n[i]]);return e}return t}function Ja(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function ts(t,e,n,r){if(!Ja(t))return;const i=e[t],o=n[t];Ka(i)&&Ka(o)?es(i,o,r):e[t]=Za(o)}function es(t,e,n){const r=Wa(e)?e:[e],i=r.length;if(!Ka(t))return t;const o=(n=n||{}).merger||ts;let a;for(let e=0;e<i;++e){if(a=r[e],!Ka(a))continue;const i=Object.keys(a);for(let e=0,r=i.length;e<r;++e)o(i[e],t,a,n)}return t}function ns(t,e){return es(t,e,{merger:rs})}function rs(t,e,n){if(!Ja(t))return;const r=e[t],i=n[t];Ka(r)&&Ka(i)?ns(r,i):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Za(i))}const is={"":t=>t,x:t=>t.x,y:t=>t.y};function os(t,e){const n=is[e]||(is[e]=function(t){const e=function(t){const e=t.split("."),n=[];let r="";for(const t of e)r+=t,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function as(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ss=t=>void 0!==t,ls=t=>"function"==typeof t,cs=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0},hs=Math.PI,us=2*hs,ds=us+hs,ps=Number.POSITIVE_INFINITY,fs=hs/180,gs=hs/2,ms=hs/4,As=2*hs/3,ys=Math.log10,bs=Math.sign;function xs(t,e,n){return Math.abs(t-e)<n}function vs(t){const e=Math.round(t);t=xs(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(ys(t))),r=t/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function Cs(t){return!function(t){return"symbol"==typeof t||"object"==typeof t&&null!==t&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function ks(t,e,n){let r,i,o;for(r=0,i=t.length;r<i;r++)o=t[r][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function ws(t){return t*(hs/180)}function Bs(t){return t*(180/hs)}function Is(t){if(!Ua(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function Ss(t,e){const n=e.x-t.x,r=e.y-t.y,i=Math.sqrt(n*n+r*r);let o=Math.atan2(r,n);return o<-.5*hs&&(o+=us),{angle:o,distance:i}}function _s(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Es(t,e){return(t-e+ds)%us-hs}function Ts(t){return(t%us+us)%us}function Ms(t,e,n,r){const i=Ts(t),o=Ts(e),a=Ts(n),s=Ts(o-i),l=Ts(a-i),c=Ts(i-o),h=Ts(i-a);return i===o||i===a||r&&o===a||s>l&&c<h}function Ls(t,e,n){return Math.max(e,Math.min(n,t))}function Os(t,e,n,r=1e-6){return t>=Math.min(e,n)-r&&t<=Math.max(e,n)+r}function Ds(t,e,n){n=n||(n=>t[n]<e);let r,i=t.length-1,o=0;for(;i-o>1;)r=o+i>>1,n(r)?o=r:i=r;return{lo:o,hi:i}}const Ps=(t,e,n,r)=>Ds(t,n,r?r=>{const i=t[r][e];return i<n||i===n&&t[r+1][e]===n}:r=>t[r][e]<n),Fs=(t,e,n)=>Ds(t,n,r=>t[r][e]>=n),js=["push","pop","shift","splice","unshift"];function zs(t,e){const n=t._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(e);-1!==i&&r.splice(i,1),r.length>0||(js.forEach(e=>{delete t[e]}),delete t._chartjs)}function $s(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Rs="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function Ns(t,e){let n=[],r=!1;return function(...i){n=i,r||(r=!0,Rs.call(window,()=>{r=!1,t.apply(e,n)}))}}const qs=t=>"start"===t?"left":"end"===t?"right":"center",Ws=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2;function Ks(t,e,n){const r=e.length;let i=0,o=r;if(t._sorted){const{iScale:a,vScale:s,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,h=a.axis,{min:u,max:d,minDefined:p,maxDefined:f}=a.getUserBounds();if(p){if(i=Math.min(Ps(l,h,u).lo,n?r:Ps(e,h,a.getPixelForValue(u)).lo),c){const t=l.slice(0,i+1).reverse().findIndex(t=>!qa(t[s.axis]));i-=Math.max(0,t)}i=Ls(i,0,r-1)}if(f){let t=Math.max(Ps(l,a.axis,d,!0).hi+1,n?0:Ps(e,h,a.getPixelForValue(d),!0).hi+1);if(c){const e=l.slice(t-1).findIndex(t=>!qa(t[s.axis]));t+=Math.max(0,e)}o=Ls(t,i,r)-i}else o=r-i}return{start:i,count:o}}function Us(t){const{xScale:e,yScale:n,_scaleRanges:r}=t,i={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!r)return t._scaleRanges=i,!0;const o=r.xmin!==e.min||r.xmax!==e.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),o}const Hs=t=>0===t||1===t,Gs=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*us/n),Ys=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*us/n)+1,Vs={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*gs),easeOutSine:t=>Math.sin(t*gs),easeInOutSine:t=>-.5*(Math.cos(hs*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>Hs(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Hs(t)?t:Gs(t,.075,.3),easeOutElastic:t=>Hs(t)?t:Ys(t,.075,.3),easeInOutElastic(t){const e=.1125;return Hs(t)?t:t<.5?.5*Gs(2*t,e,.45):.5+.5*Ys(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-Vs.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*Vs.easeInBounce(2*t):.5*Vs.easeOutBounce(2*t-1)+.5};function Qs(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function Xs(t){return Qs(t)?t:new $a(t)}function Zs(t){return Qs(t)?t:new $a(t).saturate(.5).darken(.1).hexString()}const Js=["x","y","borderWidth","radius","tension"],tl=["color","borderColor","backgroundColor"],el=new Map;function nl(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let r=el.get(n);return r||(r=new Intl.NumberFormat(t,e),el.set(n,r)),r}(e,n).format(t)}const rl={values:t=>Wa(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const r=this.chart.options.locale;let i,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(i="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}(t,n)}const a=ys(Math.abs(o)),s=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),nl(t,r,l)},logarithmic(t,e,n){if(0===t)return"0";const r=n[e].significand||t/Math.pow(10,Math.floor(ys(t)));return[1,2,3,5,10,15].includes(r)||e>.8*n.length?rl.numeric.call(this,t,e,n):""}};var il={formatters:rl};const ol=Object.create(null),al=Object.create(null);function sl(t,e){if(!e)return t;const n=e.split(".");for(let e=0,r=n.length;e<r;++e){const r=n[e];t=t[r]||(t[r]=Object.create(null))}return t}function ll(t,e,n){return"string"==typeof e?es(sl(t,e),n):es(sl(t,""),e)}class cl{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Zs(e.backgroundColor),this.hoverBorderColor=(t,e)=>Zs(e.borderColor),this.hoverColor=(t,e)=>Zs(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ll(this,t,e)}get(t){return sl(this,t)}describe(t,e){return ll(al,t,e)}override(t,e){return ll(ol,t,e)}route(t,e,n,r){const i=sl(this,t),o=sl(this,n),a="_"+e;Object.defineProperties(i,{[a]:{value:i[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[a],e=o[r];return Ka(t)?Object.assign({},e,t):Ga(t,e)},set(t){this[a]=t}}})}apply(t){t.forEach(t=>t(this))}}var hl=new cl({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:tl},numbers:{type:"number",properties:Js}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:il.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function ul(t,e,n,r,i){let o=e[i];return o||(o=e[i]=t.measureText(i).width,n.push(i)),o>r&&(r=o),r}function dl(t,e,n,r){let i=(r=r||{}).data=r.data||{},o=r.garbageCollect=r.garbageCollect||[];r.font!==e&&(i=r.data={},o=r.garbageCollect=[],r.font=e),t.save(),t.font=e;let a=0;const s=n.length;let l,c,h,u,d;for(l=0;l<s;l++)if(u=n[l],null==u||Wa(u)){if(Wa(u))for(c=0,h=u.length;c<h;c++)d=u[c],null==d||Wa(d)||(a=ul(t,i,o,a,d))}else a=ul(t,i,o,a,u);t.restore();const p=o.length/2;if(p>n.length){for(l=0;l<p;l++)delete i[o[l]];o.splice(0,p)}return a}function pl(t,e,n){const r=t.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((e-i)*r)/r+i}function fl(t,e){(e||t)&&((e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function gl(t,e,n,r){ml(t,e,n,r,null)}function ml(t,e,n,r,i){let o,a,s,l,c,h,u,d;const p=e.pointStyle,f=e.rotation,g=e.radius;let m=(f||0)*fs;if(p&&"object"==typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(n,r),t.rotate(m),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:i?t.ellipse(n,r,i/2,g,0,0,us):t.arc(n,r,g,0,us),t.closePath();break;case"triangle":h=i?i/2:g,t.moveTo(n+Math.sin(m)*h,r-Math.cos(m)*g),m+=As,t.lineTo(n+Math.sin(m)*h,r-Math.cos(m)*g),m+=As,t.lineTo(n+Math.sin(m)*h,r-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+ms)*l,u=Math.cos(m+ms)*(i?i/2-c:l),s=Math.sin(m+ms)*l,d=Math.sin(m+ms)*(i?i/2-c:l),t.arc(n-u,r-s,c,m-hs,m-gs),t.arc(n+d,r-a,c,m-gs,m),t.arc(n+u,r+s,c,m,m+gs),t.arc(n-d,r+a,c,m+gs,m+hs),t.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*g,h=i?i/2:l,t.rect(n-h,r-l,2*h,2*l);break}m+=ms;case"rectRot":u=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-u,r-s),t.lineTo(n+d,r-a),t.lineTo(n+u,r+s),t.lineTo(n-d,r+a),t.closePath();break;case"crossRot":m+=ms;case"cross":u=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-u,r-s),t.lineTo(n+u,r+s),t.moveTo(n+d,r-a),t.lineTo(n-d,r+a);break;case"star":u=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-u,r-s),t.lineTo(n+u,r+s),t.moveTo(n+d,r-a),t.lineTo(n-d,r+a),m+=ms,u=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),t.moveTo(n-u,r-s),t.lineTo(n+u,r+s),t.moveTo(n+d,r-a),t.lineTo(n-d,r+a);break;case"line":a=i?i/2:Math.cos(m)*g,s=Math.sin(m)*g,t.moveTo(n-a,r-s),t.lineTo(n+a,r+s);break;case"dash":t.moveTo(n,r),t.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Al(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function yl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function bl(t){t.restore()}function xl(t,e,n,r,i){if(!e)return t.lineTo(n.x,n.y);if("middle"===i){const r=(e.x+n.x)/2;t.lineTo(r,e.y),t.lineTo(r,n.y)}else"after"===i!=!!r?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function vl(t,e,n,r){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(r?e.cp1x:e.cp2x,r?e.cp1y:e.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function Cl(t,e,n,r,i){if(i.strikethrough||i.underline){const o=t.measureText(r),a=e-o.actualBoundingBoxLeft,s=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,h=i.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=i.decorationWidth||2,t.moveTo(a,h),t.lineTo(s,h),t.stroke()}}function kl(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function wl(t,e,n,r,i,o={}){const a=Wa(e)?e:[e],s=o.strokeWidth>0&&""!==o.strokeColor;let l,c;for(t.save(),t.font=i.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),qa(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,o),l=0;l<a.length;++l)c=a[l],o.backdrop&&kl(t,o.backdrop),s&&(o.strokeColor&&(t.strokeStyle=o.strokeColor),qa(o.strokeWidth)||(t.lineWidth=o.strokeWidth),t.strokeText(c,n,r,o.maxWidth)),t.fillText(c,n,r,o.maxWidth),Cl(t,n,r,c,o),r+=Number(i.lineHeight);t.restore()}function Bl(t,e){const{x:n,y:r,w:i,h:o,radius:a}=e;t.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*hs,hs,!0),t.lineTo(n,r+o-a.bottomLeft),t.arc(n+a.bottomLeft,r+o-a.bottomLeft,a.bottomLeft,hs,gs,!0),t.lineTo(n+i-a.bottomRight,r+o),t.arc(n+i-a.bottomRight,r+o-a.bottomRight,a.bottomRight,gs,0,!0),t.lineTo(n+i,r+a.topRight),t.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-gs,!0),t.lineTo(n+a.topLeft,r)}const Il=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,Sl=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _l(t,e){const n=(""+t).match(Il);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const El=t=>+t||0;function Tl(t,e){const n={},r=Ka(e),i=r?Object.keys(e):e,o=Ka(t)?r?n=>Ga(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of i)n[t]=El(o(t));return n}function Ml(t){return Tl(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Ll(t){return Tl(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Ol(t){const e=Ml(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Dl(t,e){t=t||{},e=e||hl.font;let n=Ga(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let r=Ga(t.style,e.style);r&&!(""+r).match(Sl)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:Ga(t.family,e.family),lineHeight:_l(Ga(t.lineHeight,e.lineHeight),n),size:n,style:r,weight:Ga(t.weight,e.weight),string:""};return i.string=function(t){return!t||qa(t.size)||qa(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}(i),i}function Pl(t,e,n,r){let i,o,a,s=!0;for(i=0,o=t.length;i<o;++i)if(a=t[i],void 0!==a&&(void 0!==e&&"function"==typeof a&&(a=a(e),s=!1),void 0!==n&&Wa(a)&&(a=a[n%a.length],s=!1),void 0!==a))return r&&!s&&(r.cacheable=!1),a}function Fl(t,e){return Object.assign(Object.create(t),e)}function jl(t,e=[""],n,r,i=()=>t[0]){const o=n||t;void 0===r&&(r=Yl("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:r,_getTarget:i,override:n=>jl([n,...t],e,o,r)};return new Proxy(a,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,r)=>ql(n,r,()=>function(t,e,n,r){let i;for(const o of e)if(i=Yl(Rl(o,t),n),void 0!==i)return Nl(t,i)?Hl(n,r,t,i):i}(r,e,t,n)),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>Vl(t).includes(e),ownKeys:t=>Vl(t),set(t,e,n){const r=t._storage||(t._storage=i());return t[e]=r[e]=n,delete t._keys,!0}})}function zl(t,e,n,r){const i={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:$l(t,r),setContext:e=>zl(t,e,n,r),override:i=>zl(t.override(i),e,n,r)};return new Proxy(i,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>ql(t,e,()=>function(t,e,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:a}=t;let s=r[e];return ls(s)&&a.isScriptable(e)&&(s=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:a,_stack:s}=n;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t);let l=e(o,a||r);return s.delete(t),Nl(t,l)&&(l=Hl(i._scopes,i,t,l)),l}(e,s,t,n)),Wa(s)&&s.length&&(s=function(t,e,n,r){const{_proxy:i,_context:o,_subProxy:a,_descriptors:s}=n;if(void 0!==o.index&&r(t))return e[o.index%e.length];if(Ka(e[0])){const n=e,r=i._scopes.filter(t=>t!==n);e=[];for(const l of n){const n=Hl(r,i,t,l);e.push(zl(n,o,a&&a[t],s))}}return e}(e,s,t,a.isIndexable)),Nl(e,s)&&(s=zl(s,i,o&&o[e],a)),s}(t,e,n)),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,r)=>(t[n]=r,delete e[n],!0)})}function $l(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:r=e.indexable,_allKeys:i=e.allKeys}=t;return{allKeys:i,scriptable:n,indexable:r,isScriptable:ls(n)?n:()=>n,isIndexable:ls(r)?r:()=>r}}const Rl=(t,e)=>t?t+as(e):e,Nl=(t,e)=>Ka(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function ql(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||"constructor"===e)return t[e];const r=n();return t[e]=r,r}function Wl(t,e,n){return ls(t)?t(e,n):t}const Kl=(t,e)=>!0===t?e:"string"==typeof t?os(e,t):void 0;function Ul(t,e,n,r,i){for(const o of e){const e=Kl(n,o);if(e){t.add(e);const o=Wl(e._fallback,n,i);if(void 0!==o&&o!==n&&o!==r)return o}else if(!1===e&&void 0!==r&&n!==r)return null}return!1}function Hl(t,e,n,r){const i=e._rootScopes,o=Wl(e._fallback,n,r),a=[...t,...i],s=new Set;s.add(r);let l=Gl(s,a,n,o||n,r);return null!==l&&(void 0===o||o===n||(l=Gl(s,a,o,l,r),null!==l))&&jl(Array.from(s),[""],i,o,()=>function(t,e,n){const r=t._getTarget();e in r||(r[e]={});const i=r[e];return Wa(i)&&Ka(n)?n:i||{}}(e,n,r))}function Gl(t,e,n,r,i){for(;n;)n=Ul(t,e,n,r,i);return n}function Yl(t,e){for(const n of e){if(!n)continue;const e=n[t];if(void 0!==e)return e}}function Vl(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter(t=>!t.startsWith("_")))e.add(t);return Array.from(e)}(t._scopes)),e}function Ql(t,e,n,r){const{iScale:i}=t,{key:o="r"}=this._parsing,a=new Array(r);let s,l,c,h;for(s=0,l=r;s<l;++s)c=s+n,h=e[c],a[s]={r:i.parse(os(h,o),c)};return a}const Xl=Number.EPSILON||1e-14,Zl=(t,e)=>e<t.length&&!t[e].skip&&t[e],Jl=t=>"x"===t?"y":"x";function tc(t,e,n,r){const i=t.skip?e:t,o=e,a=n.skip?e:n,s=_s(o,i),l=_s(a,o);let c=s/(s+l),h=l/(s+l);c=isNaN(c)?0:c,h=isNaN(h)?0:h;const u=r*c,d=r*h;return{previous:{x:o.x-u*(a.x-i.x),y:o.y-u*(a.y-i.y)},next:{x:o.x+d*(a.x-i.x),y:o.y+d*(a.y-i.y)}}}function ec(t,e,n){return Math.max(Math.min(t,n),e)}function nc(t,e,n,r,i){let o,a,s,l;if(e.spanGaps&&(t=t.filter(t=>!t.skip)),"monotone"===e.cubicInterpolationMode)!function(t,e="x"){const n=Jl(e),r=t.length,i=Array(r).fill(0),o=Array(r);let a,s,l,c=Zl(t,0);for(a=0;a<r;++a)if(s=l,l=c,c=Zl(t,a+1),l){if(c){const t=c[e]-l[e];i[a]=0!==t?(c[n]-l[n])/t:0}o[a]=s?c?bs(i[a-1])!==bs(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}!function(t,e,n){const r=t.length;let i,o,a,s,l,c=Zl(t,0);for(let h=0;h<r-1;++h)l=c,c=Zl(t,h+1),l&&c&&(xs(e[h],0,Xl)?n[h]=n[h+1]=0:(i=n[h]/e[h],o=n[h+1]/e[h],s=Math.pow(i,2)+Math.pow(o,2),s<=9||(a=3/Math.sqrt(s),n[h]=i*a*e[h],n[h+1]=o*a*e[h])))}(t,i,o),function(t,e,n="x"){const r=Jl(n),i=t.length;let o,a,s,l=Zl(t,0);for(let c=0;c<i;++c){if(a=s,s=l,l=Zl(t,c+1),!s)continue;const i=s[n],h=s[r];a&&(o=(i-a[n])/3,s[`cp1${n}`]=i-o,s[`cp1${r}`]=h-o*e[c]),l&&(o=(l[n]-i)/3,s[`cp2${n}`]=i+o,s[`cp2${r}`]=h+o*e[c])}}(t,o,e)}(t,i);else{let n=r?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)s=t[o],l=tc(n,s,t[Math.min(o+1,a-(r?0:1))%a],e.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,n=s}e.capBezierPoints&&function(t,e){let n,r,i,o,a,s=Al(t[0],e);for(n=0,r=t.length;n<r;++n)a=o,o=s,s=n<r-1&&Al(t[n+1],e),o&&(i=t[n],a&&(i.cp1x=ec(i.cp1x,e.left,e.right),i.cp1y=ec(i.cp1y,e.top,e.bottom)),s&&(i.cp2x=ec(i.cp2x,e.left,e.right),i.cp2y=ec(i.cp2y,e.top,e.bottom)))}(t,n)}function rc(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ic(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function oc(t,e,n){let r;return"string"==typeof t?(r=parseInt(t,10),-1!==t.indexOf("%")&&(r=r/100*e.parentNode[n])):r=t,r}const ac=t=>t.ownerDocument.defaultView.getComputedStyle(t,null),sc=["top","right","bottom","left"];function lc(t,e,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const o=sc[i];r[o]=parseFloat(t[e+"-"+o+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function cc(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:r}=e,i=ac(n),o="border-box"===i.boxSizing,a=lc(i,"padding"),s=lc(i,"border","width"),{x:l,y:c,box:h}=function(t,e){const n=t.touches,r=n&&n.length?n[0]:t,{offsetX:i,offsetY:o}=r;let a,s,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(i,o,t.target))a=i,s=o;else{const t=e.getBoundingClientRect();a=r.clientX-t.left,s=r.clientY-t.top,l=!0}return{x:a,y:s,box:l}}(t,n),u=a.left+(h&&s.left),d=a.top+(h&&s.top);let{width:p,height:f}=e;return o&&(p-=a.width+s.width,f-=a.height+s.height),{x:Math.round((l-u)/p*n.width/r),y:Math.round((c-d)/f*n.height/r)}}const hc=t=>Math.round(10*t)/10;function uc(t,e,n){const r=e||1,i=hc(t.height*r),o=hc(t.width*r);t.height=hc(t.height),t.width=hc(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==r||a.height!==i||a.width!==o)&&(t.currentDevicePixelRatio=r,a.height=i,a.width=o,t.ctx.setTransform(r,0,0,r,0,0),!0)}const dc=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};rc()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function pc(t,e){const n=function(t,e){return ac(t).getPropertyValue(e)}(t,e),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function fc(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function gc(t,e,n,r){return{x:t.x+n*(e.x-t.x),y:"middle"===r?n<.5?t.y:e.y:"after"===r?n<1?t.y:e.y:n>0?e.y:t.y}}function mc(t,e,n,r){const i={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=fc(t,i,n),s=fc(i,o,n),l=fc(o,e,n),c=fc(a,s,n),h=fc(s,l,n);return fc(c,h,n)}function Ac(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function yc(t,e){let n,r;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=r)}function bc(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function xc(t){return"angle"===t?{between:Ms,compare:Es,normalize:Ts}:{between:Os,compare:(t,e)=>t-e,normalize:t=>t}}function vc({start:t,end:e,count:n,loop:r,style:i}){return{start:t%n,end:e%n,loop:r&&(e-t+1)%n==0,style:i}}function Cc(t,e,n){if(!n)return[t];const{property:r,start:i,end:o}=n,a=e.length,{compare:s,between:l,normalize:c}=xc(r),{start:h,end:u,loop:d,style:p}=function(t,e,n){const{property:r,start:i,end:o}=n,{between:a,normalize:s}=xc(r),l=e.length;let c,h,{start:u,end:d,loop:p}=t;if(p){for(u+=l,d+=l,c=0,h=l;c<h&&a(s(e[u%l][r]),i,o);++c)u--,d--;u%=l,d%=l}return d<u&&(d+=l),{start:u,end:d,loop:p,style:t.style}}(t,e,n),f=[];let g,m,A,y=!1,b=null;const x=()=>y||l(i,A,g)&&0!==s(i,A),v=()=>!y||0===s(o,g)||l(o,A,g);for(let t=h,n=h;t<=u;++t)m=e[t%a],m.skip||(g=c(m[r]),g!==A&&(y=l(g,i,o),null===b&&x()&&(b=0===s(g,i)?t:n),null!==b&&v()&&(f.push(vc({start:b,end:t,loop:d,count:a,style:p})),b=null),n=t,A=g));return null!==b&&f.push(vc({start:b,end:u,loop:d,count:a,style:p})),f}function kc(t,e){const n=[],r=t.segments;for(let i=0;i<r.length;i++){const o=Cc(r[i],t.points,e);o.length&&n.push(...o)}return n}function wc(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Bc(t,e){if(!e)return!1;const n=[],r=function(t,e){return Qs(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,r)!==JSON.stringify(e,r)}function Ic(t,e,n){return t.options.clip?t[n]:e[n]}function Sc(t,e){const n=e._clip;if(n.disabled)return!1;const r=function(t,e){const{xScale:n,yScale:r}=t;return n&&r?{left:Ic(n,e,"left"),right:Ic(n,e,"right"),top:Ic(r,e,"top"),bottom:Ic(r,e,"bottom")}:e}(e,t.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?t.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?t.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class _c{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){const i=e.listeners[r],o=e.duration;i.forEach(r=>r({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Rs.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o,a=i.length-1,s=!1;for(;a>=0;--a)o=i[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),s=!0):(i[a]=i[i.length-1],i.pop());s&&(r.draw(),this._notify(r,n,t,"progress")),i.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=i.length}),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((t,e)=>Math.max(t,e._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ec=new _c;const Tc="transparent",Mc={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const r=Xs(t||Tc),i=r.valid&&Xs(e||Tc);return i&&i.valid?i.mix(r,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class Lc{constructor(t,e,n,r){const i=e[n];r=Pl([t.to,r,i,t.from]);const o=Pl([t.from,i,r]);this._active=!0,this._fn=t.fn||Mc[t.type||typeof o],this._easing=Vs[t.easing]||Vs.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=i,this._loop=!!t.loop,this._to=Pl([t.to,e,r,t.from]),this._from=Pl([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,a=this._to;let s;if(this._active=i!==a&&(o||e<n),!this._active)return this._target[r]=a,void this._notify(!0);e<0?this._target[r]=i:(s=e/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[r]=this._fn(i,a,s))}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class Oc{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Ka(t))return;const e=Object.keys(hl.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{const i=t[r];if(!Ka(i))return;const o={};for(const t of e)o[t]=i[t];(Wa(i.properties)&&i.properties||[r]).forEach(t=>{t!==r&&n.has(t)||n.set(t,o)})})}_animateOptions(t,e){const n=e.options,r=function(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}(t,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(t,e){const n=[],r=Object.keys(e);for(let e=0;e<r.length;e++){const i=t[r[e]];i&&i.active()&&n.push(i.wait())}return Promise.all(n)}(t.options.$animations,n).then(()=>{t.options=n},()=>{}),i}_createAnimations(t,e){const n=this._properties,r=[],i=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let s;for(s=o.length-1;s>=0;--s){const l=o[s];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(t,e));continue}const c=e[l];let h=i[l];const u=n.get(l);if(h){if(u&&h.active()){h.update(u,c,a);continue}h.cancel()}u&&u.duration?(i[l]=h=new Lc(u,t,l,c),r.push(h)):t[l]=c}return r}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(Ec.add(this._chart,n),!0):void 0}}function Dc(t,e){const n=t&&t.options||{},r=n.reverse,i=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:r?o:i,end:r?i:o}}function Pc(t,e){const n=[],r=t._getSortedDatasetMetas(e);let i,o;for(i=0,o=r.length;i<o;++i)n.push(r[i].index);return n}function Fc(t,e,n,r={}){const i=t.keys,o="single"===r.mode;let a,s,l,c;if(null===e)return;let h=!1;for(a=0,s=i.length;a<s;++a){if(l=+i[a],l===n){if(h=!0,r.all)continue;break}c=t.values[l],Ua(c)&&(o||0===e||bs(e)===bs(c))&&(e+=c)}return h||r.all?e:0}function jc(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function zc(t,e,n){const r=t[e]||(t[e]={});return r[n]||(r[n]={})}function $c(t,e,n,r){for(const i of e.getMatchingVisibleMetas(r).reverse()){const e=t[i.index];if(n&&e>0||!n&&e<0)return i.index}return null}function Rc(t,e){const{chart:n,_cachedMeta:r}=t,i=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:s}=r,l=o.axis,c=a.axis,h=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,a,r),u=e.length;let d;for(let t=0;t<u;++t){const n=e[t],{[l]:o,[c]:u}=n;d=(n._stacks||(n._stacks={}))[c]=zc(i,h,o),d[s]=u,d._top=$c(d,a,!0,r.type),d._bottom=$c(d,a,!1,r.type),(d._visualValues||(d._visualValues={}))[s]=u}}function Nc(t,e){const n=t.scales;return Object.keys(n).filter(t=>n[t].axis===e).shift()}function qc(t,e){const n=t.controller.index,r=t.vScale&&t.vScale.axis;if(r){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[r]||void 0===e[r][n])return;delete e[r][n],void 0!==e[r]._visualValues&&void 0!==e[r]._visualValues[n]&&delete e[r]._visualValues[n]}}}const Wc=t=>"reset"===t||"none"===t,Kc=(t,e)=>e?t:Object.assign({},t);class Uc{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=jc(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&qc(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),r=(t,e,n,r)=>"x"===t?e:"r"===t?r:n,i=e.xAxisID=Ga(n.xAxisID,Nc(t,"x")),o=e.yAxisID=Ga(n.yAxisID,Nc(t,"y")),a=e.rAxisID=Ga(n.rAxisID,Nc(t,"r")),s=e.indexAxis,l=e.iAxisID=r(s,i,o,a),c=e.vAxisID=r(s,o,i,a);e.xScale=this.getScaleForId(i),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(l),e.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&zs(this._data,this),t._stacked&&qc(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(Ka(e)){const t=this._cachedMeta;this._data=function(t,e){const{iScale:n,vScale:r}=e,i="x"===n.axis?"x":"y",o="x"===r.axis?"x":"y",a=Object.keys(t),s=new Array(a.length);let l,c,h;for(l=0,c=a.length;l<c;++l)h=a[l],s[l]={[i]:h,[o]:t[h]};return s}(e,t)}else if(n!==e){if(n){zs(n,this);const t=this._cachedMeta;qc(t),t._parsed=[]}e&&Object.isExtensible(e)&&((r=e)._chartjs?r._chartjs.listeners.push(this):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[this]}}),js.forEach(t=>{const e="_onData"+as(t),n=r[t];Object.defineProperty(r,t,{configurable:!0,enumerable:!1,value(...t){const i=n.apply(this,t);return r._chartjs.listeners.forEach(n=>{"function"==typeof n[e]&&n[e](...t)}),i}})}))),this._syncList=[],this._data=e}var r}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=e._stacked;e._stacked=jc(e.vScale,e),e.stack!==n.stack&&(r=!0,qc(e),e.stack=n.stack),this._resyncElements(t),(r||i!==e._stacked)&&(Rc(this,e._parsed),e._stacked=jc(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,a=i.axis;let s,l,c,h=0===t&&e===r.length||n._sorted,u=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=Wa(r[t])?this.parseArrayData(n,r,t,e):Ka(r[t])?this.parseObjectData(n,r,t,e):this.parsePrimitiveData(n,r,t,e);const i=()=>null===l[a]||u&&l[a]<u[a];for(s=0;s<e;++s)n._parsed[s+t]=l=c[s],h&&(i()&&(h=!1),u=l);n._sorted=h}o&&Rc(this,c)}parsePrimitiveData(t,e,n,r){const{iScale:i,vScale:o}=t,a=i.axis,s=o.axis,l=i.getLabels(),c=i===o,h=new Array(r);let u,d,p;for(u=0,d=r;u<d;++u)p=u+n,h[u]={[a]:c||i.parse(l[p],p),[s]:o.parse(e[p],p)};return h}parseArrayData(t,e,n,r){const{xScale:i,yScale:o}=t,a=new Array(r);let s,l,c,h;for(s=0,l=r;s<l;++s)c=s+n,h=e[c],a[s]={x:i.parse(h[0],c),y:o.parse(h[1],c)};return a}parseObjectData(t,e,n,r){const{xScale:i,yScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=new Array(r);let c,h,u,d;for(c=0,h=r;c<h;++c)u=c+n,d=e[u],l[c]={x:i.parse(os(d,a),u),y:o.parse(os(d,s),u)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const r=this.chart,i=this._cachedMeta,o=e[t.axis];return Fc({keys:Pc(r,!0),values:e._stacks[t.axis]._visualValues},o,i.index,{mode:n})}updateRangeFromParsed(t,e,n,r){const i=n[e.axis];let o=null===i?NaN:i;const a=r&&n._stacks[e.axis];r&&a&&(r.values=a,o=Fc(r,i,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&t===n.iScale,o=r.length,a=this._getOtherScale(t),s=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Pc(n,!0),values:null})(e,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:h}=function(t){const{min:e,max:n,minDefined:r,maxDefined:i}=t.getUserBounds();return{min:r?e:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let u,d;function p(){d=r[u];const e=d[a.axis];return!Ua(d[t.axis])||c>e||h<e}for(u=0;u<o&&(p()||(this.updateRangeFromParsed(l,t,d,s),!i));++u);if(i)for(u=o-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(l,t,d,s);break}return l}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=e.length;r<i;++r)o=e[r][t.axis],Ua(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,r=e.vScale,i=this.getParsed(t);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,r,i;return Ka(t)?(e=t.top,n=t.right,r=t.bottom,i=t.left):e=n=r=i=t,{top:e,right:n,bottom:r,left:i,disabled:!1===t}}(Ga(this.options.clip,function(t,e,n){if(!1===n)return!1;const r=Dc(t,n),i=Dc(e,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,r=n.data||[],i=e.chartArea,o=[],a=this._drawStart||0,s=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,i,a,s),c=a;c<a+s;++c){const e=r[c];e.hidden||(e.active&&l?o.push(e):e.draw(t,i))}for(c=0;c<o.length;++c)o[c].draw(t,i)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const r=this.getDataset();let i;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];i=e.$context||(e.$context=function(t,e,n){return Fl(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),i.parsed=this.getParsed(t),i.raw=r.data[t],i.index=i.dataIndex=t}else i=this.$context||(this.$context=function(t,e){return Fl(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!e,i.mode=n,i}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const r="active"===e,i=this._cachedDataOpts,o=t+"-"+e,a=i[o],s=this.enableOptionSharing&&ss(n);if(a)return Kc(a,s);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),h=r?[`${t}Hover`,"hover",t,""]:[t,""],u=l.getOptionScopes(this.getDataset(),c),d=Object.keys(hl.elements[t]),p=l.resolveNamedOptions(u,d,()=>this.getContext(n,r,e),h);return p.$shared&&(p.$shared=s,i[o]=Object.freeze(Kc(p,s))),p}_resolveAnimations(t,e,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${e}`,a=i[o];if(a)return a;let s;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,e),o=r.getOptionScopes(this.getDataset(),i);s=r.createResolver(o,this.getContext(t,n,e))}const l=new Oc(r,s&&s.animations);return s&&s._cacheable&&(i[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Wc(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(e,i)||i!==r;return this.updateSharedOptions(i,e,n),{sharedOptions:i,includeOptions:o}}updateElement(t,e,n,r){Wc(r)?Object.assign(t,n):this._resolveAnimations(e,r).update(t,n)}updateSharedOptions(t,e,n){t&&!Wc(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,r){t.active=r;const i=this.getStyle(e,r);this._resolveAnimations(e,n,r).update(t,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const r=n.length,i=e.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,t):i<r&&this._removeElements(i,r-i)}_insertElements(t,e,n=!0){const r=this._cachedMeta,i=r.data,o=t+e;let a;const s=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(s(i),a=t;a<o;++a)i[a]=new this.dataElementType;this._parsing&&s(r._parsed),this.parse(t,e),n&&this.updateElements(i,t,e,"reset")}updateElements(t,e,n,r){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(t,e);n._stacked&&qc(n,r)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,r]=t;this[e](n,r)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function Hc(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let r=[];for(let e=0,i=n.length;e<i;e++)r=r.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=$s(r.sort((t,e)=>t-e))}return t._cache.$bar}(e,t.type);let r,i,o,a,s=e._length;const l=()=>{32767!==o&&-32768!==o&&(ss(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(r=0,i=n.length;r<i;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),l();return s}function Gc(t,e,n,r){return Wa(t)?function(t,e,n,r){const i=n.parse(t[0],r),o=n.parse(t[1],r),a=Math.min(i,o),s=Math.max(i,o);let l=a,c=s;Math.abs(a)>Math.abs(s)&&(l=s,c=a),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:i,end:o,min:a,max:s}}(t,e,n,r):e[n.axis]=n.parse(t,r),e}function Yc(t,e,n,r){const i=t.iScale,o=t.vScale,a=i.getLabels(),s=i===o,l=[];let c,h,u,d;for(c=n,h=n+r;c<h;++c)d=e[c],u={},u[i.axis]=s||i.parse(a[c],c),l.push(Gc(d,u,o,c));return l}function Vc(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Qc(t,e,n,r){let i=e.borderSkipped;const o={};if(!i)return void(t.borderSkipped=o);if(!0===i)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:s,reverse:l,top:c,bottom:h}=function(t){let e,n,r,i,o;return t.horizontal?(e=t.base>t.x,n="left",r="right"):(e=t.base<t.y,n="bottom",r="top"),e?(i="end",o="start"):(i="start",o="end"),{start:n,end:r,reverse:e,top:i,bottom:o}}(t);"middle"===i&&n&&(t.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=h:(o[Xc(h,a,s,l)]=!0,i=c)),o[Xc(i,a,s,l)]=!0,t.borderSkipped=o}function Xc(t,e,n,r){var i,o,a;return r?(a=n,t=Zc(t=(i=t)===(o=e)?a:i===a?o:i,n,e)):t=Zc(t,e,n),t}function Zc(t,e,n){return"start"===t?e:"end"===t?n:t}function Jc(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class th extends Uc{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:a}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((e,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:e,fillStyle:l.backgroundColor,fontColor:i,hidden:!t.getDataVisibility(s),lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:l.borderWidth,strokeStyle:l.borderColor,textAlign:r,pointStyle:n,borderRadius:o&&(a||l.borderRadius),index:s}}):[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,o,a=t=>+n[t];if(Ka(n[t])){const{key:t="value"}=this._parsing;a=e=>+os(n[e],t)}for(i=t,o=t+e;i<o;++i)r._parsed[i]=a(i)}}_getRotation(){return ws(this.options.rotation-90)}_getCircumference(){return ws(this.options.circumference)}_getRotationExtents(){let t=us,e=-us;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),o=r._getCircumference();t=Math.min(t,i),e=Math.max(e,i+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,r=this._cachedMeta,i=r.data,o=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),s=Math.min((c=a,"string"==typeof(l=this.options.cutout)&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const h=this._getRingWeight(this.index),{circumference:u,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:g,offsetY:m}=function(t,e,n){let r=1,i=1,o=0,a=0;if(e<us){const s=t,l=s+e,c=Math.cos(s),h=Math.sin(s),u=Math.cos(l),d=Math.sin(l),p=(t,e,r)=>Ms(t,s,l,!0)?1:Math.max(e,e*n,r,r*n),f=(t,e,r)=>Ms(t,s,l,!0)?-1:Math.min(e,e*n,r,r*n),g=p(0,c,u),m=p(gs,h,d),A=f(hs,c,u),y=f(hs+gs,h,d);r=(g-A)/2,i=(m-y)/2,o=-(g+A)/2,a=-(m+y)/2}return{ratioX:r,ratioY:i,offsetX:o,offsetY:a}}(d,u,s),A=(n.width-o)/p,y=(n.height-o)/f,b=Math.max(Math.min(A,y)/2,0),x=Ya(this.options.radius,b),v=(x-Math.max(x*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,r.total=this.calculateTotal(),this.outerRadius=x-v*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-v*h,0),this.updateElements(i,0,i.length,t)}_circumference(t,e){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===r._parsed[t]||r.data[t].hidden?0:this.calculateCircumference(r._parsed[t]*i/us)}updateElements(t,e,n,r){const i="reset"===r,o=this.chart,a=o.chartArea,s=o.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,h=i&&s.animateScale,u=h?0:this.innerRadius,d=h?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(e,r);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,i);for(g=e;g<e+n;++g){const e=this._circumference(g,i),n=t[g],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:u};f&&(o.options=p||this.resolveDataElementOptions(g,n.active?"active":r)),m+=e,this.updateElement(n,g,o,r)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,r=0;for(n=0;n<e.length;n++){const i=t._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||e[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?us*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=nl(e._parsed[t],n.options.locale);return{label:r[t]||"",value:i}}getMaxBorderWidth(t){let e=0;const n=this.chart;let r,i,o,a,s;if(!t)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){o=n.getDatasetMeta(r),t=o.data,a=o.controller;break}if(!t)return 0;for(r=0,i=t.length;r<i;++r)s=a.resolveDataElementOptions(r),"inner"!==s.borderAlign&&(e=Math.max(e,s.borderWidth||0,s.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,r=t.length;n<r;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(Ga(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class eh extends Uc{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:r}}=t.legend.options;return e.labels.map((e,i)=>{const o=t.getDatasetMeta(0).controller.getStyle(i);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:r,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(i),index:i}})}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=nl(e._parsed[t].r,n.options.locale);return{label:r[t]||"",value:i}}parseObjectData(t,e,n,r){return Ql.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((t,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,r=Math.min(e.right-e.left,e.bottom-e.top),i=Math.max(r/2,0),o=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=i-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,r){const i="reset"===r,o=this.chart,a=o.options.animation,s=this._cachedMeta.rScale,l=s.xCenter,c=s.yCenter,h=s.getIndexAngle(0)-.5*hs;let u,d=h;const p=360/this.countVisibleElements();for(u=0;u<e;++u)d+=this._computeAngle(u,r,p);for(u=e;u<e+n;u++){const e=t[u];let n=d,f=d+this._computeAngle(u,r,p),g=o.getDataVisibility(u)?s.getDistanceFromCenterForValue(this.getParsed(u).r):0;d=f,i&&(a.animateScale&&(g=0),a.animateRotate&&(n=f=h));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(u,e.active?"active":r)};this.updateElement(e,u,m,r)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++}),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?ws(this.resolveDataElementOptions(t,e).angle||n):0}}var nh=Object.freeze({__proto__:null,BarController:class extends Uc{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,r){return Yc(t,e,n,r)}parseArrayData(t,e,n,r){return Yc(t,e,n,r)}parseObjectData(t,e,n,r){const{iScale:i,vScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l="x"===i.axis?a:s,c="x"===o.axis?a:s,h=[];let u,d,p,f;for(u=n,d=n+r;u<d;++u)f=e[u],p={},p[i.axis]=i.parse(os(f,l),u),h.push(Gc(os(f,c),p,o,u));return h}updateRangeFromParsed(t,e,n,r){super.updateRangeFromParsed(t,e,n,r);const i=n._custom;i&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,i.min),t.max=Math.max(t.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:r}=e,i=this.getParsed(t),o=i._custom,a=Vc(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const i="reset"===r,{index:o,_cachedMeta:{vScale:a}}=this,s=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:h,includeOptions:u}=this._getSharedOptions(e,r);for(let d=e;d<e+n;d++){const e=this.getParsed(d),n=i||qa(e[a.axis])?{base:s,head:s}:this._calculateBarValuePixels(d),p=this._calculateBarIndexPixels(d,c),f=(e._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!f||Vc(e._custom)||o===f._top||o===f._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};u&&(g.options=h||this.resolveDataElementOptions(d,t[d].active?"active":r));const m=g.options||t[d].options;Qc(g,m,f,o),Jc(g,m,c.ratio),this.updateElement(t[d],d,g,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(t=>t.controller.options.grouped),i=n.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(e),s=a&&a[n.axis],l=t=>{const e=t._parsed.find(t=>t[n.axis]===s),r=e&&e[t.vScale.axis];if(qa(r)||isNaN(r))return!0};for(const n of r)if((void 0===e||!l(n))&&((!1===i||-1===o.indexOf(n.stack)||void 0===i&&void 0===n.stack)&&o.push(n.stack),n.index===t))break;return o.length||o.push(void 0),o}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(n=>t[n].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)t[Ga("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,n){const r=this._getStacks(t,n),i=void 0!==e?r.indexOf(e):-1;return-1===i?r.length-1:i}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,r=[];let i,o;for(i=0,o=e.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=t.barThickness;return{min:a||Hc(e),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,a=i||0,s=this.getParsed(t),l=s._custom,c=Vc(l);let h,u,d=s[e.axis],p=0,f=n?this.applyStack(e,s,n):d;f!==d&&(p=f-d,f=d),c&&(d=l.barStart,f=l.barEnd-l.barStart,0!==d&&bs(d)!==bs(l.barEnd)&&(p=0),p+=d);const g=qa(i)||c?p:i;let m=e.getPixelForValue(g);if(h=this.chart.getDataVisibility(t)?e.getPixelForValue(p+f):m,u=h-m,Math.abs(u)<o){u=function(t,e,n){return 0!==t?bs(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(u,e,a)*o,d===a&&(m-=u/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),l=Math.min(t,i),p=Math.max(t,i);m=Math.max(Math.min(m,p),l),h=m+u,n&&!c&&(s._stacks[e.axis]._visualValues[r]=e.getValueForPixel(h)-e.getValueForPixel(m))}if(m===e.getPixelForValue(a)){const t=bs(u)*e.getLineWidthForValue(a)/2;m+=t,u-=t}return{size:u,base:m,head:h,center:h+u/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,i=r.skipNull,o=Ga(r.maxBarThickness,1/0);let a,s;const l=this._getAxisCount();if(e.grouped){const n=i?this._getStackCount(t):e.stackCount,c="flex"===r.barThickness?function(t,e,n,r){const i=e.pixels,o=i[t];let a=t>0?i[t-1]:null,s=t<i.length-1?i[t+1]:null;const l=n.categoryPercentage;null===a&&(a=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-a);const c=o-(o-Math.min(a,s))/2*l;return{chunk:Math.abs(s-a)/2*l/r,ratio:n.barPercentage,start:c}}(t,e,r,n*l):function(t,e,n,r){const i=n.barThickness;let o,a;return qa(i)?(o=e.min*n.categoryPercentage,a=n.barPercentage):(o=i*r,a=1),{chunk:o/r,ratio:a,start:e.pixels[t]-o/2}}(t,e,r,n*l),h="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(Ga(h,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,i?t:void 0)+u;a=c.start+c.chunk*d+c.chunk/2,s=Math.min(o,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(t)[n.axis],t),s=Math.min(o,e.min*e.ratio);return{base:a-s/2,head:a+s/2,center:a,size:s}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[e.axis]||n[i].hidden||n[i].draw(this._ctx)}},BubbleController:class extends Uc{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,r){const i=super.parsePrimitiveData(t,e,n,r);for(let t=0;t<i.length;t++)i[t]._custom=this.resolveDataElementOptions(t+n).radius;return i}parseArrayData(t,e,n,r){const i=super.parseArrayData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=Ga(r[2],this.resolveDataElementOptions(t+n).radius)}return i}parseObjectData(t,e,n,r){const i=super.parseObjectData(t,e,n,r);for(let t=0;t<i.length;t++){const r=e[n+t];i[t]._custom=Ga(r&&r.r&&+r.r,this.resolveDataElementOptions(t+n).radius)}return i}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),s=i.getLabelForValue(o.y),l=o._custom;return{label:n[t]||"",value:"("+a+", "+s+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:s,includeOptions:l}=this._getSharedOptions(e,r),c=o.axis,h=a.axis;for(let u=e;u<e+n;u++){const e=t[u],n=!i&&this.getParsed(u),d={},p=d[c]=i?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),f=d[h]=i?a.getBasePixel():a.getPixelForValue(n[h]);d.skip=isNaN(p)||isNaN(f),l&&(d.options=s||this.resolveDataElementOptions(u,e.active?"active":r),i&&(d.options.radius=0)),this.updateElement(e,u,d,r)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let r=super.resolveDataElementOptions(t,e);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==e&&(r.radius=0),r.radius+=Ga(n&&n._custom,i),r}},DoughnutController:th,LineController:class extends Uc{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=e,o=this.chart._animationsDisabled;let{start:a,count:s}=Ks(e,r,o);this._drawStart=a,this._drawCount=s,Us(e)&&(a=0,s=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},t),this.updateElements(r,a,s,t)}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:a,_stacked:s,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:h}=this._getSharedOptions(e,r),u=o.axis,d=a.axis,{spanGaps:p,segment:f}=this.options,g=Cs(p)?p:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,A=e+n,y=t.length;let b=e>0&&this.getParsed(e-1);for(let n=0;n<y;++n){const p=t[n],y=m?p:{};if(n<e||n>=A){y.skip=!0;continue}const x=this.getParsed(n),v=qa(x[d]),C=y[u]=o.getPixelForValue(x[u],n),k=y[d]=i||v?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,x,s):x[d],n);y.skip=isNaN(C)||isNaN(k)||v,y.stop=n>0&&Math.abs(x[u]-b[u])>g,f&&(y.parsed=x,y.raw=l.data[n]),h&&(y.options=c||this.resolveDataElementOptions(n,p.active?"active":r)),m||this.updateElement(p,n,y,r),b=x}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,r=t.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends th{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:eh,RadarController:class extends Uc{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,r){return Ql.bind(this)(t,e,n,r)}update(t){const e=this._cachedMeta,n=e.dataset,r=e.data||[],i=e.iScale.getLabels();if(n.points=r,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:i.length===r.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(r,0,r.length,t)}updateElements(t,e,n,r){const i=this._cachedMeta.rScale,o="reset"===r;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":r),s=i.getPointPositionForValue(a,this.getParsed(a).r),l=o?i.xCenter:s.x,c=o?i.yCenter:s.y,h={x:l,y:c,angle:s.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,a,h,r)}}},ScatterController:class extends Uc{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=e,o=this.getParsed(t),a=r.getLabelForValue(o.x),s=i.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+s+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,r=this.chart._animationsDisabled;let{start:i,count:o}=Ks(e,n,r);if(this._drawStart=i,this._drawCount=o,Us(e)&&(i=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:o}=e;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!o._decimated,i.points=n;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,i,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,r){const i="reset"===r,{iScale:o,vScale:a,_stacked:s,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(e,r),h=this.getSharedOptions(c),u=this.includeOptions(r,h),d=o.axis,p=a.axis,{spanGaps:f,segment:g}=this.options,m=Cs(f)?f:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||i||"none"===r;let y=e>0&&this.getParsed(e-1);for(let c=e;c<e+n;++c){const e=t[c],n=this.getParsed(c),f=A?e:{},b=qa(n[p]),x=f[d]=o.getPixelForValue(n[d],c),v=f[p]=i||b?a.getBasePixel():a.getPixelForValue(s?this.applyStack(a,n,s):n[p],c);f.skip=isNaN(x)||isNaN(v)||b,f.stop=c>0&&Math.abs(n[d]-y[d])>m,g&&(f.parsed=n,f.raw=l.data[c]),u&&(f.options=h||this.resolveDataElementOptions(c,e.active?"active":r)),A||this.updateElement(e,c,f,r),y=n}this.updateSharedOptions(h,r,c)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,r=n.options&&n.options.borderWidth||0;if(!e.length)return r;const i=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(r,i,o)/2}}});function rh(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class ih{static override(t){Object.assign(ih.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return rh()}parse(){return rh()}format(){return rh()}add(){return rh()}diff(){return rh()}startOf(){return rh()}endOf(){return rh()}}var oh=ih;function ah(t,e,n,r){const{controller:i,data:o,_sorted:a}=t,s=i._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(s&&e===s.axis&&"r"!==e&&a&&o.length){const a=s._reversePixels?Fs:Ps;if(!r){const r=a(o,e,n);if(l){const{vScale:e}=i._cachedMeta,{_parsed:n}=t,o=n.slice(0,r.lo+1).reverse().findIndex(t=>!qa(t[e.axis]));r.lo-=Math.max(0,o);const a=n.slice(r.hi).findIndex(t=>!qa(t[e.axis]));r.hi+=Math.max(0,a)}return r}if(i._sharedOptions){const t=o[0],r="function"==typeof t.getRange&&t.getRange(e);if(r){const t=a(o,e,n-r),i=a(o,e,n+r);return{lo:t.lo,hi:i.hi}}}}return{lo:0,hi:o.length-1}}function sh(t,e,n,r,i){const o=t.getSortedVisibleDatasetMetas(),a=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:s}=o[t],{lo:l,hi:c}=ah(o[t],e,a,i);for(let t=l;t<=c;++t){const e=s[t];e.skip||r(e,n,t)}}}function lh(t,e,n,r,i){const o=[];return i||t.isPointInArea(e)?(sh(t,n,e,function(n,a,s){(i||Al(n,t.chartArea,0))&&n.inRange(e.x,e.y,r)&&o.push({element:n,datasetIndex:a,index:s})},!0),o):o}function ch(t,e,n,r,i,o){return o||t.isPointInArea(e)?"r"!==n||r?function(t,e,n,r,i,o){let a=[];const s=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,r){const i=e?Math.abs(t.x-r.x):0,o=n?Math.abs(t.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return sh(t,n,e,function(n,c,h){const u=n.inRange(e.x,e.y,i);if(r&&!u)return;const d=n.getCenterPoint(i);if(!o&&!t.isPointInArea(d)&&!u)return;const p=s(e,d);p<l?(a=[{element:n,datasetIndex:c,index:h}],l=p):p===l&&a.push({element:n,datasetIndex:c,index:h})}),a}(t,e,n,r,i,o):function(t,e,n,r){let i=[];return sh(t,n,e,function(t,n,o){const{startAngle:a,endAngle:s}=t.getProps(["startAngle","endAngle"],r),{angle:l}=Ss(t,{x:e.x,y:e.y});Ms(l,a,s)&&i.push({element:t,datasetIndex:n,index:o})}),i}(t,e,n,i):[]}function hh(t,e,n,r,i){const o=[],a="x"===n?"inXRange":"inYRange";let s=!1;return sh(t,n,e,(t,r,l)=>{t[a]&&t[a](e[n],i)&&(o.push({element:t,datasetIndex:r,index:l}),s=s||t.inRange(e.x,e.y,i))}),r&&!s?[]:o}var uh={evaluateInteractionItems:sh,modes:{index(t,e,n,r){const i=cc(e,t),o=n.axis||"x",a=n.includeInvisible||!1,s=n.intersect?lh(t,i,o,r,a):ch(t,i,o,!1,r,a),l=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach(t=>{const e=s[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})}),l):[]},dataset(t,e,n,r){const i=cc(e,t),o=n.axis||"xy",a=n.includeInvisible||!1;let s=n.intersect?lh(t,i,o,r,a):ch(t,i,o,!1,r,a);if(s.length>0){const e=s[0].datasetIndex,n=t.getDatasetMeta(e).data;s=[];for(let t=0;t<n.length;++t)s.push({element:n[t],datasetIndex:e,index:t})}return s},point:(t,e,n,r)=>lh(t,cc(e,t),n.axis||"xy",r,n.includeInvisible||!1),nearest(t,e,n,r){const i=cc(e,t),o=n.axis||"xy",a=n.includeInvisible||!1;return ch(t,i,o,n.intersect,r,a)},x:(t,e,n,r)=>hh(t,cc(e,t),"x",n.intersect,r),y:(t,e,n,r)=>hh(t,cc(e,t),"y",n.intersect,r)}};const dh=["left","top","right","bottom"];function ph(t,e){return t.filter(t=>t.pos===e)}function fh(t,e){return t.filter(t=>-1===dh.indexOf(t.pos)&&t.box.axis===e)}function gh(t,e){return t.sort((t,n)=>{const r=e?n:t,i=e?t:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function mh(t,e,n,r){return Math.max(t[n],e[n])+Math.max(t[r],e[r])}function Ah(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function yh(t,e,n,r){const{pos:i,box:o}=n,a=t.maxPadding;if(!Ka(i)){n.size&&(t[i]-=n.size);const e=r[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?o.height:o.width),n.size=e.size/e.count,t[i]+=n.size}o.getPadding&&Ah(a,o.getPadding());const s=Math.max(0,e.outerWidth-mh(a,t,"left","right")),l=Math.max(0,e.outerHeight-mh(a,t,"top","bottom")),c=s!==t.w,h=l!==t.h;return t.w=s,t.h=l,n.horizontal?{same:c,other:h}:{same:h,other:c}}function bh(t,e){const n=e.maxPadding;return function(t){const r={left:0,top:0,right:0,bottom:0};return t.forEach(t=>{r[t]=Math.max(e[t],n[t])}),r}(t?["left","right"]:["top","bottom"])}function xh(t,e,n,r){const i=[];let o,a,s,l,c,h;for(o=0,a=t.length,c=0;o<a;++o){s=t[o],l=s.box,l.update(s.width||e.w,s.height||e.h,bh(s.horizontal,e));const{same:a,other:u}=yh(e,n,s,r);c|=a&&i.length,h=h||u,l.fullSize||i.push(s)}return c&&xh(i,e,n,r)||h}function vh(t,e,n,r,i){t.top=n,t.left=e,t.right=e+r,t.bottom=n+i,t.width=r,t.height=i}function Ch(t,e,n,r){const i=n.padding;let{x:o,y:a}=e;for(const s of t){const t=s.box,l=r[s.stack]||{count:1,placed:0,weight:1},c=s.stackWeight/l.weight||1;if(s.horizontal){const r=e.w*c,o=l.size||t.height;ss(l.start)&&(a=l.start),t.fullSize?vh(t,i.left,a,n.outerWidth-i.right-i.left,o):vh(t,e.left+l.placed,a,r,o),l.start=a,l.placed+=r,a=t.bottom}else{const r=e.h*c,a=l.size||t.width;ss(l.start)&&(o=l.start),t.fullSize?vh(t,o,i.top,a,n.outerHeight-i.bottom-i.top):vh(t,o,e.top+l.placed,a,r),l.start=o,l.placed+=r,o=t.right}}e.x=o,e.y=a}var kh={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,r){if(!t)return;const i=Ol(t.options.layout.padding),o=Math.max(e-i.width,0),a=Math.max(n-i.height,0),s=function(t){const e=function(t){const e=[];let n,r,i,o,a,s;for(n=0,r=(t||[]).length;n<r;++n)i=t[n],({position:o,options:{stack:a,stackWeight:s=1}}=i),e.push({index:n,box:i,pos:o,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&o+a,stackWeight:s});return e}(t),n=gh(e.filter(t=>t.box.fullSize),!0),r=gh(ph(e,"left"),!0),i=gh(ph(e,"right")),o=gh(ph(e,"top"),!0),a=gh(ph(e,"bottom")),s=fh(e,"x"),l=fh(e,"y");return{fullSize:n,leftAndTop:r.concat(o),rightAndBottom:i.concat(l).concat(a).concat(s),chartArea:ph(e,"chartArea"),vertical:r.concat(i).concat(l),horizontal:o.concat(a).concat(s)}}(t.boxes),l=s.vertical,c=s.horizontal;Qa(t.boxes,t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()});const h=l.reduce((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1,0)||1,u=Object.freeze({outerWidth:e,outerHeight:n,padding:i,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/h,hBoxMaxHeight:a/2}),d=Object.assign({},i);Ah(d,Ol(r));const p=Object.assign({maxPadding:d,w:o,h:a,x:i.left,y:i.top},i),f=function(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:r,stackWeight:i}=n;if(!t||!dh.includes(r))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}(t),{vBoxMaxWidth:r,hBoxMaxHeight:i}=e;let o,a,s;for(o=0,a=t.length;o<a;++o){s=t[o];const{fullSize:a}=s.box,l=n[s.stack],c=l&&s.stackWeight/l.weight;s.horizontal?(s.width=c?c*r:a&&e.availableWidth,s.height=i):(s.width=r,s.height=c?c*i:a&&e.availableHeight)}return n}(l.concat(c),u);xh(s.fullSize,p,u,f),xh(l,p,u,f),xh(c,p,u,f)&&xh(l,p,u,f),function(t){const e=t.maxPadding;function n(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(p),Ch(s.leftAndTop,p,u,f),p.x+=p.w,p.y+=p.h,Ch(s.rightAndBottom,p,u,f),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Qa(s.chartArea,e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class wh{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}}class Bh extends wh{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Ih="$chartjs",Sh={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_h=t=>null===t||""===t,Eh=!!dc&&{passive:!0};function Th(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,Eh)}function Mh(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function Lh(t,e,n){const r=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Mh(n.addedNodes,r),e=e&&!Mh(n.removedNodes,r);e&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function Oh(t,e,n){const r=t.canvas,i=new MutationObserver(t=>{let e=!1;for(const n of t)e=e||Mh(n.removedNodes,r),e=e&&!Mh(n.addedNodes,r);e&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const Dh=new Map;let Ph=0;function Fh(){const t=window.devicePixelRatio;t!==Ph&&(Ph=t,Dh.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function jh(t,e,n){const r=t.canvas,i=r&&ic(r);if(!i)return;const o=Ns((t,e)=>{const r=i.clientWidth;n(t,e),r<i.clientWidth&&n()},window),a=new ResizeObserver(t=>{const e=t[0],n=e.contentRect.width,r=e.contentRect.height;0===n&&0===r||o(n,r)});return a.observe(i),function(t,e){Dh.size||window.addEventListener("resize",Fh),Dh.set(t,e)}(t,o),a}function zh(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){Dh.delete(t),Dh.size||window.removeEventListener("resize",Fh)}(t)}function $h(t,e,n){const r=t.canvas,i=Ns(e=>{null!==t.ctx&&n(function(t,e){const n=Sh[t.type]||t.type,{x:r,y:i}=cc(t,e);return{type:n,chart:e,native:t,x:void 0!==r?r:null,y:void 0!==i?i:null}}(e,t))},t);return function(t,e,n){t&&t.addEventListener(e,n,Eh)}(r,e,i),i}class Rh extends wh{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,r=t.getAttribute("height"),i=t.getAttribute("width");if(t[Ih]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_h(i)){const e=pc(t,"width");void 0!==e&&(t.width=e)}if(_h(r))if(""===t.style.height)t.height=t.width/(e||2);else{const e=pc(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[Ih])return!1;const n=e[Ih].initial;["height","width"].forEach(t=>{const r=n[t];qa(r)?e.removeAttribute(t):e.setAttribute(t,r)});const r=n.style||{};return Object.keys(r).forEach(t=>{e.style[t]=r[t]}),e.width=e.width,delete e[Ih],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const r=t.$proxies||(t.$proxies={}),i={attach:Lh,detach:Oh,resize:jh}[e]||$h;r[e]=i(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),r=n[e];r&&(({attach:zh,detach:zh,resize:zh}[e]||Th)(t,e,r),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return function(t,e,n,r){const i=ac(t),o=lc(i,"margin"),a=oc(i.maxWidth,t,"clientWidth")||ps,s=oc(i.maxHeight,t,"clientHeight")||ps,l=function(t,e,n){let r,i;if(void 0===e||void 0===n){const o=t&&ic(t);if(o){const t=o.getBoundingClientRect(),a=ac(o),s=lc(a,"border","width"),l=lc(a,"padding");e=t.width-l.width-s.width,n=t.height-l.height-s.height,r=oc(a.maxWidth,o,"clientWidth"),i=oc(a.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:r||ps,maxHeight:i||ps}}(t,e,n);let{width:c,height:h}=l;if("content-box"===i.boxSizing){const t=lc(i,"border","width"),e=lc(i,"padding");c-=e.width+t.width,h-=e.height+t.height}return c=Math.max(0,c-o.width),h=Math.max(0,r?c/r:h-o.height),c=hc(Math.min(c,a,l.maxWidth)),h=hc(Math.min(h,s,l.maxHeight)),c&&!h&&(h=hc(c/2)),(void 0!==e||void 0!==n)&&r&&l.height&&h>l.height&&(h=l.height,c=hc(Math.floor(h*r))),{width:c,height:h}}(t,e,n,r)}isAttached(t){const e=t&&ic(t);return!(!e||!e.isConnected)}}class Nh{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return Cs(this.x)&&Cs(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const r={};return t.forEach(t=>{r[t]=n[t]&&n[t].active()?n[t]._to:this[t]}),r}}function qh(t,e,n,r,i){const o=Ga(r,0),a=Math.min(Ga(i,t.length),t.length);let s,l,c,h=0;for(n=Math.ceil(n),i&&(s=i-r,n=s/Math.floor(s/n)),c=o;c<0;)h++,c=Math.round(o+h*n);for(l=Math.max(o,0);l<a;l++)l===c&&(e.push(t[l]),h++,c=Math.round(o+h*n))}const Wh=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Kh=(t,e)=>Math.min(e||t,t);function Uh(t,e){const n=[],r=t.length/e,i=t.length;let o=0;for(;o<i;o+=r)n.push(t[Math.floor(o)]);return n}function Hh(t,e,n){const r=t.ticks.length,i=Math.min(e,r-1),o=t._startPixel,a=t._endPixel,s=1e-6;let l,c=t.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-o,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(i-1))/2,c+=i<e?l:-l,c<o-s||c>a+s)))return c}function Gh(t){return t.drawTicks?t.tickLength:0}function Yh(t,e){if(!t.display)return 0;const n=Dl(t.font,e),r=Ol(t.padding);return(Wa(t.text)?t.text.length:1)*n.lineHeight+r.height}function Vh(t,e,n){let r=qs(t);return(n&&"right"!==e||!n&&"right"===e)&&(r=(t=>"left"===t?"right":"right"===t?"left":t)(r)),r}class Qh extends Nh{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=Ha(t,Number.POSITIVE_INFINITY),e=Ha(e,Number.NEGATIVE_INFINITY),n=Ha(n,Number.POSITIVE_INFINITY),r=Ha(r,Number.NEGATIVE_INFINITY),{min:Ha(t,n),max:Ha(e,r),minDefined:Ua(t),maxDefined:Ua(e)}}getMinMax(t){let e,{min:n,max:r,minDefined:i,maxDefined:o}=this.getUserBounds();if(i&&o)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let s=0,l=a.length;s<l;++s)e=a[s].controller.getMinMax(this,t),i||(n=Math.min(n,e.min)),o||(r=Math.max(r,e.max));return n=o&&n>r?r:n,r=i&&n>r?n:r,{min:Ha(n,Ha(r,n)),max:Ha(r,Ha(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Va(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(t,e,n){const{min:r,max:i}=t,o=Ya(e,(i-r)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(r,-Math.abs(o)),max:a(i,o)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?Uh(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=function(t,e){const n=t.options.ticks,r=function(t){const e=t.options.offset,n=t._tickSize(),r=t._length/n+(e?0:1),i=t._maxLength/n;return Math.floor(Math.min(r,i))}(t),i=Math.min(n.maxTicksLimit||r,r),o=n.major.enabled?function(t){const e=[];let n,r;for(n=0,r=t.length;n<r;n++)t[n].major&&e.push(n);return e}(e):[],a=o.length,s=o[0],l=o[a-1],c=[];if(a>i)return function(t,e,n,r){let i,o=0,a=n[0];for(r=Math.ceil(r),i=0;i<t.length;i++)i===a&&(e.push(t[i]),o++,a=n[o*r])}(e,c,o,a/i),c;const h=function(t,e,n){const r=function(t){const e=t.length;let n,r;if(e<2)return!1;for(r=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==r)return!1;return r}(t),i=e.length/n;if(!r)return Math.max(i,1);const o=function(t){const e=[],n=Math.sqrt(t);let r;for(r=1;r<n;r++)t%r===0&&(e.push(r),e.push(t/r));return n===(0|n)&&e.push(n),e.sort((t,e)=>t-e).pop(),e}(r);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>i)return e}return Math.max(i,1)}(o,e,i);if(a>0){let t,n;const r=a>1?Math.round((l-s)/(a-1)):null;for(qh(e,c,h,qa(r)?0:s-r,s),t=0,n=a-1;t<n;t++)qh(e,c,h,o[t],o[t+1]);return qh(e,c,h,l,qa(r)?e.length:l+r),c}return qh(e,c,h),c}(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Va(this.options.afterUpdate,[this])}beforeSetDimensions(){Va(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Va(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Va(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Va(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n],i.label=Va(e.callback,[i.value,n,t],this)}afterTickToLabelConversion(){Va(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Va(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Kh(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,i=e.maxRotation;let o,a,s,l=r;if(!this._isVisible()||!e.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),h=c.widest.width,u=c.highest.height,d=Ls(this.chart.width-h,0,this.maxWidth);o=t.offset?this.maxWidth/n:d/(n-1),h+6>o&&(o=d/(n-(t.offset?.5:1)),a=this.maxHeight-Gh(t.grid)-e.padding-Yh(t.title,this.chart.options.font),s=Math.sqrt(h*h+u*u),l=Bs(Math.min(Math.asin(Ls((c.highest.height+6)/o,-1,1)),Math.asin(Ls(a/s,-1,1))-Math.asin(Ls(u/s,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Va(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Va(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=Yh(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=Gh(i)+o):(t.height=this.maxHeight,t.width=Gh(i)+o),n.display&&this.ticks.length){const{first:e,last:r,widest:i,highest:o}=this._getLabelSizes(),s=2*n.padding,l=ws(this.labelRotation),c=Math.cos(l),h=Math.sin(l);if(a){const e=n.mirror?0:h*i.width+c*o.height;t.height=Math.min(this.maxHeight,t.height+e+s)}else{const e=n.mirror?0:c*i.width+h*o.height;t.width=Math.min(this.maxWidth,t.width+e+s)}this._calculatePadding(e,r,h,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){const{ticks:{align:i,padding:o},position:a}=this.options,s=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,u=0;s?l?(h=r*t.width,u=n*e.height):(h=n*t.height,u=r*e.width):"start"===i?u=e.width:"end"===i?h=t.width:"inner"!==i&&(h=t.width/2,u=e.width/2),this.paddingLeft=Math.max((h-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-c+o)*this.width/(this.width-c),0)}else{let n=e.height/2,r=t.height/2;"start"===i?(n=0,r=t.height):"end"===i&&(n=e.height,r=0),this.paddingTop=n+o,this.paddingBottom=r+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Va(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)qa(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Uh(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:r,_longestTextCache:i}=this,o=[],a=[],s=Math.floor(e/Kh(e,n));let l,c,h,u,d,p,f,g,m,A,y,b=0,x=0;for(l=0;l<e;l+=s){if(u=t[l].label,d=this._resolveTickFontOptions(l),r.font=p=d.string,f=i[p]=i[p]||{data:{},gc:[]},g=d.lineHeight,m=A=0,qa(u)||Wa(u)){if(Wa(u))for(c=0,h=u.length;c<h;++c)y=u[c],qa(y)||Wa(y)||(m=ul(r,f.data,f.gc,m,y),A+=g)}else m=ul(r,f.data,f.gc,m,u),A=g;o.push(m),a.push(A),b=Math.max(m,b),x=Math.max(A,x)}!function(t,e){Qa(t,t=>{const n=t.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete t.data[n[i]];n.splice(0,r)}})}(i,e);const v=o.indexOf(b),C=a.indexOf(x),k=t=>({width:o[t]||0,height:a[t]||0});return{first:k(0),last:k(e-1),widest:k(v),highest:k(C),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Ls(this._alignToPixels?pl(this.chart,e,0):e,-32768,32767)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Fl(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Fl(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=ws(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),i=this._getLabelSizes(),o=t.autoSkipPadding||0,a=i?i.widest.width+o:0,s=i?i.highest.height+o:0;return this.isHorizontal()?s*n>a*r?a/n:s/r:s*r<a*n?s/n:a/r}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:a}=r,s=i.offset,l=this.isHorizontal(),c=this.ticks.length+(s?1:0),h=Gh(i),u=[],d=a.setContext(this.getContext()),p=d.display?d.width:0,f=p/2,g=function(t){return pl(n,t,p)};let m,A,y,b,x,v,C,k,w,B,I,S;if("top"===o)m=g(this.bottom),v=this.bottom-h,k=m-f,B=g(t.top)+f,S=t.bottom;else if("bottom"===o)m=g(this.top),B=t.top,S=g(t.bottom)-f,v=m+f,k=this.top+h;else if("left"===o)m=g(this.right),x=this.right-h,C=m-f,w=g(t.left)+f,I=t.right;else if("right"===o)m=g(this.left),w=t.left,I=g(t.right)-f,x=m+f,C=this.left+h;else if("x"===e){if("center"===o)m=g((t.top+t.bottom)/2+.5);else if(Ka(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}B=t.top,S=t.bottom,v=m+f,k=v+h}else if("y"===e){if("center"===o)m=g((t.left+t.right)/2);else if(Ka(o)){const t=Object.keys(o)[0],e=o[t];m=g(this.chart.scales[t].getPixelForValue(e))}x=m-f,C=x-h,w=t.left,I=t.right}const _=Ga(r.ticks.maxTicksLimit,c),E=Math.max(1,Math.ceil(c/_));for(A=0;A<c;A+=E){const t=this.getContext(A),e=i.setContext(t),r=a.setContext(t),o=e.lineWidth,c=e.color,h=r.dash||[],d=r.dashOffset,p=e.tickWidth,f=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;y=Hh(this,A,s),void 0!==y&&(b=pl(n,y,o),l?x=C=w=I=b:v=k=B=S=b,u.push({tx1:x,ty1:v,tx2:C,ty2:k,x1:w,y1:B,x2:I,y2:S,width:o,color:c,borderDash:h,borderDashOffset:d,tickWidth:p,tickColor:f,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,u}_computeLabelItems(t){const e=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),a=this.ticks,{align:s,crossAlign:l,padding:c,mirror:h}=i,u=Gh(n.grid),d=u+c,p=h?-c:d,f=-ws(this.labelRotation),g=[];let m,A,y,b,x,v,C,k,w,B,I,S,_="middle";if("top"===r)v=this.bottom-p,C=this._getXAxisLabelAlignment();else if("bottom"===r)v=this.top+p,C=this._getXAxisLabelAlignment();else if("left"===r){const t=this._getYAxisLabelAlignment(u);C=t.textAlign,x=t.x}else if("right"===r){const t=this._getYAxisLabelAlignment(u);C=t.textAlign,x=t.x}else if("x"===e){if("center"===r)v=(t.top+t.bottom)/2+d;else if(Ka(r)){const t=Object.keys(r)[0],e=r[t];v=this.chart.scales[t].getPixelForValue(e)+d}C=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===r)x=(t.left+t.right)/2-d;else if(Ka(r)){const t=Object.keys(r)[0],e=r[t];x=this.chart.scales[t].getPixelForValue(e)}C=this._getYAxisLabelAlignment(u).textAlign}"y"===e&&("start"===s?_="top":"end"===s&&(_="bottom"));const E=this._getLabelSizes();for(m=0,A=a.length;m<A;++m){y=a[m],b=y.label;const t=i.setContext(this.getContext(m));k=this.getPixelForTick(m)+i.labelOffset,w=this._resolveTickFontOptions(m),B=w.lineHeight,I=Wa(b)?b.length:1;const e=I/2,n=t.color,s=t.textStrokeColor,c=t.textStrokeWidth;let u,d=C;if(o?(x=k,"inner"===C&&(d=m===A-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),S="top"===r?"near"===l||0!==f?-I*B+B/2:"center"===l?-E.highest.height/2-e*B+B:-E.highest.height+B/2:"near"===l||0!==f?B/2:"center"===l?E.highest.height/2-e*B:E.highest.height-I*B,h&&(S*=-1),0===f||t.showLabelBackdrop||(x+=B/2*Math.sin(f))):(v=k,S=(1-I)*B/2),t.showLabelBackdrop){const e=Ol(t.backdropPadding),n=E.heights[m],r=E.widths[m];let i=S-e.top,o=0-e.left;switch(_){case"middle":i-=n/2;break;case"bottom":i-=n}switch(C){case"center":o-=r/2;break;case"right":o-=r;break;case"inner":m===A-1?o-=r:m>0&&(o-=r/2)}u={left:o,top:i,width:r+e.width,height:n+e.height,color:t.backdropColor}}g.push({label:b,font:w,textOffset:S,options:{rotation:f,color:n,strokeColor:s,strokeWidth:c,textAlign:d,textBaseline:_,translation:[x,v],backdrop:u}})}return g}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-ws(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=t+i,a=this._getLabelSizes().widest.width;let s,l;return"left"===e?r?(l=this.right+i,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l+=a)):(l=this.right-o,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l=this.left)):"right"===e?r?(l=this.left+i,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l-=a)):(l=this.left+o,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l=this.right)):s="right",{textAlign:s,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:r,width:i,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,i,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex(e=>e.value===t);return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let i,o;const a=(t,e,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(i=0,o=r.length;i<o;++i){const t=r[i];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let l,c,h,u;this.isHorizontal()?(l=pl(t,this.left,o)-o/2,c=pl(t,this.right,a)+a/2,h=u=s):(h=pl(t,this.top,o)-o/2,u=pl(t,this.bottom,a)+a/2,l=c=s),e.save(),e.lineWidth=i.width,e.strokeStyle=i.color,e.beginPath(),e.moveTo(l,h),e.lineTo(c,u),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&yl(e,n);const r=this.getLabelItems(t);for(const t of r){const n=t.options,r=t.font;wl(e,t.label,0,t.textOffset,r,n)}n&&bl(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;const i=Dl(n.font),o=Ol(n.padding),a=n.align;let s=i.lineHeight/2;"bottom"===e||"center"===e||Ka(e)?(s+=o.bottom,Wa(n.text)&&(s+=i.lineHeight*(n.text.length-1))):s+=o.top;const{titleX:l,titleY:c,maxWidth:h,rotation:u}=function(t,e,n,r){const{top:i,left:o,bottom:a,right:s,chart:l}=t,{chartArea:c,scales:h}=l;let u,d,p,f=0;const g=a-i,m=s-o;if(t.isHorizontal()){if(d=Ws(r,o,s),Ka(n)){const t=Object.keys(n)[0],r=n[t];p=h[t].getPixelForValue(r)+g-e}else p="center"===n?(c.bottom+c.top)/2+g-e:Wh(t,n,e);u=s-o}else{if(Ka(n)){const t=Object.keys(n)[0],r=n[t];d=h[t].getPixelForValue(r)-m+e}else d="center"===n?(c.left+c.right)/2-m+e:Wh(t,n,e);p=Ws(r,a,i),f="left"===n?-gs:gs}return{titleX:d,titleY:p,maxWidth:u,rotation:f}}(this,s,e,a);wl(t,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:u,textAlign:Vh(a,e,r),textBaseline:"middle",translation:[l,c]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=Ga(t.grid&&t.grid.z,-1),r=Ga(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Qh.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=e.length;i<o;++i){const o=e[i];o[n]!==this.id||t&&o.type!==t||r.push(o)}return r}_resolveTickFontOptions(t){return Dl(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Xh{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const r=this.items,i=t.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+t);return i in r||(r[i]=t,function(t,e,n){const r=es(Object.create(null),[n?hl.get(n):{},hl.get(e),t.defaults]);hl.set(e,r),t.defaultRoutes&&function(t,e){Object.keys(e).forEach(n=>{const r=n.split("."),i=r.pop(),o=[t].concat(r).join("."),a=e[n].split("."),s=a.pop(),l=a.join(".");hl.route(o,i,l,s)})}(e,t.defaultRoutes),t.descriptors&&hl.describe(e,t.descriptors)}(t,o,n),this.override&&hl.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in hl[r]&&(delete hl[r][n],this.override&&delete ol[n])}}class Zh{constructor(){this.controllers=new Xh(Uc,"datasets",!0),this.elements=new Xh(Nh,"elements"),this.plugins=new Xh(Object,"plugins"),this.scales=new Xh(Qh,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(e=>{const r=n||this._getRegistryForType(e);n||r.isForType(e)||r===this.plugins&&e.id?this._exec(t,r,e):Qa(e,e=>{const r=n||this._getRegistryForType(e);this._exec(t,r,e)})})}_exec(t,e,n){const r=as(t);Va(n["before"+r],[],n),e[t](n),Va(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const r=e.get(t);if(void 0===r)throw new Error('"'+t+'" is not a registered '+n+".");return r}}var Jh=new Zh;class tu{constructor(){this._init=void 0}notify(t,e,n,r){if("beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),void 0===this._init)return;const i=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(i,t,e,n);return"afterDestroy"===e&&(this._notify(i,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),o}_notify(t,e,n,r){r=r||{};for(const i of t){const t=i.plugin;if(!1===Va(t[n],[e,r,i.options],t)&&r.cancelable)return!1}return!0}invalidate(){qa(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,r=Ga(n.options&&n.options.plugins,{}),i=function(t){const e={},n=[],r=Object.keys(Jh.plugins.items);for(let t=0;t<r.length;t++)n.push(Jh.getPlugin(r[t]));const i=t.plugins||[];for(let t=0;t<i.length;t++){const r=i[t];-1===n.indexOf(r)&&(n.push(r),e[r.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==r||e?function(t,{plugins:e,localIds:n},r,i){const o=[],a=t.getContext();for(const s of e){const e=s.id,l=eu(r[e],i);null!==l&&o.push({plugin:s,options:nu(t.config,{plugin:s,local:n[e]},l,a)})}return o}(t,i,r,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,r=(t,e)=>t.filter(t=>!e.some(e=>t.plugin.id===e.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}}function eu(t,e){return e||!1!==t?!0===t?{}:t:null}function nu(t,{plugin:e,local:n},r,i){const o=t.pluginScopeKeys(e),a=t.getOptionScopes(r,o);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ru(t,e){const n=hl.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function iu(t){if("x"===t||"y"===t||"r"===t)return t}function ou(t){return"top"===t||"bottom"===t?"x":"left"===t||"right"===t?"y":void 0}function au(t,...e){if(iu(t))return t;for(const n of e){const e=n.axis||ou(n.position)||t.length>1&&iu(t[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function su(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function lu(t){const e=t.options||(t.options={});e.plugins=Ga(e.plugins,{}),e.scales=function(t,e){const n=ol[t.type]||{scales:{}},r=e.scales||{},i=ru(t.type,e),o=Object.create(null);return Object.keys(r).forEach(e=>{const a=r[e];if(!Ka(a))return console.error(`Invalid scale configuration for scale: ${e}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const s=au(e,a,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(e=>e.xAxisID===t||e.yAxisID===t);if(n.length)return su(t,"x",n[0])||su(t,"y",n[0])}return{}}(e,t),hl.scales[a.type]),l=function(t,e){return t===e?"_index_":"_value_"}(s,i),c=n.scales||{};o[e]=ns(Object.create(null),[{axis:s},a,c[s],c[l]])}),t.data.datasets.forEach(n=>{const i=n.type||t.type,a=n.indexAxis||ru(i,e),s=(ol[i]||{}).scales||{};Object.keys(s).forEach(t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,a),i=n[e+"AxisID"]||e;o[i]=o[i]||Object.create(null),ns(o[i],[{axis:e},r[i],s[t]])})}),Object.keys(o).forEach(t=>{const e=o[t];ns(e,[hl.scales[e.type],hl.scale])}),o}(t,e)}function cu(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const hu=new Map,uu=new Set;function du(t,e){let n=hu.get(t);return n||(n=e(),hu.set(t,n),uu.add(n)),n}const pu=(t,e,n)=>{const r=os(e,n);void 0!==r&&t.add(r)};class fu{constructor(t){this._config=function(t){return(t=t||{}).data=cu(t.data),lu(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=cu(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),lu(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return du(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return du(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return du(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id;return du(`${this.type}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const n=this._scopeCache;let r=n.get(t);return r&&!e||(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){const{options:r,type:i}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;const s=new Set;e.forEach(e=>{t&&(s.add(t),e.forEach(e=>pu(s,t,e))),e.forEach(t=>pu(s,r,t)),e.forEach(t=>pu(s,ol[i]||{},t)),e.forEach(t=>pu(s,hl,t)),e.forEach(t=>pu(s,al,t))});const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),uu.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,ol[e]||{},hl.datasets[e]||{},{type:e},hl,al]}resolveNamedOptions(t,e,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:a}=gu(this._resolverCache,t,r);let s=o;(function(t,e){const{isScriptable:n,isIndexable:r}=$l(t);for(const i of e){const e=n(i),o=r(i),a=(o||e)&&t[i];if(e&&(ls(a)||mu(a))||o&&Wa(a))return!0}return!1})(o,e)&&(i.$shared=!1,s=zl(o,n=ls(n)?n():n,this.createResolver(t,n,a)));for(const t of e)i[t]=s[t];return i}createResolver(t,e,n=[""],r){const{resolver:i}=gu(this._resolverCache,t,n);return Ka(e)?zl(i,e,void 0,r):i}}function gu(t,e,n){let r=t.get(e);r||(r=new Map,t.set(e,r));const i=n.join();let o=r.get(i);return o||(o={resolver:jl(e,n),subPrefixes:n.filter(t=>!t.toLowerCase().includes("hover"))},r.set(i,o)),o}const mu=t=>Ka(t)&&Object.getOwnPropertyNames(t).some(e=>ls(t[e])),Au=["top","bottom","left","right","chartArea"];function yu(t,e){return"top"===t||"bottom"===t||-1===Au.indexOf(t)&&"x"===e}function bu(t,e){return function(n,r){return n[t]===r[t]?n[e]-r[e]:n[t]-r[t]}}function xu(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),Va(n&&n.onComplete,[t],e)}function vu(t){const e=t.chart,n=e.options.animation;Va(n&&n.onProgress,[t],e)}function Cu(t){return rc()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const ku={},wu=t=>{const e=Cu(t);return Object.values(ku).filter(t=>t.canvas===e).pop()};function Bu(t,e,n){const r=Object.keys(t);for(const i of r){const r=+i;if(r>=e){const o=t[i];delete t[i],(n>0||r>e)&&(t[r+n]=o)}}}class Iu{static defaults=hl;static instances=ku;static overrides=ol;static registry=Jh;static version="4.5.1";static getChart=wu;static register(...t){Jh.add(...t),Su()}static unregister(...t){Jh.remove(...t),Su()}constructor(t,e){const n=this.config=new fu(e),r=Cu(t),i=wu(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(t){return!rc()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?Bh:Rh}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,o.aspectRatio),s=a&&a.canvas,l=s&&s.height,c=s&&s.width;this.id=Na(),this.ctx=a,this.canvas=s,this.width=c,this.height=l,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new tu,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(t,e){let n;return function(...r){return e?(clearTimeout(n),n=setTimeout(t,e,r)):t.apply(this,r),e}}(t=>this.update(t),o.resizeDelay||0),this._dataChanges=[],ku[this.id]=this,a&&s?(Ec.listen(this,"complete",xu),Ec.listen(this,"progress",vu),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:i}=this;return qa(t)?e&&i?i:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Jh}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():uc(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return fl(this.canvas,this.ctx),this}stop(){return Ec.stop(this),this}resize(t,e){Ec.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,t,e,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,uc(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),Va(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){Qa(this.options.scales||{},(t,e)=>{t.id=e})}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,r=Object.keys(n).reduce((t,e)=>(t[e]=!1,t),{});let i=[];e&&(i=i.concat(Object.keys(e).map(t=>{const n=e[t],r=au(t,n),i="r"===r,o="x"===r;return{options:n,dposition:i?"chartArea":o?"bottom":"left",dtype:i?"radialLinear":o?"category":"linear"}}))),Qa(i,e=>{const i=e.options,o=i.id,a=au(o,i),s=Ga(i.type,e.dtype);void 0!==i.position&&yu(i.position,a)===yu(e.dposition)||(i.position=e.dposition),r[o]=!0;let l=null;o in n&&n[o].type===s?l=n[o]:(l=new(Jh.getScale(s))({id:o,type:s,ctx:this.ctx,chart:this}),n[l.id]=l),l.init(i,t)}),Qa(r,(t,e)=>{t||delete n[e]}),Qa(n,t=>{kh.configure(this,t,t.options),kh.addBox(this,t)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort((t,e)=>t.index-e.index),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(bu("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((t,n)=>{0===e.filter(e=>e===t._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=e.length;n<r;n++){const r=e[n];let i=this.getDatasetMeta(n);const o=r.type||this.config.type;if(i.type&&i.type!==o&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=o,i.indexAxis=r.indexAxis||ru(o,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const e=Jh.getController(o),{datasetElementType:r,dataElementType:a}=hl.datasets[o];Object.assign(e,{dataElementType:Jh.getElement(a),datasetElementType:r&&Jh.getElement(r)}),i.controller=new e(this,n),t.push(i.controller)}}return this._updateMetasets(),t}_resetElements(){Qa(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(n),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||Qa(i,t=>{t.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(bu("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Qa(this.scales,t=>{kh.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);cs(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of e)Bu(t,r,"_removeElements"===n?-i:i)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter(t=>t[0]===e).map((t,e)=>e+","+t.splice(1).join(","))),r=n(0);for(let t=1;t<e;t++)if(!cs(r,n(t)))return;return Array.from(r).map(t=>t.split(",")).map(t=>({method:t[1],start:+t[2],count:+t[3]}))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;kh.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],Qa(this.boxes,t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))},this),this._layers.forEach((t,e)=>{t._idx=e}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,ls(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),r={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(e),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(Ec.has(this)?this.attached&&!Ec.running(this)&&Ec.start(this):(this.draw(),xu({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(t,e)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let r,i;for(r=0,i=e.length;r<i;++r){const i=e[r];t&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n={meta:t,index:t.index,cancelable:!0},r=Sc(this,t);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&yl(e,r),t.controller.draw(),r&&bl(e),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(t){return Al(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,r){const i=uh.modes[e];return"function"==typeof i?i(this,t,n,r):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let r=n.filter(t=>t&&t._dataset===e).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Fl(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const r=n?"show":"hide",i=this.getDatasetMeta(t),o=i.controller._resolveAnimations(void 0,r);ss(e)?(i.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(i,{visible:n}),this.update(e=>e.datasetIndex===t?r:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ec.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),fl(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete ku[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};Qa(this.options.events,t=>n(t,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,r)=>{e.addEventListener(this,n,r),t[n]=r},r=(n,r)=>{t[n]&&(e.removeEventListener(this,n,r),delete t[n])},i=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){Qa(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},Qa(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const r=n?"set":"remove";let i,o,a,s;for("dataset"===e&&(i=this.getDatasetMeta(t[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map(({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}});!Xa(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter(e=>e.plugin.id===t).length}_updateHoverStyles(t,e,n){const r=this.options.hover,i=(t,e)=>t.filter(t=>!e.some(e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)),o=i(e,t),a=n?t:i(t,e);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},r=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:r=[],options:i}=this,o=e,a=this._getActiveElements(t,r,n,o),s=function(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}(t),l=function(t,e,n,r){return n&&"mouseout"!==t.type?r?e:t:null}(t,this._lastEvent,n,s);n&&(this._lastEvent=null,Va(i.onHover,[t,a,this],this),s&&Va(i.onClick,[t,a,this],this));const c=!Xa(a,r);return(c||e)&&(this._active=a,this._updateHoverStyles(a,r,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,r){if("mouseout"===t.type)return[];if(!n)return e;const i=this.options.hover;return this.getElementsAtEventForMode(t,i.mode,i,r)}}function Su(){return Qa(Iu.instances,t=>t._plugins.invalidate())}function _u(t,e,n,r){return{x:n+t*Math.cos(e),y:r+t*Math.sin(e)}}function Eu(t,e,n,r,i,o){const{x:a,y:s,startAngle:l,pixelMargin:c,innerRadius:h}=e,u=Math.max(e.outerRadius+r+n-c,0),d=h>0?h+r+n+c:0;let p=0;const f=i-l;if(r){const t=((h>0?h-r:0)+(u>0?u-r:0))/2;p=(f-(0!==t?f*t/(t+r):f))/2}const g=(f-Math.max(.001,f*u-n/hs)/u)/2,m=l+g+p,A=i-g-p,{outerStart:y,outerEnd:b,innerStart:x,innerEnd:v}=function(t,e,n,r){const i=Tl(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),o=(n-e)/2,a=Math.min(o,r*e/2),s=t=>{const e=(n-Math.min(o,t))*r/2;return Ls(t,0,Math.min(o,e))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:Ls(i.innerStart,0,a),innerEnd:Ls(i.innerEnd,0,a)}}(e,d,u,A-m),C=u-y,k=u-b,w=m+y/C,B=A-b/k,I=d+x,S=d+v,_=m+x/I,E=A-v/S;if(t.beginPath(),o){const e=(w+B)/2;if(t.arc(a,s,u,w,e),t.arc(a,s,u,e,B),b>0){const e=_u(k,B,a,s);t.arc(e.x,e.y,b,B,A+gs)}const n=_u(S,A,a,s);if(t.lineTo(n.x,n.y),v>0){const e=_u(S,E,a,s);t.arc(e.x,e.y,v,A+gs,E+Math.PI)}const r=(A-v/d+(m+x/d))/2;if(t.arc(a,s,d,A-v/d,r,!0),t.arc(a,s,d,r,m+x/d,!0),x>0){const e=_u(I,_,a,s);t.arc(e.x,e.y,x,_+Math.PI,m-gs)}const i=_u(C,m,a,s);if(t.lineTo(i.x,i.y),y>0){const e=_u(C,w,a,s);t.arc(e.x,e.y,y,m-gs,w)}}else{t.moveTo(a,s);const e=Math.cos(w)*u+a,n=Math.sin(w)*u+s;t.lineTo(e,n);const r=Math.cos(B)*u+a,i=Math.sin(B)*u+s;t.lineTo(r,i)}t.closePath()}function Tu(t,e,n=e){t.lineCap=Ga(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Ga(n.borderDash,e.borderDash)),t.lineDashOffset=Ga(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Ga(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Ga(n.borderWidth,e.borderWidth),t.strokeStyle=Ga(n.borderColor,e.borderColor)}function Mu(t,e,n){t.lineTo(n.x,n.y)}function Lu(t,e,n={}){const r=t.length,{start:i=0,end:o=r-1}=n,{start:a,end:s}=e,l=Math.max(i,a),c=Math.min(o,s),h=i<a&&o<a||i>s&&o>s;return{count:r,start:l,loop:e.loop,ilen:c<l&&!h?r+c-l:c-l}}function Ou(t,e,n,r){const{points:i,options:o}=e,{count:a,start:s,loop:l,ilen:c}=Lu(i,n,r),h=function(t){return t.stepped?xl:t.tension||"monotone"===t.cubicInterpolationMode?vl:Mu}(o);let u,d,p,{move:f=!0,reverse:g}=r||{};for(u=0;u<=c;++u)d=i[(s+(g?c-u:u))%a],d.skip||(f?(t.moveTo(d.x,d.y),f=!1):h(t,p,d,g,o.stepped),p=d);return l&&(d=i[(s+(g?c:0))%a],h(t,p,d,g,o.stepped)),!!l}function Du(t,e,n,r){const i=e.points,{count:o,start:a,ilen:s}=Lu(i,n,r),{move:l=!0,reverse:c}=r||{};let h,u,d,p,f,g,m=0,A=0;const y=t=>(a+(c?s-t:t))%o,b=()=>{p!==f&&(t.lineTo(m,f),t.lineTo(m,p),t.lineTo(m,g))};for(l&&(u=i[y(0)],t.moveTo(u.x,u.y)),h=0;h<=s;++h){if(u=i[y(h)],u.skip)continue;const e=u.x,n=u.y,r=0|e;r===d?(n<p?p=n:n>f&&(f=n),m=(A*m+e)/++A):(b(),t.lineTo(e,n),d=r,A=0,p=f=n),g=n}b()}function Pu(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n?Ou:Du}const Fu="function"==typeof Path2D;class ju extends Nh{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;nc(this._points,n,t,r,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(t,e){const n=t.points,r=t.options.spanGaps,i=n.length;if(!i)return[];const o=!!t._loop,{start:a,end:s}=function(t,e,n,r){let i=0,o=e-1;if(n&&!r)for(;i<e&&!t[i].skip;)i++;for(;i<e&&t[i].skip;)i++;for(i%=e,n&&(o+=i);o>i&&t[o%e].skip;)o--;return o%=e,{start:i,end:o}}(n,i,o,r);return function(t,e,n,r){return r&&r.setContext&&n?function(t,e,n,r){const i=t._chart.getContext(),o=wc(t.options),{_datasetIndex:a,options:{spanGaps:s}}=t,l=n.length,c=[];let h=o,u=e[0].start,d=u;function p(t,e,r,i){const o=s?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=o;for(;n[e%l].skip;)e+=o;t%l!==e%l&&(c.push({start:t%l,end:e%l,loop:r,style:i}),h=i,u=e%l)}}for(const t of e){u=s?u:t.start;let e,o=n[u%l];for(d=u+1;d<=t.end;d++){const s=n[d%l];e=wc(r.setContext(Fl(i,{type:"segment",p0:o,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),Bc(e,h)&&p(u,d-1,t.loop,h),o=s,h=e}u<d-1&&p(u,d-1,t.loop,h)}return c}(t,e,n,r):e}(t,!0===r?[{start:a,end:s,loop:o}]:function(t,e,n,r){const i=t.length,o=[];let a,s=e,l=t[e];for(a=e+1;a<=n;++a){const n=t[a%i];n.skip||n.stop?l.skip||(r=!1,o.push({start:e%i,end:(a-1)%i,loop:r}),e=s=n.stop?a:null):(s=a,l.skip&&(e=a)),l=n}return null!==s&&o.push({start:e%i,end:s%i,loop:r}),o}(n,a,s<a?s+i:s,!!t._fullLoop&&0===a&&s===i-1),n,e)}(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,r=t[e],i=this.points,o=kc(this,{property:e,start:r,end:r});if(!o.length)return;const a=[],s=function(t){return t.stepped?gc:t.tension||"monotone"===t.cubicInterpolationMode?mc:fc}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:h}=o[l],u=i[c],d=i[h];if(u===d){a.push(u);continue}const p=s(u,d,Math.abs((r-u[e])/(d[e]-u[e])),n.stepped);p[e]=t[e],a.push(p)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return Pu(this)(t,this,e,n)}path(t,e,n){const r=this.segments,i=Pu(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const a of r)o&=i(t,this,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(t.save(),function(t,e,n,r){Fu&&!e.options.segment?function(t,e,n,r){let i=e._path;i||(i=e._path=new Path2D,e.path(i,n,r)&&i.closePath()),Tu(t,e.options),t.stroke(i)}(t,e,n,r):function(t,e,n,r){const{segments:i,options:o}=e,a=Pu(e);for(const s of i)Tu(t,o,s.style),t.beginPath(),a(t,e,s,{start:n,end:n+r-1})&&t.closePath(),t.stroke()}(t,e,n,r)}(t,this,n,r),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function zu(t,e,n,r){const i=t.options,{[n]:o}=t.getProps([n],r);return Math.abs(e-o)<i.radius+i.hitRadius}function $u(t,e){const{x:n,y:r,base:i,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let s,l,c,h,u;return t.horizontal?(u=a/2,s=Math.min(n,i),l=Math.max(n,i),c=r-u,h=r+u):(u=o/2,s=n-u,l=n+u,c=Math.min(r,i),h=Math.max(r,i)),{left:s,top:c,right:l,bottom:h}}function Ru(t,e,n,r){return t?0:Ls(e,n,r)}function Nu(t,e,n,r){const i=null===e,o=null===n,a=t&&!(i&&o)&&$u(t,r);return a&&(i||Os(e,a.left,a.right))&&(o||Os(n,a.top,a.bottom))}function qu(t,e){t.rect(e.x,e.y,e.w,e.h)}function Wu(t,e,n={}){const r=t.x!==n.x?-e:0,i=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-r,a=(t.y+t.h!==n.y+n.h?e:0)-i;return{x:t.x+r,y:t.y+i,w:t.w+o,h:t.h+a,radius:t.radius}}var Ku=Object.freeze({__proto__:null,ArcElement:class extends Nh{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.getProps(["x","y"],n),{angle:i,distance:o}=Ss(r,{x:t,y:e}),{startAngle:a,endAngle:s,innerRadius:l,outerRadius:c,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,d=Ga(h,s-a),p=Ms(i,a,s)&&a!==s,f=d>=us||p,g=Os(o,l+u,c+u);return f&&g}getCenterPoint(t){const{x:e,y:n,startAngle:r,endAngle:i,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:s,spacing:l}=this.options,c=(r+i)/2,h=(o+a+l+s)/2;return{x:e+Math.cos(c)*h,y:n+Math.sin(c)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,r=(e.offset||0)/4,i=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>us?Math.floor(n/us):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);const s=r*(1-Math.sin(Math.min(hs,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,r,i){const{fullCircles:o,startAngle:a,circumference:s}=e;let l=e.endAngle;if(o){Eu(t,e,n,r,l,i);for(let e=0;e<o;++e)t.fill();isNaN(s)||(l=a+(s%us||us))}Eu(t,e,n,r,l,i),t.fill()}(t,this,s,i,o),function(t,e,n,r,i){const{fullCircles:o,startAngle:a,circumference:s,options:l}=e,{borderWidth:c,borderJoinStyle:h,borderDash:u,borderDashOffset:d,borderRadius:p}=l,f="inner"===l.borderAlign;if(!c)return;t.setLineDash(u||[]),t.lineDashOffset=d,f?(t.lineWidth=2*c,t.lineJoin=h||"round"):(t.lineWidth=c,t.lineJoin=h||"bevel");let g=e.endAngle;if(o){Eu(t,e,n,r,g,i);for(let e=0;e<o;++e)t.stroke();isNaN(s)||(g=a+(s%us||us))}f&&function(t,e,n){const{startAngle:r,pixelMargin:i,x:o,y:a,outerRadius:s,innerRadius:l}=e;let c=i/s;t.beginPath(),t.arc(o,a,s,r-c,n+c),l>i?(c=i/l,t.arc(o,a,l,n+c,r-c,!0)):t.arc(o,a,i,n+gs,r-gs),t.closePath(),t.clip()}(t,e,g),l.selfJoin&&g-a>=hs&&0===p&&"miter"!==h&&function(t,e,n){const{startAngle:r,x:i,y:o,outerRadius:a,innerRadius:s,options:l}=e,{borderWidth:c,borderJoinStyle:h}=l,u=Math.min(c/a,Ts(r-n));if(t.beginPath(),t.arc(i,o,a-c/2,r+u/2,n-u/2),s>0){const e=Math.min(c/s,Ts(r-n));t.arc(i,o,s+c/2,n-e/2,r+e/2,!0)}else{const e=Math.min(c/2,a*Ts(r-n));if("round"===h)t.arc(i,o,e,n-hs/2,r+hs/2,!0);else if("bevel"===h){const a=2*e*e,s=-a*Math.cos(n+hs/2)+i,l=-a*Math.sin(n+hs/2)+o,c=a*Math.cos(r+hs/2)+i,h=a*Math.sin(r+hs/2)+o;t.lineTo(s,l),t.lineTo(c,h)}}t.closePath(),t.moveTo(0,0),t.rect(0,0,t.canvas.width,t.canvas.height),t.clip("evenodd")}(t,e,g),o||(Eu(t,e,n,r,g,i),t.stroke())}(t,this,s,i,o),t.restore()}},BarElement:class extends Nh{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=function(t){const e=$u(t),n=e.right-e.left,r=e.bottom-e.top,i=function(t,e,n){const r=t.options.borderWidth,i=t.borderSkipped,o=Ml(r);return{t:Ru(i.top,o.top,0,n),r:Ru(i.right,o.right,0,e),b:Ru(i.bottom,o.bottom,0,n),l:Ru(i.left,o.left,0,e)}}(t,n/2,r/2),o=function(t,e,n){const{enableBorderRadius:r}=t.getProps(["enableBorderRadius"]),i=t.options.borderRadius,o=Ll(i),a=Math.min(e,n),s=t.borderSkipped,l=r||Ka(i);return{topLeft:Ru(!l||s.top||s.left,o.topLeft,0,a),topRight:Ru(!l||s.top||s.right,o.topRight,0,a),bottomLeft:Ru(!l||s.bottom||s.left,o.bottomLeft,0,a),bottomRight:Ru(!l||s.bottom||s.right,o.bottomRight,0,a)}}(t,n/2,r/2);return{outer:{x:e.left,y:e.top,w:n,h:r,radius:o},inner:{x:e.left+i.l,y:e.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,o.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,o.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,o.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,o.bottomRight-Math.max(i.b,i.r))}}}}(this),a=(s=o.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?Bl:qu;var s;t.save(),o.w===i.w&&o.h===i.h||(t.beginPath(),a(t,Wu(o,e,i)),t.clip(),a(t,Wu(i,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Wu(i,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return Nu(this,t,e,n)}inXRange(t,e){return Nu(this,t,null,e)}inYRange(t,e){return Nu(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],t);return{x:i?(e+r)/2:e,y:i?n:(n+r)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:ju,PointElement:class extends Nh{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const r=this.options,{x:i,y:o}=this.getProps(["x","y"],n);return Math.pow(t-i,2)+Math.pow(e-o,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(t,e){return zu(this,t,"x",e)}inYRange(t,e){return zu(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;return e=Math.max(e,e&&t.hoverRadius||0),2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!Al(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,gl(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});const Uu=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Hu=Uu.map(t=>t.replace("rgb(","rgba(").replace(")",", 0.5)"));function Gu(t){return Uu[t%Uu.length]}function Yu(t){return Hu[t%Hu.length]}function Vu(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var Qu={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=t.config,{elements:o}=i,a=Vu(r)||(s=i)&&(s.borderColor||s.backgroundColor)||o&&Vu(o)||"rgba(0,0,0,0.1)"!==hl.borderColor||"rgba(0,0,0,0.1)"!==hl.backgroundColor;var s;if(!n.forceOverride&&a)return;const l=function(t){let e=0;return(n,r)=>{const i=t.getDatasetMeta(r).controller;i instanceof th?e=function(t,e){return t.backgroundColor=t.data.map(()=>Gu(e++)),e}(n,e):i instanceof eh?e=function(t,e){return t.backgroundColor=t.data.map(()=>Yu(e++)),e}(n,e):i&&(e=function(t,e){return t.borderColor=Gu(e),t.backgroundColor=Yu(e),++e}(n,e))}}(t);r.forEach(l)}};function Xu(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Zu(t){t.data.datasets.forEach(t=>{Xu(t)})}var Ju={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void Zu(t);const r=t.width;t.data.datasets.forEach((e,i)=>{const{_data:o,indexAxis:a}=e,s=t.getDatasetMeta(i),l=o||e.data;if("y"===Pl([a,t.options.indexAxis]))return;if(!s.controller.supportsDecimation)return;const c=t.scales[s.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(t.options.parsing)return;let h,{start:u,count:d}=function(t,e){const n=e.length;let r,i=0;const{iScale:o}=t,{min:a,max:s,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(i=Ls(Ps(e,o.axis,a).lo,0,n-1)),r=c?Ls(Ps(e,o.axis,s).hi+1,i,n)-i:n-i,{start:i,count:r}}(s,l);if(d<=(n.threshold||4*r))Xu(e);else{switch(qa(o)&&(e._data=l,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":h=function(t,e,n,r,i){const o=i.samples||r;if(o>=n)return t.slice(e,e+n);const a=[],s=(n-2)/(o-2);let l=0;const c=e+n-1;let h,u,d,p,f,g=e;for(a[l++]=t[g],h=0;h<o-2;h++){let r,i=0,o=0;const c=Math.floor((h+1)*s)+1+e,m=Math.min(Math.floor((h+2)*s)+1,n)+e,A=m-c;for(r=c;r<m;r++)i+=t[r].x,o+=t[r].y;i/=A,o/=A;const y=Math.floor(h*s)+1+e,b=Math.min(Math.floor((h+1)*s)+1,n)+e,{x,y:v}=t[g];for(d=p=-1,r=y;r<b;r++)p=.5*Math.abs((x-i)*(t[r].y-v)-(x-t[r].x)*(o-v)),p>d&&(d=p,u=t[r],f=r);a[l++]=u,g=f}return a[l++]=t[c],a}(l,u,d,r,n);break;case"min-max":h=function(t,e,n,r){let i,o,a,s,l,c,h,u,d,p,f=0,g=0;const m=[],A=e+n-1,y=t[e].x,b=t[A].x-y;for(i=e;i<e+n;++i){o=t[i],a=(o.x-y)/b*r,s=o.y;const e=0|a;if(e===l)s<d?(d=s,c=i):s>p&&(p=s,h=i),f=(g*f+o.x)/++g;else{const n=i-1;if(!qa(c)&&!qa(h)){const e=Math.min(c,h),r=Math.max(c,h);e!==u&&e!==n&&m.push({...t[e],x:f}),r!==u&&r!==n&&m.push({...t[r],x:f})}i>0&&n!==u&&m.push(t[n]),m.push(o),l=e,g=0,d=p=s,c=h=u=i}}return m}(l,u,d,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=h}})},destroy(t){Zu(t)}};function td(t,e,n,r){if(r)return;let i=e[t],o=n[t];return"angle"===t&&(i=Ts(i),o=Ts(o)),{property:t,start:i,end:o}}function ed(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function nd(t,e,n,r){return t&&e?r(t[n],e[n]):t?t[n]:e?e[n]:0}function rd(t,e){let n=[],r=!1;return Wa(t)?(r=!0,n=t):n=function(t,e){const{x:n=null,y:r=null}=t||{},i=e.points,o=[];return e.segments.forEach(({start:t,end:e})=>{e=ed(t,e,i);const a=i[t],s=i[e];null!==r?(o.push({x:a.x,y:r}),o.push({x:s.x,y:r})):null!==n&&(o.push({x:n,y:a.y}),o.push({x:n,y:s.y}))}),o}(t,e),n.length?new ju({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function id(t){return t&&!1!==t.fill}function od(t,e,n){let r=t[e].fill;const i=[e];let o;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!Ua(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function ad(t,e,n){const r=function(t){const e=t.options,n=e.fill;let r=Ga(n&&n.target,n);return void 0===r&&(r=!!e.backgroundColor),!1!==r&&null!==r&&(!0===r?"origin":r)}(t);if(Ka(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return Ua(i)&&Math.floor(i)===i?function(t,e,n,r){return"-"!==t&&"+"!==t||(n=e+n),!(n===e||n<0||n>=r)&&n}(r[0],e,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function sd(t,e,n){const r=[];for(let i=0;i<n.length;i++){const o=n[i],{first:a,last:s,point:l}=ld(o,e,"x");if(!(!l||a&&s))if(a)r.unshift(l);else if(t.push(l),!s)break}t.push(...r)}function ld(t,e,n){const r=t.interpolate(e,n);if(!r)return{};const i=r[n],o=t.segments,a=t.points;let s=!1,l=!1;for(let t=0;t<o.length;t++){const e=o[t],r=a[e.start][n],c=a[e.end][n];if(Os(i,r,c)){s=i===r,l=i===c;break}}return{first:s,last:l,point:r}}class cd{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:r,y:i,radius:o}=this;return e=e||{start:0,end:us},t.arc(r,i,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:r}=this,i=t.angle;return{x:e+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function hd(t,e,n){const r=function(t){const{chart:e,fill:n,line:r}=t;if(Ua(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:r}=t,i=[],o=r.segments,a=r.points,s=function(t,e){const n=[],r=t.getMatchingVisibleMetas("line");for(let t=0;t<r.length;t++){const i=r[t];if(i.index===e)break;i.hidden||n.unshift(i.dataset)}return n}(e,n);s.push(rd({x:null,y:e.bottom},r));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)sd(i,a[t],s)}return new ju({points:i,options:{}})}(t);if("shape"===n)return!0;const i=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,r=e.options,i=e.getLabels().length,o=r.reverse?e.max:e.min,a=function(t,e,n){let r;return r="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:Ka(t)?t.value:e.getBaseValue(),r}(n,e,o),s=[];if(r.grid.circular){const t=e.getPointPositionForValue(0,o);return new cd({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(a)})}for(let t=0;t<i;++t)s.push(e.getPointPositionForValue(t,a));return s}(t):function(t){const{scale:e={},fill:n}=t,r=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:Ka(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(Ua(r)){const t=e.isHorizontal();return{x:t?r:null,y:t?null:r}}return null}(t)}(t);return i instanceof cd?i:rd(i,r)}(e),{chart:i,index:o,line:a,scale:s,axis:l}=e,c=a.options,h=c.fill,u=c.backgroundColor,{above:d=u,below:p=u}=h||{},f=i.getDatasetMeta(o),g=Sc(i,f);r&&a.points.length&&(yl(t,n),function(t,e){const{line:n,target:r,above:i,below:o,area:a,scale:s,clip:l}=e,c=n._loop?"angle":e.axis;t.save();let h=o;o!==i&&("x"===c?(ud(t,r,a.top),pd(t,{line:n,target:r,color:i,scale:s,property:c,clip:l}),t.restore(),t.save(),ud(t,r,a.bottom)):"y"===c&&(dd(t,r,a.left),pd(t,{line:n,target:r,color:o,scale:s,property:c,clip:l}),t.restore(),t.save(),dd(t,r,a.right),h=i)),pd(t,{line:n,target:r,color:h,scale:s,property:c,clip:l}),t.restore()}(t,{line:a,target:r,above:d,below:p,area:n,scale:s,axis:l,clip:g}),bl(t))}function ud(t,e,n){const{segments:r,points:i}=e;let o=!0,a=!1;t.beginPath();for(const s of r){const{start:r,end:l}=s,c=i[r],h=i[ed(r,l,i)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,s,{move:a}),a?t.closePath():t.lineTo(h.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function dd(t,e,n){const{segments:r,points:i}=e;let o=!0,a=!1;t.beginPath();for(const s of r){const{start:r,end:l}=s,c=i[r],h=i[ed(r,l,i)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(n,c.y),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,s,{move:a}),a?t.closePath():t.lineTo(n,h.y)}t.lineTo(n,e.first().y),t.closePath(),t.clip()}function pd(t,e){const{line:n,target:r,property:i,color:o,scale:a,clip:s}=e,l=function(t,e,n){const r=t.segments,i=t.points,o=e.points,a=[];for(const t of r){let{start:r,end:s}=t;s=ed(r,s,i);const l=td(n,i[r],i[s],t.loop);if(!e.segments){a.push({source:t,target:l,start:i[r],end:i[s]});continue}const c=kc(e,l);for(const e of c){const r=td(n,o[e.start],o[e.end],e.loop),s=Cc(t,i,r);for(const t of s)a.push({source:t,target:e,start:{[n]:nd(l,r,"start",Math.max)},end:{[n]:nd(l,r,"end",Math.min)}})}}return a}(n,r,i);for(const{source:e,target:c,start:h,end:u}of l){const{style:{backgroundColor:l=o}={}}=e,d=!0!==r;t.save(),t.fillStyle=l,fd(t,a,s,d&&td(i,h,u)),t.beginPath();const p=!!n.pathSegment(t,e);let f;if(d){p?t.closePath():gd(t,r,u,i);const e=!!r.pathSegment(t,c,{move:p,reverse:!0});f=p&&e,f||gd(t,r,h,i)}t.closePath(),t.fill(f?"evenodd":"nonzero"),t.restore()}}function fd(t,e,n,r){const i=e.chart.chartArea,{property:o,start:a,end:s}=r||{};if("x"===o||"y"===o){let e,r,l,c;"x"===o?(e=a,r=i.top,l=s,c=i.bottom):(e=i.left,r=a,l=i.right,c=s),t.beginPath(),n&&(e=Math.max(e,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),t.rect(e,r,l-e,c-r),t.clip()}}function gd(t,e,n,r){const i=e.interpolate(n,r);i&&t.lineTo(i.x,i.y)}var md={id:"filler",afterDatasetsUpdate(t,e,n){const r=(t.data.datasets||[]).length,i=[];let o,a,s,l;for(a=0;a<r;++a)o=t.getDatasetMeta(a),s=o.dataset,l=null,s&&s.options&&s instanceof ju&&(l={visible:t.isDatasetVisible(a),index:a,fill:ad(s,a,r),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=l,i.push(l);for(a=0;a<r;++a)l=i[a],l&&!1!==l.fill&&(l.fill=od(i,a,n.propagate))},beforeDraw(t,e,n){const r="beforeDraw"===n.drawTime,i=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),r&&n.fill&&hd(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=t.getSortedVisibleDatasetMetas();for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;id(n)&&hd(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const r=e.meta.$filler;id(r)&&"beforeDatasetDraw"===n.drawTime&&hd(t.ctx,r,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Ad=(t,e)=>{let{boxHeight:n=e,boxWidth:r=e}=t;return t.usePointStyle&&(n=Math.min(n,e),r=t.pointStyleWidth||Math.min(r,e)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(e,n)}};class yd extends Nh{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Va(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(e=>t.filter(e,this.chart.data))),t.sort&&(e=e.sort((e,n)=>t.sort(e,n,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,r=Dl(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=Ad(n,i);let l,c;e.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,i,a,s)+10):(c=this.maxHeight,l=this._fitCols(o,r,a,s)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let h=t;i.textAlign="left",i.textBaseline="middle";let u=-1,d=-c;return this.legendItems.forEach((t,p)=>{const f=n+e/2+i.measureText(t.text).width;(0===p||l[l.length-1]+f+2*a>o)&&(h+=c,l[l.length-(p>0?0:1)]=0,d+=c,u++),s[p]={left:0,top:d,row:u,width:f,height:r},l[l.length-1]+=f+a}),h}_fitCols(t,e,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-t;let h=a,u=0,d=0,p=0,f=0;return this.legendItems.forEach((t,o)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,r,i){const o=function(t,e,n,r){let i=t.text;return i&&"string"!=typeof i&&(i=i.reduce((t,e)=>t.length>e.length?t:e)),e+n.size/2+r.measureText(i).width}(r,t,e,n),a=function(t,e,n){let r=t;return"string"!=typeof e.text&&(r=bd(e,n)),r}(i,r,e.lineHeight);return{itemWidth:o,itemHeight:a}}(n,e,i,t,r);o>0&&d+m+2*a>c&&(h+=u+a,l.push({width:u,height:d}),p+=u+a,f++,u=d=0),s[o]={left:p,top:d,col:f,width:g,height:m},u=Math.max(u,g),d+=m+a}),h+=u,l.push({width:u,height:d}),h}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:i}}=this,o=Ac(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=Ws(n,this.left+r,this.right-this.lineWidths[i]);for(const s of e)i!==s.row&&(i=s.row,a=Ws(n,this.left+r,this.right-this.lineWidths[i])),s.top+=this.top+t+r,s.left=o.leftForLtr(o.x(a),s.width),a+=s.width+r}else{let i=0,a=Ws(n,this.top+t+r,this.bottom-this.columnSizes[i].height);for(const s of e)s.col!==i&&(i=s.col,a=Ws(n,this.top+t+r,this.bottom-this.columnSizes[i].height)),s.top=a,s.left+=this.left+r,s.left=o.leftForLtr(o.x(s.left),s.width),a+=s.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;yl(t,this),this._draw(),bl(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:i,labels:o}=t,a=hl.color,s=Ac(t.rtl,this.left,this.width),l=Dl(o.font),{padding:c}=o,h=l.size,u=h/2;let d;this.drawTitle(),r.textAlign=s.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:p,boxHeight:f,itemHeight:g}=Ad(o,h),m=this.isHorizontal(),A=this._computeTitleHeight();d=m?{x:Ws(i,this.left+c,this.right-n[0]),y:this.top+c+A,line:0}:{x:this.left+c,y:Ws(i,this.top+A+c,this.bottom-e[0].height),line:0},yc(this.ctx,t.textDirection);const y=g+c;this.legendItems.forEach((b,x)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const v=r.measureText(b.text).width,C=s.textAlign(b.textAlign||(b.textAlign=o.textAlign)),k=p+u+v;let w=d.x,B=d.y;if(s.setWidth(this.width),m?x>0&&w+k+c>this.right&&(B=d.y+=y,d.line++,w=d.x=Ws(i,this.left+c,this.right-n[d.line])):x>0&&B+y>this.bottom&&(w=d.x=w+e[d.line].width+c,d.line++,B=d.y=Ws(i,this.top+A+c,this.bottom-e[d.line].height)),function(t,e,n){if(isNaN(p)||p<=0||isNaN(f)||f<0)return;r.save();const i=Ga(n.lineWidth,1);if(r.fillStyle=Ga(n.fillStyle,a),r.lineCap=Ga(n.lineCap,"butt"),r.lineDashOffset=Ga(n.lineDashOffset,0),r.lineJoin=Ga(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=Ga(n.strokeStyle,a),r.setLineDash(Ga(n.lineDash,[])),o.usePointStyle){const a={radius:f*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=s.xPlus(t,p/2);ml(r,a,l,e+u,o.pointStyleWidth&&p)}else{const o=e+Math.max((h-f)/2,0),a=s.leftForLtr(t,p),l=Ll(n.borderRadius);r.beginPath(),Object.values(l).some(t=>0!==t)?Bl(r,{x:a,y:o,w:p,h:f,radius:l}):r.rect(a,o,p,f),r.fill(),0!==i&&r.stroke()}r.restore()}(s.x(w),B,b),w=((t,e,n,r)=>t===(r?"left":"right")?n:"center"===t?(e+n)/2:e)(C,w+p+u,m?w+k:this.right,t.rtl),function(t,e,n){wl(r,n.text,t,e+g/2,l,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(w),B,b),m)d.x+=k+c;else if("string"!=typeof b.text){const t=l.lineHeight;d.y+=bd(b,t)+c}else d.y+=y}),bc(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=Dl(e.font),r=Ol(e.padding);if(!e.display)return;const i=Ac(t.rtl,this.left,this.width),o=this.ctx,a=e.position,s=n.size/2,l=r.top+s;let c,h=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,h=Ws(t.align,h,this.right-u);else{const e=this.columnSizes.reduce((t,e)=>Math.max(t,e.height),0);c=l+Ws(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=Ws(a,h,h+u);o.textAlign=i.textAlign(qs(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,wl(o,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=Dl(t.font),n=Ol(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,i;if(Os(t,this.left,this.right)&&Os(e,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],Os(t,r.left,r.left+r.width)&&Os(e,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const o=this._hoveredItem,a=(i=n,null!==(r=o)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);o&&!a&&Va(e.onLeave,[t,o,this],this),this._hoveredItem=n,n&&!a&&Va(e.onHover,[t,n,this],this)}else n&&Va(e.onClick,[t,n,this],this);var r,i}}function bd(t,e){return e*(t.text?t.text.length:0)}var xd={id:"legend",_element:yd,start(t,e,n){const r=t.legend=new yd({ctx:t.ctx,options:n,chart:t});kh.configure(t,r,n),kh.addBox(t,r)},stop(t){kh.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const r=t.legend;kh.configure(t,r,n),r.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const r=e.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),e.hidden=!0):(i.show(r),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:o,useBorderRadius:a,borderRadius:s}}=t.legend.options;return t._getSortedDatasetMetas().map(t=>{const l=t.controller.getStyle(n?0:void 0),c=Ol(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(s||l.borderRadius),datasetIndex:t.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class vd extends Nh{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const r=Wa(n.text)?n.text.length:1;this._padding=Ol(n.padding);const i=r*Dl(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:r,right:i,options:o}=this,a=o.align;let s,l,c,h=0;return this.isHorizontal()?(l=Ws(a,n,i),c=e+t,s=i-n):("left"===o.position?(l=n+t,c=Ws(a,r,e),h=-.5*hs):(l=i-t,c=Ws(a,e,r),h=.5*hs),s=r-e),{titleX:l,titleY:c,maxWidth:s,rotation:h}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=Dl(e.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:o,maxWidth:a,rotation:s}=this._drawArgs(r);wl(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:s,textAlign:qs(e.align),textBaseline:"middle",translation:[i,o]})}}var Cd={id:"title",_element:vd,start(t,e,n){!function(t,e){const n=new vd({ctx:t.ctx,options:e,chart:t});kh.configure(t,n,e),kh.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;kh.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const r=t.titleBlock;kh.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const kd=new WeakMap;var wd={id:"subtitle",start(t,e,n){const r=new vd({ctx:t.ctx,options:n,chart:t});kh.configure(t,r,n),kh.addBox(t,r),kd.set(t,r)},stop(t){kh.removeBox(t,kd.get(t)),kd.delete(t)},beforeUpdate(t,e,n){const r=kd.get(t);kh.configure(t,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Bd={average(t){if(!t.length)return!1;let e,n,r=new Set,i=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();r.add(t.x),i+=t.y,++o}}return 0!==o&&0!==r.size&&{x:[...r].reduce((t,e)=>t+e)/r.size,y:i/o}},nearest(t,e){if(!t.length)return!1;let n,r,i,o=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(n=0,r=t.length;n<r;++n){const r=t[n].element;if(r&&r.hasValue()){const t=_s(e,r.getCenterPoint());t<s&&(s=t,i=r)}}if(i){const t=i.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function Id(t,e){return e&&(Wa(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Sd(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function _d(t,e){const{element:n,datasetIndex:r,index:i}=e,o=t.getDatasetMeta(r).controller,{label:a,value:s}=o.getLabelAndValue(i);return{chart:t,label:a,parsed:o.getParsed(i),raw:t.data.datasets[r].data[i],formattedValue:s,dataset:o.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Ed(t,e){const n=t.chart.ctx,{body:r,footer:i,title:o}=t,{boxWidth:a,boxHeight:s}=e,l=Dl(e.bodyFont),c=Dl(e.titleFont),h=Dl(e.footerFont),u=o.length,d=i.length,p=r.length,f=Ol(e.padding);let g=f.height,m=0,A=r.reduce((t,e)=>t+e.before.length+e.lines.length+e.after.length,0);A+=t.beforeBody.length+t.afterBody.length,u&&(g+=u*c.lineHeight+(u-1)*e.titleSpacing+e.titleMarginBottom),A&&(g+=p*(e.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(A-p)*l.lineHeight+(A-1)*e.bodySpacing),d&&(g+=e.footerMarginTop+d*h.lineHeight+(d-1)*e.footerSpacing);let y=0;const b=function(t){m=Math.max(m,n.measureText(t).width+y)};return n.save(),n.font=c.string,Qa(t.title,b),n.font=l.string,Qa(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?a+2+e.boxPadding:0,Qa(r,t=>{Qa(t.before,b),Qa(t.lines,b),Qa(t.after,b)}),y=0,n.font=h.string,Qa(t.footer,b),n.restore(),m+=f.width,{width:m,height:g}}function Td(t,e,n,r){const{x:i,width:o}=n,{width:a,chartArea:{left:s,right:l}}=t;let c="center";return"center"===r?c=i<=(s+l)/2?"left":"right":i<=o/2?c="left":i>=a-o/2&&(c="right"),function(t,e,n,r){const{x:i,width:o}=r,a=n.caretSize+n.caretPadding;return"left"===t&&i+o+a>e.width||"right"===t&&i-o-a<0||void 0}(c,t,e,n)&&(c="center"),c}function Md(t,e,n){const r=n.yAlign||e.yAlign||function(t,e){const{y:n,height:r}=e;return n<r/2?"top":n>t.height-r/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||Td(t,e,n,r),yAlign:r}}function Ld(t,e,n,r){const{caretSize:i,caretPadding:o,cornerRadius:a}=t,{xAlign:s,yAlign:l}=n,c=i+o,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:p}=Ll(a);let f=function(t,e){let{x:n,width:r}=t;return"right"===e?n-=r:"center"===e&&(n-=r/2),n}(e,s);const g=function(t,e,n){let{y:r,height:i}=t;return"top"===e?r+=n:r-="bottom"===e?i+n:i/2,r}(e,l,c);return"center"===l?"left"===s?f+=c:"right"===s&&(f-=c):"left"===s?f-=Math.max(h,d)+i:"right"===s&&(f+=Math.max(u,p)+i),{x:Ls(f,0,r.width-e.width),y:Ls(g,0,r.height-e.height)}}function Od(t,e,n){const r=Ol(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-r.right:t.x+r.left}function Dd(t){return Id([],Sd(t))}function Pd(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const Fd={beforeTitle:Ra,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(r>0&&e.dataIndex<r)return n[e.dataIndex]}return""},afterTitle:Ra,beforeBody:Ra,beforeLabel:Ra,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return qa(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Ra,afterBody:Ra,beforeFooter:Ra,footer:Ra,afterFooter:Ra};function jd(t,e,n,r){const i=t[e].call(n,r);return void 0===i?Fd[e].call(n,r):i}class zd extends Nh{static positioners=Bd;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&e.options.animation&&n.animations,i=new Oc(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=Fl(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"}))}getTitle(t,e){const{callbacks:n}=e,r=jd(n,"beforeTitle",this,t),i=jd(n,"title",this,t),o=jd(n,"afterTitle",this,t);let a=[];return a=Id(a,Sd(r)),a=Id(a,Sd(i)),a=Id(a,Sd(o)),a}getBeforeBody(t,e){return Dd(jd(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,r=[];return Qa(t,t=>{const e={before:[],lines:[],after:[]},i=Pd(n,t);Id(e.before,Sd(jd(i,"beforeLabel",this,t))),Id(e.lines,jd(i,"label",this,t)),Id(e.after,Sd(jd(i,"afterLabel",this,t))),r.push(e)}),r}getAfterBody(t,e){return Dd(jd(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,r=jd(n,"beforeFooter",this,t),i=jd(n,"footer",this,t),o=jd(n,"afterFooter",this,t);let a=[];return a=Id(a,Sd(r)),a=Id(a,Sd(i)),a=Id(a,Sd(o)),a}_createItems(t){const e=this._active,n=this.chart.data,r=[],i=[],o=[];let a,s,l=[];for(a=0,s=e.length;a<s;++a)l.push(_d(this.chart,e[a]));return t.filter&&(l=l.filter((e,r,i)=>t.filter(e,r,i,n))),t.itemSort&&(l=l.sort((e,r)=>t.itemSort(e,r,n))),Qa(l,e=>{const n=Pd(t.callbacks,e);r.push(jd(n,"labelColor",this,e)),i.push(jd(n,"labelPointStyle",this,e)),o.push(jd(n,"labelTextColor",this,e))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(r.length){const t=Bd[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=Ed(this,n),a=Object.assign({},t,e),s=Md(this.chart,n,a),l=Ld(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,i={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,r){const i=this.getCaretPosition(t,n,r);e.lineTo(i.x1,i.y1),e.lineTo(i.x2,i.y2),e.lineTo(i.x3,i.y3)}getCaretPosition(t,e,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:s,topRight:l,bottomLeft:c,bottomRight:h}=Ll(a),{x:u,y:d}=t,{width:p,height:f}=e;let g,m,A,y,b,x;return"center"===i?(b=d+f/2,"left"===r?(g=u,m=g-o,y=b+o,x=b-o):(g=u+p,m=g+o,y=b-o,x=b+o),A=g):(m="left"===r?u+Math.max(s,c)+o:"right"===r?u+p-Math.max(l,h)-o:this.caretX,"top"===i?(y=d,b=y-o,g=m-o,A=m+o):(y=d+f,b=y+o,g=m+o,A=m-o),x=y),{x1:g,x2:m,x3:A,y1:y,y2:b,y3:x}}drawTitle(t,e,n){const r=this.title,i=r.length;let o,a,s;if(i){const l=Ac(n.rtl,this.x,this.width);for(t.x=Od(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",o=Dl(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,s=0;s<i;++s)e.fillText(r[s],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,s+1===i&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,r,i){const o=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:s,boxWidth:l}=i,c=Dl(i.bodyFont),h=Od(this,"left",i),u=r.x(h),d=s<c.lineHeight?(c.lineHeight-s)/2:0,p=e.y+d;if(i.usePointStyle){const e={radius:Math.min(l,s)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(u,l)+l/2,c=p+s/2;t.strokeStyle=i.multiKeyBackground,t.fillStyle=i.multiKeyBackground,gl(t,e,n,c),t.strokeStyle=o.borderColor,t.fillStyle=o.backgroundColor,gl(t,e,n,c)}else{t.lineWidth=Ka(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,t.strokeStyle=o.borderColor,t.setLineDash(o.borderDash||[]),t.lineDashOffset=o.borderDashOffset||0;const e=r.leftForLtr(u,l),n=r.leftForLtr(r.xPlus(u,1),l-2),a=Ll(o.borderRadius);Object.values(a).some(t=>0!==t)?(t.beginPath(),t.fillStyle=i.multiKeyBackground,Bl(t,{x:e,y:p,w:l,h:s,radius:a}),t.fill(),t.stroke(),t.fillStyle=o.backgroundColor,t.beginPath(),Bl(t,{x:n,y:p+1,w:l-2,h:s-2,radius:a}),t.fill()):(t.fillStyle=i.multiKeyBackground,t.fillRect(e,p,l,s),t.strokeRect(e,p,l,s),t.fillStyle=o.backgroundColor,t.fillRect(n,p+1,l-2,s-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:a,boxHeight:s,boxWidth:l,boxPadding:c}=n,h=Dl(n.bodyFont);let u=h.lineHeight,d=0;const p=Ac(n.rtl,this.x,this.width),f=function(n){e.fillText(n,p.x(t.x+d),t.y+u/2),t.y+=u+i},g=p.textAlign(o);let m,A,y,b,x,v,C;for(e.textAlign=o,e.textBaseline="middle",e.font=h.string,t.x=Od(this,g,n),e.fillStyle=n.bodyColor,Qa(this.beforeBody,f),d=a&&"right"!==g?"center"===o?l/2+c:l+2+c:0,b=0,v=r.length;b<v;++b){for(m=r[b],A=this.labelTextColors[b],e.fillStyle=A,Qa(m.before,f),y=m.lines,a&&y.length&&(this._drawColorBox(e,t,b,p,n),u=Math.max(h.lineHeight,s)),x=0,C=y.length;x<C;++x)f(y[x]),u=h.lineHeight;Qa(m.after,f)}d=0,u=h.lineHeight,Qa(this.afterBody,f),t.y-=i}drawFooter(t,e,n){const r=this.footer,i=r.length;let o,a;if(i){const s=Ac(n.rtl,this.x,this.width);for(t.x=Od(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",o=Dl(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<i;++a)e.fillText(r[a],s.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,r){const{xAlign:i,yAlign:o}=this,{x:a,y:s}=t,{width:l,height:c}=n,{topLeft:h,topRight:u,bottomLeft:d,bottomRight:p}=Ll(r.cornerRadius);e.fillStyle=r.backgroundColor,e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.beginPath(),e.moveTo(a+h,s),"top"===o&&this.drawCaret(t,e,n,r),e.lineTo(a+l-u,s),e.quadraticCurveTo(a+l,s,a+l,s+u),"center"===o&&"right"===i&&this.drawCaret(t,e,n,r),e.lineTo(a+l,s+c-p),e.quadraticCurveTo(a+l,s+c,a+l-p,s+c),"bottom"===o&&this.drawCaret(t,e,n,r),e.lineTo(a+d,s+c),e.quadraticCurveTo(a,s+c,a,s+c-d),"center"===o&&"left"===i&&this.drawCaret(t,e,n,r),e.lineTo(a,s+h),e.quadraticCurveTo(a,s,a+h,s),e.closePath(),e.fill(),r.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Bd[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=Ed(this,t),a=Object.assign({},n,this._size),s=Md(e,t,a),l=Ld(t,a,s,e);r._to===l.x&&i._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=Ol(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(i,t,r,e),yc(t,e.textDirection),i.y+=o.top,this.drawTitle(i,t,e),this.drawBody(i,t,e),this.drawFooter(i,t,e),bc(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,r=t.map(({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}),i=!Xa(n,r),o=this._positionChanged(r,e);(i||o)&&(this._active=r,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(t,i,e,n),a=this._positionChanged(o,t),s=e||!Xa(o,i)||a;return s&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,n,r){const i=this.options;if("mouseout"===t.type)return[];if(!r)return e.filter(t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index));const o=this.chart.getElementsAtEventForMode(t,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:r,options:i}=this,o=Bd[i.position].call(this,t,e);return!1!==o&&(n!==o.x||r!==o.y)}}var $d={id:"tooltip",_element:zd,positioners:Bd,afterInit(t,e,n){n&&(t.tooltip=new zd({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Fd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},Rd=Object.freeze({__proto__:null,Colors:Qu,Decimation:Ju,Filler:md,Legend:xd,SubTitle:wd,Title:Cd,Tooltip:$d});function Nd(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function qd(t,e,{horizontal:n,minRotation:r}){const i=ws(r),o=(n?Math.sin(i):Math.cos(i))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}class Wd extends Qh{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return qa(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=t=>r=e?r:t,a=t=>i=n?i:t;if(t){const t=bs(r),e=bs(i);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(r===i){let e=0===i?1:Math.abs(.05*i);a(i+e),t||o(r-e)}this.min=r,this.max=i}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:r}=t;return r?(e=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=function(t,e){const n=[],{bounds:r,step:i,min:o,max:a,precision:s,count:l,maxTicks:c,maxDigits:h,includeBounds:u}=t,d=i||1,p=c-1,{min:f,max:g}=e,m=!qa(o),A=!qa(a),y=!qa(l),b=(g-f)/(h+1);let x,v,C,k,w=vs((g-f)/p/d)*d;if(w<1e-14&&!m&&!A)return[{value:f},{value:g}];k=Math.ceil(g/w)-Math.floor(f/w),k>p&&(w=vs(k*w/p/d)*d),qa(s)||(x=Math.pow(10,s),w=Math.ceil(w*x)/x),"ticks"===r?(v=Math.floor(f/w)*w,C=Math.ceil(g/w)*w):(v=f,C=g),m&&A&&i&&function(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}((a-o)/i,w/1e3)?(k=Math.round(Math.min((a-o)/w,c)),w=(a-o)/k,v=o,C=a):y?(v=m?o:v,C=A?a:C,k=l-1,w=(C-v)/k):(k=(C-v)/w,k=xs(k,Math.round(k),w/1e3)?Math.round(k):Math.ceil(k));const B=Math.max(Is(w),Is(v));x=Math.pow(10,qa(s)?B:s),v=Math.round(v*x)/x,C=Math.round(C*x)/x;let I=0;for(m&&(u&&v!==o?(n.push({value:o}),v<o&&I++,xs(Math.round((v+I*w)*x)/x,o,qd(o,b,t))&&I++):v<o&&I++);I<k;++I){const t=Math.round((v+I*w)*x)/x;if(A&&t>a)break;n.push({value:t})}return A&&u&&C!==a?n.length&&xs(n[n.length-1].value,a,qd(a,b,t))?n[n.length-1].value=a:n.push({value:a}):A&&C!==a||n.push({value:C}),n}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&ks(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return nl(t,this.chart.options.locale,this.options.ticks.format)}}class Kd extends Wd{static id="linear";static defaults={ticks:{callback:il.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ua(t)?t:0,this.max=Ua(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=ws(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,i.lineHeight/r))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const Ud=t=>Math.floor(ys(t)),Hd=(t,e)=>Math.pow(10,Ud(t)+e);function Gd(t){return 1===t/Math.pow(10,Ud(t))}function Yd(t,e,n){const r=Math.pow(10,n),i=Math.floor(t/r);return Math.ceil(e/r)-i}class Vd extends Qh{static id="logarithmic";static defaults={ticks:{callback:il.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=Wd.prototype.parse.apply(this,[t,e]);if(0!==n)return Ua(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Ua(t)?Math.max(0,t):null,this.max=Ua(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ua(this._userMin)&&(this.min=t===Hd(this.min,0)?Hd(this.min,-1):Hd(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,r=this.max;const i=e=>n=t?n:e,o=t=>r=e?r:t;n===r&&(n<=0?(i(1),o(10)):(i(Hd(n,-1)),o(Hd(r,1)))),n<=0&&i(Hd(r,-1)),r<=0&&o(Hd(n,1)),this.min=n,this.max=r}buildTicks(){const t=this.options,e=function(t,{min:e,max:n}){e=Ha(t.min,e);const r=[],i=Ud(e);let o=function(t,e){let n=Ud(e-t);for(;Yd(t,e,n)>10;)n++;for(;Yd(t,e,n)<10;)n--;return Math.min(n,Ud(t))}(e,n),a=o<0?Math.pow(10,Math.abs(o)):1;const s=Math.pow(10,o),l=i>o?Math.pow(10,i):0,c=Math.round((e-l)*a)/a,h=Math.floor((e-l)/s/10)*s*10;let u=Math.floor((c-h)/Math.pow(10,o)),d=Ha(t.min,Math.round((l+h+u*Math.pow(10,o))*a)/a);for(;d<n;)r.push({value:d,major:Gd(d),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(o++,u=2,a=o>=0?1:a),d=Math.round((l+h+u*Math.pow(10,o))*a)/a;const p=Ha(t.max,d);return r.push({value:p,major:Gd(p),significand:u}),r}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&ks(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":nl(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=ys(t),this._valueRange=ys(this.max)-ys(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ys(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function Qd(t){const e=t.ticks;if(e.display&&t.display){const t=Ol(e.backdropPadding);return Ga(e.font&&e.font.size,hl.font.size)+t.height}return 0}function Xd(t,e,n){return n=Wa(n)?n:[n],{w:dl(t,e.string,n),h:n.length*e.lineHeight}}function Zd(t,e,n,r,i){return t===r||t===i?{start:e-n/2,end:e+n/2}:t<r||t>i?{start:e-n,end:e}:{start:e,end:e+n}}function Jd(t,e,n,r,i){const o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,l=0;r.start<e.l?(s=(e.l-r.start)/o,t.l=Math.min(t.l,e.l-s)):r.end>e.r&&(s=(r.end-e.r)/o,t.r=Math.max(t.r,e.r+s)),i.start<e.t?(l=(e.t-i.start)/a,t.t=Math.min(t.t,e.t-l)):i.end>e.b&&(l=(i.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function tp(t,e,n){const r=t.drawingArea,{extra:i,additionalAngle:o,padding:a,size:s}=n,l=t.getPointPosition(e,r+i+a,o),c=Math.round(Bs(Ts(l.angle+gs))),h=function(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}(l.y,s.h,c),u=function(t){return 0===t||180===t?"center":t<180?"left":"right"}(c),d=(p=l.x,f=s.w,"right"===(g=u)?p-=f:"center"===g&&(p-=f/2),p);var p,f,g;return{visible:!0,x:l.x,y:h,textAlign:u,left:d,top:h,right:d+s.w,bottom:h+s.h}}function ep(t,e){if(!e)return!0;const{left:n,top:r,right:i,bottom:o}=t;return!(Al({x:n,y:r},e)||Al({x:n,y:o},e)||Al({x:i,y:r},e)||Al({x:i,y:o},e))}function np(t,e,n){const{left:r,top:i,right:o,bottom:a}=n,{backdropColor:s}=e;if(!qa(s)){const n=Ll(e.borderRadius),l=Ol(e.backdropPadding);t.fillStyle=s;const c=r-l.left,h=i-l.top,u=o-r+l.width,d=a-i+l.height;Object.values(n).some(t=>0!==t)?(t.beginPath(),Bl(t,{x:c,y:h,w:u,h:d,radius:n}),t.fill()):t.fillRect(c,h,u,d)}}function rp(t,e,n,r){const{ctx:i}=t;if(n)i.arc(t.xCenter,t.yCenter,e,0,us);else{let n=t.getPointPosition(0,e);i.moveTo(n.x,n.y);for(let o=1;o<r;o++)n=t.getPointPosition(o,e),i.lineTo(n.x,n.y)}}class ip extends Wd{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:il.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=Ol(Qd(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Ua(t)&&!isNaN(t)?t:0,this.max=Ua(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Qd(this.options))}generateTickLabels(t){Wd.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((t,e)=>{const n=Va(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){const t=this.options;t.display&&t.pointLabels.display?function(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),r=[],i=[],o=t._pointLabels.length,a=t.options.pointLabels,s=a.centerPointLabels?hs/o:0;for(let l=0;l<o;l++){const o=a.setContext(t.getPointLabelContext(l));i[l]=o.padding;const c=t.getPointPosition(l,t.drawingArea+i[l],s),h=Dl(o.font),u=Xd(t.ctx,h,t._pointLabels[l]);r[l]=u;const d=Ts(t.getIndexAngle(l)+s),p=Math.round(Bs(d));Jd(n,e,d,Zd(p,c.x,u.w,0,180),Zd(p,c.y,u.h,90,270))}t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const r=[],i=t._pointLabels.length,o=t.options,{centerPointLabels:a,display:s}=o.pointLabels,l={extra:Qd(o)/2,additionalAngle:a?hs/i:0};let c;for(let o=0;o<i;o++){l.padding=n[o],l.size=e[o];const i=tp(t,o,l);r.push(i),"auto"===s&&(i.visible=ep(i,c),i.visible&&(c=i))}return r}(t,r,i)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){return Ts(t*(us/(this._pointLabels.length||1))+ws(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(qa(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(qa(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Fl(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const r=this.getIndexAngle(t)-gs+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:r,bottom:i}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),rp(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:r,border:i}=e,o=this._pointLabels.length;let a,s,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:r}}=t;for(let i=e-1;i>=0;i--){const e=t._pointLabelItems[i];if(!e.visible)continue;const o=r.setContext(t.getPointLabelContext(i));np(n,o,e);const a=Dl(o.font),{x:s,y:l,textAlign:c}=e;wl(n,t._pointLabels[i],s,l+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}(this,o),r.display&&this.ticks.forEach((t,e)=>{if(0!==e||0===e&&this.min<0){s=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),a=r.setContext(n),l=i.setContext(n);!function(t,e,n,r,i){const o=t.ctx,a=e.circular,{color:s,lineWidth:l}=e;!a&&!r||!s||!l||n<0||(o.save(),o.strokeStyle=s,o.lineWidth=l,o.setLineDash(i.dash||[]),o.lineDashOffset=i.dashOffset,o.beginPath(),rp(t,n,a,r),o.closePath(),o.stroke(),o.restore())}(this,a,s,o,l)}}),n.display){for(t.save(),a=o-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:o}=r;o&&i&&(t.lineWidth=o,t.strokeStyle=i,t.setLineDash(r.borderDash),t.lineDashOffset=r.borderDashOffset,s=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(a,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((r,a)=>{if(0===a&&this.min>=0&&!e.reverse)return;const s=n.setContext(this.getContext(a)),l=Dl(s.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){t.font=l.string,o=t.measureText(r.label).width,t.fillStyle=s.backdropColor;const e=Ol(s.backdropPadding);t.fillRect(-o/2-e.left,-i-l.size/2-e.top,o+e.width,l.size+e.height)}wl(t,r.label,0,-i,l,{color:s.color,strokeColor:s.textStrokeColor,strokeWidth:s.textStrokeWidth})}),t.restore()}drawTitle(){}}const op={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},ap=Object.keys(op);function sp(t,e){return t-e}function lp(t,e){if(qa(e))return null;const n=t._adapter,{parser:r,round:i,isoWeekday:o}=t._parseOpts;let a=e;return"function"==typeof r&&(a=r(a)),Ua(a)||(a="string"==typeof r?n.parse(a,r):n.parse(a)),null===a?null:(i&&(a="week"!==i||!Cs(o)&&!0!==o?n.startOf(a,i):n.startOf(a,"isoWeek",o)),+a)}function cp(t,e,n,r){const i=ap.length;for(let o=ap.indexOf(t);o<i-1;++o){const t=op[ap[o]],i=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(i*t.size))<=r)return ap[o]}return ap[i-1]}function hp(t,e,n){if(n){if(n.length){const{lo:r,hi:i}=Ds(n,e);t[n[r]>=e?n[r]:n[i]]=!0}}else t[e]=!0}function up(t,e,n){const r=[],i={},o=e.length;let a,s;for(a=0;a<o;++a)s=e[a],i[s]=a,r.push({value:s,major:!1});return 0!==o&&n?function(t,e,n,r){const i=t._adapter,o=+i.startOf(e[0].value,r),a=e[e.length-1].value;let s,l;for(s=o;s<=a;s=+i.add(s,1,r))l=n[s],l>=0&&(e[l].major=!0);return e}(t,r,i,n):r}class dp extends Qh{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),r=this._adapter=new oh(t.adapters.date);r.init(e),ns(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:lp(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:a}=this.getUserBounds();function s(t){o||isNaN(t.min)||(r=Math.min(r,t.min)),a||isNaN(t.max)||(i=Math.max(i,t.max))}o&&a||(s(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||s(this.getMinMax(!1))),r=Ua(r)&&!isNaN(r)?r:+e.startOf(Date.now(),n),i=Ua(i)&&!isNaN(i)?i:+e.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=function(t,e,n){let r=0,i=t.length;for(;r<i&&t[r]<e;)r++;for(;i>r&&t[i-1]>n;)i--;return r>0||i<t.length?t.slice(r,i):t}(r,i,this.max);return this._unit=e.unit||(n.autoSkip?cp(e.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(t,e,n,r,i){for(let o=ap.length-1;o>=ap.indexOf(n);o--){const n=ap[o];if(op[n].common&&t._adapter.diff(i,r,n)>=e-1)return n}return ap[n?ap.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=ap.indexOf(t)+1,n=ap.length;e<n;++e)if(op[ap[e]].common)return ap[e]}(this._unit):void 0,this.initOffsets(r),t.reverse&&o.reverse(),up(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e,n,r=0,i=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),r=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),i=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;r=Ls(r,0,o),i=Ls(i,0,o),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const t=this._adapter,e=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||cp(i.minUnit,e,n,this._getLabelCapacity(e)),a=Ga(r.ticks.stepSize,1),s="week"===o&&i.isoWeekday,l=Cs(s)||!0===s,c={};let h,u,d=e;if(l&&(d=+t.startOf(d,"isoWeek",s)),d=+t.startOf(d,l?"day":o),t.diff(n,e,o)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+o);const p="data"===r.ticks.source&&this.getDataTimestamps();for(h=d,u=0;h<n;h=+t.add(h,a,o),u++)hp(c,h,p);return h!==n&&"ticks"!==r.bounds&&1!==u||hp(c,h,p),Object.keys(c).sort(sp).map(t=>+t)}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,r=this._unit,i=e||n[r];return this._adapter.format(t,i)}_tickFormatFunction(t,e,n,r){const i=this.options,o=i.ticks.callback;if(o)return Va(o,[t,e,n],this);const a=i.time.displayFormats,s=this._unit,l=this._majorUnit,c=s&&a[s],h=l&&a[l],u=n[e],d=l&&h&&u&&u.major;return this._adapter.format(t,r||(d?h:c))}generateTickLabels(t){let e,n,r;for(e=0,n=t.length;e<n;++e)r=t[e],r.label=this._tickFormatFunction(r.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,r=ws(this.isHorizontal()?e.maxRotation:e.minRotation),i=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*o,h:n*o+a*i}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,r=n[e.unit]||n.millisecond,i=this._tickFormatFunction(t,0,up(this,[t],this._majorUnit),r),o=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,e=r.length;t<e;++t)n=n.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const r=this.getLabels();for(e=0,n=r.length;e<n;++e)t.push(lp(this,r[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return $s(t.sort(sp))}}function pp(t,e,n){let r,i,o,a,s=0,l=t.length-1;n?(e>=t[s].pos&&e<=t[l].pos&&({lo:s,hi:l}=Ps(t,"pos",e)),({pos:r,time:o}=t[s]),({pos:i,time:a}=t[l])):(e>=t[s].time&&e<=t[l].time&&({lo:s,hi:l}=Ps(t,"time",e)),({time:r,pos:o}=t[s]),({time:i,pos:a}=t[l]));const c=i-r;return c?o+(a-o)*(e-r)/c:o}var fp=Object.freeze({__proto__:null,CategoryScale:class extends Qh{static id="category";static defaults={ticks:{callback:Nd}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:r}of e)t[n]===r&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(qa(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Ls(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:function(t,e,n,r){const i=t.indexOf(e);return-1===i?((t,e,n,r)=>("string"==typeof e?(n=t.push(e)-1,r.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,r):i!==t.lastIndexOf(e)?n:i}(n,t,Ga(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===t&&e===i.length-1?i:i.slice(t,e+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)r.push({value:n});return r}getLabelForValue(t){return Nd.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:Kd,LogarithmicScale:Vd,RadialLinearScale:ip,TimeScale:dp,TimeSeriesScale:class extends dp{static id="timeseries";static defaults=dp.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=pp(e,this.min),this._tableRange=pp(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,r=[],i=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=n&&r.push(l);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=r.length;o<a;++o)c=r[o+1],s=r[o-1],l=r[o],Math.round((c+s)/2)!==l&&i.push({time:l,pos:o/(a-1)});return i}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort((t,e)=>t-e)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(pp(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return pp(this._table,n*this._tableRange+this._minPos,!0)}}});const gp=[nh,Ku,Rd,fp];var mp,Ap=a(40671);function yp(t){return yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yp(t)}function bp(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return xp(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(xp(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,xp(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,xp(u,"constructor",c),xp(c,"constructor",l),l.displayName="GeneratorFunction",xp(c,i,"GeneratorFunction"),xp(u),xp(u,i,"Generator"),xp(u,r,function(){return this}),xp(u,"toString",function(){return"[object Generator]"}),(bp=function(){return{w:o,m:d}})()}function xp(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}xp=function(t,e,n,r){function o(e,n){xp(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},xp(t,e,n,r)}function vp(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Cp(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){vp(o,r,i,a,s,"next",t)}function s(t){vp(o,r,i,a,s,"throw",t)}a(void 0)})}}function kp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wp(r.key),r)}}function wp(t){var e=function(t){if("object"!=yp(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=yp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==yp(e)?e:e+""}function Bp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}Iu.register.apply(Iu,function(t){if(Array.isArray(t))return Bp(t)}(mp=gp)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(mp)||function(t,e){if(t){if("string"==typeof t)return Bp(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bp(t,e):void 0}}(mp)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var Ip=function(){return function(t,e){return e&&kp(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.modal=null,this.currentTab="mermaid",this.currentSVG=null,this.onInsertCallback=null,this.aiManager=new Ap._,ca.initialize({startOnLoad:!1,theme:"default",securityLevel:"loose"}),this.init()},[{key:"init",value:(c=Cp(bp().m(function t(){return bp().w(function(t){for(;;)switch(t.n){case 0:return t.n=1,this.aiManager.loadSettings();case 1:if(this.modal=document.getElementById("diagram-modal"),this.modal){t.n=2;break}return console.error("[DiagramGenerator] Modal element not found"),t.a(2);case 2:this.setupEventListeners();case 3:return t.a(2)}},t,this)})),function(){return c.apply(this,arguments)})},{key:"setupEventListeners",value:function(){var t=this,e=document.getElementById("diagram-modal-close");null==e||e.addEventListener("click",function(){return t.close()});var n=document.getElementById("diagram-cancel-btn");null==n||n.addEventListener("click",function(){return t.close()}),document.querySelectorAll(".diagram-tab").forEach(function(e){e.addEventListener("click",function(e){var n=e.target.dataset.tab;t.switchTab(n)})});var r=document.getElementById("mermaid-ai-generate-btn");null==r||r.addEventListener("click",function(){return t.generateMermaidWithAI()});var i=document.getElementById("mermaid-preview-btn");null==i||i.addEventListener("click",function(){return t.generateMermaidPreview()});var o=document.getElementById("mermaid-code");null==o||o.addEventListener("input",function(){t.disableInsertButton()});var a=document.getElementById("chart-ai-generate-btn");null==a||a.addEventListener("click",function(){return t.generateChartWithAI()});var s=document.getElementById("chart-preview-btn");null==s||s.addEventListener("click",function(){return t.generateChartPreview()});var l=document.getElementById("chart-config");null==l||l.addEventListener("input",function(){t.disableInsertButton()});var c=document.getElementById("svg-ai-generate-btn");null==c||c.addEventListener("click",function(){return t.generateSVGWithAI()});var h=document.getElementById("svg-preview-btn");null==h||h.addEventListener("click",function(){return t.generateSVGPreview()});var u=document.getElementById("svg-code");null==u||u.addEventListener("input",function(){t.disableInsertButton()});var d=document.getElementById("diagram-insert-btn");null==d||d.addEventListener("click",function(){return t.insertDiagram()}),this.modal.addEventListener("click",function(e){e.target===t.modal&&t.close()})}},{key:"switchTab",value:function(t){document.querySelectorAll(".diagram-tab").forEach(function(e){e.dataset.tab===t?e.classList.add("active"):e.classList.remove("active")}),document.querySelectorAll(".diagram-tab-content").forEach(function(e){e.id==="".concat(t,"-tab")?e.classList.add("active"):e.classList.remove("active")}),this.currentTab=t,this.disableInsertButton()}},{key:"generateMermaidWithAI",value:(l=Cp(bp().m(function t(){var e,n,r,i,o,a,s;return bp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=document.getElementById("mermaid-description"),n=document.getElementById("mermaid-code"),e&&n){t.n=1;break}return console.error("[DiagramGenerator] Mermaid input elements not found"),t.a(2);case 1:if(r=e.value.trim()){t.n=2;break}return alert(""),t.a(2);case 2:return i=this.buildMermaidPrompt(r),t.p=3,n.value="// AI...",n.disabled=!0,console.log("[DiagramGenerator] Generating Mermaid code with AI..."),t.n=4,this.callAIForDiagram(i);case 4:return o=t.v,a=this.extractMermaidCode(o),n.value=a,n.disabled=!1,console.log("[DiagramGenerator] Mermaid code generated successfully"),t.n=5,this.generateMermaidPreview();case 5:t.n=7;break;case 6:t.p=6,s=t.v,console.error("[DiagramGenerator] Failed to generate Mermaid code:",s),alert("AI: ".concat(s.message)),n.value="",n.disabled=!1;case 7:return t.a(2)}},t,this,[[3,6]])})),function(){return l.apply(this,arguments)})},{key:"buildMermaidPrompt",value:function(t){return"Mermaid\n\n\n1. Mermaid.js v10 \n2. \n3. \n4. ```mermaid\n5. Mermaid\n\n\n".concat(t,"\n\n\n```mermaid\ngraph TD\n    A[] --\x3e B[]\n    B --\x3e C[]\n```\n\nMermaid")}},{key:"extractMermaidCode",value:function(t){var e=t.match(/```mermaid\s*\n([\s\S]*?)\n```/);if(e)return e[1].trim();var n=t.match(/```\s*\n([\s\S]*?)\n```/);return n?n[1].trim():t.trim()}},{key:"callAIForDiagram",value:(s=Cp(bp().m(function t(e){var n;return bp().w(function(t){for(;;)switch(t.n){case 0:if("gemini"!==(n=this.aiManager.settings.aiProvider)){t.n=2;break}return t.n=1,this.callGeminiForDiagram(e);case 1:case 3:return t.a(2,t.v);case 2:if("claude"!==n){t.n=4;break}return t.n=3,this.callClaudeForDiagram(e);case 4:throw new Error("AI");case 5:return t.a(2)}},t,this)})),function(t){return s.apply(this,arguments)})},{key:"callGeminiForDiagram",value:(a=Cp(bp().m(function t(e){var n,r,i,o,a,s,l,c;return bp().w(function(t){for(;;)switch(t.n){case 0:if(n=this.aiManager.settings.geminiApiKey){t.n=1;break}throw new Error("Gemini API API");case 1:return r=this.aiManager.getCurrentModel(),i={contents:[{parts:[{text:e}]}]},o="".concat(r.endpoint,"?key=").concat(n),t.n=2,fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});case 2:if((a=t.v).ok){t.n=4;break}return t.n=3,a.text();case 3:throw s=t.v,new Error("Gemini API Error: ".concat(a.status," - ").concat(s));case 4:return t.n=5,a.json();case 5:if(!(l=t.v).candidates||!l.candidates[0]){t.n=6;break}if(!(c=l.candidates[0]).content||!c.content.parts){t.n=6;break}return t.a(2,c.content.parts.map(function(t){return t.text}).join(""));case 6:throw new Error("Gemini API");case 7:return t.a(2)}},t,this)})),function(t){return a.apply(this,arguments)})},{key:"callClaudeForDiagram",value:(o=Cp(bp().m(function t(e){var n,r,i,o,a;return bp().w(function(t){for(;;)switch(t.n){case 0:return n=this.aiManager.getCurrentModel(),r={model:"claude-sonnet-4-20250514",messages:[{role:"user",content:e}],max_tokens:2048},t.n=1,fetch(n.endpoint,{method:"POST",headers:{"Content-Type":"application/json","anthropic-version":"2023-06-01"},body:JSON.stringify(r)});case 1:if((i=t.v).ok){t.n=3;break}return t.n=2,i.text();case 2:throw o=t.v,new Error("Claude API Error: ".concat(i.status," - ").concat(o));case 3:return t.n=4,i.json();case 4:if(!(a=t.v).content||!a.content[0]){t.n=5;break}return t.a(2,a.content[0].text);case 5:throw new Error("Claude API");case 6:return t.a(2)}},t,this)})),function(t){return o.apply(this,arguments)})},{key:"generateMermaidPreview",value:(i=Cp(bp().m(function t(){var e,n,r,i,o,a;return bp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=document.getElementById("mermaid-code"),n=document.getElementById("mermaid-preview"),e&&n){t.n=1;break}return console.error("[DiagramGenerator] Mermaid elements not found"),t.a(2);case 1:if(r=e.value.trim()){t.n=2;break}return n.innerHTML='<p style="color: #6c757d;"></p>',this.disableInsertButton(),t.a(2);case 2:return t.p=2,n.innerHTML='<p style="color: #6c757d;">...</p>',t.n=3,ca.render("mermaid-preview-svg",r);case 3:i=t.v,o=i.svg,n.innerHTML=o,this.currentSVG=o,this.enableInsertButton(),console.log("[DiagramGenerator] Mermaid diagram generated successfully"),t.n=5;break;case 4:t.p=4,a=t.v,console.error("[DiagramGenerator] Failed to generate Mermaid diagram:",a),n.innerHTML='<p style="color: #dc3545;">: '.concat(a.message,"</p>"),this.disableInsertButton();case 5:return t.a(2)}},t,this,[[2,4]])})),function(){return i.apply(this,arguments)})},{key:"enableInsertButton",value:function(){var t=document.getElementById("diagram-insert-btn");t&&(t.disabled=!1)}},{key:"disableInsertButton",value:function(){var t=document.getElementById("diagram-insert-btn");t&&(t.disabled=!0),this.currentSVG=null}},{key:"insertDiagram",value:function(){this.currentSVG?(this.onInsertCallback&&this.onInsertCallback(this.currentSVG),this.close()):console.error("[DiagramGenerator] No SVG to insert")}},{key:"generateChartWithAI",value:(r=Cp(bp().m(function t(){var e,n,r,i,o,a,s,l,c;return bp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=document.getElementById("chart-description"),n=document.getElementById("chart-config"),r=document.getElementById("chart-template"),e&&n){t.n=1;break}return console.error("[DiagramGenerator] Chart input elements not found"),t.a(2);case 1:if(i=e.value.trim()){t.n=2;break}return alert(""),t.a(2);case 2:return o=(null==r?void 0:r.value)||"",a=this.buildChartPrompt(i,o),t.p=3,n.value="// AI...",n.disabled=!0,console.log("[DiagramGenerator] Generating Chart.js config with AI..."),t.n=4,this.callAIForDiagram(a);case 4:return s=t.v,l=this.extractJSONCode(s),n.value=l,n.disabled=!1,console.log("[DiagramGenerator] Chart.js config generated successfully"),t.n=5,this.generateChartPreview();case 5:t.n=7;break;case 6:t.p=6,c=t.v,console.error("[DiagramGenerator] Failed to generate Chart.js config:",c),alert("AI: ".concat(c.message)),n.value="",n.disabled=!1;case 7:return t.a(2)}},t,this,[[3,6]])})),function(){return r.apply(this,arguments)})},{key:"buildChartPrompt",value:function(t,e){var n=e?"\n: ".concat(e):"";return"Chart.jsJSON\n\n\n1. Chart.js v4 \n2. \n3. \n4. \n5. ```json\n6. JSON".concat(n,"\n\n\n").concat(t,'\n\n\n```json\n{\n  "type": "bar",\n  "data": {\n    "labels": ["2020", "2021", "2022"],\n    "datasets": [{\n      "label": "",\n      "data": [100, 150, 200],\n      "backgroundColor": "rgba(54, 162, 235, 0.5)"\n    }]\n  },\n  "options": {\n    "responsive": true,\n    "maintainAspectRatio": false\n  }\n}\n```\n\nChart.js')}},{key:"generateChartPreview",value:(n=Cp(bp().m(function t(){var e,n,r,i,o,a,s,l,c;return bp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=document.getElementById("chart-config"),n=document.getElementById("chart-preview"),e&&n){t.n=1;break}return console.error("[DiagramGenerator] Chart elements not found"),t.a(2);case 1:if(r=e.value.trim()){t.n=2;break}return n.innerHTML='<p style="color: #6c757d;"></p>',this.disableInsertButton(),t.a(2);case 2:if(t.p=2,n.innerHTML='<p style="color: #6c757d;">...</p>',i=JSON.parse(r),n.innerHTML='<canvas id="chart-canvas"></canvas>',o=document.getElementById("chart-canvas")){t.n=3;break}throw new Error("Canvas");case 3:a=new Iu(o,i),s=a.canvas,l=this.canvasToSVG(s),this.currentSVG=l,this.enableInsertButton(),console.log("[DiagramGenerator] Chart generated successfully"),t.n=5;break;case 4:t.p=4,c=t.v,console.error("[DiagramGenerator] Failed to generate Chart:",c),n.innerHTML='<p style="color: #dc3545;">: '.concat(c.message,"</p>"),this.disableInsertButton();case 5:return t.a(2)}},t,this,[[2,4]])})),function(){return n.apply(this,arguments)})},{key:"canvasToSVG",value:function(t){var e=t.toDataURL("image/png"),n=t.width,r=t.height;return'<svg xmlns="http://www.w3.org/2000/svg" width="'.concat(n,'" height="').concat(r,'">\n  <image href="').concat(e,'" width="').concat(n,'" height="').concat(r,'"/>\n</svg>')}},{key:"generateSVGWithAI",value:(e=Cp(bp().m(function t(){var e,n,r,i,o,a,s,l,c;return bp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=document.getElementById("svg-description"),n=document.getElementById("svg-code"),r=document.getElementById("svg-template"),e&&n){t.n=1;break}return console.error("[DiagramGenerator] SVG input elements not found"),t.a(2);case 1:if(i=e.value.trim()){t.n=2;break}return alert("SVG"),t.a(2);case 2:return o=(null==r?void 0:r.value)||"",a=this.buildSVGPrompt(i,o),t.p=3,n.value="\x3c!-- AI... --\x3e",n.disabled=!0,console.log("[DiagramGenerator] Generating SVG with AI..."),t.n=4,this.callAIForDiagram(a);case 4:return s=t.v,l=this.extractSVGCode(s),n.value=l,n.disabled=!1,console.log("[DiagramGenerator] SVG generated successfully"),t.n=5,this.generateSVGPreview();case 5:t.n=7;break;case 6:t.p=6,c=t.v,console.error("[DiagramGenerator] Failed to generate SVG:",c),alert("AI: ".concat(c.message)),n.value="",n.disabled=!1;case 7:return t.a(2)}},t,this,[[3,6]])})),function(){return e.apply(this,arguments)})},{key:"buildSVGPrompt",value:function(t,e){var n=e?"\n: ".concat(e):"";return"SVG\n\n\n1. SVG 1.1\n2. widthheight: 400x300\n3. viewBox\n4. \n5. ```svg\n6. SVG".concat(n,"\n\n\n").concat(t,'\n\n\n```svg\n<svg xmlns="http://www.w3.org/2000/svg" width="400" height="300" viewBox="0 0 400 300">\n  <circle cx="100" cy="100" r="50" fill="#3498db"/>\n  <rect x="200" y="50" width="100" height="100" fill="#e74c3c"/>\n</svg>\n```\n\nSVG')}},{key:"generateSVGPreview",value:(t=Cp(bp().m(function t(){var e,n,r;return bp().w(function(t){for(;;)switch(t.n){case 0:if(e=document.getElementById("svg-code"),n=document.getElementById("svg-preview"),e&&n){t.n=1;break}return console.error("[DiagramGenerator] SVG elements not found"),t.a(2);case 1:if(r=e.value.trim()){t.n=2;break}return n.innerHTML='<p style="color: #6c757d;"></p>',this.disableInsertButton(),t.a(2);case 2:try{n.innerHTML='<p style="color: #6c757d;">...</p>',n.innerHTML=r,this.currentSVG=r,this.enableInsertButton(),console.log("[DiagramGenerator] SVG preview generated successfully")}catch(t){console.error("[DiagramGenerator] Failed to generate SVG preview:",t),n.innerHTML='<p style="color: #dc3545;">: '.concat(t.message,"</p>"),this.disableInsertButton()}case 3:return t.a(2)}},t,this)})),function(){return t.apply(this,arguments)})},{key:"extractJSONCode",value:function(t){var e=t.match(/```json\s*\n([\s\S]*?)\n```/);if(e)return e[1].trim();var n=t.match(/```\s*\n([\s\S]*?)\n```/);return n?n[1].trim():(t.trim().startsWith("{"),t.trim())}},{key:"extractSVGCode",value:function(t){var e=t.match(/```svg\s*\n([\s\S]*?)\n```/);if(e)return e[1].trim();var n=t.match(/```xml\s*\n([\s\S]*?)\n```/);if(n)return n[1].trim();var r=t.match(/```\s*\n([\s\S]*?)\n```/);return r?r[1].trim():(t.trim().startsWith("<svg"),t.trim())}},{key:"open",value:function(t){this.onInsertCallback=t,this.modal.style.display="flex",this.currentSVG=null,this.disableInsertButton(),this.switchTab("mermaid");var e=document.getElementById("mermaid-code");e&&!e.value.trim()&&(e.value="graph TD\n    A[] --\x3e B[]\n    B --\x3e C{}\n    C --\x3e|Yes| D[]\n    C --\x3e|No| E[]\n    D --\x3e F[]\n    E --\x3e F")}},{key:"close",value:function(){this.modal.style.display="none",this.currentSVG=null,this.onInsertCallback=null;var t=document.getElementById("mermaid-preview");t&&(t.innerHTML="",t.classList.add("empty"))}}]);var t,e,n,r,i,o,a,s,l,c}(),Sp=null;function _p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)}return n}function Ep(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_p(Object(n),!0).forEach(function(e){Tp(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_p(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function Tp(t,e,n){return(e=qp(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mp(t){return Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mp(t)}function Lp(){var t,e,n="function"==typeof Symbol?Symbol:{},r=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function o(n,r,i,o){var l=r&&r.prototype instanceof s?r:s,c=Object.create(l.prototype);return Op(c,"_invoke",function(n,r,i){var o,s,l,c=0,h=i||[],u=!1,d={p:0,n:0,v:t,a:p,f:p.bind(t,4),d:function(e,n){return o=e,s=0,l=t,d.n=n,a}};function p(n,r){for(s=n,l=r,e=0;!u&&c&&!i&&e<h.length;e++){var i,o=h[e],p=d.p,f=o[2];n>3?(i=f===r)&&(l=o[(s=o[4])?5:(s=3,3)],o[4]=o[5]=t):o[0]<=p&&((i=n<2&&p<o[1])?(s=0,d.v=r,d.n=o[1]):p<f&&(i=n<3||o[0]>r||r>f)&&(o[4]=n,o[5]=r,d.n=f,s=0))}if(i||n>1)return a;throw u=!0,r}return function(i,h,f){if(c>1)throw TypeError("Generator is already running");for(u&&1===h&&p(h,f),s=h,l=f;(e=s<2?t:l)||!u;){o||(s?s<3?(s>1&&(d.n=-1),p(s,l)):d.n=l:d.v=l);try{if(c=2,o){if(s||(i="next"),e=o[i]){if(!(e=e.call(o,l)))throw TypeError("iterator result is not an object");if(!e.done)return e;l=e.value,s<2&&(s=0)}else 1===s&&(e=o.return)&&e.call(o),s<2&&(l=TypeError("The iterator does not provide a '"+i+"' method"),s=1);o=t}else if((e=(u=d.n<0)?l:n.call(r,d))!==a)break}catch(e){o=t,s=1,l=e}finally{c=1}}return{value:e,done:u}}}(n,i,o),!0),c}var a={};function s(){}function l(){}function c(){}e=Object.getPrototypeOf;var h=[][r]?e(e([][r]())):(Op(e={},r,function(){return this}),e),u=c.prototype=s.prototype=Object.create(h);function d(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,c):(t.__proto__=c,Op(t,i,"GeneratorFunction")),t.prototype=Object.create(u),t}return l.prototype=c,Op(u,"constructor",c),Op(c,"constructor",l),l.displayName="GeneratorFunction",Op(c,i,"GeneratorFunction"),Op(u),Op(u,i,"Generator"),Op(u,r,function(){return this}),Op(u,"toString",function(){return"[object Generator]"}),(Lp=function(){return{w:o,m:d}})()}function Op(t,e,n,r){var i=Object.defineProperty;try{i({},"",{})}catch(t){i=0}Op=function(t,e,n,r){function o(e,n){Op(t,e,function(t){return this._invoke(e,n,t)})}e?i?i(t,e,{value:n,enumerable:!r,configurable:!r,writable:!r}):t[e]=n:(o("next",0),o("throw",1),o("return",2))},Op(t,e,n,r)}function Dp(t,e,n,r,i,o,a){try{var s=t[o](a),l=s.value}catch(t){return void n(t)}s.done?e(l):Promise.resolve(l).then(r,i)}function Pp(t){return function(){var e=this,n=arguments;return new Promise(function(r,i){var o=t.apply(e,n);function a(t){Dp(o,r,i,a,s,"next",t)}function s(t){Dp(o,r,i,a,s,"throw",t)}a(void 0)})}}function Fp(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);l=!0);}catch(t){c=!0,i=t}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(t,e)||jp(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jp(t,e){if(t){if("string"==typeof t)return zp(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zp(t,e):void 0}}function zp(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function $p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Rp(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qp(r.key),r)}}function Np(t,e,n){return e&&Rp(t.prototype,e),n&&Rp(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function qp(t){var e=function(t){if("object"!=Mp(t)||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=Mp(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==Mp(e)?e:e+""}var Wp=function(){return Np(function t(){$p(this,t),this.currentFileName=null,this.isSourceMode=!1,this.versionIntegration=null,this.localHistoryIntegration=null,this.undoStack=[],this.redoStack=[],this.maxHistorySize=100,Bt.xI.setOptions({gfm:!0,breaks:!1,pedantic:!1,smartLists:!0,smartypants:!1}),this.turndownService=new It.A({headingStyle:"atx",hr:"---",bulletListMarker:"-",codeBlockStyle:"fenced",fence:"```",emDelimiter:"*",strongDelimiter:"**",linkStyle:"inlined"}),this.init()},[{key:"markdownToHtml",value:function(t){if(!t)return"";try{var e=Bt.xI.parse(t);return e=(e=e.replace(/<img\s+([^>]*?)>/g,function(t,e){return e.includes("class=")?t:"<img ".concat(e,' class="editable-image" style="max-width: 100%; height: auto; cursor: pointer; display: inline-block; border-radius: 4px;">')})).replace(/<a\s+([^>]*?)>([^<]*)<\/a>/g,function(t,e,n){return e.includes("class=")?t:"<a ".concat(e,' class="editable-link">').concat(n,"</a>")})}catch(e){return console.error("Markdown parsing error:",e),"<pre>".concat(t,"</pre>")}}},{key:"markdownToHtmlLegacy",value:function(t){var e=this;if(!t)return"";var n=t,r={},i=0;n=n.replace(/<[^>]+>/g,function(t){var e="__HTML_".concat(i++,"__");return r[e]=t,e});var o={},a=0;n=n.replace(/\\(.)/g,function(t,e){var n="__ESCAPE_".concat(a++,"__");return o[n]=e,n}),n=(n=(n=(n=n.replace(/```([a-zA-Z0-9]*)\n?([\s\S]*?)```/g,function(t,n,r){var i=r.trim().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");"javascript"!==n&&"js"!==n&&"typescript"!==n&&"ts"!==n||(i=e.addBasicSyntaxHighlight(i));var o=n?' class="language-'.concat(n,'" data-lang="').concat(n,'"'):"";return"<pre><code".concat(o,">").concat(i,"</code></pre>")})).replace(/`([^`]+)`/g,"<code>$1</code>")).replace(/^\s*-\s+\[x\]\s+(.+)$/gm,'<div class="task-item"><input type="checkbox" checked class="task-checkbox"> <span class="task-text" style="text-decoration: line-through">$1</span></div>')).replace(/^\s*-\s+\[\s\]\s+(.+)$/gm,'<div class="task-item"><input type="checkbox" class="task-checkbox"> <span class="task-text">$1</span></div>');var s,l=[],c=[],h=function(t){var e="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!e){if(Array.isArray(t)||(e=jp(t))){e&&(t=e);var n=0,r=function(){};return{s:r,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,a=!1;return{s:function(){e=e.call(t)},n:function(){var t=e.next();return o=t.done,t},e:function(t){a=!0,i=t},f:function(){try{o||null==e.return||e.return()}finally{if(a)throw i}}}}((n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=(n=this.processTable(n)).replace(/^######\s+(.+)$/gm,"<h6>$1</h6>")).replace(/^#####\s+(.+)$/gm,"<h5>$1</h5>")).replace(/^####\s+(.+)$/gm,"<h4>$1</h4>")).replace(/^###\s+(.+)$/gm,"<h3>$1</h3>")).replace(/^##\s+(.+)$/gm,"<h2>$1</h2>")).replace(/^#\s+(.+)$/gm,"<h1>$1</h1>")).replace(/^---+$/gm,"<hr>")).replace(/^>\s*(.+)$/gm,"<blockquote>$1</blockquote>")).replace(/^[\*\-\+]\s+(.+)$/gm,"<li>$1</li>")).replace(/(<li>.*?<\/li>(\s*<li>.*?<\/li>)*)/gm,"<ul>$1</ul>")).replace(/^\d+\.\s+(.+)$/gm,'<li class="ordered">$1</li>')).replace(/(<li class="ordered">.*?<\/li>(\s*<li class="ordered">.*?<\/li>)*)/gm,"<ol>$1</ol>")).replace(/class="ordered"/g,"")).replace(/(?<!\\)\*\*\*([^*]+)\*\*\*/g,"<strong><em>$1</em></strong>")).replace(/(?<!\\)\*\*([^*]+)\*\*/g,"<strong>$1</strong>")).replace(/(?<!\\)\*([^*\s][^*]*[^*\s]|\w)\*/g,"<em>$1</em>")).replace(/~~([^~]+)~~/g,"<del>$1</del>")).replace(/!\[([^\]]*)\]\(([^)]+)\)/g,'<img src="$2" alt="$1" class="editable-image" data-alt="$1" data-src="$2" style="max-width: 100%; height: auto; cursor: pointer; display: inline-block; border-radius: 4px;">')).replace(/\[([^\]]+)\]\(([^)]+)\)/g,'<a href="$2" class="editable-link" data-text="$1" data-url="$2">$1</a>')).split("\n"));try{for(h.s();!(s=h.n()).done;){var u=s.value;if(""===u.trim()){if(c.length>0){var d=c.join("\n").trim();d&&!this.isBlockElement(d)?l.push("<p>".concat(d,"</p>")):l.push(d),c=[]}}else if(this.isBlockElement(u)){if(c.length>0){var p=c.join("\n").trim();p&&l.push("<p>".concat(p,"</p>")),c=[]}l.push(u)}else c.push(u)}}catch(t){h.e(t)}finally{h.f()}if(c.length>0){var f=c.join("\n").trim();f&&!this.isBlockElement(f)?l.push("<p>".concat(f,"</p>")):f&&l.push(f)}n=(n=l.join("\n")).replace(/  \n/g,"<br>\n");for(var g=0,m=Object.entries(r);g<m.length;g++){var A=Fp(m[g],2),y=A[0],b=A[1];n=n.replace(new RegExp(y,"g"),b)}for(var x=0,v=Object.entries(o);x<v.length;x++){var C=Fp(v[x],2),k=C[0],w=C[1];n=n.replace(new RegExp(k,"g"),w)}return n.replace(/&lt;br&gt;/gi,"<br>")}},{key:"processTable",value:function(t){for(var e=t.split("\n"),n=[],r=!1,i=[],o=0;o<e.length;o++){var a=e[o].trim();if(a.includes("|")&&a.length>2){if(!r){var s=e[o+1];s&&s.includes("|")&&(s.includes("-")||s.includes(":"))&&(r=!0,i=[])}if(r){i.push(a);var l=e[o+1];(!l||!l.trim().includes("|")&&l.trim().length>0)&&(n.push(this.convertToTable(i)),r=!1,i=[])}else n.push(a)}else r&&(n.push(this.convertToTable(i)),r=!1,i=[]),n.push(a)}return r&&i.length>0&&n.push(this.convertToTable(i)),n.join("\n")}},{key:"convertToTable",value:function(t){if(t.length<2)return t.join("\n");var e=t[0],n=t[1],r=t.slice(2),i=n.split("|").map(function(t){var e=t.trim();return e.startsWith(":")&&e.endsWith(":")?"center":e.endsWith(":")?"right":"left"}).filter(function(t){return t}),o=e.split("|").map(function(t){return t.trim()}).filter(function(t){return t}).map(function(t,e){var n=i[e]||"left";return'<th style="text-align: '.concat(n,'">').concat(t,"</th>")}).join(""),a=r.map(function(t){var e=t.split("|").map(function(t){return t.trim()}).filter(function(t){return t});return"<tr>".concat(e.map(function(t,e){var n=i[e]||"left";return'<td style="text-align: '.concat(n,'">').concat(t,"</td>")}).join(""),"</tr>")}).join("");return'<table class="markdown-table"><thead><tr>'.concat(o,"</tr></thead><tbody>").concat(a,"</tbody></table>")}},{key:"isBlockElement",value:function(t){return/^<(h[1-6]|pre|code|blockquote|ul|ol|li|hr|div|table|thead|tbody|tr|th|td|img)/.test(t.trim())||/^<\/(h[1-6]|pre|code|blockquote|ul|ol|li|hr|div|table|thead|tbody|tr|th|td)>/.test(t.trim())||/<table|<\/table>|<thead|<\/thead>|<tbody|<\/tbody>|class="task-item"|class="editable-/.test(t)}},{key:"addBasicSyntaxHighlight",value:function(t){return t.replace(/\b(function|const|let|var|if|else|for|while|return|class|import|export|from|default|async|await|try|catch|finally|throw|new|this|super|extends|static|public|private|protected)\b/g,'<span class="keyword">$1</span>').replace(/(["'])((?:\\.|(?!\1)[^\\])*?)\1/g,'<span class="string">$1$2$1</span>').replace(/(`)((?:\\.|[^\\`])*?)(`)/g,'<span class="string">$1$2$3</span>').replace(/\b(\d+\.?\d*)\b/g,'<span class="number">$1</span>').replace(/\b([a-zA-Z_$][a-zA-Z0-9_$]*)\s*(?=\()/g,'<span class="function">$1</span>').replace(/(\/\/.*$)/gm,'<span class="comment">$1</span>').replace(/(\/\*[\s\S]*?\*\/)/g,'<span class="comment">$1</span>')}},{key:"htmlToMarkdown",value:function(t){if(!t)return"";try{return this.turndownService.turndown(t).trim()}catch(e){return console.error("HTML to Markdown conversion error:",e),t.replace(/<[^>]*>/g,"").trim()}}},{key:"init",value:function(){var t=this;console.log("..."),"loading"===document.readyState?(console.log("DOCUMENTDOMContentLoaded..."),document.addEventListener("DOMContentLoaded",function(){console.log("DOMContentLoaded"),t.performInit()})):(console.log("DOM"),this.performInit())}},{key:"performInit",value:(l=Pp(Lp().m(function t(){var e,n,r=this;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:return console.log("..."),this.setupEditor(),this.setupToolbar(),this.setupEventListeners(),this.handleURLFileParameter(),t.p=1,this.versionIntegration=new Z(this),t.n=2,this.versionIntegration.init();case 2:console.log(""),t.n=4;break;case 3:t.p=3,e=t.v,console.error(":",e);case 4:return t.p=4,this.localHistoryIntegration=new wt(this),t.n=5,this.localHistoryIntegration.init();case 5:console.log(""),t.n=7;break;case 6:t.p=6,n=t.v,console.error(":",n);case 7:setTimeout(function(){console.log("DOM:"),console.log("- settings-btn:",!!document.getElementById("settings-btn")),console.log("- settings-overlay:",!!document.getElementById("settings-overlay")),console.log("- settings-save:",!!document.getElementById("settings-save")),console.log("- gemini-test-btn:",!!document.getElementById("gemini-test-btn")),console.log("- claude-test-btn:",!!document.getElementById("claude-test-btn")),r.setupHeaderButtons(),r.updateWordCount(),console.log("")},200);case 8:return t.a(2)}},t,this,[[4,6],[1,3]])})),function(){return l.apply(this,arguments)})},{key:"setupEditor",value:function(){var t=this,e=document.getElementById("editor");if(e){e.innerHTML='<div contenteditable="true" class="ProseMirror" id="wysiwyg-content"></div>';var n=document.getElementById("wysiwyg-content");n.addEventListener("input",function(){t.saveToHistory(),t.updateWordCount()}),n.addEventListener("paste",function(e){e.preventDefault();var n=e.clipboardData.getData("text/html");n||(n=e.clipboardData.getData("text/plain").split("\n").map(function(t){return t||"<br>"}).join(""));var r=window.getSelection();if(r.rangeCount>0){var i=r.getRangeAt(0);i.deleteContents();var o=t.sanitizeHtml(n),a=document.createElement("div");a.innerHTML=o;for(var s=document.createDocumentFragment();a.firstChild;)s.appendChild(a.firstChild);i.insertNode(s),i.collapse(!1),r.removeAllRanges(),r.addRange(i)}t.saveToHistory(),t.updateWordCount()}),n.addEventListener("keydown",function(e){e.ctrlKey&&!e.shiftKey&&"z"===e.key?(e.preventDefault(),t.undo()):e.ctrlKey&&e.shiftKey&&"z"===e.key&&(e.preventDefault(),t.redo())}),n.addEventListener("click",function(e){e.target.classList.contains("editable-link")?(e.preventDefault(),t.editLink(e.target)):e.target.classList.contains("editable-image")&&(e.preventDefault(),t.editImage(e.target))}),n.focus()}}},{key:"setupToolbar",value:function(){var t=this,e={bold:function(){return t.wrapText("**","**","strong")},italic:function(){return t.wrapText("*","*","em")},strike:function(){return t.wrapText("~~","~~","del")},code:function(){return t.wrapText("`","`","code")},bulletList:function(){return t.insertAtLineStart("- ")},orderedList:function(){return t.insertNumberedList()},blockquote:function(){return t.insertAtLineStart("> ")},codeBlock:function(){return t.wrapText("```\n","\n```","pre")},horizontalRule:function(){return t.insertText("\n---\n")},link:function(){return t.insertLink()},image:function(){return t.insertImage()},diagram:function(){return t.insertDiagram()},table:function(){return t.insertTable()},undo:function(){return t.undo()},redo:function(){return t.redo()}};Object.keys(e).forEach(function(t){var n=document.querySelector('[data-action="'.concat(t,'"]'));n&&n.addEventListener("click",function(n){n.preventDefault(),e[t]()})});var n=document.getElementById("heading-select");n&&n.addEventListener("change",function(e){var n=e.target.value;if("p"===n);else if(n){var r=parseInt(n);if(t.isSourceMode){var i="#".repeat(r)+" ";t.insertAtLineStart(i)}else{var o=document.getElementById("wysiwyg-content"),a=window.getSelection();if(a.rangeCount>0){var s=a.getRangeAt(0),l=s.toString()||"",c=document.createElement("h".concat(r));c.textContent=l,s.deleteContents(),s.insertNode(c),s.setStartAfter(c),s.collapse(!0),a.removeAllRanges(),a.addRange(s)}o.focus(),t.updateWordCount()}}e.target.value=""});var r=document.getElementById("toggle-mode-btn");r&&r.addEventListener("click",function(){return t.toggleEditMode()});var i=document.getElementById("toc-btn");i&&i.addEventListener("click",function(){return t.generateTOC()});var o=document.getElementById("help-btn");o&&o.addEventListener("click",function(){return t.showHelp()});var a=document.getElementById("new-file-btn");a&&a.addEventListener("click",function(){return t.newFile()});var s=document.getElementById("open-file-btn");s&&s.addEventListener("click",function(){return t.openFile()});var l=document.getElementById("save-file-btn");l&&l.addEventListener("click",function(){return t.saveFile()});var c=document.getElementById("save-as-btn");c&&c.addEventListener("click",function(){return t.saveAsFile()})}},{key:"setupHeaderButtons",value:function(){var t=this;console.log("...");var e=document.getElementById("settings-btn");e?(console.log("settings-btn"),e.addEventListener("click",function(){console.log(""),t.showSettings()}),console.log("")):console.error("settings-btn"),this.setupSettingsEventListeners()}},{key:"setupSettingsEventListeners",value:function(){var t=this;console.log("...");var e=document.getElementById("gemini-api-key"),n=document.getElementById("claude-api-key");e&&(["input","change","keyup","paste"].forEach(function(t){e.addEventListener(t,function(){console.log("Gemini API".concat(t,"...")),console.log(":",e.value),"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.sync.set({geminiApiKey:e.value},function(){console.log("Gemini APIChrome Storage")})})}),console.log("Gemini API")),n&&(["input","change","keyup","paste"].forEach(function(t){n.addEventListener(t,function(){console.log("Claude API".concat(t,"...")),console.log(":",n.value),"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.sync.set({claudeApiKey:n.value},function(){console.log("Claude APIChrome Storage")})})}),console.log("Claude API"));var r=document.getElementById("settings-close");r?(r.addEventListener("click",function(){console.log(""),t.hideSettings()}),console.log("")):console.error("settings-close");var i=document.getElementById("settings-overlay");i?(i.addEventListener("click",function(e){e.target===i&&(console.log(""),t.hideSettings())}),console.log("")):console.error("settings-overlay"),document.querySelectorAll(".settings-tab").forEach(function(e){e.addEventListener("click",function(){var n=e.dataset.tab;t.switchSettingsTab(n)})}),document.querySelectorAll(".ai-provider-tab").forEach(function(e){e.addEventListener("click",function(){var n=e.dataset.provider;t.switchAIProvider(n)})});var o=document.getElementById("gemini-password-toggle"),a=document.getElementById("claude-password-toggle");o&&o.addEventListener("click",function(){t.togglePassword("gemini-api-key","gemini-password-toggle")}),a&&a.addEventListener("click",function(){t.togglePassword("claude-api-key","claude-password-toggle")});var s=document.getElementById("settings-save");s?(s.addEventListener("click",function(){console.log(""),t.saveAllSettings()}),console.log("")):console.error("settings-save");var l=document.getElementById("gemini-test-btn"),c=document.getElementById("claude-test-btn");l?(l.addEventListener("click",function(){console.log("Gemini"),t.testConnection("gemini")}),console.log("Gemini")):console.error("gemini-test-btn"),c?(c.addEventListener("click",function(){console.log("Claude"),t.testConnection("claude")}),console.log("Claude")):console.error("claude-test-btn")}},{key:"showSettings",value:function(){console.log("...");var t=document.getElementById("settings-overlay");t?(console.log("settings-overlay"),t.style.display="flex",console.log(""),this.loadAllSettings()):console.error("settings-overlay")}},{key:"showAISettings",value:function(){this.showSettings(),this.switchSettingsTab("ai")}},{key:"loadAISettings",value:function(){"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.sync.get(["geminiApiKey","geminiModel","claudeApiKey","claudeModel"],function(t){var e=document.getElementById("gemini-api-key"),n=document.getElementById("gemini-model");e&&(e.value=t.geminiApiKey||""),n&&(n.value=t.geminiModel||"gemini-2.5-pro");var r=document.getElementById("claude-api-key"),i=document.getElementById("claude-model");r&&(r.value=t.claudeApiKey||""),i&&(i.value=t.claudeModel||"claude-3-5-sonnet-20241022")})}},{key:"saveAISettings",value:(s=Pp(Lp().m(function t(){var e,n,r,i,o,a,s,l,c=this;return Lp().w(function(t){for(;;)switch(t.n){case 0:o=(null===(e=document.getElementById("gemini-api-key"))||void 0===e?void 0:e.value)||"",a=(null===(n=document.getElementById("gemini-model"))||void 0===n?void 0:n.value)||"gemini-2.5-pro",s=(null===(r=document.getElementById("claude-api-key"))||void 0===r?void 0:r.value)||"",l=(null===(i=document.getElementById("claude-model"))||void 0===i?void 0:i.value)||"claude-3-5-sonnet-20241022","undefined"!=typeof chrome&&chrome.storage?chrome.storage.sync.set({geminiApiKey:o,geminiModel:a,claudeApiKey:s,claudeModel:l},Pp(Lp().m(function t(){return Lp().w(function(t){for(;;)switch(t.n){case 0:if(c.showAIMessage("","success"),!window.aiCommandUI||!window.aiCommandUI.commandManager){t.n=1;break}return t.n=1,window.aiCommandUI.commandManager.loadSettings();case 1:return t.a(2)}},t)}))):this.showAIMessage("Chrome","error");case 1:return t.a(2)}},t,this)})),function(){return s.apply(this,arguments)})},{key:"hideSettings",value:function(){var t=document.getElementById("settings-overlay");t&&(t.style.display="none")}},{key:"hideAISettings",value:function(){this.hideSettings()}},{key:"switchSettingsTab",value:function(t){var e=document.querySelectorAll(".settings-tab"),n=document.querySelectorAll(".settings-tab-content");e.forEach(function(t){return t.classList.remove("active")}),n.forEach(function(t){return t.classList.remove("active")});var r=document.querySelector('[data-tab="'.concat(t,'"]')),i=document.getElementById("".concat(t,"-tab"));r&&r.classList.add("active"),i&&i.classList.add("active")}},{key:"loadAllSettings",value:function(){this.loadAISettings(),this.loadEditorSettings(),this.loadExportSettings()}},{key:"loadEditorSettings",value:function(){"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.sync.get(["autoSave","wordWrap"],function(t){var e=document.getElementById("auto-save"),n=document.getElementById("word-wrap");e&&(e.checked=!1!==t.autoSave),n&&(n.checked=!1!==t.wordWrap)})}},{key:"loadExportSettings",value:function(){"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.sync.get(["defaultExportFormat"],function(t){var e=document.getElementById("default-export-format");e&&(e.value=t.defaultExportFormat||"markdown")})}},{key:"saveAllSettings",value:(a=Pp(Lp().m(function t(){var e;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:return console.log("..."),t.p=1,t.n=2,this.saveAISettings();case 2:console.log("AI"),this.saveEditorSettings(),console.log(""),this.saveExportSettings(),console.log(""),this.showSettingsMessage("","success"),console.log(""),t.n=4;break;case 3:t.p=3,e=t.v,console.error(":",e),this.showSettingsMessage(": "+e.message,"error");case 4:return t.a(2)}},t,this,[[1,3]])})),function(){return a.apply(this,arguments)})},{key:"saveEditorSettings",value:function(){var t,e,n=(null===(t=document.getElementById("auto-save"))||void 0===t?void 0:t.checked)||!1,r=(null===(e=document.getElementById("word-wrap"))||void 0===e?void 0:e.checked)||!1;"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.sync.set({autoSave:n,wordWrap:r})}},{key:"saveExportSettings",value:function(){var t,e=(null===(t=document.getElementById("default-export-format"))||void 0===t?void 0:t.value)||"markdown";"undefined"!=typeof chrome&&chrome.storage&&chrome.storage.sync.set({defaultExportFormat:e})}},{key:"showSettingsMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";console.log(': "'.concat(t,'" (').concat(e,")"));var n=document.querySelector(".settings-message");n&&(n.remove(),console.log(""));var r=document.querySelector(".settings-body");if(r){var i=document.createElement("div");i.className="settings-message ".concat(e),i.innerHTML="\n      <span>".concat(this.getMessageIcon(e),"</span>\n      <span>").concat(t,"</span>\n    "),r.insertBefore(i,r.firstChild),console.log(":",i),setTimeout(function(){i.parentNode&&(i.remove(),console.log(""))},3e3)}else console.error(".settings-body")}},{key:"switchAIProvider",value:function(t){var e=document.querySelectorAll(".ai-provider-tab"),n=document.querySelectorAll(".ai-provider-content");e.forEach(function(t){return t.classList.remove("active")}),n.forEach(function(t){return t.classList.remove("active")});var r=document.querySelector('[data-provider="'.concat(t,'"]')),i=document.getElementById("".concat(t,"-settings"));r&&r.classList.add("active"),i&&i.classList.add("active")}},{key:"togglePassword",value:function(t,e){var n=document.getElementById(t),r=document.getElementById(e);n&&r&&("password"===n.type?(n.type="text",r.textContent=""):(n.type="password",r.textContent=""))}},{key:"testConnection",value:(o=Pp(Lp().m(function t(e){var n,r,i,o,a,s,l,c,h,u,d,p,f,g,m,A,y,b;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(console.log("".concat(e,"...")),n=document.getElementById("".concat(e,"-test-btn"))){t.n=1;break}return console.error("".concat(e,"-test-btn")),t.a(2);case 1:if(console.log("..."),n.classList.add("loading"),n.disabled=!0,t.p=2,s=document.getElementById("".concat(e,"-api-key")),l=document.getElementById("".concat(e,"-model")),console.log("".concat(e,"-api-key:"),!!s),console.log("".concat(e,"-model:"),!!l),console.log(":",null==s?void 0:s.value),console.log("type:",null==s?void 0:s.type),console.log(":",null==s?void 0:s.style.display),console.log(":",null==s||null===(r=s.parentElement)||void 0===r?void 0:r.style.display),"password"===(null==s?void 0:s.type)&&(console.log("text"),c=s.type,s.type="text",h=s.value,s.type=c,console.log(":",h)),s){t.n=3;break}return console.error("".concat(e,"-api-key")),this.showSettingsMessage("","error"),t.a(2);case 3:if((u=null===(i=s.value)||void 0===i?void 0:i.trim())||"password"!==(null==s?void 0:s.type)){t.n=8;break}if(console.log("..."),u=s.getAttribute("value")||"",console.log("getAttribute():",u),u){t.n=7;break}if("undefined"==typeof chrome||!chrome.storage){t.n=7;break}return t.p=4,t.n=5,new Promise(function(t){chrome.storage.sync.get(["".concat(e,"ApiKey")],t)});case 5:d=t.v,u=d["".concat(e,"ApiKey")]||"",console.log("Chrome Storage:",u),t.n=7;break;case 6:t.p=6,A=t.v,console.error("Chrome Storage:",A);case 7:t.n=12;break;case 8:if(u||"undefined"==typeof chrome||!chrome.storage){t.n=12;break}return t.p=9,t.n=10,new Promise(function(t){chrome.storage.sync.get(["".concat(e,"ApiKey")],t)});case 10:p=t.v,(f=p["".concat(e,"ApiKey")]||"")&&(u=f,console.log("Chrome Storage:",u)),t.n=12;break;case 11:t.p=11,y=t.v,console.error("Chrome Storage:",y);case 12:if(g=(null==l?void 0:l.value)||"",console.log("API: ".concat((null===(o=u)||void 0===o?void 0:o.length)||0,", : ").concat(null===(a=u)||void 0===a?void 0:a.substring(0,10),"...")),console.log(": ".concat(g)),u&&!(u.length<10)){t.n=13;break}return console.log("API"),this.showSettingsMessage("API","error"),t.a(2);case 13:if(console.log("..."),m=!1,"gemini"!==e){t.n=15;break}return t.n=14,this.testGeminiConnection(u,g);case 14:m=t.v,t.n=17;break;case 15:if("claude"!==e){t.n=17;break}return t.n=16,this.testClaudeConnection(u,g);case 16:m=t.v;case 17:m?(this.showSettingsMessage("".concat(e.toUpperCase(),""),"success"),console.log("")):(this.showSettingsMessage("".concat(e.toUpperCase(),""),"error"),console.log("")),t.n=19;break;case 18:t.p=18,b=t.v,console.error(":",b),this.showSettingsMessage(": ".concat(b.message),"error");case 19:return t.p=19,console.log("..."),n.classList.remove("loading"),n.disabled=!1,t.f(19);case 20:return t.a(2)}},t,this,[[9,11],[4,6],[2,18,19,20]])})),function(t){return o.apply(this,arguments)})},{key:"showAIMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=document.querySelector(".ai-message");n&&n.remove();var r=document.querySelector(".ai-settings-body");if(r){var i=document.createElement("div");i.className="ai-message ".concat(e),i.innerHTML="\n      <span>".concat(this.getMessageIcon(e),"</span>\n      <span>").concat(t,"</span>\n    "),r.insertBefore(i,r.firstChild),setTimeout(function(){i.parentNode&&i.remove()},3e3)}}},{key:"getMessageIcon",value:function(t){switch(t){case"success":return"";case"error":return"";default:return""}}},{key:"wrapText",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(this.isSourceMode){var r=document.getElementById("source-editor"),i=r.selectionStart,o=r.selectionEnd,a=r.value.substring(i,o),s=t+a+e;r.value=r.value.substring(0,i)+s+r.value.substring(o);var l=i+t.length+a.length;r.selectionStart=l,r.selectionEnd=l,r.focus()}else{var c=document.getElementById("wysiwyg-content"),h=window.getSelection();if(h.rangeCount>0&&n){var u=h.getRangeAt(0),d=u.toString(),p=document.createElement(n);p.textContent=d,u.deleteContents(),u.insertNode(p),u.setStartAfter(p),u.collapse(!0),h.removeAllRanges(),h.addRange(u)}c.focus()}this.updateWordCount()}},{key:"insertAtLineStart",value:function(t){if(this.isSourceMode){var e=document.getElementById("source-editor"),n=e.selectionStart,r=e.value,i=r.lastIndexOf("\n",n-1)+1,o=r.substring(0,i),a=r.substring(i);e.value=o+t+a,e.selectionStart=i+t.length,e.selectionEnd=i+t.length,e.focus()}else{var s=document.getElementById("wysiwyg-content"),l=window.getSelection();if(l.rangeCount>0){for(var c=l.getRangeAt(0),h=c.startContainer;h&&h!==s;){if(h.previousSibling)for(h=h.previousSibling;h.lastChild;)h=h.lastChild;else h=h.parentNode;if(h&&h.nodeType===Node.TEXT_NODE&&h.textContent.includes("\n")){var u=h.textContent.lastIndexOf("\n");c.setStart(h,u+1);break}if(h===s){c.setStart(s,0);break}}var d=document.createTextNode(t);c.insertNode(d),c.setStartAfter(d),c.collapse(!0),l.removeAllRanges(),l.addRange(c)}s.focus()}this.updateWordCount()}},{key:"insertNumberedList",value:function(){if(this.isSourceMode){var t=document.getElementById("source-editor"),e=t.value,n=t.selectionStart,r=e.substring(0,n).split("\n"),i=1;if(r.length>1){var o=r[r.length-2].match(/^(\d+)\./);o&&(i=parseInt(o[1])+1)}this.insertAtLineStart("".concat(i,". "))}else{var a=document.getElementById("wysiwyg-content"),s=a.textContent,l=this.getCaretPosition(a),c=s.substring(0,l).split("\n"),h=1;if(c.length>1){var u=c[c.length-2].match(/^(\d+)\./);u&&(h=parseInt(u[1])+1)}this.insertAtLineStart("".concat(h,". "))}}},{key:"insertText",value:function(t){if(this.isSourceMode){var e=document.getElementById("source-editor"),n=e.selectionStart,r=e.selectionEnd;e.value=e.value.substring(0,n)+t+e.value.substring(r),e.selectionStart=n+t.length,e.selectionEnd=n+t.length,e.focus()}else{var i=document.getElementById("wysiwyg-content"),o=window.getSelection();if(o.rangeCount>0){var a=o.getRangeAt(0);a.deleteContents(),a.insertNode(document.createTextNode(t)),a.collapse(!1)}i.focus()}this.updateWordCount()}},{key:"insertLink",value:function(){var t=prompt("URL:"),e=prompt(":","");if(t&&e)if(this.isSourceMode)this.insertText("[".concat(e,"](").concat(t,")"));else{var n=document.getElementById("wysiwyg-content"),r=window.getSelection();if(r.rangeCount>0){var i=r.getRangeAt(0),o=document.createElement("a");o.href=t,o.textContent=e,o.className="editable-link",i.deleteContents(),i.insertNode(o),i.setStartAfter(o),i.collapse(!0),r.removeAllRanges(),r.addRange(i)}n.focus(),this.updateWordCount()}}},{key:"insertImage",value:function(){var t=this;console.log("[DEBUG] insertImage() called"),console.log("[DEBUG] Current mode - isSourceMode:",this.isSourceMode);var e=(console.log("[DEBUG] getDriveImagePicker() called"),console.log("[DEBUG] pickerInstance exists:",!!br),br||(console.log("[DEBUG] Creating new DriveImagePicker instance"),(br=new yr).initialize(),console.log("[DEBUG] DriveImagePicker initialized")),br);console.log("[DEBUG] picker instance:",e),e.onSelect(function(e){console.log("[DEBUG] Image selected:",e),console.log("[DEBUG] Mode at selection time - isSourceMode:",t.isSourceMode);var n=e.url,r=e.fileName;if(n&&r)if(t.isSourceMode)console.log("[DEBUG] Inserting in SOURCE mode"),t.insertText("![".concat(r,"](").concat(n,")"));else{console.log("[DEBUG] Inserting in WYSIWYG mode");var i=document.getElementById("wysiwyg-content");console.log("[DEBUG] wysiwyg-content element:",i);var o=window.getSelection();if(console.log("[DEBUG] Selection rangeCount:",o.rangeCount),o.rangeCount>0){console.log("[DEBUG] Using existing selection");var a=o.getRangeAt(0),s=document.createElement("img");s.src=n,s.alt=r,s.className="editable-image",s.style.maxWidth="100%",s.style.height="auto",a.deleteContents(),a.insertNode(s),a.setStartAfter(s),a.collapse(!0),o.removeAllRanges(),o.addRange(a),console.log("[DEBUG] Image inserted via selection")}else{console.log("[DEBUG] No selection range - appending to content");var l=document.createElement("img");l.src=n,l.alt=r,l.className="editable-image",l.style.maxWidth="100%",l.style.height="auto",i.appendChild(l),console.log("[DEBUG] Image appended to content")}i.focus(),t.saveToHistory(),t.updateWordCount(),console.log("[DEBUG] WYSIWYG insertion completed")}else console.error("[DEBUG] Missing url or alt:",{url:n,alt:r})}),console.log("[DEBUG] Calling picker.open()"),e.open(),console.log("[DEBUG] picker.open() completed")}},{key:"insertDiagram",value:function(){var t=this;console.log("[DiagramGenerator] insertDiagram() called"),(Sp||(Sp=new Ip),Sp).open(function(e){console.log("[DiagramGenerator] SVG content received");var n=new Blob([e],{type:"image/svg+xml"}),r=URL.createObjectURL(n);if(t.isSourceMode)t.insertText("![diagram](".concat(r,")"));else{var i=document.getElementById("wysiwyg-content"),o=window.getSelection(),a=document.createElement("img");if(a.src=r,a.alt="diagram",a.className="editable-image",a.style.maxWidth="100%",a.style.height="auto",o.rangeCount>0){var s=o.getRangeAt(0);s.deleteContents(),s.insertNode(a),s.setStartAfter(a),s.collapse(!0),o.removeAllRanges(),o.addRange(s)}else i.appendChild(a);i.focus(),t.saveToHistory(),t.updateWordCount()}console.log("[DiagramGenerator] Diagram inserted successfully")})}},{key:"insertTable",value:function(){if(this.isSourceMode)this.insertText("\n| 1 | 2 | 3 |\n|-----------|-----------|-----------|\n| 1     | 2     | 3     |\n| 4     | 5     | 6     |\n");else{var t=document.getElementById("wysiwyg-content"),e=window.getSelection();if(e.rangeCount>0){var n=e.getRangeAt(0),r=document.createElement("table");r.innerHTML="\n          <thead>\n            <tr>\n              <th>1</th>\n              <th>2</th>\n              <th>3</th>\n            </tr>\n          </thead>\n          <tbody>\n            <tr>\n              <td>1</td>\n              <td>2</td>\n              <td>3</td>\n            </tr>\n            <tr>\n              <td>4</td>\n              <td>5</td>\n              <td>6</td>\n            </tr>\n          </tbody>\n        ",n.deleteContents(),n.insertNode(r),n.setStartAfter(r),n.collapse(!0),e.removeAllRanges(),e.addRange(n)}t.focus(),this.updateWordCount()}}},{key:"toggleEditMode",value:function(){var t=document.getElementById("editor"),e=document.getElementById("source-editor"),n=document.getElementById("editor-mode");if(this.isSourceMode){var r=e.value,i=document.getElementById("wysiwyg-content");i&&(i.innerHTML=this.markdownToHtml(r),Kp()),e.style.display="none",t.style.display="block",n&&(n.textContent="WYSIWYG"),this.isSourceMode=!1,i&&i.focus()}else{var o=document.getElementById("wysiwyg-content"),a=o?this.htmlToMarkdown(o.innerHTML):"";e.value=a,t.style.display="none",e.style.display="block",n&&(n.textContent=""),this.isSourceMode=!0,e.focus()}this.updateWordCount()}},{key:"generateTOC",value:function(){var t=this.getCurrentContent().split("\n"),e=[];if(t.forEach(function(t){var n=t.match(/^(#{1,6})\s+(.+)$/);if(n){var r=n[1].length,i=n[2];e.push({level:r,text:i})}}),0!==e.length){var n="## \n\n";e.forEach(function(t){var e="  ".repeat(t.level-1),r=t.text.toLowerCase().replace(/[^\w\s-]/g,"").replace(/\s+/g,"-");n+="".concat(e,"- [").concat(t.text,"](#").concat(r,")\n")}),this.insertAtBeginning(n+"\n")}else alert("")}},{key:"insertAtBeginning",value:function(t){if(this.isSourceMode){var e=document.getElementById("source-editor");e.value=t+e.value}else{var n=document.getElementById("wysiwyg-content");if(n){var r=n.innerHTML,i=t+this.htmlToMarkdown(r);n.innerHTML=this.markdownToHtml(i),Kp()}}this.updateWordCount()}},{key:"getCurrentContent",value:function(){if(this.isSourceMode)return document.getElementById("source-editor").value;var t=document.getElementById("wysiwyg-content");return t?this.htmlToMarkdown(t.innerHTML):""}},{key:"getMarkdownContent",value:function(){return this.getCurrentContent()}},{key:"showHelp",value:function(){this.showModal("","\n      <div style=\"font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\">\n        <h2> SightEdit </h2>\n\n        <h3> </h3>\n        <ul>\n          <li><strong> </strong>: </li>\n          <li><strong> </strong>: Markdown</li>\n          <li><strong> </strong>: Markdown</li>\n          <li><strong> </strong>: WYSIWYG/</li>\n        </ul>\n\n        <h3> Markdown</h3>\n        <ul>\n          <li><strong># </strong>: 1-6</li>\n          <li><strong>****</strong>: </li>\n          <li><strong>**</strong>: </li>\n          <li><strong>~~~~</strong>: </li>\n          <li><strong>``</strong>: </li>\n          <li><strong>[Link](url)</strong>: </li>\n          <li><strong>![Alt](url)</strong>: </li>\n          <li><strong>- </strong>: </li>\n          <li><strong>1. </strong>: </li>\n          <li><strong>> </strong>: </li>\n        </ul>\n\n        <h3> </h3>\n        <ul>\n          <li><strong> </strong>: </li>\n          <li><strong> </strong>: </li>\n        </ul>\n      </div>\n    ")}},{key:"showModal",value:function(t,e){var n=document.createElement("div");n.className="modal-overlay";var r=document.createElement("div");r.className="modal-content",r.innerHTML='\n      <div class="modal-header">\n        <h2 class="modal-title">'.concat(t,'</h2>\n        <button id="modal-close" class="modal-close">&times;</button>\n      </div>\n      <div>').concat(e,"</div>\n    "),n.appendChild(r),document.body.appendChild(n),r.querySelector("#modal-close").onclick=function(){document.body.removeChild(n)},n.onclick=function(t){t.target===n&&document.body.removeChild(n)}}},{key:"newFile",value:function(){var t=this.getCurrentContent();t.trim()&&confirm("")?(this.clearContent(),this.currentFileName=null):t.trim()||(this.clearContent(),this.currentFileName=null)}},{key:"clearContent",value:function(){if(this.isSourceMode)document.getElementById("source-editor").value="";else{var t=document.getElementById("wysiwyg-content");t&&(t.innerHTML="")}this.updateWordCount()}},{key:"editLink",value:function(t){var e=t.dataset.text||t.textContent,n=t.dataset.url||t.href,r=document.createElement("div");r.className="edit-dialog-overlay",r.innerHTML='\n      <div class="edit-dialog-content">\n        <h3 class="edit-dialog-title"></h3>\n        <div class="edit-dialog-field">\n          <label class="edit-dialog-label">:</label>\n          <input type="text" id="linkText" value="'.concat(e,'" class="edit-dialog-input">\n        </div>\n        <div class="edit-dialog-field">\n          <label class="edit-dialog-label">URL:</label>\n          <input type="text" id="linkUrl" value="').concat(n,'" class="edit-dialog-input">\n        </div>\n        <div class="edit-dialog-buttons">\n          <button id="openInNewTabBtn" class="edit-dialog-btn edit-dialog-btn-primary" style="margin-right: auto;"></button>\n          <button id="cancelBtn" class="edit-dialog-btn edit-dialog-btn-cancel"></button>\n          <button id="okBtn" class="edit-dialog-btn edit-dialog-btn-ok">OK</button>\n        </div>\n      </div>\n    '),document.body.appendChild(r);var i=r.querySelector("#linkText"),o=r.querySelector("#linkUrl");i.focus(),i.select(),r.querySelector("#okBtn").onclick=function(){var e=i.value.trim(),n=o.value.trim();e&&n&&(t.textContent=e,t.href=n,t.dataset.text=e,t.dataset.url=n),document.body.removeChild(r)},r.querySelector("#cancelBtn").onclick=function(){document.body.removeChild(r)},r.querySelector("#openInNewTabBtn").onclick=function(){var t=o.value.trim();t&&window.open(t,"_blank","noopener,noreferrer")},r.addEventListener("keydown",function(t){"Escape"===t.key&&document.body.removeChild(r)})}},{key:"editImage",value:function(t){var e=t.dataset.alt||t.alt||"",n=t.dataset.src||t.src||"",r=document.createElement("div");r.className="edit-dialog-overlay",r.innerHTML='\n      <div class="edit-dialog-content">\n        <h3 class="edit-dialog-title"></h3>\n        <div class="edit-dialog-field">\n          <label class="edit-dialog-label">:</label>\n          <input type="text" id="imageAlt" value="'.concat(e,'" class="edit-dialog-input">\n        </div>\n        <div class="edit-dialog-field">\n          <label class="edit-dialog-label">URL:</label>\n          <input type="text" id="imageSrc" value="').concat(n,'" class="edit-dialog-input">\n        </div>\n        <div class="edit-dialog-buttons">\n          <button id="cancelBtn" class="edit-dialog-btn edit-dialog-btn-cancel"></button>\n          <button id="okBtn" class="edit-dialog-btn edit-dialog-btn-ok">OK</button>\n        </div>\n      </div>\n    '),document.body.appendChild(r);var i=r.querySelector("#imageAlt"),o=r.querySelector("#imageSrc");i.focus(),i.select(),r.querySelector("#okBtn").onclick=function(){var e=i.value.trim(),n=o.value.trim();n&&(t.alt=e,t.src=n,t.dataset.alt=e,t.dataset.src=n),document.body.removeChild(r)},r.querySelector("#cancelBtn").onclick=function(){document.body.removeChild(r)},r.addEventListener("keydown",function(t){"Escape"===t.key&&document.body.removeChild(r)})}},{key:"openFile",value:function(){var t=this,e=document.createElement("input");e.type="file",e.accept=".md,.markdown,.txt",e.onchange=function(e){var n=e.target.files[0];if(n){var r=new FileReader;r.onload=function(e){var r=e.target.result;if(t.isSourceMode)document.getElementById("source-editor").value=r;else{var i=document.getElementById("wysiwyg-content");i&&(i.innerHTML=t.markdownToHtml(r),Kp())}t.currentFileName=n.name,t.updateWordCount()},r.readAsText(n)}},e.click()}},{key:"saveFile",value:(i=Pp(Lp().m(function t(){var e,n,r,i,o;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e=this.getCurrentContent(),!this.versionIntegration){t.n=4;break}return t.p=1,t.n=2,this.versionIntegration.showSaveDialog();case 2:t.n=4;break;case 3:t.p=3,o=t.v,console.error(":",o);case 4:n=new Blob([e],{type:"text/markdown"}),r=URL.createObjectURL(n),(i=document.createElement("a")).href=r,i.download=this.currentFileName||"document.md",i.click(),URL.revokeObjectURL(r);case 5:return t.a(2)}},t,this,[[1,3]])})),function(){return i.apply(this,arguments)})},{key:"saveAsFile",value:(r=Pp(Lp().m(function t(){var e,n,r,i,o,a,s,l=this;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(!("showSaveFilePicker"in window)){t.n=9;break}return t.p=1,e=this.currentFileName||"document.md",n={suggestedName:e,types:[{description:"Markdown Files",accept:{"text/markdown":[".md",".markdown"]}},{description:"Text Files",accept:{"text/plain":[".txt"]}}]},t.n=2,window.showSaveFilePicker(n);case 2:return r=t.v,t.n=3,r.createWritable();case 3:return i=t.v,o=this.getCurrentContent(),t.n=4,i.write(o);case 4:return t.n=5,i.close();case 5:this.currentFileName=r.name,console.log(":",r.name),(a=document.getElementById("word-count"))&&(a.textContent,a.textContent=" ".concat(r.name," "),setTimeout(function(){l.updateWordCount()},2e3)),t.n=8;break;case 6:if(t.p=6,"AbortError"!==(s=t.v).name){t.n=7;break}return console.log(""),t.a(2);case 7:console.error(":",s),alert(": ".concat(s.message));case 8:t.n=10;break;case 9:console.log("File System Access API not supported, using fallback"),this.saveAsFileFallback();case 10:return t.a(2)}},t,this,[[1,6]])})),function(){return r.apply(this,arguments)})},{key:"saveAsFileFallback",value:function(){var t=prompt(":",this.currentFileName||"document.md");if(t){this.currentFileName=t;var e=this.getCurrentContent(),n=new Blob([e],{type:"text/markdown"}),r=URL.createObjectURL(n),i=document.createElement("a");i.href=r,i.download=t,i.click(),URL.revokeObjectURL(r)}}},{key:"updateWordCount",value:function(){var t=document.getElementById("word-count");if(t){var e=this.getCurrentContent(),n=e.length,r=e.split(/\s+/).filter(function(t){return t.length>0}).length;t.textContent=": ".concat(n," | : ").concat(r)}}},{key:"setupEventListeners",value:function(){var t=this,e=document.getElementById("source-editor");e&&(["input","change","keyup","paste"].forEach(function(n){e.addEventListener(n,function(){t.saveToHistory()})}),e.addEventListener("keydown",function(e){e.ctrlKey&&!e.shiftKey&&"z"===e.key?(e.preventDefault(),t.undo()):e.ctrlKey&&e.shiftKey&&"z"===e.key&&(e.preventDefault(),t.redo())})),document.addEventListener("keydown",function(e){if(e.ctrlKey||e.metaKey)switch(e.key){case"s":e.preventDefault(),t.saveFile();break;case"n":e.preventDefault(),t.newFile();break;case"o":e.preventDefault(),t.openFile()}})}},{key:"getCaretPosition",value:function(t){var e=0,n=window.getSelection();if(n.rangeCount>0){var r=n.getRangeAt(0),i=r.cloneRange();i.selectNodeContents(t),i.setEnd(r.endContainer,r.endOffset),e=i.toString().length}return e}},{key:"setCaretPosition",value:function(t,e){for(var n,r=window.getSelection(),i=document.createRange(),o=0,a=[t],s=!1;!s&&(n=a.pop());)if(n.nodeType===Node.TEXT_NODE){var l=o+n.length;e>=o&&e<=l&&(i.setStart(n,e-o),i.collapse(!0),s=!0),o=l}else for(var c=n.childNodes.length-1;c>=0;c--)a.push(n.childNodes[c]);r.removeAllRanges(),r.addRange(i)}},{key:"handleURLFileParameter",value:function(){var t=new URLSearchParams(window.location.search).get("file");if(t){if(!t.startsWith("http://localhost:")&&!t.startsWith("https://localhost:"))return console.warn(": localhostURL:",t),void this.showModal("","localhostURL");try{new URL(t)}catch(e){return console.error("URL:",t),void this.showModal("URL","URLURL")}console.log("URL:",t),this.loadFileFromURL(t)}}},{key:"loadFileFromURL",value:(n=Pp(Lp().m(function t(e){var n,r,i,o,a,s,l,c,h,u,d,p,f,g,m,A,y=this;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,console.log(":",e),n=new AbortController,r=setTimeout(function(){return n.abort()},3e4),t.n=1,fetch(e,{method:"GET",mode:"cors",cache:"no-cache",signal:n.signal,headers:{Accept:"text/plain,text/markdown,text/*,*/*"}});case 1:if(i=t.v,clearTimeout(r),i.ok){t.n=8;break}o="",m=i.status,t.n=404===m?2:403===m?3:500===m?4:502===m||503===m?5:6;break;case 2:return o="404",t.a(3,7);case 3:return o="403",t.a(3,7);case 4:return o="500",t.a(3,7);case 5:return o="",t.a(3,7);case 6:o=": ".concat(i.status," ").concat(i.statusText);case 7:throw new Error(o);case 8:return!(a=i.headers.get("content-type"))||a.includes("text/")||a.includes("application/")||console.warn(": :",a),t.n=9,i.text();case 9:return s=t.v,console.log(":",s.length),t.n=10,this.getMaxFileSize();case 10:if(l=t.v,!(s.length>l)){t.n=11;break}throw c=Math.round(s.length/1024/1024*10)/10,h=Math.round(l/1024/1024),new Error("".concat(c,"MB > ").concat(h,"MB"));case 11:0===s.length&&(console.warn(": "),this.showModal("","")),this.isSourceMode?document.getElementById("source-editor").value=s:(u=document.getElementById("wysiwyg-content"))&&(u.innerHTML=this.markdownToHtml(s),Kp()),d=this.extractFilenameFromURL(e),this.currentFileName=d,this.updateWordCount(),console.log(":",d),(p=document.getElementById("word-count"))&&(p.textContent,p.textContent=" ".concat(d," "),setTimeout(function(){y.updateWordCount()},3e3)),t.n=13;break;case 12:t.p=12,A=t.v,f="",g="","AbortError"===A.name?(f="30",g=" <br> "):"TypeError"===A.name&&A.message.includes("fetch")?(f=": ",g=" SightEditRelay.exe<br> 8080"):A.message.includes("CORS")?(f="CORS : CORS",g=" CORS"):A.message.includes("")?(f=A.message,g=" <br> "):(f=A.message,g=" <br> "),console.error(":",A),this.showModal("",'<div style="margin-bottom: 15px;"><strong>'.concat(f,'</strong></div>\n         <div style="color: #666; font-size: 14px;">\n           <strong>:</strong><br>\n           ').concat(g,"\n         </div>"));case 13:return t.a(2)}},t,this,[[0,12]])})),function(t){return n.apply(this,arguments)})},{key:"extractFilenameFromURL",value:function(t){try{return new URL(t).pathname.split("/").pop()||"external-file.md"}catch(t){return"external-file.md"}}},{key:"getMaxFileSize",value:(e=Pp(Lp().m(function t(){var e,n,r;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:if("undefined"==typeof chrome||!chrome.storage){t.n=5;break}return t.p=1,t.n=2,new Promise(function(t){chrome.storage.sync.get(["maxFileSize"],t)});case 2:if(e=t.v,!((n=e.maxFileSize)&&"number"==typeof n&&n>0)){t.n=3;break}return t.a(2,Math.max(1048576,Math.min(n,104857600)));case 3:t.n=5;break;case 4:t.p=4,r=t.v,console.warn(":",r);case 5:return t.a(2,10485760)}},t,null,[[1,4]])})),function(){return e.apply(this,arguments)})},{key:"setMaxFileSize",value:(t=Pp(Lp().m(function t(e){var n,r;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:if("undefined"==typeof chrome||!chrome.storage){t.n=4;break}return n=1024*Math.max(1,Math.min(e,100))*1024,t.p=1,t.n=2,new Promise(function(t){chrome.storage.sync.set({maxFileSize:n},t)});case 2:return console.log("".concat(e,"MB")),t.a(2,!0);case 3:return t.p=3,r=t.v,console.error(":",r),t.a(2,!1);case 4:return t.a(2,!1)}},t,null,[[1,3]])})),function(e){return t.apply(this,arguments)})},{key:"cleanup",value:function(){if(console.log("..."),this.versionIntegration)try{this.versionIntegration.cleanup(),console.log("")}catch(t){console.error(":",t)}if(this.localHistoryIntegration)try{this.localHistoryIntegration.cleanup(),console.log("")}catch(t){console.error(":",t)}console.log("")}}]);var t,e,n,r,i,o,a,s,l}();function Kp(){var t=document.getElementById("wysiwyg-content");t&&t.querySelectorAll(".task-checkbox").forEach(function(t){t.removeEventListener("change",window.toggleTaskStrike),t.addEventListener("change",function(){window.toggleTaskStrike(this)})})}window.toggleTaskStrike=function(t){var e=t.parentNode.querySelector(".task-text");e&&(t.checked?(e.style.textDecoration="line-through",e.style.color="#6c757d"):(e.style.textDecoration="none",e.style.color=""))};var Up=function(){return Np(function t(e){$p(this,t),this.editor=e,this.commandManager=null,this.currentSelectedText="",this.init()},[{key:"init",value:(e=Pp(Lp().m(function t(){var e,n,r;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,a.e(220).then(a.bind(a,17220));case 1:e=t.v,n=e.getAICommandManager,this.commandManager=n(),this.setupEventListeners(),this.renderCommandPanel(),t.n=3;break;case 2:t.p=2,r=t.v,console.error("AI:",r);case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return e.apply(this,arguments)})},{key:"setupEventListeners",value:function(){var t=this,e=document.getElementById("ai-command-btn"),n=document.getElementById("ai-command-modal"),r=document.getElementById("ai-command-close");e&&e.addEventListener("click",function(){t.showCommandPanel()}),r&&r.addEventListener("click",function(){t.hideCommandPanel()}),n&&n.addEventListener("click",function(e){e.target===n&&t.hideCommandPanel()});var i=document.getElementById("command-input-cancel"),o=document.getElementById("command-input-confirm");i&&i.addEventListener("click",function(){t.hideInputDialog()}),o&&o.addEventListener("click",function(){t.confirmInput()})}},{key:"showCommandPanel",value:function(){this.currentSelectedText=this.getSelectedText();var t=document.getElementById("ai-command-modal"),e=document.getElementById("selected-text-preview"),n=document.getElementById("selected-text-content");this.currentSelectedText?(e.style.display="block",n.textContent=this.currentSelectedText):(e.style.display="none",this.currentSelectedText=this.editor.getCurrentContent()),t.style.display="flex"}},{key:"hideCommandPanel",value:function(){document.getElementById("ai-command-modal").style.display="none"}},{key:"renderCommandPanel",value:function(){if(this.commandManager){var t=document.getElementById("ai-command-panel-content");t&&(t.innerHTML=this.commandManager.generateCommandPanelHTML(),this.attachCommandListeners())}}},{key:"attachCommandListeners",value:function(){var t=this;document.querySelectorAll(".command-button").forEach(function(e){e.addEventListener("click",function(){var n=e.dataset.commandId;t.executeCommand(n)})})}},{key:"executeCommand",value:(t=Pp(Lp().m(function t(e){var n,r,i,o,a;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.commandManager){t.n=1;break}return t.a(2);case 1:if(n=this.commandManager.commands[e]){t.n=2;break}return t.a(2);case 2:if(t.p=2,r={},!n.requiresInput){t.n=5;break}return t.n=3,this.showInputDialog(n.inputField);case 3:if(null!==(i=t.v)){t.n=4;break}return t.a(2);case 4:r[n.inputField.name]=i;case 5:return this.showLoading(!0),t.n=6,this.commandManager.executeCommand(e,this.currentSelectedText,r);case 6:o=t.v,this.showLoading(!1),o.success?(this.applyResult(o.result),this.hideCommandPanel()):alert(": "+o.error),t.n=8;break;case 7:t.p=7,a=t.v,this.showLoading(!1),console.error(":",a),alert(": "+a.message);case 8:return t.a(2)}},t,this,[[2,7]])})),function(e){return t.apply(this,arguments)})},{key:"showInputDialog",value:function(t){var e=this;return new Promise(function(n){var r=document.getElementById("command-input-dialog"),i=document.getElementById("command-input-title"),o=document.getElementById("command-input-field");i.textContent=t.label,o.value=t.default||"",o.type=t.type||"text",o.placeholder=t.placeholder||"",r.style.display="block",o.focus(),e.inputResolve=n})}},{key:"hideInputDialog",value:function(){document.getElementById("command-input-dialog").style.display="none",this.inputResolve&&this.inputResolve(null)}},{key:"confirmInput",value:function(){var t=document.getElementById("command-input-field").value.trim();this.hideInputDialog(),this.inputResolve&&this.inputResolve(t||null)}},{key:"showLoading",value:function(t){var e=document.getElementById("ai-command-loading");e&&(e.style.display=t?"flex":"none")}},{key:"getSelectedText",value:function(){var t=window.getSelection();return t.rangeCount>0?t.toString().trim():""}},{key:"applyResult",value:function(t){if(this.editor.isSourceMode){var e=document.getElementById("source-editor");this.currentSelectedText&&e.value.includes(this.currentSelectedText)?e.value=e.value.replace(this.currentSelectedText,t):e.value=t}else{var n=document.getElementById("wysiwyg-content");if(this.currentSelectedText){var r=window.getSelection();if(r.rangeCount>0){var i=r.getRangeAt(0);i.deleteContents();var o=document.createTextNode(t);i.insertNode(o),i.collapse(!1)}}else n.innerHTML=this.editor.markdownToHtml(t)}this.editor.updateWordCount()}}]);var t,e}(),Hp=function(){return Np(function t(e){$p(this,t),this.editor=e,this.exportManager=null,this.init()},[{key:"init",value:(n=Pp(Lp().m(function t(){var e,n,r;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,t.n=1,Promise.all([a.e(299),a.e(839)]).then(a.bind(a,29220));case 1:e=t.v,n=e.getExportManager,this.exportManager=n(),this.setupEventListeners(),this.renderExportMenu(),t.n=3;break;case 2:t.p=2,r=t.v,console.error(":",r);case 3:return t.a(2)}},t,this,[[0,2]])})),function(){return n.apply(this,arguments)})},{key:"setupEventListeners",value:function(){var t=this,e=document.getElementById("export-btn"),n=document.getElementById("export-menu"),r=document.getElementById("export-menu-close");e&&e.addEventListener("click",function(){t.showExportMenu()}),r&&r.addEventListener("click",function(){t.hideExportMenu()}),n&&n.addEventListener("click",function(e){e.target===n&&t.hideExportMenu()})}},{key:"showExportMenu",value:function(){document.getElementById("export-menu").style.display="flex"}},{key:"hideExportMenu",value:function(){document.getElementById("export-menu").style.display="none"}},{key:"renderExportMenu",value:function(){this.exportManager&&this.renderServiceCategories()}},{key:"renderServiceCategories",value:function(){var t=document.getElementById("clipboard-buttons"),e=document.getElementById("download-buttons");if(t&&e){var n=this.exportManager.getServiceOptimizedFormats(),r=[],i=[];Object.values(n).forEach(function(t){t.services.forEach(function(e){"clipboard"===e.type?r.push(Ep(Ep({},e),{},{categoryName:t.name})):"download"===e.type&&i.push(Ep(Ep({},e),{},{categoryName:t.name}))})}),t.innerHTML=this.generateServiceButtons(r,"clipboard"),e.innerHTML=this.generateServiceButtons(i,"download"),this.attachServiceEventListeners()}}},{key:"generateServiceButtons",value:function(t,e){return t.map(function(t){return'\n      <button class="export-button" data-service-id="'.concat(t.id,'" data-type="').concat(e,'" title="').concat(t.description,'">\n        <span class="export-button-icon">').concat(t.icon,'</span>\n        <div class="export-button-content">\n          <div class="export-button-name">').concat(t.name,'</div>\n          <div class="export-button-description">').concat(t.description,"</div>\n        </div>\n      </button>\n    ")}).join("")}},{key:"attachServiceEventListeners",value:function(){var t=this;document.querySelectorAll(".export-button[data-service-id]").forEach(function(e){e.addEventListener("click",function(){var n=e.dataset.serviceId,r=e.dataset.type;"clipboard"===r?t.executeServiceExport(n):"download"===r&&t.executeServiceDownload(n)})})}},{key:"executeServiceExport",value:(e=Pp(Lp().m(function t(e){var n,r,i,o;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.exportManager){t.n=1;break}return t.a(2);case 1:if(n=this.editor.getCurrentContent(),r=this.exportManager.getServiceOptimizedFormats(),i=null,Object.values(r).forEach(function(t){var n=t.services.find(function(t){return t.id===e});n&&(i=n)}),i){t.n=2;break}return t.a(2);case 2:return t.p=2,t.n=3,i.action(n);case 3:t.v?(this.showMessage("".concat(i.name,""),"success"),this.hideExportMenu()):this.showMessage("","error"),t.n=5;break;case 4:t.p=4,o=t.v,console.error(":",o),this.showMessage(": "+o.message,"error");case 5:return t.a(2)}},t,this,[[2,4]])})),function(t){return e.apply(this,arguments)})},{key:"executeServiceDownload",value:(t=Pp(Lp().m(function t(e){var n,r,i,o,a;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:if(this.exportManager){t.n=1;break}return t.a(2);case 1:if(n=this.editor.getCurrentContent(),r=this.exportManager.getServiceOptimizedFormats(),i=null,Object.values(r).forEach(function(t){var n=t.services.find(function(t){return t.id===e});n&&(i=n)}),i){t.n=2;break}return t.a(2);case 2:return t.p=2,o=this.generateFilename(i.format),t.n=3,i.action(n,o);case 3:this.showMessage("".concat(i.name,""),"success"),this.hideExportMenu(),t.n=5;break;case 4:t.p=4,a=t.v,console.error(":",a),this.showMessage(": "+a.message,"error");case 5:return t.a(2)}},t,this,[[2,4]])})),function(e){return t.apply(this,arguments)})},{key:"generateFilename",value:function(t){return(this.editor.currentFileName||"document").replace(/\.[^/.]+$/,"")+({markdown:".md",html:".html",pdf:".pdf",text:".txt"}[t]||".txt")}},{key:"showMessage",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success",n=document.querySelector(".export-message");n&&n.remove();var r=document.createElement("div");r.className="export-message ".concat(e),r.textContent=t,document.body.appendChild(r),setTimeout(function(){r.remove()},3e3)}}]);var t,e,n}(),Gp=null,Yp=null,Vp=null,Qp=null;function Xp(t){return Zp.apply(this,arguments)}function Zp(){return(Zp=Pp(Lp().m(function t(e){var n,r,i,o,a,s,l;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,n=new se,t.n=1,n.initDB();case 1:return console.log("ChatStorage initialized"),r=Ke(),t.n=2,r.init();case 2:return console.log("PromptManager initialized"),i=new Ze(r),o=dn(),t.n=3,o.init();case 3:console.log("StyleController initialized"),a=kn(),console.log("StructuredGenerator initialized"),s=setInterval(function(){if(window.aiManager){clearInterval(s),Qp=new me(window.aiManager,r,n);var t=new Dn(a,Qp),e=new Un;(Vp=new Se(Qp,r,i,o,a,t,e)).render(),window.chatPanel=Vp,window.chatManager=Qp,window.chatStorage=n,window.promptManager=r,window.promptLibrary=i,window.styleController=o,window.structuredGenerator=a,window.structuredGenerationModal=t,window.exportImportManager=e;var l=document.getElementById("chat-toggle-btn");l&&l.addEventListener("click",function(){Vp.toggle()}),console.log("Chat feature initialized")}},50),setTimeout(function(){clearInterval(s),window.aiManager||console.error("AIManager not available after timeout")},5e3),t.n=5;break;case 4:t.p=4,l=t.v,console.error("Failed to initialize chat feature:",l);case 5:return t.a(2)}},t,null,[[0,4]])}))).apply(this,arguments)}function Jp(){document.addEventListener("keydown",function(t){(t.ctrlKey||t.metaKey)&&"k"===t.key&&(t.preventDefault(),Vp&&Vp.toggle()),(t.ctrlKey||t.metaKey)&&"l"===t.key&&(t.preventDefault(),Vp&&Vp.isVisible&&confirm("")&&(Vp.clearMessages(),Qp&&(Qp.currentSession=null))),(t.ctrlKey||t.metaKey)&&"p"===t.key&&(t.preventDefault(),Vp&&Vp.isVisible&&Vp.showPromptLibrary())})}document.addEventListener("DOMContentLoaded",function(){var t=new Wp;window.editorManager=t,setTimeout(Pp(Lp().m(function e(){return Lp().w(function(e){for(;;)switch(e.n){case 0:return Gp=new Up(t),Yp=new Hp(t),window.aiCommandUI=Gp,window.exportUI=Yp,Gp.commandManager&&(window.aiManager=Gp.commandManager),e.n=1,Xp(t);case 1:Jp();case 2:return e.a(2)}},e)})),100)}),Wp.prototype.testGeminiConnection=function(){var t=Pp(Lp().m(function t(e,n){var r,i,o;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,console.log("Gemini API..."),t.n=1,fetch("https://generativelanguage.googleapis.com/v1beta/models/".concat(n,":generateContent?key=").concat(e),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:""}]}]})});case 1:if(r=t.v,console.log("Gemini API:",r.status),!r.ok){t.n=3;break}return t.n=2,r.json();case 2:return i=t.v,console.log("Gemini API:",i),t.a(2,!0);case 3:return console.error("Gemini API:",r.status,r.statusText),t.a(2,!1);case 4:t.n=6;break;case 5:return t.p=5,o=t.v,console.error("Gemini API:",o),t.a(2,!1);case 6:return t.a(2)}},t,null,[[0,5]])}));return function(e,n){return t.apply(this,arguments)}}(),Wp.prototype.testClaudeConnection=function(){var t=Pp(Lp().m(function t(e,n){var r,i,o;return Lp().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,console.log("Claude API..."),t.n=1,fetch("https://api.anthropic.com/v1/messages",{method:"POST",headers:{"Content-Type":"application/json","x-api-key":e,"anthropic-version":"2023-06-01"},body:JSON.stringify({model:n,max_tokens:10,messages:[{role:"user",content:""}]})});case 1:if(r=t.v,console.log("Claude API:",r.status),!r.ok){t.n=3;break}return t.n=2,r.json();case 2:return i=t.v,console.log("Claude API:",i),t.a(2,!0);case 3:return console.error("Claude API:",r.status,r.statusText),t.a(2,!1);case 4:t.n=6;break;case 5:return t.p=5,o=t.v,console.error("Claude API:",o),t.a(2,!1);case 6:return t.a(2)}},t,null,[[0,5]])}));return function(e,n){return t.apply(this,arguments)}}(),Wp.prototype.saveToHistory=function(){if(this.isSourceMode){var t=document.getElementById("source-editor");if(!t)return;var e=t.value;if(this.undoStack.length>0&&this.undoStack[this.undoStack.length-1]===e)return;this.undoStack.push(e),this.undoStack.length>this.maxHistorySize&&this.undoStack.shift(),this.redoStack=[]}else{var n=document.getElementById("wysiwyg-content");if(!n)return;var r=n.innerHTML;if(this.undoStack.length>0&&this.undoStack[this.undoStack.length-1]===r)return;this.undoStack.push(r),this.undoStack.length>this.maxHistorySize&&this.undoStack.shift(),this.redoStack=[]}},Wp.prototype.undo=function(){if(this.undoStack.length<=1)console.log("");else if(this.isSourceMode){var t=document.getElementById("source-editor");if(!t)return;var e=t.value;this.redoStack.push(e),this.undoStack.pop();var n=this.undoStack[this.undoStack.length-1];t.value=n,this.updateWordCount()}else{var r=document.getElementById("wysiwyg-content");if(!r)return;var i=r.innerHTML;this.redoStack.push(i),this.undoStack.pop();var o=this.undoStack[this.undoStack.length-1];r.innerHTML=o,this.updateWordCount()}},Wp.prototype.redo=function(){if(0!==this.redoStack.length)if(this.isSourceMode){var t=document.getElementById("source-editor");if(!t)return;var e=t.value;this.undoStack.push(e);var n=this.redoStack.pop();t.value=n,this.updateWordCount()}else{var r=document.getElementById("wysiwyg-content");if(!r)return;var i=r.innerHTML;this.undoStack.push(i);var o=this.redoStack.pop();r.innerHTML=o,this.updateWordCount()}else console.log("")},Wp.prototype.sanitizeHtml=function(t){var e=["p","br","strong","b","em","i","u","s","del","strike","h1","h2","h3","h4","h5","h6","ul","ol","li","blockquote","pre","code","a","img","table","thead","tbody","tr","th","td","div","span"],n=document.createElement("div");n.innerHTML=t;var r=function(t){var n=t.tagName?t.tagName.toLowerCase():"";if(t.nodeType!==Node.ELEMENT_NODE||e.includes(n))t.nodeType===Node.ELEMENT_NODE&&Array.from(t.attributes).forEach(function(e){e.name.toLowerCase().startsWith("on")&&t.removeAttribute(e.name),e.value&&e.value.toLowerCase().includes("javascript:")&&t.removeAttribute(e.name)}),Array.from(t.childNodes).forEach(function(t){t.nodeType===Node.ELEMENT_NODE&&r(t)});else{for(var i,o=document.createDocumentFragment();t.firstChild;){var a=t.firstChild;t.removeChild(a),a.nodeType===Node.ELEMENT_NODE&&r(a),o.appendChild(a)}null===(i=t.parentNode)||void 0===i||i.replaceChild(o,t)}};return Array.from(n.childNodes).forEach(function(t){t.nodeType===Node.ELEMENT_NODE&&r(t)}),n.innerHTML}})()})();